!function(){var e,t,n,r,a,i,o,s=["headers","signal","cache"],c=["headers","signal"],u=["body","headers","signal"],l=["body","headers","signal"],d=["body","headers","signal"],p=["body"],f=["chain","pollingInterval","timeout"];function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=g(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},v.apply(this,arguments)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=U(e)););return e}function m(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function y(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function b(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){k(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){s=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */A=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(S){c=function(e,t,n){return e[t]=n}}function u(e,t,n,a){var i=t&&t.prototype instanceof p?t:p,o=Object.create(i.prototype),s=new N(a||[]);return r(o,"_invoke",{value:E(e,n,s)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(S){return{type:"throw",arg:S}}}e.wrap=u;var d={};function p(){}function f(){}function h(){}var v={};c(v,i,function(){return this});var g=Object.getPrototypeOf,m=g&&g(g(I([])));m&&m!==t&&n.call(m,i)&&(v=m);var y=h.prototype=p.prototype=Object.create(v);function b(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){function a(r,i,o,s){var c=l(e[r],e,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){a("next",e,o,s)},function(e){a("throw",e,o,s)}):t.resolve(d).then(function(e){u.value=e,o(u)},function(e){return a("throw",e,o,s)})}s(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t(function(t,r){a(e,n,t,r)})}return i=i?i.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return _()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=k(o,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function k(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:_}}function _(){return{value:void 0,done:!0}}return f.prototype=h,r(y,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,o,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new w(u(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},b(y),c(y,s,"Generator"),c(y,i,function(){return this}),c(y,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}function I(e){var t=R();return function(){var n,r=U(e);if(t){var a=U(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){var t="function"==typeof Map?new Map:void 0;return T=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return O(e,arguments,U(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),P(r,e)},T(e)}function O(e,t,n){return O=R()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&P(a,n.prototype),a},O.apply(null,arguments)}function R(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function U(e){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},U(e)}function M(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=D(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function D(e,t){if(e){if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t,n){return t&&j(e.prototype,t),n&&j(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkofb_dashboard=self.webpackChunkofb_dashboard||[]).push([[1426],{48873:function(e){e.exports=function(){"use strict";var e=6e4,t=36e5,n="millisecond",r="second",a="minute",i="hour",o="day",s="week",c="month",u="quarter",l="year",d="date",p="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},g=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},m={s:g,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),a=n%60;return(t<=0?"+":"-")+g(r,2,"0")+":"+g(a,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),a=t.clone().add(r,c),i=n-a<0,o=t.clone().add(r+(i?-1:1),c);return+(-(r+(n-a)/(i?a-o:o-a))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:l,w:s,d:o,D:d,h:i,m:a,s:r,ms:n,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",b={};b[y]=v;var w="$isDayjsObject",E=function(e){return e instanceof A||!(!e||!e[w])},k=function e(t,n,r){var a;if(!t)return y;if("string"==typeof t){var i=t.toLowerCase();b[i]&&(a=i),n&&(b[i]=n,a=i);var o=t.split("-");if(!a&&o.length>1)return e(o[0])}else{var s=t.name;b[s]=t,a=s}return!r&&a&&(y=a),a||!r&&y},x=function(e,t){if(E(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new A(n)},C=m;C.l=k,C.i=E,C.w=function(e,t){return x(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var A=function(){function v(e){this.$L=k(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[w]=!0}var g=v.prototype;return g.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(C.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(f);if(r){var a=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],a,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],a,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(t)}(e),this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return C},g.isValid=function(){return this.$d.toString()!==p},g.isSame=function(e,t){var n=x(e);return this.startOf(t)<=n&&n<=this.endOf(t)},g.isAfter=function(e,t){return x(e)<this.startOf(t)},g.isBefore=function(e,t){return this.endOf(t)<x(e)},g.$g=function(e,t,n){return C.u(e)?this[t]:this.set(n,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,t){var n=this,u=!!C.u(t)||t,p=C.p(e),f=function(e,t){var r=C.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return u?r:r.endOf(o)},h=function(e,t){return C.w(n.toDate()[e].apply(n.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},v=this.$W,g=this.$M,m=this.$D,y="set"+(this.$u?"UTC":"");switch(p){case l:return u?f(1,0):f(31,11);case c:return u?f(1,g):f(0,g+1);case s:var b=this.$locale().weekStart||0,w=(v<b?v+7:v)-b;return f(u?m-w:m+(6-w),g);case o:case d:return h(y+"Hours",0);case i:return h(y+"Minutes",1);case a:return h(y+"Seconds",2);case r:return h(y+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,t){var s,u=C.p(e),p="set"+(this.$u?"UTC":""),f=(s={},s[o]=p+"Date",s[d]=p+"Date",s[c]=p+"Month",s[l]=p+"FullYear",s[i]=p+"Hours",s[a]=p+"Minutes",s[r]=p+"Seconds",s[n]=p+"Milliseconds",s)[u],h=u===o?this.$D+(t-this.$W):t;if(u===c||u===l){var v=this.clone().set(d,1);v.$d[f](h),v.init(),this.$d=v.set(d,Math.min(this.$D,v.daysInMonth())).$d}else f&&this.$d[f](h);return this.init(),this},g.set=function(e,t){return this.clone().$set(e,t)},g.get=function(e){return this[C.p(e)]()},g.add=function(n,u){var d,p=this;n=Number(n);var f=C.p(u),h=function(e){var t=x(p);return C.w(t.date(t.date()+Math.round(e*n)),p)};if(f===c)return this.set(c,this.$M+n);if(f===l)return this.set(l,this.$y+n);if(f===o)return h(1);if(f===s)return h(7);var v=(d={},d[a]=e,d[i]=t,d[r]=1e3,d)[f]||1,g=this.$d.getTime()+n*v;return C.w(g,this)},g.subtract=function(e,t){return this.add(-1*e,t)},g.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var r=e||"YYYY-MM-DDTHH:mm:ssZ",a=C.z(this),i=this.$H,o=this.$m,s=this.$M,c=n.weekdays,u=n.months,l=function(e,n,a,i){return e&&(e[n]||e(t,r))||a[n].slice(0,i)},d=function(e){return C.s(i%12||12,e,"0")},f=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(h,function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return C.s(t.$y,4,"0");case"M":return s+1;case"MM":return C.s(s+1,2,"0");case"MMM":return l(n.monthsShort,s,u,3);case"MMMM":return l(u,s);case"D":return t.$D;case"DD":return C.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return l(n.weekdaysMin,t.$W,c,2);case"ddd":return l(n.weekdaysShort,t.$W,c,3);case"dddd":return c[t.$W];case"H":return String(i);case"HH":return C.s(i,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return f(i,o,!0);case"A":return f(i,o,!1);case"m":return String(o);case"mm":return C.s(o,2,"0");case"s":return String(t.$s);case"ss":return C.s(t.$s,2,"0");case"SSS":return C.s(t.$ms,3,"0");case"Z":return a}return null}(e)||a.replace(":","")})},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(n,d,p){var f,h=this,v=C.p(d),g=x(n),m=(g.utcOffset()-this.utcOffset())*e,y=this-g,b=function(){return C.m(h,g)};switch(v){case l:f=b()/12;break;case c:f=b();break;case u:f=b()/3;break;case s:f=(y-m)/6048e5;break;case o:f=(y-m)/864e5;break;case i:f=y/t;break;case a:f=y/e;break;case r:f=y/1e3;break;default:f=y}return p?f:C.a(f)},g.daysInMonth=function(){return this.endOf(c).$D},g.$locale=function(){return b[this.$L]},g.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=k(e,t,!0);return r&&(n.$L=r),n},g.clone=function(){return C.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},v}(),N=A.prototype;return x.prototype=N,[["$ms",n],["$s",r],["$m",a],["$H",i],["$W",o],["$M",c],["$y",l],["$D",d]].forEach(function(e){N[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),x.extend=function(e,t){return e.$i||(e(t,A,x),e.$i=!0),x},x.locale=k,x.isDayjs=E,x.unix=function(e){return x(1e3*e)},x.en=b[y],x.Ls=b,x.p={},x}()},86102:function(e){e.exports=function(){"use strict";return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}}}()},43603:function(e){e.exports=function(){"use strict";return function(e,t,n){e=e||{};var r=t.prototype,a={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function i(e,t,n,a){return r.fromToBase(e,t,n,a)}n.en.relativeTime=a,r.fromToBase=function(t,r,i,o,s){for(var c,u,l,d=i.$locale().relativeTime||a,p=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],f=p.length,h=0;h<f;h+=1){var v=p[h];v.d&&(c=o?n(t).diff(i,v.d,!0):i.diff(t,v.d,!0));var g=(e.rounding||Math.round)(Math.abs(c));if(l=c>0,g<=v.r||!v.r){g<=1&&h>0&&(v=p[h-1]);var m=d[v.l];s&&(g=s(""+g)),u="string"==typeof m?m.replace("%d",g):m(g,r,v.l,l);break}}if(r)return u;var y=l?d.future:d.past;return"function"==typeof y?y(u):y.replace("%s",u)},r.to=function(e,t){return i(e,t,this,!0)},r.from=function(e,t){return i(e,t,this)};var o=function(e){return e.$u?n.utc():n()};r.toNow=function(e){return this.to(o(this),e)},r.fromNow=function(e){return this.from(o(this),e)}}}()},48968:function(e){e.exports=function(){"use strict";return function(e,t,n){n.updateLocale=function(e,t){var r=n.Ls[e];if(r)return(t?Object.keys(t):[]).forEach(function(e){r[e]=t[e]}),r}}}()},3239:function(e,t,n){"use strict";var r,a,i;n.d(t,{fl:function(){return D},iv:function(){return f},Ts:function(){return R},Qu:function(){return P},$m:function(){return p}});var o=n(8239),s=globalThis,c=s.ShadowRoot&&(void 0===s.ShadyCSS||s.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,u=Symbol(),l=new WeakMap,d=function(){function e(t,n,r){if(B(this,e),this._$cssResult$=!0,r!==u)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=n}return F(e,[{key:"styleSheet",get:function(){var e=this.o,t=this.t;if(c&&void 0===e){var n=void 0!==t&&1===t.length;n&&(e=l.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&l.set(t,e))}return e}},{key:"toString",value:function(){return this.cssText}}]),e}(),p=function(e){return new d("string"==typeof e?e:e+"",void 0,u)},f=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=1===e.length?e[0]:n.reduce(function(t,n,r){return t+function(e){if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")}(n)+e[r+1]},e[0]);return new d(a,e,u)},h=c?function(e){return e}:function(e){return e instanceof CSSStyleSheet?function(e){var t,n="",r=M(e.cssRules);try{for(r.s();!(t=r.n()).done;){n+=t.value.cssText}}catch(a){r.e(a)}finally{r.f()}return p(n)}(e):e},v=Object.is,g=Object.defineProperty,m=Object.getOwnPropertyDescriptor,y=Object.getOwnPropertyNames,b=Object.getOwnPropertySymbols,w=Object.getPrototypeOf,E=globalThis,k=E.trustedTypes,_=k?k.emptyScript:"",S=E.reactiveElementPolyfillSupport,O=function(e,t){return e},R={toAttribute:function(e,t){switch(t){case Boolean:e=e?_:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute:function(e,t){var n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(r){n=null}}return n}},P=function(e,t){return!v(e,t)},U={attribute:!0,type:String,converter:R,reflect:!1,useDefault:!1,hasChanged:P};null!==(r=Symbol.metadata)&&void 0!==r||(Symbol.metadata=Symbol("metadata")),null!==(a=E.litPropertyMetadata)&&void 0!==a||(E.litPropertyMetadata=new WeakMap);var D=function(e){N(n,e);var t=I(n);function n(){var e;return B(this,n),(e=t.call(this))._$Ep=void 0,e.isUpdatePending=!1,e.hasUpdated=!1,e._$Em=null,e._$Ev(),e}return F(n,[{key:"_$Ev",value:function(){var e,t=this;this._$ES=new Promise(function(e){return t.enableUpdating=e}),this._$AL=new Map,this._$E_(),this.requestUpdate(),null===(e=this.constructor.l)||void 0===e||e.forEach(function(e){return e(t)})}},{key:"addController",value:function(e){var t,n;(null!==(t=this._$EO)&&void 0!==t?t:this._$EO=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&(null===(n=e.hostConnected)||void 0===n||n.call(e))}},{key:"removeController",value:function(e){var t;null===(t=this._$EO)||void 0===t||t.delete(e)}},{key:"_$E_",value:function(){var e,t=new Map,n=M(this.constructor.elementProperties.keys());try{for(n.s();!(e=n.n()).done;){var r=e.value;this.hasOwnProperty(r)&&(t.set(r,this[r]),delete this[r])}}catch(a){n.e(a)}finally{n.f()}t.size>0&&(this._$Ep=t)}},{key:"createRenderRoot",value:function(){var e,t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return function(e,t){if(c)e.adoptedStyleSheets=t.map(function(e){return e instanceof CSSStyleSheet?e:e.styleSheet});else{var n,r=M(t);try{for(r.s();!(n=r.n()).done;){var a=n.value,i=document.createElement("style"),o=s.litNonce;void 0!==o&&i.setAttribute("nonce",o),i.textContent=a.cssText,e.appendChild(i)}}catch(u){r.e(u)}finally{r.f()}}}(t,this.constructor.elementStyles),t}},{key:"connectedCallback",value:function(){var e,t;null!==(e=this.renderRoot)&&void 0!==e||(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$EO)||void 0===t||t.forEach(function(e){var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)})}},{key:"enableUpdating",value:function(e){}},{key:"disconnectedCallback",value:function(){var e;null===(e=this._$EO)||void 0===e||e.forEach(function(e){var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)})}},{key:"attributeChangedCallback",value:function(e,t,n){this._$AK(e,n)}},{key:"_$ET",value:function(e,t){var n=this.constructor.elementProperties.get(e),r=this.constructor._$Eu(e,n);if(void 0!==r&&!0===n.reflect){var a,i=(void 0!==(null===(a=n.converter)||void 0===a?void 0:a.toAttribute)?n.converter:R).toAttribute(t,n.type);this._$Em=e,null==i?this.removeAttribute(r):this.setAttribute(r,i),this._$Em=null}}},{key:"_$AK",value:function(e,t){var n=this.constructor,r=n._$Eh.get(e);if(void 0!==r&&this._$Em!==r){var a,i,o,s=n.getPropertyOptions(r),c="function"==typeof s.converter?{fromAttribute:s.converter}:void 0!==(null===(a=s.converter)||void 0===a?void 0:a.fromAttribute)?s.converter:R;this._$Em=r;var u=c.fromAttribute(t,s.type);this[r]=null!==(i=null!=u?u:null===(o=this._$Ej)||void 0===o?void 0:o.get(r))&&void 0!==i?i:u,this._$Em=null}}},{key:"requestUpdate",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0;if(void 0!==e){var i,o,s,c=this.constructor;if(!1===r&&(a=this[e]),null!==(i=n)&&void 0!==i||(n=c.getPropertyOptions(e)),!((null!==(o=n.hasChanged)&&void 0!==o?o:P)(a,t)||n.useDefault&&n.reflect&&a===(null===(s=this._$Ej)||void 0===s?void 0:s.get(e))&&!this.hasAttribute(c._$Eu(e,n))))return;this.C(e,t,n)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}},{key:"C",value:function(e,t,n,r){var a,i,o,s=n.useDefault,c=n.reflect,u=n.wrapped;s&&!(null!==(a=this._$Ej)&&void 0!==a?a:this._$Ej=new Map).has(e)&&(this._$Ej.set(e,null!==(i=null!=r?r:t)&&void 0!==i?i:this[e]),!0!==u||void 0!==r)||(this._$AL.has(e)||(this.hasUpdated||s||(t=void 0),this._$AL.set(e,t)),!0===c&&this._$Em!==e&&(null!==(o=this._$Eq)&&void 0!==o?o:this._$Eq=new Set).add(e))}},{key:"_$EP",value:function(){var e=this;return(0,o.Z)(A().mark(function t(){var n;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.isUpdatePending=!0,t.prev=1,t.next=4,e._$ES;case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),Promise.reject(t.t0);case 9:if(n=e.scheduleUpdate(),t.t1=null!=n,!t.t1){t.next=14;break}return t.next=14,n;case 14:return t.abrupt("return",!e.isUpdatePending);case 15:case"end":return t.stop()}},t,null,[[1,6]])}))()}},{key:"scheduleUpdate",value:function(){return this.performUpdate()}},{key:"performUpdate",value:function(){if(this.isUpdatePending){if(!this.hasUpdated){var e;if(null!==(e=this.renderRoot)&&void 0!==e||(this.renderRoot=this.createRenderRoot()),this._$Ep){var t,n=M(this._$Ep);try{for(n.s();!(t=n.n()).done;){var r=C(t.value,2),a=r[0],i=r[1];this[a]=i}}catch(m){n.e(m)}finally{n.f()}this._$Ep=void 0}var o=this.constructor.elementProperties;if(o.size>0){var s,c=M(o);try{for(c.s();!(s=c.n()).done;){var u=C(s.value,2),l=u[0],d=u[1],p=d.wrapped,f=this[l];!0!==p||this._$AL.has(l)||void 0===f||this.C(l,void 0,d,f)}}catch(m){c.e(m)}finally{c.f()}}}var h=!1,v=this._$AL;try{var g;(h=this.shouldUpdate(v))?(this.willUpdate(v),null!==(g=this._$EO)&&void 0!==g&&g.forEach(function(e){var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)}),this.update(v)):this._$EM()}catch(o){throw h=!1,this._$EM(),o}h&&this._$AE(v)}}},{key:"willUpdate",value:function(e){}},{key:"_$AE",value:function(e){var t;null!==(t=this._$EO)&&void 0!==t&&t.forEach(function(e){var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}},{key:"_$EM",value:function(){this._$AL=new Map,this.isUpdatePending=!1}},{key:"updateComplete",get:function(){return this.getUpdateComplete()}},{key:"getUpdateComplete",value:function(){return this._$ES}},{key:"shouldUpdate",value:function(e){return!0}},{key:"update",value:function(e){var t=this;this._$Eq&&(this._$Eq=this._$Eq.forEach(function(e){return t._$ET(e,t[e])})),this._$EM()}},{key:"updated",value:function(e){}},{key:"firstUpdated",value:function(e){}}],[{key:"addInitializer",value:function(e){var t;this._$Ei(),(null!==(t=this.l)&&void 0!==t?t:this.l=[]).push(e)}},{key:"observedAttributes",get:function(){return this.finalize(),this._$Eh&&x(this._$Eh.keys())}},{key:"createProperty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U;if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){var n=Symbol(),r=this.getPropertyDescriptor(e,n,t);void 0!==r&&g(this.prototype,e,r)}}},{key:"getPropertyDescriptor",value:function(e,t,n){var r,a=null!==(r=m(this.prototype,e))&&void 0!==r?r:{get:function(){return this[t]},set:function(e){this[t]=e}},i=a.get,o=a.set;return{get:i,set:function(t){var r=null==i?void 0:i.call(this);null!=o&&o.call(this,t),this.requestUpdate(e,r,n)},configurable:!0,enumerable:!0}}},{key:"getPropertyOptions",value:function(e){var t;return null!==(t=this.elementProperties.get(e))&&void 0!==t?t:U}},{key:"_$Ei",value:function(){if(!this.hasOwnProperty(O("elementProperties"))){var e=w(this);e.finalize(),void 0!==e.l&&(this.l=x(e.l)),this.elementProperties=new Map(e.elementProperties)}}},{key:"finalize",value:function(){if(!this.hasOwnProperty(O("finalized"))){if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(O("properties"))){var e,t=this.properties,n=M([].concat(x(y(t)),x(b(t))));try{for(n.s();!(e=n.n()).done;){var r=e.value;this.createProperty(r,t[r])}}catch(m){n.e(m)}finally{n.f()}}var a=this[Symbol.metadata];if(null!==a){var i=litPropertyMetadata.get(a);if(void 0!==i){var o,s=M(i);try{for(s.s();!(o=s.n()).done;){var c=C(o.value,2),u=c[0],l=c[1];this.elementProperties.set(u,l)}}catch(m){s.e(m)}finally{s.f()}}}this._$Eh=new Map;var d,p=M(this.elementProperties);try{for(p.s();!(d=p.n()).done;){var f=C(d.value,2),h=f[0],v=f[1],g=this._$Eu(h,v);void 0!==g&&this._$Eh.set(g,h)}}catch(m){p.e(m)}finally{p.f()}this.elementStyles=this.finalizeStyles(this.styles)}}},{key:"finalizeStyles",value:function(e){var t=[];if(Array.isArray(e)){var n,r=M(new Set(e.flat(1/0).reverse()));try{for(r.s();!(n=r.n()).done;){var a=n.value;t.unshift(h(a))}}catch(i){r.e(i)}finally{r.f()}}else void 0!==e&&t.push(h(e));return t}},{key:"_$Eu",value:function(e,t){var n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}}]),n}(T(HTMLElement));D.elementStyles=[],D.shadowRootOptions={mode:"open"},D[O("elementProperties")]=new Map,D[O("finalized")]=new Map,null!=S&&S({ReactiveElement:D}),(null!==(i=E.reactiveElementVersions)&&void 0!==i?i:E.reactiveElementVersions=[]).push("2.1.2")},72290:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});var r={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",BASE_ACCOUNT:"baseAccount",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122",TON:"ton"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos",sui:"Sui",stacks:"Stacks",ton:"TON"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",TON:"ton"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],SOLANA_SPL_TOKEN_ADDRESSES:{SOL:"So11111111111111111111111111111111111111112"},NATIVE_IMAGE_IDS_BY_NAMESPACE:{eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"3e8119e5-2a6f-4818-c50c-1937011d5900",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00"},TOKEN_SYMBOLS_BY_ADDRESS:{"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48":"USDC","0x833589fcd6edb6e08f4c7c32d4f71b54bda02913":"USDC","0x0b2c639c533813f4aa9d7837caf62653d097ff85":"USDC","0xaf88d065e77c8cc2239327c5edb3a432268e5831":"USDC","0x3c499c542cef5e3811e1192ce70d8cc03d5c3359":"USDC","0x2791bca1f2de4661ed88a30c99a7a9449aa84174":"USDC",EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v:"USDC","0xdac17f958d2ee523a2206206994597c13d831ec7":"USDT","0x94b008aa00579c1307b0ef2c499ad98a8ce58e58":"USDT","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9":"USDT","0xc2132d05d31c914a87c6611c10748aeb04b58e8f":"USDT",Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB:"USDT"},HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:("undefined"!=typeof process&&void 0!==process.env?process.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}},HEADLESS_NOT_ENABLED:{DEFAULT:{displayMessage:"",debugMessage:"Headless support is not enabled. Please enable it with the features.headless option in the AppKit configuration and make sure your current plan supports it."}}},IS_DEVELOPMENT:"undefined"!=typeof process&&!1,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"],METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",OKX_CONNECTOR_NAME:"OKX Wallet",BINANCE_CONNECTOR_NAME:"Binance Wallet",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"AUTH"}},64817:function(e,t,n){"use strict";n.d(t,{g:function(){return s}});var r=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],a=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],i=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],o=n(72290),s={getERC20Abi:function(e){return o.b.USDT_CONTRACT_ADDRESSES.includes(e)?i:r},getSwapAbi:function(){return a}}},5546:function(e,t,n){"use strict";n.d(t,{jD:function(){return r},ab:function(){return a}});var r={RPC_ERROR_CODE:{USER_REJECTED_REQUEST:4001,USER_REJECTED_METHODS:5002,USER_REJECTED:5e3,SEND_TRANSACTION_ERROR:5001},PROVIDER_RPC_ERROR_NAME:{PROVIDER_RPC:"ProviderRpcError",USER_REJECTED_REQUEST:"UserRejectedRequestError",SEND_TRANSACTION_ERROR:"SendTransactionError"},isRpcProviderError:function(e){try{if("object"==typeof e&&null!==e){var t="number"==typeof e.code;return"string"==typeof e.message&&t}return!1}catch(n){return!1}},isUserRejectedMessage:function(e){return e.toLowerCase().includes("user rejected")||e.toLowerCase().includes("user cancelled")||e.toLowerCase().includes("user canceled")},isUserRejectedRequestError:function(e){if(r.isRpcProviderError(e)){var t=e.code===r.RPC_ERROR_CODE.USER_REJECTED_METHODS;return e.code===r.RPC_ERROR_CODE.USER_REJECTED_REQUEST||t||r.isUserRejectedMessage(e.message)}return e instanceof Error&&r.isUserRejectedMessage(e.message)}},a=function(e){N(n,e);var t=I(n);function n(e){var a;return B(this,n),(a=t.call(this,e,{code:r.RPC_ERROR_CODE.USER_REJECTED_REQUEST,message:"User rejected the request"})).name=r.PROVIDER_RPC_ERROR_NAME.USER_REJECTED_REQUEST,a}return F(n)}(function(e){N(n,e);var t=I(n);function n(e,a){var i;return B(this,n),(i=t.call(this,a.message,{cause:e})).name=r.PROVIDER_RPC_ERROR_NAME.PROVIDER_RPC,i.code=a.code,i}return F(n)}(T(Error)))},67933:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});var r={isLowerCaseMatch:function(e,t){return(null==e?void 0:e.toLowerCase())===(null==t?void 0:t.toLowerCase())}}},19579:function(e,t,n){"use strict";n.d(t,{p:function(){return a},F:function(){return i}});var r=n(72290),a={caipNetworkIdToNumber:function(e){return e?Number(e.split(":")[1]):void 0},parseEvmChainId:function(e){return"string"==typeof e?this.caipNetworkIdToNumber(e):e},getNetworksByNamespace:function(e,t){return(null==e?void 0:e.filter(function(e){return e.chainNamespace===t}))||[]},getFirstNetworkByNamespace:function(e,t){return this.getNetworksByNamespace(e,t)[0]},getNetworkNameByCaipNetworkId:function(e,t){var n;if(t){var a=e.find(function(e){return e.caipNetworkId===t});if(a)return a.name;var i=C(t.split(":"),1)[0];return(null===(n=r.b.CHAIN_NAME_MAP)||void 0===n?void 0:n[i])||void 0}}},i=["eip155","solana","polkadot","bip122","cosmos","sui","stacks"]},86482:function(e,t,n){"use strict";n.d(t,{C:function(){return v}});var r=1e6,a=1e6,i="[big.js] ",o=i+"Invalid ",s=o+"decimal places",c=i+"Division by zero",u={},l=void 0,d=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function p(e,t,n,r){var a=e.c;if(n===l&&(n=e.constructor.RM),0!==n&&1!==n&&2!==n&&3!==n)throw Error("[big.js] Invalid rounding mode");if(t<1)r=3===n&&(r||!!a[0])||0===t&&(1===n&&a[0]>=5||2===n&&(a[0]>5||5===a[0]&&(r||a[1]!==l))),a.length=1,r?(e.e=e.e-t+1,a[0]=1):a[0]=e.e=0;else if(t<a.length){if(r=1===n&&a[t]>=5||2===n&&(a[t]>5||5===a[t]&&(r||a[t+1]!==l||1&a[t-1]))||3===n&&(r||!!a[0]),a.length=t,r)for(;++a[--t]>9;)if(a[t]=0,0===t){++e.e,a.unshift(1);break}for(t=a.length;!a[--t];)a.pop()}return e}function f(e,t,n){var r=e.e,a=e.c.join(""),i=a.length;if(t)a=a.charAt(0)+(i>1?"."+a.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)a="0"+a;a="0."+a}else if(r>0)if(++r>i)for(r-=i;r--;)a+="0";else r<i&&(a=a.slice(0,r)+"."+a.slice(r));else i>1&&(a=a.charAt(0)+"."+a.slice(1));return e.s<0&&n?"-"+a:a}u.abs=function(){var e=new this.constructor(this);return e.s=1,e},u.cmp=function(e){var t,n=this,r=n.c,a=(e=new n.constructor(e)).c,i=n.s,o=e.s,s=n.e,c=e.e;if(!r[0]||!a[0])return r[0]?i:a[0]?-o:0;if(i!=o)return i;if(t=i<0,s!=c)return s>c^t?1:-1;for(o=(s=r.length)<(c=a.length)?s:c,i=-1;++i<o;)if(r[i]!=a[i])return r[i]>a[i]^t?1:-1;return s==c?0:s>c^t?1:-1},u.div=function(e){var t=this,n=t.constructor,a=t.c,i=(e=new n(e)).c,o=t.s==e.s?1:-1,u=n.DP;if(u!==~~u||u<0||u>r)throw Error(s);if(!i[0])throw Error(c);if(!a[0])return e.s=o,e.c=[e.e=0],e;var d,f,h,v,g,m=i.slice(),y=d=i.length,b=a.length,w=a.slice(0,d),E=w.length,k=e,x=k.c=[],C=0,A=u+(k.e=t.e-e.e)+1;for(k.s=o,o=A<0?0:A,m.unshift(0);E++<d;)w.push(0);do{for(h=0;h<10;h++){if(d!=(E=w.length))v=d>E?1:-1;else for(g=-1,v=0;++g<d;)if(i[g]!=w[g]){v=i[g]>w[g]?1:-1;break}if(!(v<0))break;for(f=E==d?i:m;E;){if(w[--E]<f[E]){for(g=E;g&&!w[--g];)w[g]=9;--w[g],w[E]+=10}w[E]-=f[E]}for(;!w[0];)w.shift()}x[C++]=v?h:++h,w[0]&&v?w[E]=a[y]||0:w=[a[y]]}while((y++<b||w[0]!==l)&&o--);return!x[0]&&1!=C&&(x.shift(),k.e--,A--),C>A&&p(k,A,n.RM,w[0]!==l),k},u.eq=function(e){return 0===this.cmp(e)},u.gt=function(e){return this.cmp(e)>0},u.gte=function(e){return this.cmp(e)>-1},u.lt=function(e){return this.cmp(e)<0},u.lte=function(e){return this.cmp(e)<1},u.minus=u.sub=function(e){var t,n,r,a,i=this,o=i.constructor,s=i.s,c=(e=new o(e)).s;if(s!=c)return e.s=-c,i.plus(e);var u=i.c.slice(),l=i.e,d=e.c,p=e.e;if(!u[0]||!d[0])return d[0]?e.s=-c:u[0]?e=new o(i):e.s=1,e;if(s=l-p){for((a=s<0)?(s=-s,r=u):(p=l,r=d),r.reverse(),c=s;c--;)r.push(0);r.reverse()}else for(n=((a=u.length<d.length)?u:d).length,s=c=0;c<n;c++)if(u[c]!=d[c]){a=u[c]<d[c];break}if(a&&(r=u,u=d,d=r,e.s=-e.s),(c=(n=d.length)-(t=u.length))>0)for(;c--;)u[t++]=0;for(c=t;n>s;){if(u[--n]<d[n]){for(t=n;t&&!u[--t];)u[t]=9;--u[t],u[n]+=10}u[n]-=d[n]}for(;0===u[--c];)u.pop();for(;0===u[0];)u.shift(),--p;return u[0]||(e.s=1,u=[p=0]),e.c=u,e.e=p,e},u.mod=function(e){var t,n=this,r=n.constructor,a=n.s,i=(e=new r(e)).s;if(!e.c[0])throw Error(c);return n.s=e.s=1,t=1==e.cmp(n),n.s=a,e.s=i,t?new r(n):(a=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(e),r.DP=a,r.RM=i,this.minus(n.times(e)))},u.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},u.plus=u.add=function(e){var t,n,r,a=this,i=a.constructor;if(e=new i(e),a.s!=e.s)return e.s=-e.s,a.minus(e);var o=a.e,s=a.c,c=e.e,u=e.c;if(!s[0]||!u[0])return u[0]||(s[0]?e=new i(a):e.s=a.s),e;if(s=s.slice(),t=o-c){for(t>0?(c=o,r=u):(t=-t,r=s),r.reverse();t--;)r.push(0);r.reverse()}for(s.length-u.length<0&&(r=u,u=s,s=r),t=u.length,n=0;t;s[t]%=10)n=(s[--t]=s[t]+u[t]+n)/10|0;for(n&&(s.unshift(n),++c),t=s.length;0===s[--t];)s.pop();return e.c=s,e.e=c,e},u.pow=function(e){var t=this,n=new t.constructor("1"),r=n,i=e<0;if(e!==~~e||e<-a||e>a)throw Error(o+"exponent");for(i&&(e=-e);1&e&&(r=r.times(t)),e>>=1;)t=t.times(t);return i?n.div(r):r},u.prec=function(e,t){if(e!==~~e||e<1||e>r)throw Error(o+"precision");return p(new this.constructor(this),e,t)},u.round=function(e,t){if(e===l)e=0;else if(e!==~~e||e<-r||e>r)throw Error(s);return p(new this.constructor(this),e+this.e+1,t)},u.sqrt=function(){var e,t,n,r=this,a=r.constructor,o=r.s,s=r.e,c=new a("0.5");if(!r.c[0])return new a(r);if(o<0)throw Error(i+"No square root");0===(o=Math.sqrt(+f(r,!0,!0)))||o===1/0?((t=r.c.join("")).length+s&1||(t+="0"),s=((s+1)/2|0)-(s<0||1&s),e=new a(((o=Math.sqrt(t))==1/0?"5e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+s)):e=new a(o+""),s=e.e+(a.DP+=4);do{e=c.times((n=e).plus(r.div(n)))}while(n.c.slice(0,s).join("")!==e.c.slice(0,s).join(""));return p(e,(a.DP-=4)+e.e+1,a.RM)},u.times=u.mul=function(e){var t,n=this,r=n.c,a=(e=new(0,n.constructor)(e)).c,i=r.length,o=a.length,s=n.e,c=e.e;if(e.s=n.s==e.s?1:-1,!r[0]||!a[0])return e.c=[e.e=0],e;for(e.e=s+c,i<o&&(t=r,r=a,a=t,c=i,i=o,o=c),t=new Array(c=i+o);c--;)t[c]=0;for(s=o;s--;){for(o=0,c=i+s;c>s;)o=t[c]+a[s]*r[c-s-1]+o,t[c--]=o%10,o=o/10|0;t[c]=o}for(o?++e.e:t.shift(),s=t.length;!t[--s];)t.pop();return e.c=t,e},u.toExponential=function(e,t){var n=this,a=n.c[0];if(e!==l){if(e!==~~e||e<0||e>r)throw Error(s);for(n=p(new n.constructor(n),++e,t);n.c.length<e;)n.c.push(0)}return f(n,!0,!!a)},u.toFixed=function(e,t){var n=this,a=n.c[0];if(e!==l){if(e!==~~e||e<0||e>r)throw Error(s);for(e=e+(n=p(new n.constructor(n),e+n.e+1,t)).e+1;n.c.length<e;)n.c.push(0)}return f(n,!1,!!a)},u[Symbol.for("nodejs.util.inspect.custom")]=u.toJSON=u.toString=function(){var e=this,t=e.constructor;return f(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])},u.toNumber=function(){var e=+f(this,!0,!0);if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(i+"Imprecise conversion");return e},u.toPrecision=function(e,t){var n=this,a=n.constructor,i=n.c[0];if(e!==l){if(e!==~~e||e<1||e>r)throw Error(o+"precision");for(n=p(new a(n),e,t);n.c.length<e;)n.c.push(0)}return f(n,e<=n.e||n.e<=a.NE||n.e>=a.PE,!!i)},u.valueOf=function(){var e=this,t=e.constructor;if(!0===t.strict)throw Error(i+"valueOf disallowed");return f(e,e.e<=t.NE||e.e>=t.PE,!0)};var h=function e(){function t(n){var r=this;if(!(r instanceof t))return n===l?e():new t(n);if(n instanceof t)r.s=n.s,r.e=n.e,r.c=n.c.slice();else{if("string"!=typeof n){if(!0===t.strict&&"bigint"!=typeof n)throw TypeError(o+"value");n=0===n&&1/n<0?"-0":String(n)}!function(e,t){var n,r,a;if(!d.test(t))throw Error(o+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),a=t.length,r=0;r<a&&"0"==t.charAt(r);)++r;if(r==a)e.c=[e.e=0];else{for(;a>0&&"0"==t.charAt(--a););for(e.e=n-r-1,e.c=[],n=0;r<=a;)e.c[n++]=+t.charAt(r++)}}(r,n)}r.constructor=t}return t.prototype=u,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=!1,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}(),v={bigNumber:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{safe:!1};try{return new h(e||0)}catch(n){if(t.safe)return new h(0);throw n}},formatNumber:function(e,t){var n=t.decimals,r=t.round,a=void 0===r?8:r,i=t.safe,o=void 0===i||i;return v.bigNumber(e,{safe:o}).div(new h(10).pow(n)).round(a)},multiply:function(e,t){if(void 0===e||void 0===t)return new h(0);var n=new h(e),r=new h(t);return n.times(r)},toFixed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return void 0===e||""===e?new h(0).toFixed(t):new h(e).toFixed(t)},formatNumberToLocalString:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return void 0===e||""===e?"0.00":"number"==typeof e?e.toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t,roundingMode:"floor"}):parseFloat(e).toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t,roundingMode:"floor"})},parseLocalStringToNumber:function(e){if(void 0===e||""===e)return 0;var t=e.replace(/,/g,"");return new h(t).toNumber()}}},32750:function(e,t,n){"use strict";n.d(t,{u:function(){return r}});var r={validateCaipAddress:function(e){var t;if(3!==(null===(t=e.split(":"))||void 0===t?void 0:t.length))throw new Error("Invalid CAIP Address");return e},parseCaipAddress:function(e){var t=e.split(":");if(3!==t.length)throw new Error("Invalid CAIP-10 address: ".concat(e));var n=C(t,3),r=n[0],a=n[1],i=n[2];if(!r||!a||!i)throw new Error("Invalid CAIP-10 address: ".concat(e));return{chainNamespace:r,chainId:a,address:i}},parseCaipNetworkId:function(e){var t=e.split(":");if(2!==t.length)throw new Error("Invalid CAIP-2 network id: ".concat(e));var n=C(t,2),r=n[0],a=n[1];if(!r||!a)throw new Error("Invalid CAIP-2 network id: ".concat(e));return{chainNamespace:r,chainId:a}}}},86462:function(e,t,n){"use strict";n.d(t,{uJ:function(){return r},Vk:function(){return a},mr:function(){return i},$U:function(){return o}});var r={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",RECENT_WALLET:"@appkit/recent_wallet",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids",HISTORY_TRANSACTIONS_CACHE:"@appkit/history_transactions_cache",TOKEN_PRICE_CACHE:"@appkit/token_price_cache",RECENT_EMAILS:"@appkit/recent_emails",LATEST_APPKIT_VERSION:"@appkit/latest_version",TON_WALLETS_CACHE:"@appkit/ton_wallets_cache"};function a(e){if(!e)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return"@appkit/".concat(e,":connected_connector_id")}var i={setItem:function(e,t){o()&&void 0!==t&&localStorage.setItem(e,t)},getItem:function(e){if(o())return localStorage.getItem(e)||void 0},removeItem:function(e){o()&&localStorage.removeItem(e)},clear:function(){o()&&localStorage.clear()}};function o(){return"undefined"!=typeof window&&"undefined"!=typeof localStorage}},84853:function(e,t,n){"use strict";function r(e,t){var n,r=null!==(n=null==e?void 0:e["--apkt-accent"])&&void 0!==n?n:null==e?void 0:e["--w3m-accent"];return"light"===t?{"--w3m-accent":r||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":r||"hsla(230, 100%, 67%, 1)","--w3m-background":"#202020"}}n.d(t,{t:function(){return r}})},13618:function(e,t,n){"use strict";n.d(t,{j:function(){return a}});var r={adapters:{}},a={state:r,initialize:function(e){r.adapters=E({},e)},get:function(e){return r.adapters[e]}}},9483:function(e,t,n){"use strict";n.d(t,{B:function(){return u}});var r=n(23250),a=n(31254),i=n(72290),o=n(79781),s=n(32628),c=(0,r.sj)({message:"",variant:"info",open:!1}),u=(0,o.P)({state:c,subscribeKey:function(e,t){return(0,a.VW)(c,e,t)},open:function(e,t){var n=s.h.state.debug,r=e.code,a=e.displayMessage,o=e.debugMessage;if(a&&n&&(c.message=a,c.variant=t,c.open=!0),o){if(!i.b.IS_DEVELOPMENT)return;var u="function"==typeof o?o():o,l=r?{code:r}:void 0;"error"===t?console.error(u,l):"warning"===t?console.warn(u,l):console.info(u,l)}},warn:function(e,t,n){c.open=!0,c.message=e,c.variant="warning",t&&console.warn(t,n)},close:function(){c.open=!1,c.message="",c.variant="info"}})},91951:function(e,t,n){"use strict";n.d(t,{Q:function(){return w}});var r=n(8239),a=n(23250),i=n(31254),o=n(72290),s=n(14568),c=n(53574),u=n(44329),l=n(67529),d=n(42916),p=n(92809),f=n(63908),h=n(27297),v=n(68886),g=n(32628),m=c.j.getApiUrl(),y=new u.V({baseUrl:m,clientId:null}),b=(0,a.sj)({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1,explorerWallets:[],explorerFilteredWallets:[],plan:{tier:"none",hasExceededUsageLimit:!1,limits:{isAboveRpcLimit:!1,isAboveMauLimit:!1}}}),w={state:b,subscribeKey:function(e,t){return(0,i.VW)(b,e,t)},_getSdkProperties:function(){var e=g.h.state;return{projectId:e.projectId,st:e.sdkType||"appkit",sv:e.sdkVersion||"html-wagmi-4.2.2"}},_filterOutExtensions:function(e){return g.h.state.isUniversalProvider?e.filter(function(e){return Boolean(e.mobile_link||e.desktop_link||e.webapp_link)}):e},_fetchWalletImage:function(e){return(0,r.Z)(A().mark(function t(){var n,r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(y.baseUrl,"/getWalletImage/").concat(e),t.next=3,y.getBlob({path:n,params:w._getSdkProperties()});case 3:r=t.sent,p.W.setWalletImage(e,URL.createObjectURL(r));case 5:case"end":return t.stop()}},t)}))()},_fetchNetworkImage:function(e){return(0,r.Z)(A().mark(function t(){var n,r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(y.baseUrl,"/public/getAssetImage/").concat(e),t.next=3,y.getBlob({path:n,params:w._getSdkProperties()});case 3:r=t.sent,p.W.setNetworkImage(e,URL.createObjectURL(r));case 5:case"end":return t.stop()}},t)}))()},_fetchConnectorImage:function(e){return(0,r.Z)(A().mark(function t(){var n,r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(y.baseUrl,"/public/getAssetImage/").concat(e),t.next=3,y.getBlob({path:n,params:w._getSdkProperties()});case 3:r=t.sent,p.W.setConnectorImage(e,URL.createObjectURL(r));case 5:case"end":return t.stop()}},t)}))()},_fetchCurrencyImage:function(e){return(0,r.Z)(A().mark(function t(){var n,r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(y.baseUrl,"/public/getCurrencyImage/").concat(e),t.next=3,y.getBlob({path:n,params:w._getSdkProperties()});case 3:r=t.sent,p.W.setCurrencyImage(e,URL.createObjectURL(r));case 5:case"end":return t.stop()}},t)}))()},_fetchTokenImage:function(e){return(0,r.Z)(A().mark(function t(){var n,r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(y.baseUrl,"/public/getTokenImage/").concat(e),t.next=3,y.getBlob({path:n,params:w._getSdkProperties()});case 3:r=t.sent,p.W.setTokenImage(e,URL.createObjectURL(r));case 5:case"end":return t.stop()}},t)}))()},_filterWalletsByPlatform:function(e){var t=e.length,n=c.j.isMobile()?null==e?void 0:e.filter(function(e){return!(!e.mobile_link&&!e.webapp_link)||Object.values(l.m).map(function(e){return e.id}).includes(e.id)}):e;return{filteredWallets:n,mobileFilteredOutWalletsLength:t-n.length}},fetchProjectConfig:function(){return(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get({path:"/appkit/v1/config",params:w._getSdkProperties()});case 2:return e.abrupt("return",e.sent.features);case 3:case"end":return e.stop()}},e)}))()},fetchUsage:function(){return(0,r.Z)(A().mark(function e(){var t,n,r,a,i,o;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.get({path:"/appkit/v1/project-limits",params:w._getSdkProperties()});case 3:t=e.sent,n=t.planLimits,r=n.tier,a=n.isAboveMauLimit,i=n.isAboveRpcLimit,o=a||i,w.state.plan={tier:r,hasExceededUsageLimit:"starter"===r&&o,limits:{isAboveRpcLimit:i,isAboveMauLimit:a}},e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.warn("Failed to fetch usage",e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}))()},fetchAllowedOrigins:function(){return(0,r.Z)(A().mark(function e(){var t,n,r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.get({path:"/projects/v1/origins",params:w._getSdkProperties()});case 3:return t=e.sent,n=t.allowedOrigins,e.abrupt("return",n);case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Error&&e.t0.cause instanceof Response)){e.next=17;break}if((r=e.t0.cause.status)!==o.b.HTTP_STATUS_CODES.TOO_MANY_REQUESTS){e.next=14;break}throw new Error("RATE_LIMITED",{cause:e.t0});case 14:if(!(r>=o.b.HTTP_STATUS_CODES.SERVER_ERROR&&r<600)){e.next=16;break}throw new Error("SERVER_ERROR",{cause:e.t0});case 16:case 17:return e.abrupt("return",[]);case 18:case"end":return e.stop()}},e,null,[[0,8]])}))()},fetchNetworkImages:function(){return(0,r.Z)(A().mark(function e(){var t,n;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null===(t=f.R.getAllRequestedCaipNetworks())||void 0===t?void 0:t.map(function(e){var t=e.assets;return null==t?void 0:t.imageId}).filter(Boolean).filter(function(e){return!s.f.getNetworkImageById(e)}),e.t0=n,!e.t0){e.next=5;break}return e.next=5,Promise.allSettled(n.map(function(e){return w._fetchNetworkImage(e)}));case 5:case"end":return e.stop()}},e)}))()},fetchConnectorImages:function(){return(0,r.Z)(A().mark(function e(){var t,n;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.A.state.connectors,n=t.map(function(e){return e.imageId}).filter(Boolean),e.next=3,Promise.allSettled(n.map(function(e){return w._fetchConnectorImage(e)}));case 3:case"end":return e.stop()}},e)}))()},fetchCurrencyImages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.allSettled(e.map(function(e){return w._fetchCurrencyImage(e)}));case 2:case"end":return t.stop()}},t)}))()},fetchTokenImages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.allSettled(e.map(function(e){return w._fetchTokenImage(e)}));case 2:case"end":return t.stop()}},t)}))()},fetchWallets:function(e){return(0,r.Z)(A().mark(function t(){var n,r,a,i,o,s,c;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=null!==(n=e.exclude)&&void 0!==n?n:[],w._getSdkProperties().sv.startsWith("html-core-")&&a.push.apply(a,x(Object.values(l.m).map(function(e){return e.id}))),t.next=4,y.get({path:"/getWallets",params:E(E(E({},w._getSdkProperties()),e),{},{page:String(e.page),entries:String(e.entries),include:null===(r=e.include)||void 0===r?void 0:r.join(","),exclude:a.join(",")})});case 4:return i=t.sent,o=w._filterWalletsByPlatform(null==i?void 0:i.data),s=o.filteredWallets,c=o.mobileFilteredOutWalletsLength,t.abrupt("return",{data:s||[],count:null==i?void 0:i.count,mobileFilteredOutWalletsLength:c});case 9:case"end":return t.stop()}},t)}))()},prefetchWalletRanks:function(){return(0,r.Z)(A().mark(function e(){var t,n,r,a,i,s;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=h.A.state.connectors)&&t.length){e.next=3;break}return e.abrupt("return");case 3:return(n={page:1,entries:20,badge:"certified"}).names=t.map(function(e){return e.name}).join(","),f.R.state.activeChain===o.b.CHAIN.EVM&&(r=[].concat(x(t.flatMap(function(e){var t;return(null===(t=e.connectors)||void 0===t?void 0:t.map(function(e){var t;return null===(t=e.info)||void 0===t?void 0:t.rdns}))||[]})),x(t.map(function(e){var t;return null===(t=e.info)||void 0===t?void 0:t.rdns}))).filter(function(e){return"string"==typeof e&&e.length>0})).length&&(n.rdns=r.join(",")),e.next=7,w.fetchWallets(n);case 7:a=e.sent,i=a.data,b.explorerWallets=i,h.A.extendConnectorsWithExplorerWallets(i),s=f.R.getRequestedCaipNetworkIds().join(","),b.explorerFilteredWallets=i.filter(function(e){var t;return null===(t=e.chains)||void 0===t?void 0:t.some(function(e){return s.includes(e)})});case 12:case"end":return e.stop()}},e)}))()},fetchFeaturedWallets:function(){return(0,r.Z)(A().mark(function e(){var t,n,r,a,i,o,s;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=g.h.state.featuredWalletIds)||!t.length){e.next=13;break}return r=E(E({},w._getSdkProperties()),{},{page:1,entries:null!==(n=null==t?void 0:t.length)&&void 0!==n?n:4,include:t}),e.next=5,w.fetchWallets(r);case 5:return a=e.sent,i=a.data,o=x(i).sort(function(e,n){return t.indexOf(e.id)-t.indexOf(n.id)}),s=o.map(function(e){return e.image_id}).filter(Boolean),e.next=11,Promise.allSettled(s.map(function(e){return w._fetchWalletImage(e)}));case 11:b.featured=o,b.allFeatured=o;case 13:case"end":return e.stop()}},e)}))()},fetchRecommendedWallets:function(){return(0,r.Z)(A().mark(function e(){var t,n,r,a,i,o,s,c,u,l,p;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b.isFetchingRecommendedWallets=!0,t=g.h.state,n=t.includeWalletIds,r=t.excludeWalletIds,a=t.featuredWalletIds,i={page:1,entries:4,include:n,exclude:[].concat(x(null!=r?r:[]),x(null!=a?a:[])).filter(Boolean),chains:f.R.getRequestedCaipNetworkIds().join(",")},e.next=9,w.fetchWallets(i);case 9:return o=e.sent,s=o.data,c=o.count,u=d.M.getRecentWallets(),l=s.map(function(e){return e.image_id}).filter(Boolean),p=u.map(function(e){return e.image_id}).filter(Boolean),e.next=17,Promise.allSettled([].concat(x(l),x(p)).map(function(e){return w._fetchWalletImage(e)}));case 17:b.recommended=s,b.allRecommended=s,b.count=null!=c?c:0,e.next=24;break;case 22:e.prev=22,e.t0=e.catch(0);case 24:return e.prev=24,b.isFetchingRecommendedWallets=!1,e.finish(24);case 27:case"end":return e.stop()}},e,null,[[0,22,24,27]])}))()},fetchWalletsByPage:function(e){var t=e.page;return(0,r.Z)(A().mark(function e(){var n,r,a,i,o,s,u,l,d,p,h,v,m;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.h.state,a=r.includeWalletIds,i=r.excludeWalletIds,o=r.featuredWalletIds,s=f.R.getRequestedCaipNetworkIds().join(","),u=[].concat(x(b.recommended.map(function(e){return e.id})),x(null!=i?i:[]),x(null!=o?o:[])).filter(Boolean),l={page:t,entries:40,include:a,exclude:u,chains:s},e.next=9,w.fetchWallets(l);case 9:return d=e.sent,p=d.data,h=d.count,v=d.mobileFilteredOutWalletsLength,b.mobileFilteredOutWalletsLength=v+(null!==(n=b.mobileFilteredOutWalletsLength)&&void 0!==n?n:0),m=p.slice(0,20).map(function(e){return e.image_id}).filter(Boolean),e.next=17,Promise.allSettled(m.map(function(e){return w._fetchWalletImage(e)}));case 17:b.wallets=c.j.uniqueBy([].concat(x(b.wallets),x(w._filterOutExtensions(p))),"id").filter(function(e){var t;return null===(t=e.chains)||void 0===t?void 0:t.some(function(e){return s.includes(e)})}),b.count=h>b.count?h:b.count,b.page=t;case 20:case"end":return e.stop()}},e)}))()},initializeExcludedWallets:function(e){var t=e.ids;return(0,r.Z)(A().mark(function e(){var n,r,a;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={page:1,entries:t.length,include:t},e.next=3,w.fetchWallets(n);case 3:r=e.sent,(a=r.data)&&a.forEach(function(e){b.excludedWallets.push({rdns:e.rdns,name:e.name})});case 6:case"end":return e.stop()}},e)}))()},searchWallet:function(e){var t=e.search,n=e.badge;return(0,r.Z)(A().mark(function e(){var r,a,i,o,s,u,l,d;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.h.state,a=r.includeWalletIds,i=r.excludeWalletIds,o=f.R.getRequestedCaipNetworkIds().join(","),b.search=[],s={page:1,entries:100,search:null==t?void 0:t.trim(),badge_type:n,include:a,exclude:i,chains:o},e.next=5,w.fetchWallets(s);case 5:return u=e.sent,l=u.data,v.X.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:null!=n?n:"",search:null!=t?t:""}}),d=l.map(function(e){return e.image_id}).filter(Boolean),e.next=11,Promise.allSettled([].concat(x(d.map(function(e){return w._fetchWalletImage(e)})),[c.j.wait(300)]));case 11:b.search=w._filterOutExtensions(l);case 12:case"end":return e.stop()}},e)}))()},initPromise:function(e,t){return b.promises[e]||(b.promises[e]=t())},prefetch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fetchConnectorImages,n=void 0===t||t,r=e.fetchFeaturedWallets,a=void 0===r||r,i=e.fetchRecommendedWallets,o=void 0===i||i,s=e.fetchNetworkImages,c=void 0===s||s,u=e.fetchWalletRanks,l=void 0===u||u,d=[n&&w.initPromise("connectorImages",w.fetchConnectorImages),a&&w.initPromise("featuredWallets",w.fetchFeaturedWallets),o&&w.initPromise("recommendedWallets",w.fetchRecommendedWallets),c&&w.initPromise("networkImages",w.fetchNetworkImages),l&&w.initPromise("walletRanks",w.prefetchWalletRanks)].filter(Boolean);return Promise.allSettled(d)},prefetchAnalyticsConfig:function(){g.h.state.features.analytics&&w.fetchAnalyticsConfig()},fetchAnalyticsConfig:function(){return(0,r.Z)(A().mark(function e(){var t,n;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.get({path:"/getAnalyticsConfig",params:w._getSdkProperties()});case 3:t=e.sent,n=t.isAnalyticsEnabled,g.h.setFeatures({analytics:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),g.h.setFeatures({analytics:!1});case 11:case"end":return e.stop()}},e,null,[[0,8]])}))()},filterByNamespaces:function(e){if(null==e||!e.length)return b.featured=b.allFeatured,void(b.recommended=b.allRecommended);var t=f.R.getRequestedCaipNetworkIds().join(",");b.featured=b.allFeatured.filter(function(e){var n;return null===(n=e.chains)||void 0===n?void 0:n.some(function(e){return t.includes(e)})}),b.recommended=b.allRecommended.filter(function(e){var n;return null===(n=e.chains)||void 0===n?void 0:n.some(function(e){return t.includes(e)})}),b.filteredWallets=b.wallets.filter(function(e){var n;return null===(n=e.chains)||void 0===n?void 0:n.some(function(e){return t.includes(e)})})},clearFilterByNamespaces:function(){b.filteredWallets=[]},setFilterByNamespace:function(e){if(!e)return b.featured=b.allFeatured,void(b.recommended=b.allRecommended);var t=f.R.getRequestedCaipNetworkIds().join(",");b.featured=b.allFeatured.filter(function(e){var n;return null===(n=e.chains)||void 0===n?void 0:n.some(function(e){return t.includes(e)})}),b.recommended=b.allRecommended.filter(function(e){var n;return null===(n=e.chains)||void 0===n?void 0:n.some(function(e){return t.includes(e)})}),b.filteredWallets=b.wallets.filter(function(e){var n;return null===(n=e.chains)||void 0===n?void 0:n.some(function(e){return t.includes(e)})})}}},92809:function(e,t,n){"use strict";n.d(t,{W:function(){return s}});var r=n(23250),a=n(31254),i=n(79781),o=(0,r.sj)({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),s=(0,i.P)({state:o,subscribeNetworkImages:function(e){return(0,r.Ld)(o.networkImages,function(){return e(o.networkImages)})},subscribeKey:function(e,t){return(0,a.VW)(o,e,t)},subscribe:function(e){return(0,r.Ld)(o,function(){return e(o)})},setWalletImage:function(e,t){o.walletImages[e]=t},setNetworkImage:function(e,t){o.networkImages[e]=t},setChainImage:function(e,t){o.chainImages[e]=t},setConnectorImage:function(e,t){o.connectorImages=E(E({},o.connectorImages),{},k({},e,t))},setTokenImage:function(e,t){o.tokenImages[e]=t},setCurrencyImage:function(e,t){o.currencyImages[e]=t}})},71848:function(e,t,n){"use strict";n.d(t,{L:function(){return v}});var r=n(8239),a=n(23250),i=n(28153),o=n(53574),s=n(44329),c=n(42916),u=n(63908),l=n(32628),d=n(56152),p={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},f=o.j.getBlockchainApiUrl(),h=(0,a.sj)({clientId:null,api:new s.V({baseUrl:f,clientId:null}),supportedChains:{http:[],ws:[]}}),v={state:h,get:function(e){return(0,r.Z)(A().mark(function t(){var n,r,a,i;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=v.getSdkProperties(),r=n.st,a=n.sv,i=E(E({},e.params||{}),{},{st:r,sv:a,projectId:l.h.state.projectId}),t.abrupt("return",h.api.get(E(E({},e),{},{params:i})));case 2:case"end":return t.stop()}},t)}))()},getSdkProperties:function(){var e=l.h.state;return{st:e.sdkType||"unknown",sv:e.sdkVersion||"unknown"}},isNetworkSupported:function(e){return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",!1);case 2:if(t.prev=2,t.t0=h.supportedChains.http.length,t.t0){t.next=7;break}return t.next=7,v.getSupportedNetworks();case 7:t.next=12;break;case 9:return t.prev=9,t.t1=t.catch(2),t.abrupt("return",!1);case 12:return t.abrupt("return",h.supportedChains.http.includes(e));case 13:case"end":return t.stop()}},t,null,[[2,9]])}))()},getSupportedNetworks:function(){return(0,r.Z)(A().mark(function e(){var t;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.get({path:"v1/supported-chains"});case 3:return t=e.sent,e.abrupt("return",(h.supportedChains=t,t));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",h.supportedChains);case 10:case"end":return e.stop()}},e,null,[[0,7]])}))()},fetchIdentity:function(e){var t=e.address;return(0,r.Z)(A().mark(function e(){var n,r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=c.M.getIdentityFromCacheForAddress(t))){e.next=3;break}return e.abrupt("return",n);case 3:return e.next=5,v.get({path:"/v1/identity/".concat(t),params:{sender:u.R.state.activeCaipAddress?o.j.getPlainAddress(u.R.state.activeCaipAddress):void 0}});case 5:return r=e.sent,e.abrupt("return",(c.M.updateIdentityCache({address:t,identity:r,timestamp:Date.now()}),r));case 7:case"end":return e.stop()}},e)}))()},fetchTransactions:function(e){var t=e.account,n=e.cursor,a=e.signal,i=e.cache,o=e.chainId;return(0,r.Z)(A().mark(function e(){var r,s;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.isNetworkSupported(u.R.state.activeCaipNetwork.caipNetworkId);case 2:if(e.sent){e.next=4;break}return e.abrupt("return",{data:[],next:void 0});case 4:if(!(r=c.M.getTransactionsCacheForAddress({address:t,chainId:o}))){e.next=7;break}return e.abrupt("return",r);case 7:return e.next=9,v.get({path:"/v1/account/".concat(t,"/history"),params:{cursor:n,chainId:o},signal:a,cache:i});case 9:return s=e.sent,e.abrupt("return",(c.M.updateTransactionsCache({address:t,chainId:o,timestamp:Date.now(),transactions:s}),s));case 11:case"end":return e.stop()}},e)}))()},fetchSwapQuote:function(e){var t=e.amount,n=e.userAddress,a=e.from,i=e.to,o=e.gasPrice;return(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.isNetworkSupported(u.R.state.activeCaipNetwork.caipNetworkId);case 2:if(!e.sent){e.next=6;break}e.t0=v.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:n,from:a,to:i,gasPrice:o}}),e.next=7;break;case 6:e.t0={quotes:[]};case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}},e)}))()},fetchSwapTokens:function(e){var t=e.chainId;return(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.isNetworkSupported(u.R.state.activeCaipNetwork.caipNetworkId);case 2:if(!e.sent){e.next=6;break}e.t0=v.get({path:"/v1/convert/tokens",params:{chainId:t}}),e.next=7;break;case 6:e.t0={tokens:[]};case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}},e)}))()},getAddressBalance:function(e){var t=e.caipNetworkId,n=e.address;return(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.api.post({path:"/v1?chainId=".concat(t,"&projectId=").concat(l.h.state.projectId),body:{id:"1",jsonrpc:"2.0",method:"getAddressBalance",params:{address:n}}}).then(function(e){return e.result}));case 1:case"end":return e.stop()}},e)}))()},fetchTokenPrice:function(e){var t=e.addresses,n=e.caipNetworkId,a=void 0===n?u.R.state.activeCaipNetwork.caipNetworkId:n;return(0,r.Z)(A().mark(function e(){var n,r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.isNetworkSupported(a);case 2:if(e.sent){e.next=4;break}return e.abrupt("return",{fungibles:[]});case 4:if(!(n=c.M.getTokenPriceCacheForAddresses(t))){e.next=7;break}return e.abrupt("return",n);case 7:return e.next=9,h.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:l.h.state.projectId},headers:{"Content-Type":"application/json"}});case 9:return r=e.sent,e.abrupt("return",(c.M.updateTokenPriceCache({addresses:t,timestamp:Date.now(),tokenPrice:r}),r));case 11:case"end":return e.stop()}},e)}))()},fetchSwapAllowance:function(e){var t=e.tokenAddress,n=e.userAddress;return(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.isNetworkSupported(u.R.state.activeCaipNetwork.caipNetworkId);case 2:if(!e.sent){e.next=6;break}e.t0=v.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:n},headers:{"Content-Type":"application/json"}}),e.next=7;break;case 6:e.t0={allowance:"0"};case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}},e)}))()},fetchGasPrice:function(e){var t=e.chainId;return(0,r.Z)(A().mark(function e(){var n,r,a;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.getSdkProperties(),r=n.st,a=n.sv,e.next=3,v.isNetworkSupported(u.R.state.activeCaipNetwork.caipNetworkId);case 3:if(e.sent){e.next=5;break}throw new Error("Network not supported for Gas Price");case 5:return e.abrupt("return",v.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:r,sv:a}}));case 6:case"end":return e.stop()}},e)}))()},generateSwapCalldata:function(e){var t=e.amount,n=e.from,a=e.to,o=e.userAddress,s=e.disableEstimate;return(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.isNetworkSupported(u.R.state.activeCaipNetwork.caipNetworkId);case 2:if(e.sent){e.next=4;break}throw new Error("Network not supported for Swaps");case 4:return e.abrupt("return",h.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:i.bq.CONVERT_SLIPPAGE_TOLERANCE},projectId:l.h.state.projectId,from:n,to:a,userAddress:o,disableEstimate:s}}));case 5:case"end":return e.stop()}},e)}))()},generateApproveCalldata:function(e){var t=e.from,n=e.to,a=e.userAddress;return(0,r.Z)(A().mark(function e(){var r,i,o;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.getSdkProperties(),i=r.st,o=r.sv,e.next=3,v.isNetworkSupported(u.R.state.activeCaipNetwork.caipNetworkId);case 3:if(e.sent){e.next=5;break}throw new Error("Network not supported for Swaps");case 5:return e.abrupt("return",v.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:a,from:t,to:n,st:i,sv:o}}));case 6:case"end":return e.stop()}},e)}))()},getBalance:function(e,t,n){return(0,r.Z)(A().mark(function r(){var a,i,o,s,l,p;return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=v.getSdkProperties(),i=a.st,o=a.sv,r.next=3,v.isNetworkSupported(u.R.state.activeCaipNetwork.caipNetworkId);case 3:if(r.sent){r.next=5;break}return r.abrupt("return",(d.K.showError("Token Balance Unavailable"),{balances:[]}));case 5:if(s="".concat(t,":").concat(e),!(l=c.M.getBalanceCacheForCaipAddress(s))){r.next=8;break}return r.abrupt("return",l);case 8:return r.next=10,v.get({path:"/v1/account/".concat(e,"/balance"),params:{currency:"usd",chainId:t,forceUpdate:n,st:i,sv:o}});case 10:return p=r.sent,r.abrupt("return",(c.M.updateBalanceCache({caipAddress:s,balance:p,timestamp:Date.now()}),p));case 12:case"end":return r.stop()}},r)}))()},lookupEnsName:function(e){return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.isNetworkSupported(u.R.state.activeCaipNetwork.caipNetworkId);case 2:if(!t.sent){t.next=6;break}t.t0=v.get({path:"/v1/profile/account/".concat(e),params:{apiVersion:"2"}}),t.next=7;break;case 6:t.t0={addresses:{},attributes:[]};case 7:return t.abrupt("return",t.t0);case 8:case"end":return t.stop()}},t)}))()},reverseLookupEnsName:function(e){var t=e.address;return(0,r.Z)(A().mark(function e(){var n,r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.isNetworkSupported(u.R.state.activeCaipNetwork.caipNetworkId);case 2:if(e.sent){e.next=4;break}return e.abrupt("return",[]);case 4:return r=null===(n=u.R.getAccountData())||void 0===n?void 0:n.address,e.abrupt("return",v.get({path:"/v1/profile/reverse/".concat(t),params:{sender:r,apiVersion:"2"}}));case 6:case"end":return e.stop()}},e)}))()},getEnsNameSuggestions:function(e){return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.isNetworkSupported(u.R.state.activeCaipNetwork.caipNetworkId);case 2:if(!t.sent){t.next=6;break}t.t0=v.get({path:"/v1/profile/suggestions/".concat(e),params:{zone:"reown.id"}}),t.next=7;break;case 6:t.t0={suggestions:[]};case 7:return t.abrupt("return",t.t0);case 8:case"end":return t.stop()}},t)}))()},registerEnsName:function(e){var t=e.coinType,n=e.address,a=e.message,i=e.signature;return(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.isNetworkSupported(u.R.state.activeCaipNetwork.caipNetworkId);case 2:if(!e.sent){e.next=6;break}e.t0=h.api.post({path:"/v1/profile/account",body:{coin_type:t,address:n,message:a,signature:i},headers:{"Content-Type":"application/json"}}),e.next=7;break;case 6:e.t0={success:!1};case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}},e)}))()},generateOnRampURL:function(e){var t=e.destinationWallets,n=e.partnerUserId,a=e.defaultNetwork,i=e.purchaseAmount,o=e.paymentAmount;return(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.isNetworkSupported(u.R.state.activeCaipNetwork.caipNetworkId);case 2:if(!e.sent){e.next=8;break}return e.next=5,h.api.post({path:"/v1/generators/onrampurl",params:{projectId:l.h.state.projectId},body:{destinationWallets:t,defaultNetwork:a,partnerUserId:n,defaultExperience:"buy",presetCryptoAmount:i,presetFiatAmount:o}});case 5:e.t0=e.sent.url,e.next=9;break;case 8:e.t0="";case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}},e)}))()},getOnrampOptions:function(){return(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.isNetworkSupported(u.R.state.activeCaipNetwork.caipNetworkId);case 2:if(e.sent){e.next=4;break}return e.abrupt("return",{paymentCurrencies:[],purchaseCurrencies:[]});case 4:return e.prev=4,e.next=7,v.get({path:"/v1/onramp/options"});case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(4),e.abrupt("return",p);case 13:case"end":return e.stop()}},e,null,[[4,10]])}))()},getOnrampQuote:function(e){var t=e.purchaseCurrency,n=e.paymentCurrency,a=e.amount,i=e.network;return(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.isNetworkSupported(u.R.state.activeCaipNetwork.caipNetworkId);case 3:if(!e.sent){e.next=9;break}return e.next=6,h.api.post({path:"/v1/onramp/quote",params:{projectId:l.h.state.projectId},body:{purchaseCurrency:t,paymentCurrency:n,amount:a,network:i}});case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0=null;case 10:return e.abrupt("return",e.t0);case 13:return e.prev=13,e.t1=e.catch(0),e.abrupt("return",{networkFee:{amount:a,currency:n.id},paymentSubtotal:{amount:a,currency:n.id},paymentTotal:{amount:a,currency:n.id},purchaseAmount:{amount:a,currency:n.id},quoteId:"mocked-quote-id"});case 16:case"end":return e.stop()}},e,null,[[0,13]])}))()},getSmartSessions:function(e){return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.isNetworkSupported(u.R.state.activeCaipNetwork.caipNetworkId);case 2:if(!t.sent){t.next=6;break}t.t0=v.get({path:"/v1/sessions/".concat(e)}),t.next=7;break;case 6:t.t0=[];case 7:return t.abrupt("return",t.t0);case 8:case"end":return t.stop()}},t)}))()},revokeSmartSession:function(e,t,n){return(0,r.Z)(A().mark(function r(){return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.isNetworkSupported(u.R.state.activeCaipNetwork.caipNetworkId);case 2:if(!r.sent){r.next=6;break}r.t0=h.api.post({path:"/v1/sessions/".concat(e,"/revoke"),params:{projectId:l.h.state.projectId},body:{pci:t,signature:n}}),r.next=7;break;case 6:r.t0={success:!1};case 7:return r.abrupt("return",r.t0);case 8:case"end":return r.stop()}},r)}))()},setClientId:function(e){h.clientId=e,h.api=new s.V({baseUrl:f,clientId:e})}}},63908:function(e,t,n){"use strict";n.d(t,{R:function(){return D}});var r=n(8239),a=n(23250),i=n(31254),o=n(32750),s=n(72290),c=n(19579),u=n(3628),l="undefined"!=typeof window,d={set:function(e,t){l&&localStorage.setItem("".concat(u.$0.STORAGE_KEY).concat(e),t)},get:function(e){return l?localStorage.getItem("".concat(u.$0.STORAGE_KEY).concat(e)):null},delete:function(e,t){l&&(t?localStorage.removeItem(e):localStorage.removeItem("".concat(u.$0.STORAGE_KEY).concat(e)))}},p=n(56276),f=n(28153),h=n(53574),v=n(42916),g=n(79781),m=n(13618),y=n(7551),b=n(27297),w=n(68886),N=n(22167),I=n(32628),_=n(65023),S=n(65298),T=n(26131),O=n(56152),R={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},P={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},U=(0,a.sj)({chains:(0,i.Yr)(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{connectionControllerClient:void 0},isSwitchingNamespace:!1}),M={state:U,subscribe:function(e){return(0,a.Ld)(U,function(){e(U)})},subscribeKey:function(e,t){return(0,i.VW)(U,e,t)},subscribeAccountStateProp:function(e,t,n){var r,a=n||U.activeChain;return a?(0,i.VW)((null===(r=U.chains.get(a))||void 0===r?void 0:r.accountState)||{},e,t):function(){}},subscribeChainProp:function(e,t,n){var r;return(0,a.Ld)(U.chains,function(){var a=n||U.activeChain;if(a){var i,o=null===(i=U.chains.get(a))||void 0===i?void 0:i[e];r!==o&&(r=o,t(o))}})},initialize:function(e,t,n){var r,i=v.M.getActiveNetworkProps(),o=i.chainId,s=i.namespace,c=null==t?void 0:t.find(function(e){return e.id.toString()===(null==o?void 0:o.toString())}),u=e.find(function(e){return(null==e?void 0:e.namespace)===s})||(null==e?void 0:e[0]),l=e.map(function(e){return e.namespace}).filter(function(e){return void 0!==e}),d=I.h.state.enableEmbedded?new Set(x(l)):new Set(x(null!==(r=null==t?void 0:t.map(function(e){return e.chainNamespace}))&&void 0!==r?r:[]));(0===(null==e?void 0:e.length)||!u)&&(U.noAdapters=!0),U.noAdapters||(U.activeChain=null==u?void 0:u.namespace,U.activeCaipNetwork=c,D.setChainNetworkData(null==u?void 0:u.namespace,{caipNetwork:c}),U.activeChain&&S.I.set({activeChain:null==u?void 0:u.namespace})),d.forEach(function(e){var r=null==t?void 0:t.filter(function(t){return t.chainNamespace===e}),i=v.M.getPreferredAccountTypes()||{},o=E(E({},I.h.state.defaultAccountTypes),i);D.state.chains.set(e,E({namespace:e,networkState:(0,a.sj)(E(E({},P),{},{caipNetwork:null==r?void 0:r[0]})),accountState:(0,a.sj)(E(E({},R),{},{preferredAccountType:o[e]})),caipNetworks:null!=r?r:[]},n)),D.setRequestedCaipNetworks(null!=r?r:[],e)})},removeAdapter:function(e){if(U.activeChain===e){var t=Array.from(U.chains.entries()).find(function(t){return C(t,1)[0]!==e});if(t){var n,r,a=null===(n=t[1])||void 0===n||null===(r=n.caipNetworks)||void 0===r?void 0:r[0];a&&D.setActiveCaipNetwork(a)}}U.chains.delete(e)},addAdapter:function(e,t,n){var r,a=t.connectionControllerClient;if(!e.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");U.chains.set(e.namespace,{namespace:e.namespace,networkState:E(E({},P),{},{caipNetwork:n[0]}),accountState:E({},R),caipNetworks:n,connectionControllerClient:a}),D.setRequestedCaipNetworks(null!==(r=null==n?void 0:n.filter(function(t){return t.chainNamespace===e.namespace}))&&void 0!==r?r:[],e.namespace)},addNetwork:function(e){var t=U.chains.get(e.chainNamespace);if(t){var n,r=x(t.caipNetworks||[]);null!==(n=t.caipNetworks)&&void 0!==n&&n.find(function(t){return t.id===e.id})||r.push(e),U.chains.set(e.chainNamespace,E(E({},t),{},{caipNetworks:r})),D.setRequestedCaipNetworks(r,e.chainNamespace),b.A.filterByNamespace(e.chainNamespace,!0)}},removeNetwork:function(e,t){var n=U.chains.get(e);if(n){var r,a,i,o=(null===(r=U.activeCaipNetwork)||void 0===r?void 0:r.id)===t,s=x((null===(a=n.caipNetworks)||void 0===a?void 0:a.filter(function(e){return e.id!==t}))||[]);o&&null!=n&&null!==(i=n.caipNetworks)&&void 0!==i&&i[0]&&D.setActiveCaipNetwork(n.caipNetworks[0]),U.chains.set(e,E(E({},n),{},{caipNetworks:s})),D.setRequestedCaipNetworks(s||[],e),0===s.length&&b.A.filterByNamespace(e,!1)}},setAdapterNetworkState:function(e,t){var n=U.chains.get(e);n&&(n.networkState=E(E({},n.networkState||P),t),U.chains.set(e,n))},setChainAccountData:function(e,t){if(!e)throw new Error("Chain is required to update chain account data");var n=U.chains.get(e);if(n){var r=E(E({},n.accountState||R),t);U.chains.set(e,E(E({},n),{},{accountState:r})),(1===U.chains.size||U.activeChain===e)&&t.caipAddress&&(U.activeCaipAddress=t.caipAddress)}},setChainNetworkData:function(e,t){if(e){var n=U.chains.get(e);if(n){var r=E(E({},n.networkState||P),t);U.chains.set(e,E(E({},n),{},{networkState:r}))}}},setAccountProp:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];D.setChainAccountData(n,k({},e,t),r)},setActiveNamespace:function(e){var t,n;U.activeChain=e;var r=e?U.chains.get(e):void 0,a=null==r||null===(t=r.networkState)||void 0===t?void 0:t.caipNetwork;(null==a?void 0:a.id)&&e&&(U.activeCaipAddress=null==r||null===(n=r.accountState)||void 0===n?void 0:n.caipAddress,U.activeCaipNetwork=a,D.setChainNetworkData(e,{caipNetwork:a}),v.M.setActiveCaipNetworkId(null==a?void 0:a.caipNetworkId),S.I.set({activeChain:e,selectedNetworkId:null==a?void 0:a.caipNetworkId}))},setActiveCaipNetwork:function(e){var t,n;if(e){var r=U.activeChain===e.chainNamespace;r||D.setIsSwitchingNamespace(!0);var a=U.chains.get(e.chainNamespace);U.activeChain=e.chainNamespace,U.activeCaipNetwork=e,D.setChainNetworkData(e.chainNamespace,{caipNetwork:e});var i=null==a||null===(t=a.accountState)||void 0===t?void 0:t.address;if(i)U.activeCaipAddress="".concat(e.chainNamespace,":").concat(e.id,":").concat(i);else if(r&&U.activeCaipAddress){i=o.u.parseCaipAddress(U.activeCaipAddress).address,U.activeCaipAddress="".concat(e.caipNetworkId,":").concat(i)}else U.activeCaipAddress=void 0;D.setChainAccountData(e.chainNamespace,{address:i,caipAddress:U.activeCaipAddress}),T.S.resetSend(),S.I.set({activeChain:U.activeChain,selectedNetworkId:null===(n=U.activeCaipNetwork)||void 0===n?void 0:n.caipNetworkId}),v.M.setActiveCaipNetworkId(e.caipNetworkId),!D.checkIfSupportedNetwork(e.chainNamespace)&&I.h.state.enableNetworkSwitch&&!I.h.state.allowUnsupportedChain&&!y.l.state.wcBasic&&D.showUnsupportedChainUI()}},addCaipNetwork:function(e){var t;if(e){var n=U.chains.get(e.chainNamespace);n&&(null==n||null===(t=n.caipNetworks)||void 0===t||t.push(e))}},switchActiveNamespace:function(e){return(0,r.Z)(A().mark(function t(){var n,r,a,i;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:if(r=e!==D.state.activeChain,a=null===(n=D.getNetworkData(e))||void 0===n?void 0:n.caipNetwork,i=D.getCaipNetworkByNamespace(e,null==a?void 0:a.id),t.t0=r&&i,!t.t0){t.next=7;break}return t.next=7,D.switchActiveNetwork(i);case 7:case"end":return t.stop()}},t)}))()},switchActiveNetwork:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.throwOnFailure,a=void 0!==n&&n;return(0,r.Z)(A().mark(function t(){var n,r,i,o,c,u;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=D.state.activeChain){t.next=3;break}throw new Error("ChainController:switchActiveNetwork - namespace is required");case 3:if(i="AUTH"===_.O.getProviderId(U.activeChain),o=null===(n=D.getAccountData(r))||void 0===n?void 0:n.address,c=s.b.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e.chainNamespace),t.prev=4,!(o&&e.chainNamespace===r||i&&c)){t.next=11;break}if(u=m.j.get(e.chainNamespace)){t.next=9;break}throw new Error("Adapter not found");case 9:return t.next=11,u.switchNetwork({caipNetwork:e});case 11:D.setActiveCaipNetwork(e),t.next=18;break;case 14:if(t.prev=14,t.t0=t.catch(4),!a){t.next=18;break}throw t.t0;case 18:w.X.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:e.caipNetworkId}});case 19:case"end":return t.stop()}},t,null,[[4,14]])}))()},getConnectionControllerClient:function(e){var t=e||U.activeChain;if(!t)throw new Error("Chain is required to get connection controller client");var n=U.chains.get(t);if(null==n||!n.connectionControllerClient)throw new Error("ConnectionController client not set");return n.connectionControllerClient},getNetworkProp:function(e,t){var n,r=null===(n=U.chains.get(t))||void 0===n?void 0:n.networkState;if(r)return r[e]},getRequestedCaipNetworks:function(e){var t=U.chains.get(e),n=(null==t?void 0:t.networkState)||{},r=n.approvedCaipNetworkIds,a=void 0===r?[]:r,i=n.requestedCaipNetworks,o=void 0===i?[]:i;return h.j.sortRequestedNetworks(a,o).filter(function(e){return null==e?void 0:e.id})},getAllRequestedCaipNetworks:function(){var e=[];return U.chains.forEach(function(t){if(!t.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");var n=D.getRequestedCaipNetworks(t.namespace);e.push.apply(e,x(n))}),e},setRequestedCaipNetworks:function(e,t){D.setAdapterNetworkState(t,{requestedCaipNetworks:e});var n=D.getAllRequestedCaipNetworks().map(function(e){return e.chainNamespace}),r=Array.from(new Set(n));b.A.filterByNamespaces(r)},getAllApprovedCaipNetworkIds:function(){var e=[];return U.chains.forEach(function(t){if(!t.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");var n=D.getApprovedCaipNetworkIds(t.namespace);e.push.apply(e,x(n))}),e},getActiveCaipNetwork:function(e){var t,n;return e?null===(t=U.chains.get(e))||void 0===t||null===(n=t.networkState)||void 0===n?void 0:n.caipNetwork:U.activeCaipNetwork},getActiveCaipAddress:function(){return U.activeCaipAddress},getApprovedCaipNetworkIds:function(e){var t,n;return(null===(t=U.chains.get(e))||void 0===t||null===(n=t.networkState)||void 0===n?void 0:n.approvedCaipNetworkIds)||[]},setApprovedCaipNetworksData:function(e,t){D.setAdapterNetworkState(e,t)},checkIfSupportedNetwork:function(e,t){var n,r=t||(null===(n=U.activeCaipNetwork)||void 0===n?void 0:n.caipNetworkId),a=D.getRequestedCaipNetworks(e);return!a.length||(null==a?void 0:a.some(function(e){return e.caipNetworkId===r}))},checkIfSupportedChainId:function(e){var t;return!U.activeChain||(null===(t=D.getRequestedCaipNetworks(U.activeChain))||void 0===t?void 0:t.some(function(t){return t.id===e}))},checkIfSmartAccountEnabled:function(){var e,t,n=c.p.caipNetworkIdToNumber(null===(e=U.activeCaipNetwork)||void 0===e?void 0:e.caipNetworkId);if(!U.activeChain||!n)return!1;var r=(null===(t=d.get(u.$0.SMART_ACCOUNT_ENABLED_NETWORKS))||void 0===t?void 0:t.split(","))||[];return Boolean(null==r?void 0:r.includes(n.toString()))},showUnsupportedChainUI:function(){N.I.open({view:"UnsupportedChain"})},checkIfNamesSupported:function(){var e=U.activeCaipNetwork;return Boolean((null==e?void 0:e.chainNamespace)&&f.bq.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(e.chainNamespace))},resetNetwork:function(e){D.setAdapterNetworkState(e,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount:function(e){var t,n,r=e;if(!r)throw new Error("Chain is required to set account prop");var a=null===(t=D.state.chains.get(r))||void 0===t||null===(n=t.accountState)||void 0===n?void 0:n.preferredAccountType,i=I.h.state.defaultAccountTypes[r];U.activeCaipAddress=void 0,D.setChainAccountData(r,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:i||a,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),b.A.removeConnectorId(r)},setIsSwitchingNamespace:function(e){U.isSwitchingNamespace=e},getFirstCaipNetworkSupportsAuthConnector:function(){var e=[];if(U.chains.forEach(function(t){s.b.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(function(e){return e===t.namespace})&&t.namespace&&e.push(t.namespace)}),e.length>0){var t,n,r=e[0];return r?null===(t=U.chains.get(r))||void 0===t||null===(n=t.caipNetworks)||void 0===n?void 0:n[0]:void 0}},getAccountData:function(e){var t,n=e||U.activeChain;if(n)return null===(t=D.state.chains.get(n))||void 0===t?void 0:t.accountState},getNetworkData:function(e){var t,n=e||U.activeChain;if(n)return null===(t=D.state.chains.get(n))||void 0===t?void 0:t.networkState},getCaipNetworkByNamespace:function(e,t){var n,r,a;if(e){var i=D.state.chains.get(e);return(null==i||null===(n=i.caipNetworks)||void 0===n?void 0:n.find(function(e){return e.id.toString()===(null==t?void 0:t.toString())}))||(null==i||null===(r=i.networkState)||void 0===r?void 0:r.caipNetwork)||(null==i||null===(a=i.caipNetworks)||void 0===a?void 0:a[0])}},getRequestedCaipNetworkIds:function(){var e=b.A.state.filterByNamespace;return(e?[U.chains.get(e)]:Array.from(U.chains.values())).flatMap(function(e){return(null==e?void 0:e.caipNetworks)||[]}).map(function(e){return e.caipNetworkId})},getCaipNetworks:function(e){return e?D.getRequestedCaipNetworks(e):D.getAllRequestedCaipNetworks()},getCaipNetworkById:function(e,t){return M.getCaipNetworks(t).find(function(t){return t.id.toString()===e.toString()||t.caipNetworkId.toString()===e.toString()})},setLastConnectedSIWECaipNetwork:function(e){U.lastConnectedSIWECaipNetwork=e},getLastConnectedSIWECaipNetwork:function(){return U.lastConnectedSIWECaipNetwork},fetchTokenBalance:function(e){return(0,r.Z)(A().mark(function t(){var n,r,a,i,o,s,c,u;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=D.getAccountData()){t.next=3;break}return t.abrupt("return",[]);case 3:if(i=null===(n=D.state.activeCaipNetwork)||void 0===n?void 0:n.caipNetworkId,o=null===(r=D.state.activeCaipNetwork)||void 0===r?void 0:r.chainNamespace,s=D.state.activeCaipAddress,c=s?h.j.getPlainAddress(s):void 0,D.setAccountProp("balanceLoading",!0,o),!a.lastRetry||h.j.isAllowedRetry(a.lastRetry,30*f.bq.ONE_SEC_MS)){t.next=6;break}return t.abrupt("return",(D.setAccountProp("balanceLoading",!1,o),[]));case 6:if(t.prev=6,!(c&&i&&o)){t.next=12;break}return t.next=10,p.Q.getMyTokensWithBalance();case 10:return u=t.sent,t.abrupt("return",(D.setAccountProp("tokenBalance",u,o),D.setAccountProp("lastRetry",void 0,o),D.setAccountProp("balanceLoading",!1,o),u));case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(6),D.setAccountProp("lastRetry",Date.now(),o),null!=e&&e(t.t0),O.K.showError("Token Balance Unavailable");case 17:return t.prev=17,D.setAccountProp("balanceLoading",!1,o),t.finish(17);case 20:return t.abrupt("return",[]);case 21:case"end":return t.stop()}},t,null,[[6,14,17,20]])}))()},isCaipNetworkDisabled:function(e){var t,n=e.chainNamespace,r=Boolean(null===(t=D.getAccountData(n))||void 0===t?void 0:t.caipAddress),a=D.getAllApprovedCaipNetworkIds(),i=!1!==D.getNetworkProp("supportsAllNetworks",n),o=b.A.getConnectorId(n),c=b.A.getAuthConnector();return!(!r||i||o===s.b.CONNECTOR_ID.AUTH&&c||null!=a&&a.includes(e.caipNetworkId))}},D=(0,g.P)(M)},7551:function(e,t,n){"use strict";n.d(t,{l:function(){return F}});var r,a=n(8239),i=n(23250),o=n(31254),s=n(72290),c=n(32750),u=n(71166),l=n(15563),d=n(3628),p=n(63908),f=n(27297),h=n(68886),v=n(22167),g=n(40378),m=n(28153),y=n(53574),b=n(42916),w=function(e){return m.bq.DEFAULT_REMOTE_FEATURES.socials.includes(e)},N=function(e){var t=e.walletConnect,n=e.connector,r=e.closeModalOnConnect,a=void 0===r||r,i=e.redirectViewOnModalClose,o=void 0===i?"Connect":i,s=e.onOpen,u=e.onConnect;return new Promise(function(e,r){if(t&&f.A.setActiveConnector(n),null!=s&&s(y.j.isMobile()&&t),o)var i=v.I.subscribeKey("open",function(e){e||(g.P.state.view!==o&&g.P.replace(o),i(),r(new Error("Modal closed")))});var l=p.R.subscribeKey("activeCaipAddress",function(t){t&&(null!=u&&u(),a&&v.I.close(),l(),e(c.u.parseCaipAddress(t)))})})},I=function(e){var t,n=e.social,r=e.namespace,i=e.closeModalOnConnect,o=void 0===i||i,u=e.onOpenFarcaster,l=e.onConnect,d=!1,g=null,m=r||p.R.state.activeChain,w=p.R.subscribeKey("activeCaipAddress",function(e){e&&(o&&v.I.close(),w())});return new Promise(function(e,r){function i(e){return o.apply(this,arguments)}function o(){return(o=(0,a.Z)(A().mark(function a(o){var u,l,v,g;return A().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(null===(u=o.data)||void 0===u||!u.resultUri){a.next=24;break}if(o.origin!==s.b.SECURE_SITE_SDK_ORIGIN){a.next=23;break}if(window.removeEventListener("message",i,!1),a.prev=3,!(l=f.A.getAuthConnector(m))||d){a.next=16;break}return t&&t.close(),d=!0,v=o.data.resultUri,h.X.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:n}}),b.M.setConnectedSocialProvider(n),a.next=12,F.connectExternal({id:l.id,type:l.type,socialUri:v},l.chain);case 12:if(g=p.R.state.activeCaipAddress){a.next=15;break}return a.abrupt("return",void r(new Error("Failed to connect")));case 15:e(c.u.parseCaipAddress(g)),h.X.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:n}});case 16:a.next=21;break;case 18:a.prev=18,a.t0=a.catch(3),h.X.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:n,message:y.j.parseError(a.t0)}}),r(new Error("Failed to connect"));case 21:a.next=24;break;case 23:h.X.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:n,message:"Untrusted Origin"}});case 24:case"end":return a.stop()}},a,null,[[3,18]])}))).apply(this,arguments)}function w(){return(w=(0,a.Z)(A().mark(function e(){var a,o,c,b,w,E,k,x,C,N,I;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.X.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:n}}),"farcaster"!==n){e.next=17;break}if(null==u||u(),o=v.I.subscribeKey("open",function(e){!e&&"farcaster"===n&&(r(new Error("Popup closed")),null!=l&&l(),o())}),!(c=f.A.getAuthConnector())||null!==(a=p.R.getAccountData(m))&&void 0!==a&&a.farcasterUrl){e.next=15;break}return e.prev=4,e.next=7,c.provider.getFarcasterUri();case 7:b=e.sent,w=b.url,p.R.setAccountProp("farcasterUrl",w,m),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),r(new Error("Failed to connect to farcaster"));case 15:e.next=31;break;case 17:if(E=f.A.getAuthConnector(),g=y.j.returnOpenHref("".concat(s.b.SECURE_SITE_SDK_ORIGIN,"/loading"),"popupWindow","width=600,height=800,scrollbars=yes"),e.prev=19,!E){e.next=26;break}return e.next=23,E.provider.getSocialRedirectUri({provider:n});case 23:x=e.sent,C=x.uri,g&&C?(g.location.href=C,t=g,N=setInterval(function(){var e;(null===(e=t)||void 0===e?void 0:e.closed)&&!d&&(r(new Error("Popup closed")),clearInterval(N))},1e3),window.addEventListener("message",i,!1)):(null!==(k=g)&&void 0!==k&&k.close(),r(new Error("Failed to initiate social connection")));case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(19),r(new Error("Failed to initiate social connection")),null===(I=g)||void 0===I||I.close();case 31:case"end":return e.stop()}},e,null,[[4,12],[19,28]])}))).apply(this,arguments)}!function(){w.apply(this,arguments)}()})},_=function(e){var t=e.closeModalOnConnect,n=void 0===t||t,r=e.redirectViewOnModalClose,a=void 0===r?"Connect":r,i=e.onOpen,o=e.onConnect;return new Promise(function(e,t){if(null!=i&&i(),a)var r=v.I.subscribeKey("open",function(e){e||(g.P.state.view!==a&&g.P.replace(a),r(),t(new Error("Modal closed")))});var s=p.R.subscribeKey("activeCaipAddress",function(t){t&&(null!=o&&o(),n&&v.I.close(),s(),e(c.u.parseCaipAddress(t)))})})},S=function(e){return p.R.checkIfSmartAccountEnabled()&&(0,u.r9)(e)===d.y_.ACCOUNT_TYPES.EOA},T=n(79781),O=n(65298),R=n(71848),P=n(32628),U=n(56152),D=(0,i.sj)({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),L=(0,T.P)({state:D,subscribe:function(e){return(0,i.Ld)(D,function(){return e(D)})},setLastNetworkInView:function(e){D.lastNetworkInView=e},fetchTransactions:function(e){return(0,a.Z)(A().mark(function t(){var n,r,a,i;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new Error("Transactions can't be fetched without an accountAddress");case 2:return D.loading=!0,t.prev=3,t.next=6,R.L.fetchTransactions({account:e,cursor:D.next,chainId:p.R.state.activeCaipNetwork.caipNetworkId});case 6:n=t.sent,r=L.filterSpamTransactions(n.data),a=L.filterByConnectedChain(r),i=[].concat(x(D.transactions),x(a)),D.loading=!1,D.transactions=i,D.transactionsByYear=L.groupTransactionsByYearAndMonth(D.transactionsByYear,a),D.empty=0===i.length,D.next=n.next?n.next:void 0,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),h.X.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:e,projectId:P.h.state.projectId,cursor:D.next,isSmartAccount:(0,u.r9)(p.R.state.activeChain)===d.y_.ACCOUNT_TYPES.SMART_ACCOUNT}}),U.K.showError("Failed to fetch transactions"),D.loading=!1,D.empty=!0,D.next=void 0;case 16:case"end":return t.stop()}},t,null,[[3,13]])}))()},groupTransactionsByYearAndMonth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e;return t.forEach(function(e){var t,r,a=new Date(e.metadata.minedAt).getFullYear(),i=new Date(e.metadata.minedAt).getMonth(),o=null!==(t=n[a])&&void 0!==t?t:{},s=(null!==(r=o[i])&&void 0!==r?r:[]).filter(function(t){return t.id!==e.id});n[a]=E(E({},o),{},k({},i,[].concat(x(s),[e]).sort(function(e,t){return new Date(t.metadata.minedAt).getTime()-new Date(e.metadata.minedAt).getTime()})))}),n},filterSpamTransactions:function(e){return e.filter(function(e){var t;return!(null!==(t=e.transfers)&&void 0!==t&&t.every(function(e){var t;return!0===(null===(t=e.nft_info)||void 0===t?void 0:t.flags.is_spam)}))})},filterByConnectedChain:function(e){var t=p.R.state.activeCaipNetwork.caipNetworkId;return e.filter(function(e){return e.metadata.chain===t})},clearCursor:function(){D.next=void 0},resetTransactions:function(){D.transactions=[],D.transactionsByYear={},D.lastNetworkInView=void 0,D.loading=!1,D.empty=!1,D.next=void 0}},"API_ERROR"),B=(0,i.sj)({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,wcFetchingUri:!1,buffering:!1,status:"disconnected"}),j={state:B,subscribe:function(e){return(0,i.Ld)(B,function(){return e(B)})},subscribeKey:function(e,t){return(0,o.VW)(B,e,t)},_getClient:function(){return B._client},setClient:function(e){B._client=(0,i.iH)(e)},initialize:function(e){var t=e.filter(function(e){return Boolean(e.namespace)}).map(function(e){return e.namespace});F.syncStorageConnections(t)},syncStorageConnections:function(e){var t,n=b.M.getConnections(),r=M(null!=e?e:Array.from(p.R.state.chains.keys()));try{for(r.s();!(t=r.n()).done;){var a,i=t.value,o=null!==(a=n[i])&&void 0!==a?a:[],s=new Map(B.recentConnections);s.set(i,o),B.recentConnections=s}}catch(c){r.e(c)}finally{r.f()}},getConnections:function(e){var t;return e&&null!==(t=B.connections.get(e))&&void 0!==t?t:[]},hasAnyConnection:function(e){return Array.from(F.state.connections.values()).flatMap(function(e){return e}).some(function(t){return t.connectorId===e})},connectWalletConnect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cache,n=void 0===t?"auto":t;return(0,a.Z)(A().mark(function e(){var t,a,i,o,s;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(B.wcFetchingUri=!0,i=y.j.isTelegram()||y.j.isSafari()&&y.j.isIos(),!("always"===n||"auto"===n&&i)){e.next=18;break}if(!r){e.next=7;break}return e.next=6,r;case 6:return e.abrupt("return",void(r=void 0));case 7:if(y.j.isPairingExpired(null==B?void 0:B.wcPairingExpiry)){e.next=9;break}return e.abrupt("return",void(B.wcUri=B.wcUri));case 9:return r=null===(o=F._getClient())||void 0===o||null===(s=o.connectWalletConnect)||void 0===s?void 0:s.call(o).catch(function(){}),F.state.status="connecting",e.next=13,r;case 13:r=void 0,B.wcPairingExpiry=void 0,F.state.status="connected",e.next=20;break;case 18:return e.next=20,null===(t=F._getClient())||void 0===t||null===(a=t.connectWalletConnect)||void 0===a?void 0:a.call(t);case 20:case"end":return e.stop()}},e)}))()},connectExternal:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,a.Z)(A().mark(function r(){var a,i,o,s,c;return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,null===(a=F._getClient())||void 0===a||null===(i=a.connectExternal)||void 0===i?void 0:i.call(a,e);case 2:return s=r.sent,n&&p.R.setActiveNamespace(t),c=f.A.state.allConnectors.find(function(t){return t.id===(null==e?void 0:e.id)}),r.abrupt("return",(h.X.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:"AUTH"===e.type?"email":"browser",name:(null==c?void 0:c.name)||"Unknown",view:g.P.state.view,walletRank:null==c||null===(o=c.explorerWallet)||void 0===o?void 0:o.order}}),s));case 6:case"end":return r.stop()}},r)}))()},reconnectExternal:function(e){return(0,a.Z)(A().mark(function t(){var n,r,a;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(n=F._getClient())||void 0===n||null===(r=n.reconnectExternal)||void 0===r?void 0:r.call(n,e);case 2:(a=e.chain||p.R.state.activeChain)&&f.A.setConnectorId(e.id,a);case 4:case"end":return t.stop()}},t)}))()},setPreferredAccountType:function(e,t){return(0,a.Z)(A().mark(function n(){var r;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:if(v.I.setLoading(!0,p.R.state.activeChain),r=f.A.getAuthConnector(),n.t0=!r,n.t0){n.next=14;break}return p.R.setAccountProp("preferredAccountType",e,t),n.next=9,r.provider.setPreferredAccount(e);case 9:return b.M.setPreferredAccountTypes(Object.entries(p.R.state.chains).reduce(function(e,t){var n=C(t,2),r=n[0],a=(n[1],r),i=(0,u.r9)(a);return void 0!==i&&(e[a]=i),e},{})),n.next=12,F.reconnectExternal(r);case 12:v.I.setLoading(!1,p.R.state.activeChain),h.X.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:e,network:p.R.state.activeCaipNetwork.caipNetworkId||""}});case 14:case"end":return n.stop()}},n)}))()},signMessage:function(e){return(0,a.Z)(A().mark(function t(){var n;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(n=F._getClient())||void 0===n?void 0:n.signMessage(e));case 1:case"end":return t.stop()}},t)}))()},parseUnits:function(e,t){var n;return null===(n=F._getClient())||void 0===n?void 0:n.parseUnits(e,t)},formatUnits:function(e,t){var n;return null===(n=F._getClient())||void 0===n?void 0:n.formatUnits(e,t)},updateBalance:function(e){var t;return null===(t=F._getClient())||void 0===t?void 0:t.updateBalance(e)},sendTransaction:function(e){return(0,a.Z)(A().mark(function t(){var n;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(n=F._getClient())||void 0===n?void 0:n.sendTransaction(e));case 1:case"end":return t.stop()}},t)}))()},getCapabilities:function(e){return(0,a.Z)(A().mark(function t(){var n;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(n=F._getClient())||void 0===n?void 0:n.getCapabilities(e));case 1:case"end":return t.stop()}},t)}))()},grantPermissions:function(e){return(0,a.Z)(A().mark(function t(){var n;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(n=F._getClient())||void 0===n?void 0:n.grantPermissions(e));case 1:case"end":return t.stop()}},t)}))()},walletGetAssets:function(e){return(0,a.Z)(A().mark(function t(){var n,r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null!==(n=null===(r=F._getClient())||void 0===r?void 0:r.walletGetAssets(e))&&void 0!==n?n:{});case 1:case"end":return t.stop()}},t)}))()},estimateGas:function(e){return(0,a.Z)(A().mark(function t(){var n;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(n=F._getClient())||void 0===n?void 0:n.estimateGas(e));case 1:case"end":return t.stop()}},t)}))()},writeContract:function(e){return(0,a.Z)(A().mark(function t(){var n;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(n=F._getClient())||void 0===n?void 0:n.writeContract(e));case 1:case"end":return t.stop()}},t)}))()},writeSolanaTransaction:function(e){return(0,a.Z)(A().mark(function t(){var n;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(n=F._getClient())||void 0===n?void 0:n.writeSolanaTransaction(e));case 1:case"end":return t.stop()}},t)}))()},getEnsAddress:function(e){return(0,a.Z)(A().mark(function t(){var n;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(n=F._getClient())||void 0===n?void 0:n.getEnsAddress(e));case 1:case"end":return t.stop()}},t)}))()},getEnsAvatar:function(e){return(0,a.Z)(A().mark(function t(){var n;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(n=F._getClient())||void 0===n?void 0:n.getEnsAvatar(e));case 1:case"end":return t.stop()}},t)}))()},checkInstalled:function(e){var t,n;return(null===(t=F._getClient())||void 0===t||null===(n=t.checkInstalled)||void 0===n?void 0:n.call(t,e))||!1},resetWcConnection:function(){B.wcUri=void 0,B.wcPairingExpiry=void 0,B.wcLinking=void 0,B.recentWallet=void 0,B.wcFetchingUri=!1,B.status="disconnected",L.resetTransactions(),b.M.deleteWalletConnectDeepLink(),b.M.deleteRecentWallet(),O.I.set({connectingWallet:void 0})},resetUri:function(){B.wcUri=void 0,B.wcPairingExpiry=void 0,r=void 0,B.wcFetchingUri=!1,O.I.set({connectingWallet:void 0})},finalizeWcConnection:function(e){var t=F.state,n=t.wcLinking,r=t.recentWallet;n&&b.M.setWalletConnectDeepLink(n),r&&b.M.setAppKitRecent(r),e&&h.X.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:e,properties:{method:n?"mobile":"qrcode",name:g.P.state.data.wallet.name||"Unknown",view:g.P.state.view,walletRank:null==r?void 0:r.order}})},setWcBasic:function(e){B.wcBasic=e},setUri:function(e){B.wcUri=e,B.wcFetchingUri=!1,B.wcPairingExpiry=y.j.getPairingExpiry()},setWcLinking:function(e){B.wcLinking=e},setWcError:function(e){B.wcError=e,B.wcFetchingUri=!1,B.buffering=!1},setRecentWallet:function(e){B.recentWallet=e},setBuffering:function(e){B.buffering=e},setStatus:function(e){B.status=e},setIsSwitchingConnection:function(e){B.isSwitchingConnection=e},disconnect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.namespace,r=e.initialDisconnect;return(0,a.Z)(A().mark(function e(){var a;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(a=F._getClient())||void 0===a?void 0:a.disconnect({id:t,chainNamespace:n,initialDisconnect:r});case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new T.g("Failed to disconnect","INTERNAL_SDK_ERROR",e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])}))()},disconnectConnector:function(e){var t=e.id,n=e.namespace;return(0,a.Z)(A().mark(function e(){var r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(r=F._getClient())||void 0===r?void 0:r.disconnectConnector({id:t,namespace:n});case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new T.g("Failed to disconnect connector","INTERNAL_SDK_ERROR",e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])}))()},setConnections:function(e,t){var n=new Map(B.connections);n.set(t,e),B.connections=n},handleAuthAccountSwitch:function(e){var t=e.address,n=e.namespace;return(0,a.Z)(A().mark(function e(){var r,a,i,o,s;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=null===(r=p.R.getAccountData(n))||void 0===r||null===(a=r.user)||void 0===a||null===(i=a.accounts)||void 0===i?void 0:i.find(function(e){return"smartAccount"===e.type}),s=o&&o.address.toLowerCase()===t.toLowerCase()&&S(n)?"smartAccount":"eoa",e.next=3,F.setPreferredAccountType(s,n);case 3:case"end":return e.stop()}},e)}))()},handleActiveConnection:function(e){var t=e.connection,n=e.namespace,r=e.address;return(0,a.Z)(A().mark(function e(){var a,i,o;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=f.A.getConnectorById(t.connectorId),o=t.connectorId===s.b.CONNECTOR_ID.AUTH,i){e.next=3;break}throw new Error("No connector found for connection: ".concat(t.connectorId));case 3:if(!o){e.next=11;break}if(e.t1=r,!e.t1){e.next=8;break}return e.next=8,F.handleAuthAccountSwitch({address:r,namespace:n});case 8:e.t0=r,e.next=23;break;case 11:return e.next=13,F.connectExternal({id:i.id,type:i.type,provider:i.provider,address:r,chain:n},n);case 13:if(e.t3=a=e.sent,e.t2=null===e.t3,e.t2){e.next=17;break}e.t2=void 0===a;case 17:if(!e.t2){e.next=21;break}e.t4=void 0,e.next=22;break;case 21:e.t4=a.address;case 22:e.t0=e.t4;case 23:return e.abrupt("return",e.t0);case 24:case"end":return e.stop()}},e)}))()},handleDisconnectedConnection:function(e){var t=e.connection,n=e.namespace,r=e.address,i=e.closeModalOnConnect;return(0,a.Z)(A().mark(function e(){var a,o,c,u,l,d,p,h,m,y,b,E,k,x;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=f.A.getConnectorById(t.connectorId),u=null===(a=t.auth)||void 0===a||null===(o=a.name)||void 0===o?void 0:o.toLowerCase(),l=t.connectorId===s.b.CONNECTOR_ID.AUTH,d=t.connectorId===s.b.CONNECTOR_ID.WALLET_CONNECT,c){e.next=3;break}throw new Error("No connector found for connection: ".concat(t.connectorId));case 3:if(!l){e.next=19;break}if(!u||!w(u)){e.next=12;break}return e.next=7,I({social:u,closeModalOnConnect:i,onOpenFarcaster:function(){v.I.open({view:"ConnectingFarcaster"})},onConnect:function(){g.P.replace("ProfileWallets")}});case 7:h=e.sent,m=h.address,p=m,e.next=17;break;case 12:return e.next=14,_({closeModalOnConnect:i,onOpen:function(){v.I.open({view:"EmailLogin"})},onConnect:function(){g.P.replace("ProfileWallets")}});case 14:y=e.sent,b=y.address,p=b;case 17:e.next=31;break;case 19:if(!d){e.next=27;break}return e.next=22,N({walletConnect:!0,connector:c,closeModalOnConnect:i,onOpen:function(e){var t=e?"AllWallets":"ConnectingWalletConnect";v.I.state.open?g.P.push(t):v.I.open({view:t})},onConnect:function(){g.P.replace("ProfileWallets")}});case 22:E=e.sent,k=E.address,p=k,e.next=31;break;case 27:return e.next=29,F.connectExternal({id:c.id,type:c.type,provider:c.provider,chain:n},n);case 29:(x=e.sent)&&(p=x.address);case 31:if(e.t0=l&&r,!e.t0){e.next=35;break}return e.next=35,F.handleAuthAccountSwitch({address:r,namespace:n});case 35:return e.abrupt("return",p);case 36:case"end":return e.stop()}},e)}))()},switchConnection:function(e){var t=e.connection,n=e.address,r=e.namespace,i=e.closeModalOnConnect,o=e.onChange;return(0,a.Z)(A().mark(function e(){var a,s,u,d,f,h,v,g,m;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(u=null===(a=p.R.getAccountData(r))||void 0===a?void 0:a.caipAddress)&&(d=c.u.parseCaipAddress(u),f=d.address,s=f),h=l.f.getConnectionStatus(t,r),e.t0=h,e.next="connected"===e.t0||"active"===e.t0?6:"disconnected"===e.t0?11:16;break;case 6:return e.next=8,F.handleActiveConnection({connection:t,namespace:r,address:n});case 8:return v=e.sent,s&&v&&(g=v.toLowerCase()!==s.toLowerCase(),null==o||o({address:v,namespace:r,hasSwitchedAccount:g,hasSwitchedWallet:"active"===h})),e.abrupt("break",17);case 11:return e.next=13,F.handleDisconnectedConnection({connection:t,namespace:r,address:n,closeModalOnConnect:i});case 13:return(m=e.sent)&&(null==o||o({address:m,namespace:r,hasSwitchedAccount:!0,hasSwitchedWallet:!0})),e.abrupt("break",17);case 16:throw new Error("Invalid connection status: ".concat(h));case 17:case"end":return e.stop()}},e)}))()}},F=(0,T.P)(j)},27297:function(e,t,n){"use strict";n.d(t,{A:function(){return S}});var r=n(8239),a=n(23250),i=n(31254),o=n(19579),s=n(72290),c=n(84853),u=n(3628),l=n(71166),d=n(38720),p=n(67529),f=n(42916),h=n(79781),v=n(91951),g=n(63908),m=n(22167),y=n(32628),b=n(40378),w=n(50039),N=Object.fromEntries(o.F.map(function(e){return[e,void 0]})),I=Object.fromEntries(o.F.map(function(e){return[e,!0]})),_=(0,a.sj)({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:N,filterByNamespaceMap:I}),S=(0,h.P)({state:_,subscribe:function(e){return(0,a.Ld)(_,function(){e(_)})},subscribeKey:function(e,t){return(0,i.VW)(_,e,t)},initialize:function(e){e.forEach(function(e){var t=f.M.getConnectedConnectorId(e);t&&S.setConnectorId(t,e)})},setActiveConnector:function(e){e&&(_.activeConnector=(0,a.iH)(e))},setConnectors:function(e){e.filter(function(e){return!_.allConnectors.some(function(t){return t.id===e.id&&S.getConnectorName(t.name)===S.getConnectorName(e.name)&&t.chain===e.chain})}).forEach(function(e){"MULTI_CHAIN"!==e.type&&_.allConnectors.push((0,a.iH)(e))});var t=S.getEnabledNamespaces(),n=S.getEnabledConnectors(t);_.connectors=S.mergeMultiChainConnectors(n)},filterByNamespaces:function(e){Object.keys(_.filterByNamespaceMap).forEach(function(e){_.filterByNamespaceMap[e]=!1}),e.forEach(function(e){_.filterByNamespaceMap[e]=!0}),S.updateConnectorsForEnabledNamespaces()},filterByNamespace:function(e,t){_.filterByNamespaceMap[e]=t,S.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces:function(){var e=S.getEnabledNamespaces(),t=S.getEnabledConnectors(e),n=S.areAllNamespacesEnabled();_.connectors=S.mergeMultiChainConnectors(t),n?v.Q.clearFilterByNamespaces():v.Q.filterByNamespaces(e)},getEnabledNamespaces:function(){return Object.entries(_.filterByNamespaceMap).filter(function(e){var t=C(e,2);t[0];return t[1]}).map(function(e){return C(e,1)[0]})},getEnabledConnectors:function(e){return _.allConnectors.filter(function(t){return e.includes(t.chain)})},areAllNamespacesEnabled:function(){return Object.values(_.filterByNamespaceMap).every(function(e){return e})},mergeMultiChainConnectors:function(e){var t=S.generateConnectorMapByName(e),n=[];return t.forEach(function(e){var t=e[0],r=(null==t?void 0:t.id)===s.b.CONNECTOR_ID.AUTH;e.length>1&&t?n.push({name:t.name,imageUrl:t.imageUrl,imageId:t.imageId,connectors:x(e),type:r?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(null==t?void 0:t.id)||""}):t&&n.push(t)}),n},generateConnectorMapByName:function(e){var t=new Map;return e.forEach(function(e){var n=e.name,r=S.getConnectorName(n);if(r){var a=t.get(r)||[];a.find(function(t){return t.chain===e.chain})||a.push(e),t.set(r,a)}}),t},getConnectorName:function(e){return e&&({"Trust Wallet":"Trust"}[e]||e)},getUniqueConnectorsByName:function(e){var t=[];return e.forEach(function(e){t.find(function(t){return t.chain===e.chain})||t.push(e)}),t},addConnector:function(e){if(e.id===s.b.CONNECTOR_ID.AUTH){var t,n,r,i=e,o=(0,a.CO)(y.h.state),u=w.u.getSnapshot().themeMode,l=w.u.getSnapshot().themeVariables;null!=i&&null!==(t=i.provider)&&void 0!==t&&null!==(n=t.syncDappData)&&void 0!==n&&n.call(t,{metadata:o.metadata,sdkVersion:o.sdkVersion,projectId:o.projectId,sdkType:o.sdkType}),null!=i&&null!==(r=i.provider)&&void 0!==r&&r.syncTheme({themeMode:u,themeVariables:l,w3mThemeVariables:(0,c.t)(l,u)}),S.setConnectors([e])}else S.setConnectors([e])},getAuthConnector:function(e){var t,n=e||g.R.state.activeChain,r=_.connectors.find(function(e){return e.id===s.b.CONNECTOR_ID.AUTH});if(r)return null!=r&&null!==(t=r.connectors)&&void 0!==t&&t.length?r.connectors.find(function(e){return e.chain===n}):r},getAnnouncedConnectorRdns:function(){return _.connectors.filter(function(e){return"ANNOUNCED"===e.type}).map(function(e){var t;return null===(t=e.info)||void 0===t?void 0:t.rdns})},getConnectorById:function(e){return d.C.sortConnectorsByPriority(_.allConnectors).find(function(t){return t.id===e})},getConnector:function(e){var t=e.id,n=e.namespace||g.R.state.activeChain,r=_.allConnectors.filter(function(e){return e.chain===n});return d.C.sortConnectorsByPriority(r).find(function(e){return e.id===t||e.explorerId===t})},syncIfAuthConnector:function(e){var t,n;if("AUTH"===e.id){var r=e,i=(0,a.CO)(y.h.state),o=w.u.getSnapshot().themeMode,s=w.u.getSnapshot().themeVariables;null!=r&&null!==(t=r.provider)&&void 0!==t&&null!==(n=t.syncDappData)&&void 0!==n&&n.call(t,{metadata:i.metadata,sdkVersion:i.sdkVersion,sdkType:i.sdkType,projectId:i.projectId}),r.provider.syncTheme({themeMode:o,themeVariables:s,w3mThemeVariables:(0,c.t)(s,o)})}},getConnectorsByNamespace:function(e){var t=_.allConnectors.filter(function(t){return t.chain===e});return S.mergeMultiChainConnectors(t)},canSwitchToSmartAccount:function(e){return g.R.checkIfSmartAccountEnabled()&&(0,l.r9)(e)===u.y_.ACCOUNT_TYPES.EOA},selectWalletConnector:function(e){var t=b.P.state.data.redirectView,n=g.R.state.activeChain,r=n?S.getConnector({id:e.id,namespace:n}):void 0;p.R.handleMobileDeeplinkRedirect((null==r?void 0:r.explorerId)||e.id,g.R.state.activeChain),r?b.P.push("ConnectingExternal",{connector:r,wallet:e,redirectView:t}):b.P.push("ConnectingWalletConnect",{wallet:e,redirectView:t})},getConnectors:function(e){return e?S.getConnectorsByNamespace(e):S.mergeMultiChainConnectors(_.allConnectors)},setFilterByNamespace:function(e){_.filterByNamespace=e,_.connectors=S.getConnectors(e),v.Q.setFilterByNamespace(e)},setConnectorId:function(e,t){e&&(_.activeConnectorIds=E(E({},_.activeConnectorIds),{},k({},t,e)),f.M.setConnectedConnectorId(t,e))},removeConnectorId:function(e){_.activeConnectorIds=E(E({},_.activeConnectorIds),{},k({},e,void 0)),f.M.deleteConnectedConnectorId(e)},getConnectorId:function(e){if(e)return _.activeConnectorIds[e]},isConnected:function(e){return e?Boolean(_.activeConnectorIds[e]):Object.values(_.activeConnectorIds).some(function(e){return Boolean(e)})},resetConnectorIds:function(){_.activeConnectorIds=E({},N)},extendConnectorsWithExplorerWallets:function(e){_.allConnectors.forEach(function(t){var n=e.find(function(e){var n;return e.id===t.id||e.rdns&&e.rdns===(null===(n=t.info)||void 0===n?void 0:n.rdns)});n&&(t.explorerWallet=n)});var t=S.getEnabledNamespaces(),n=S.getEnabledConnectors(t);_.connectors=S.mergeMultiChainConnectors(n)},connect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.Z)(A().mark(function t(){var n;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.namespace,t.abrupt("return",(S.setFilterByNamespace(n),b.P.push("Connect",{addWalletForNamespace:n}),new Promise(function(e,t){if(n)var r=g.R.subscribeChainProp("accountState",function(t){(null==t?void 0:t.caipAddress)&&(e({caipAddress:null==t?void 0:t.caipAddress}),r())},n),a=m.I.subscribeKey("open",function(e){e||(t(new Error("Modal closed")),a())});else var i=g.R.subscribeKey("activeCaipAddress",function(t){t&&(e({caipAddress:t}),i())}),o=m.I.subscribeKey("open",function(e){e||(t(new Error("Modal closed")),o())})})));case 2:case"end":return t.stop()}},t)}))()}})},68886:function(e,t,n){"use strict";n.d(t,{X:function(){return p}});var r=n(23250),a=n(53574),i=n(44329),o=n(63908),s=n(32628),c=a.j.getAnalyticsUrl(),u=new i.V({baseUrl:c,clientId:null}),l=["MODAL_CREATED"],d=(0,r.sj)({timestamp:Date.now(),lastFlush:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"},pendingEvents:[],subscribedToVisibilityChange:!1,walletImpressions:[]}),p={state:d,subscribe:function(e){return(0,r.Ld)(d,function(){return e(d)})},getSdkProperties:function(){var e=s.h.state;return{projectId:e.projectId,st:e.sdkType,sv:e.sdkVersion||"html-wagmi-4.2.2"}},shouldFlushEvents:function(){var e=JSON.stringify(d.pendingEvents).length/1024>45,t=d.lastFlush+1e4<Date.now();return e||t},_setPendingEvent:function(e){try{var t,n,r=null===(t=o.R.getAccountData())||void 0===t?void 0:t.address;if("address"in e.data&&e.data.address&&(r=e.data.address),l.includes(e.data.event)||"undefined"==typeof window)return;var i=null===(n=o.R.getActiveCaipNetwork())||void 0===n?void 0:n.caipNetworkId;this.state.pendingEvents.push({eventId:a.j.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:e.timestamp,props:E(E({},e.data),{},{address:r,properties:E(E({},"properties"in e.data?e.data.properties:{}),{},{caipNetworkId:i})})}),d.reportedErrors.FORBIDDEN=!1,p.shouldFlushEvents()&&p._submitPendingEvents()}catch(r){console.warn("_setPendingEvent",r)}},sendEvent:function(e){d.timestamp=Date.now(),d.data=e,(s.h.state.features.analytics||["INITIALIZE","CONNECT_SUCCESS","SOCIAL_LOGIN_SUCCESS"].includes(e.event))&&p._setPendingEvent(d),this.subscribeToFlushTriggers()},sendWalletImpressionEvent:function(e){d.walletImpressions.push(e)},_transformPendingEventsForBatch:function(e){try{return e.filter(function(e){return"WALLET_IMPRESSION_V2"!==e.props.event})}catch(t){return e}},_submitPendingEvents:function(){if(d.lastFlush=Date.now(),0!==d.pendingEvents.length||0!==d.walletImpressions.length)try{var e=p._transformPendingEventsForBatch(d.pendingEvents);d.walletImpressions.length&&e.push({eventId:a.j.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:Date.now(),props:{type:"track",event:"WALLET_IMPRESSION_V2",items:x(d.walletImpressions)}}),u.sendBeacon({path:"/batch",params:p.getSdkProperties(),body:e}),d.reportedErrors.FORBIDDEN=!1,d.pendingEvents=[],d.walletImpressions=[]}catch(t){d.reportedErrors.FORBIDDEN=!0}},subscribeToFlushTriggers:function(){var e,t,n,r,a,i;d.subscribedToVisibilityChange||"undefined"!=typeof document&&(d.subscribedToVisibilityChange=!0,null!==(e=document)&&void 0!==e&&null!==(t=e.addEventListener)&&void 0!==t&&t.call(e,"visibilitychange",function(){"hidden"===document.visibilityState&&p._submitPendingEvents()}),null!==(n=document)&&void 0!==n&&null!==(r=n.addEventListener)&&void 0!==r&&r.call(n,"freeze",function(){p._submitPendingEvents()}),null!==(a=window)&&void 0!==a&&null!==(i=a.addEventListener)&&void 0!==i&&i.call(a,"pagehide",function(){p._submitPendingEvents()}),setInterval(function(){p._submitPendingEvents()},1e4))}}},22167:function(e,t,n){"use strict";n.d(t,{I:function(){return b}});var r=n(8239),a=n(23250),i=n(31254),o=n(53574),s=n(72290),c=n(63908),u=n(27297),l=n(40378),d=function(e){var t,n,r,a=e.network,i=e.ignoreSwitchConfirmation,o=void 0!==i&&i,d=c.R.state.activeChain,p=l.P.state.data;if(a.id!==(null===(t=c.R.state.activeCaipNetwork)||void 0===t?void 0:t.id)){var f=Boolean(null===(n=c.R.getAccountData(d))||void 0===n?void 0:n.address),h=Boolean(null===(r=c.R.getAccountData(a.chainNamespace))||void 0===r?void 0:r.address),v=a.chainNamespace!==d,g=u.A.getConnectorId(d)===s.b.CONNECTOR_ID.AUTH,m=s.b.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(function(e){return e===a.chainNamespace});o||g&&m?l.P.push("SwitchNetwork",E(E({},p),{},{network:a})):f&&v&&!h?l.P.push("SwitchActiveChain",{switchToChain:a.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:a}):l.P.push("SwitchNetwork",E(E({},p),{},{network:a}))}},p=n(79781),f=n(91951),h=n(7551),v=n(68886),g=n(32628),m=n(65298),y=(0,a.sj)({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),b=(0,p.P)({state:y,subscribe:function(e){return(0,a.Ld)(y,function(){return e(y)})},subscribeKey:function(e,t){return(0,i.VW)(y,e,t)},open:function(e){return(0,r.Z)(A().mark(function t(){var n,r,a,i,s,p,w;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null==e?void 0:e.namespace,a=r&&r!==c.R.state.activeChain,i=null===(n=c.R.getAccountData(null==e?void 0:e.namespace))||void 0===n?void 0:n.caipAddress,s=c.R.state.noAdapters,!h.l.state.wcBasic){t.next=5;break}f.Q.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1,fetchWalletRanks:!1}),t.next=7;break;case 5:return t.next=7,f.Q.prefetch();case 7:if(u.A.setFilterByNamespace(null==e?void 0:e.namespace),b.setLoading(!0,r),!r||!a){t.next=22;break}if(w=(null===(p=c.R.getNetworkData(r))||void 0===p?void 0:p.caipNetwork)||c.R.getRequestedCaipNetworks(r)[0],t.t0=w,!t.t0){t.next=20;break}if(!s){t.next=19;break}return t.next=16,c.R.switchActiveNetwork(w);case 16:l.P.push("ConnectingWalletConnectBasic"),t.next=20;break;case 19:d({network:w,ignoreSwitchConfirmation:!0});case 20:t.next=23;break;case 22:g.h.state.manualWCControl||s&&!i?o.j.isMobile()?l.P.reset("AllWallets"):l.P.reset("ConnectingWalletConnectBasic"):null!=e&&e.view?l.P.reset(e.view,e.data):l.P.reset(i?"Account":"Connect");case 23:y.open=!0,m.I.set({open:!0}),v.X.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:Boolean(i)}});case 24:case"end":return t.stop()}},t)}))()},close:function(){var e=g.h.state.enableEmbedded,t=Boolean(c.R.state.activeCaipAddress);y.open&&v.X.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:t}}),y.open=!1,l.P.reset("Connect"),b.clearLoading(),e?t?l.P.replace("Account"):l.P.push("Connect"):m.I.set({open:!1}),h.l.resetUri()},setLoading:function(e,t){t&&y.loadingNamespaceMap.set(t,e),y.loading=e,m.I.set({loading:e})},clearLoading:function(){y.loadingNamespaceMap.clear(),y.loading=!1,m.I.set({loading:!1})},shake:function(){y.shake||(y.shake=!0,setTimeout(function(){y.shake=!1},500))}})},32628:function(e,t,n){"use strict";n.d(t,{h:function(){return u}});var r=n(23250),a=n(31254),i=n(28153),o=n(53574),s=n(57564),c=(0,r.sj)({features:i.bq.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:i.bq.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{},enableMobileFullScreen:!1,coinbasePreference:"all"}),u={state:c,subscribeKey:function(e,t){return(0,a.VW)(c,e,t)},setOptions:function(e){Object.assign(c,e)},setRemoteFeatures:function(e){var t,n;if(e){var r=E(E({},c.remoteFeatures),e);c.remoteFeatures=r,null!==(t=c.remoteFeatures)&&void 0!==t&&t.socials&&(c.remoteFeatures.socials=s.$.filterSocialsByPlatform(c.remoteFeatures.socials)),(null===(n=c.features)||void 0===n?void 0:n.pay)&&(c.remoteFeatures.email=!1,c.remoteFeatures.socials=!1)}},setFeatures:function(e){var t;if(e){c.features||(c.features=i.bq.DEFAULT_FEATURES);var n=E(E({},c.features),e);c.features=n,(null===(t=c.features)||void 0===t?void 0:t.pay)&&c.remoteFeatures&&(c.remoteFeatures.email=!1,c.remoteFeatures.socials=!1)}},setProjectId:function(e){c.projectId=e},setCustomRpcUrls:function(e){c.customRpcUrls=e},setAllWallets:function(e){c.allWallets=e},setIncludeWalletIds:function(e){c.includeWalletIds=e},setExcludeWalletIds:function(e){c.excludeWalletIds=e},setFeaturedWalletIds:function(e){c.featuredWalletIds=e},setTokens:function(e){c.tokens=e},setTermsConditionsUrl:function(e){c.termsConditionsUrl=e},setPrivacyPolicyUrl:function(e){c.privacyPolicyUrl=e},setCustomWallets:function(e){c.customWallets=e},setIsSiweEnabled:function(e){c.isSiweEnabled=e},setIsUniversalProvider:function(e){c.isUniversalProvider=e},setSdkVersion:function(e){c.sdkVersion=e},setMetadata:function(e){c.metadata=e},setDisableAppend:function(e){c.disableAppend=e},setEIP6963Enabled:function(e){c.enableEIP6963=e},setDebug:function(e){c.debug=e},setEnableWalletGuide:function(e){c.enableWalletGuide=e},setEnableAuthLogger:function(e){c.enableAuthLogger=e},setEnableWallets:function(e){c.enableWallets=e},setPreferUniversalLinks:function(e){c.experimental_preferUniversalLinks=e},setSIWX:function(e){if(e)for(var t=0,n=Object.entries(i.bq.SIWX_DEFAULTS);t<n.length;t++){var r,a=C(n[t],2),o=a[0],s=a[1];null!==(r=e[o])&&void 0!==r||(e[o]=s)}c.siwx=e},setConnectMethodsOrder:function(e){c.features=E(E({},c.features),{},{connectMethodsOrder:e})},setWalletFeaturesOrder:function(e){c.features=E(E({},c.features),{},{walletFeaturesOrder:e})},setSocialsOrder:function(e){c.remoteFeatures=E(E({},c.remoteFeatures),{},{socials:e})},setCollapseWallets:function(e){c.features=E(E({},c.features),{},{collapseWallets:e})},setEnableEmbedded:function(e){c.enableEmbedded=e},setAllowUnsupportedChain:function(e){c.allowUnsupportedChain=e},setManualWCControl:function(e){c.manualWCControl=e},setEnableNetworkSwitch:function(e){c.enableNetworkSwitch=e},setEnableMobileFullScreen:function(e){c.enableMobileFullScreen=o.j.isMobile()&&e},setEnableReconnect:function(e){c.enableReconnect=e},setCoinbasePreference:function(e){c.coinbasePreference=e},setDefaultAccountTypes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.entries(e).forEach(function(e){var t=C(e,2),n=t[0],r=t[1];r&&(c.defaultAccountTypes[n]=r)})},setUniversalProviderConfigOverride:function(e){c.universalProviderConfigOverride=e},getUniversalProviderConfigOverride:function(){return c.universalProviderConfigOverride},getSnapshot:function(){return(0,r.CO)(c)}}},65023:function(e,t,n){"use strict";n.d(t,{O:function(){return s}});var r=n(23250),a=n(31254),i={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0,sui:void 0,stacks:void 0,ton:void 0},o=(0,r.sj)({providers:E({},i),providerIds:E({},i)}),s={state:o,subscribeKey:function(e,t){return(0,a.VW)(o,e,t)},subscribe:function(e){return(0,r.Ld)(o,function(){e(o)})},subscribeProviders:function(e){return(0,r.Ld)(o.providers,function(){return e(o.providers)})},setProvider:function(e,t){e&&t&&(o.providers[e]=(0,r.iH)(t))},getProvider:function(e){if(e)return o.providers[e]},setProviderId:function(e,t){t&&(o.providerIds[e]=t)},getProviderId:function(e){if(e)return o.providerIds[e]},reset:function(){o.providers=E({},i),o.providerIds=E({},i)},resetChain:function(e){o.providers[e]=void 0,o.providerIds[e]=void 0}}},65298:function(e,t,n){"use strict";n.d(t,{I:function(){return o}});var r=n(23250),a=n(31254),i=(0,r.sj)({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1,connectingWallet:void 0}),o={state:i,subscribe:function(e){return(0,r.Ld)(i,function(){return e(i)})},subscribeOpen:function(e){return(0,a.VW)(i,"open",e)},set:function(e){Object.assign(i,E(E({},i),e))}}},40378:function(e,t,n){"use strict";n.d(t,{P:function(){return f}});var r=n(23250),a=n(31254),i=n(79781),o=n(91951),s=n(63908),c=n(27297),u=n(22167),l=n(32628),d=["ConnectingExternal","ConnectingMultiChain","ConnectingSocial","ConnectingFarcaster"],p=(0,r.sj)({view:"Connect",history:["Connect"],transactionStack:[]}),f=(0,i.P)({state:p,subscribeKey:function(e,t){return(0,a.VW)(p,e,t)},pushTransactionStack:function(e){p.transactionStack.push(e)},popTransactionStack:function(e){var t=p.transactionStack.pop();if(t){var n=t.onSuccess,r=t.onError,a=t.onCancel;switch(e){case"success":null==n||n();break;case"error":null!=r&&r(),f.goBack();break;case"cancel":null!=a&&a(),f.goBack()}}},push:function(e,t){var n=e,r=t;o.Q.state.plan.hasExceededUsageLimit&&d.includes(e)&&(n="UsageExceeded",r=void 0),n!==p.view&&(p.view=n,p.history.push(n),p.data=r)},reset:function(e,t){p.view=e,p.history=[e],p.data=t},replace:function(e,t){p.history.at(-1)===e||(p.view=e,p.history[p.history.length-1]=e,p.data=t)},goBack:function(){var e,t,n=s.R.state.activeCaipAddress,a=!n&&"ConnectingFarcaster"===f.state.view;if(p.history.length>1){p.history.pop();var i=C(p.history.slice(-1),1)[0];i&&(p.view=n&&"Connect"===i?"Account":i)}else u.I.close();null!==(e=p.data)&&void 0!==e&&e.wallet&&(p.data.wallet=void 0),null!==(t=p.data)&&void 0!==t&&t.redirectView&&(p.data.redirectView=void 0),setTimeout(function(){if(a){var e,t,n;s.R.setAccountProp("farcasterUrl",void 0,s.R.state.activeChain);var i=c.A.getAuthConnector();null==i||null===(e=i.provider)||void 0===e||e.reload();var o=(0,r.CO)(l.h.state);null==i||null===(t=i.provider)||void 0===t||null===(n=t.syncDappData)||void 0===n||n.call(t,{metadata:o.metadata,sdkVersion:o.sdkVersion,projectId:o.projectId,sdkType:o.sdkType})}},100)},goBackToIndex:function(e){if(p.history.length>1){p.history=p.history.slice(0,e+1);var t=C(p.history.slice(-1),1)[0];t&&(p.view=t)}},goBackOrCloseModal:function(){f.state.history.length>1?f.goBack():u.I.close()}})},26131:function(e,t,n){"use strict";n.d(t,{S:function(){return x}});var r=n(8239),a=n(23250),i=n(31254),o=n(5546),s=n(86482),c=n(72290),u=n(64817),l=n(3628),d=n(56276),p=n(71166),f=n(28153),h=n(53574),v=n(44926),g=n(79781),m=n(63908),y=n(7551),b=n(68886),w=n(40378),E=n(56152),k=(0,a.sj)({tokenBalances:[],loading:!1}),x=(0,g.P)({state:k,subscribe:function(e){return(0,a.Ld)(k,function(){return e(k)})},subscribeKey:function(e,t){return(0,i.VW)(k,e,t)},setToken:function(e){e&&(k.token=(0,a.iH)(e))},setTokenAmount:function(e){k.sendTokenAmount=e},setReceiverAddress:function(e){k.receiverAddress=e},setReceiverProfileImageUrl:function(e){k.receiverProfileImageUrl=e},setReceiverProfileName:function(e){k.receiverProfileName=e},setNetworkBalanceInUsd:function(e){k.networkBalanceInUSD=e},setLoading:function(e){k.loading=e},getSdkEventProperties:function(e){var t,n;return{message:h.j.parseError(e),isSmartAccount:(0,p.r9)(m.R.state.activeChain)===l.y_.ACCOUNT_TYPES.SMART_ACCOUNT,token:(null===(t=k.token)||void 0===t?void 0:t.symbol)||"",amount:null!==(n=k.sendTokenAmount)&&void 0!==n?n:0,network:m.R.state.activeCaipNetwork.caipNetworkId||""}},sendToken:function(){return(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=(x.setLoading(!0),m.R.state.activeCaipNetwork.chainNamespace),e.next="eip155"===e.t0?4:"solana"===e.t0?7:10;break;case 4:return e.next=6,x.sendEvmToken();case 6:case 9:return e.abrupt("return",void e.sent);case 7:return e.next=9,x.sendSolanaToken();case 10:throw new Error("Unsupported chain");case 11:e.next=16;break;case 13:throw e.prev=13,e.t1=e.catch(0),o.jD.isUserRejectedRequestError(e.t1)?new o.ab(e.t1):e.t1;case 16:return e.prev=16,x.setLoading(!1),e.finish(16);case 19:case"end":return e.stop()}},e,null,[[0,13,16,19]])}))()},sendEvmToken:function(){return(0,r.Z)(A().mark(function e(){var t,n,r,a,i,o,s;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=m.R.state.activeChain){e.next=3;break}throw new Error("SendController:sendEvmToken - activeChainNamespace is required");case 3:if(r=(0,p.r9)(n),x.state.sendTokenAmount&&x.state.receiverAddress){e.next=6;break}throw new Error("An amount and receiver address are required");case 6:if(x.state.token){e.next=8;break}throw new Error("A token is required");case 8:if(null===(t=x.state.token)||void 0===t||!t.address){e.next=17;break}return b.X.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:r===l.y_.ACCOUNT_TYPES.SMART_ACCOUNT,token:x.state.token.address,amount:x.state.sendTokenAmount,network:m.R.state.activeCaipNetwork.caipNetworkId||""}}),e.next=12,x.sendERC20Token({receiverAddress:x.state.receiverAddress,tokenAddress:x.state.token.address,sendTokenAmount:x.state.sendTokenAmount,decimals:x.state.token.quantity.decimals});case 12:a=e.sent,(i=a.hash)&&(k.hash=i),e.next=23;break;case 17:return b.X.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:r===l.y_.ACCOUNT_TYPES.SMART_ACCOUNT,token:x.state.token.symbol||"",amount:x.state.sendTokenAmount,network:m.R.state.activeCaipNetwork.caipNetworkId||""}}),e.next=20,x.sendNativeToken({receiverAddress:x.state.receiverAddress,sendTokenAmount:x.state.sendTokenAmount,decimals:x.state.token.quantity.decimals});case 20:o=e.sent,(s=o.hash)&&(k.hash=s);case 23:case"end":return e.stop()}},e)}))()},fetchTokenBalance:function(e){return(0,r.Z)(A().mark(function t(){var n,r,a,i,o,s,c;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(k.loading=!0,a=m.R.state.activeCaipNetwork.caipNetworkId,i=m.R.state.activeCaipNetwork.chainNamespace,o=null!==(n=null===(r=m.R.getAccountData(m.R.state.activeChain))||void 0===r?void 0:r.caipAddress)&&void 0!==n?n:m.R.state.activeCaipAddress,s=o?h.j.getPlainAddress(o):void 0,!k.lastRetry||h.j.isAllowedRetry(k.lastRetry,30*f.bq.ONE_SEC_MS)){t.next=4;break}return t.abrupt("return",(k.loading=!1,[]));case 4:if(t.prev=4,!(s&&a&&i)){t.next=10;break}return t.next=8,d.Q.getMyTokensWithBalance();case 8:return c=t.sent,t.abrupt("return",(k.tokenBalances=c,k.lastRetry=void 0,c));case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(4),k.lastRetry=Date.now(),null!=e&&e(t.t0),E.K.showError("Token Balance Unavailable");case 15:return t.prev=15,k.loading=!1,t.finish(15);case 18:return t.abrupt("return",[]);case 19:case"end":return t.stop()}},t,null,[[4,12,15,18]])}))()},fetchNetworkBalance:function(){if(0!==k.tokenBalances.length){var e=v.n.mapBalancesToSwapTokens(k.tokenBalances);if(e){var t=e.find(function(e){return e.address===(0,p.EO)()});!t||(k.networkBalanceInUSD=t?s.C.multiply(t.quantity.numeric,t.price).toString():"0")}}},sendNativeToken:function(e){return(0,r.Z)(A().mark(function t(){var n,r,a,i,o,s,u;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return w.P.pushTransactionStack({}),i=e.receiverAddress,o=null===(n=m.R.getAccountData())||void 0===n?void 0:n.address,s=y.l.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals)),t.next=6,y.l.sendTransaction({chainNamespace:c.b.CHAIN.EVM,to:i,address:o,data:"0x",value:null!=s?s:BigInt(0)});case 6:return u=t.sent,t.abrupt("return",(b.X.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:(0,p.r9)("eip155")===l.y_.ACCOUNT_TYPES.SMART_ACCOUNT,token:(null===(r=x.state.token)||void 0===r?void 0:r.symbol)||"",amount:e.sendTokenAmount,network:m.R.state.activeCaipNetwork.caipNetworkId||"",hash:u||""}}),null!==(a=y.l._getClient())&&void 0!==a&&a.updateBalance("eip155"),x.resetSend(),{hash:u}));case 8:case"end":return t.stop()}},t)}))()},sendERC20Token:function(e){return(0,r.Z)(A().mark(function t(){var n,r,a,i,o,s;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(w.P.pushTransactionStack({onSuccess:function(){w.P.replace("Account")}}),r=y.l.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals)),!((a=null===(n=m.R.getAccountData())||void 0===n?void 0:n.address)&&e.sendTokenAmount&&e.receiverAddress&&e.tokenAddress)){t.next=10;break}if(o=h.j.getPlainAddress(e.tokenAddress)){t.next=6;break}throw new Error("SendController:sendERC20Token - tokenAddress is required");case 6:return t.next=8,y.l.writeContract({fromAddress:a,tokenAddress:o,args:[e.receiverAddress,null!=r?r:BigInt(0)],method:"transfer",abi:u.g.getERC20Abi(o),chainNamespace:c.b.CHAIN.EVM});case 8:return s=t.sent,t.abrupt("return",(b.X.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:(0,p.r9)("eip155")===l.y_.ACCOUNT_TYPES.SMART_ACCOUNT,token:(null===(i=x.state.token)||void 0===i?void 0:i.symbol)||"",amount:e.sendTokenAmount,network:m.R.state.activeCaipNetwork.caipNetworkId||"",hash:s||""}}),x.resetSend(),{hash:s}));case 10:return t.abrupt("return",{hash:void 0});case 11:case"end":return t.stop()}},t)}))()},sendSolanaToken:function(){return(0,r.Z)(A().mark(function e(){var t,n,r,a;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(x.state.sendTokenAmount&&x.state.receiverAddress){e.next=2;break}throw new Error("An amount and receiver address are required");case 2:return w.P.pushTransactionStack({onSuccess:function(){w.P.replace("Account")}}),x.state.token&&x.state.token.address!==f.bq.SOLANA_NATIVE_TOKEN_ADDRESS&&(r=h.j.isCaipAddress(x.state.token.address)?h.j.getPlainAddress(x.state.token.address):x.state.token.address),e.next=5,y.l.sendTransaction({chainNamespace:"solana",tokenMint:r,to:x.state.receiverAddress,value:x.state.sendTokenAmount});case 5:(a=e.sent)&&(k.hash=a),null!==(t=y.l._getClient())&&void 0!==t&&t.updateBalance("solana"),b.X.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:!1,token:(null===(n=x.state.token)||void 0===n?void 0:n.symbol)||"",amount:x.state.sendTokenAmount,network:m.R.state.activeCaipNetwork.caipNetworkId||"",hash:a||""}}),x.resetSend();case 7:case"end":return e.stop()}},e)}))()},resetSend:function(){k.token=void 0,k.sendTokenAmount=void 0,k.receiverAddress=void 0,k.receiverProfileImageUrl=void 0,k.receiverProfileName=void 0,k.loading=!1,k.tokenBalances=[]}})},56152:function(e,t,n){"use strict";n.d(t,{K:function(){return c}});var r=n(23250),a=n(31254),i=n(53574),o=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),s=(0,r.sj)(E({},o)),c={state:s,subscribeKey:function(e,t){return(0,a.VW)(s,e,t)},showLoading:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._showMessage(E({message:e,variant:"loading"},t))},showSuccess:function(e){this._showMessage({message:e,variant:"success"})},showSvg:function(e,t){this._showMessage({message:e,svg:t})},showError:function(e){var t=i.j.parseError(e);this._showMessage({message:t,variant:"error"})},hide:function(){s.message=o.message,s.variant=o.variant,s.svg=o.svg,s.open=o.open,s.autoClose=o.autoClose},_showMessage:function(e){var t=e.message,n=e.svg,r=e.variant,a=void 0===r?"success":r,i=e.autoClose,c=void 0===i?o.autoClose:i;s.open?(s.open=!1,setTimeout(function(){s.message=t,s.variant=a,s.svg=n,s.open=!0,s.autoClose=c},150)):(s.message=t,s.variant=a,s.svg=n,s.open=!0,s.autoClose=c)}}},50039:function(e,t,n){"use strict";n.d(t,{u:function(){return u}});var r=n(23250),a=n(84853),i=n(79781),o=n(27297),s=(0,r.sj)({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),c={state:s,subscribe:function(e){return(0,r.Ld)(s,function(){return e(s)})},setThemeMode:function(e){s.themeMode=e;try{var t=o.A.getAuthConnector();if(t){var n=c.getSnapshot().themeVariables;t.provider.syncTheme({themeMode:e,themeVariables:n,w3mThemeVariables:(0,a.t)(n,e)})}}catch(r){console.info("Unable to sync theme to auth connector")}},setThemeVariables:function(e){s.themeVariables=E(E({},s.themeVariables),e);try{var t=o.A.getAuthConnector();if(t){var n=c.getSnapshot().themeVariables;t.provider.syncTheme({themeVariables:n,w3mThemeVariables:(0,a.t)(s.themeVariables,s.themeMode)})}}catch(r){console.info("Unable to sync theme to auth connector")}},getSnapshot:function(){return(0,r.CO)(s)}},u=(0,i.P)(c)},14568:function(e,t,n){"use strict";n.d(t,{f:function(){return d}});var r=n(8239),a=n(23250),i=n(72290),o=n(91951),s=n(92809),c=n(32628),u={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:"",sui:"",stacks:"",ton:"20f673c0-095e-49b2-07cf-eb5049dcf600"},l=(0,a.sj)({networkImagePromises:{},tokenImagePromises:{}}),d={fetchWalletImage:function(e){var t=this;return(0,r.Z)(A().mark(function n(){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=4;break}return n.next=3,o.Q._fetchWalletImage(e);case 3:return n.abrupt("return",t.getWalletImageById(e));case 4:case"end":return n.stop()}},n)}))()},fetchNetworkImage:function(e){var t=this;return(0,r.Z)(A().mark(function n(){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=8;break}if(n.t0=t.getNetworkImageById(e),n.t0){n.next=7;break}return l.networkImagePromises[e]||(l.networkImagePromises[e]=o.Q._fetchNetworkImage(e)),n.next=6,l.networkImagePromises[e];case 6:n.t0=t.getNetworkImageById(e);case 7:return n.abrupt("return",n.t0);case 8:case"end":return n.stop()}},n)}))()},fetchTokenImage:function(e){var t=this;return(0,r.Z)(A().mark(function n(){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=5;break}return l.tokenImagePromises[e]||(l.tokenImagePromises[e]=o.Q._fetchTokenImage(e)),n.next=4,l.tokenImagePromises[e];case 4:return n.abrupt("return",t.getTokenImage(e));case 5:case"end":return n.stop()}},n)}))()},getWalletImageById:function(e){if(e)return s.W.state.walletImages[e]},getWalletImage:function(e){return null!=e&&e.image_url?null==e?void 0:e.image_url:null!=e&&e.image_id?s.W.state.walletImages[e.image_id]:void 0},getNetworkImage:function(e){var t,n,r;return null!=e&&null!==(t=e.assets)&&void 0!==t&&t.imageUrl?null==e||null===(n=e.assets)||void 0===n?void 0:n.imageUrl:null!=e&&null!==(r=e.assets)&&void 0!==r&&r.imageId?s.W.state.networkImages[e.assets.imageId]:void 0},getNetworkImageById:function(e){if(e)return s.W.state.networkImages[e]},getConnectorImage:function(e){var t;return null!=e&&e.imageUrl?e.imageUrl:null!=e&&null!==(t=e.info)&&void 0!==t&&t.icon?e.info.icon:null!=e&&e.imageId?s.W.state.connectorImages[e.imageId]:void 0},getChainImage:function(e){return s.W.state.networkImages[u[e]]},getTokenImage:function(e){if(e)return s.W.state.tokenImages[e]},getWalletImageUrl:function(e){if(!e)return"";var t=c.h.state,n=t.projectId,r=t.sdkType,a=t.sdkVersion,o=new URL("".concat(i.b.W3M_API_URL,"/getWalletImage/").concat(e));return o.searchParams.set("projectId",n),o.searchParams.set("st",r),o.searchParams.set("sv",a),o.toString()},getAssetImageUrl:function(e){if(!e)return"";var t=c.h.state,n=t.projectId,r=t.sdkType,a=t.sdkVersion,o=new URL("".concat(i.b.W3M_API_URL,"/public/getAssetImage/").concat(e));return o.searchParams.set("projectId",n),o.searchParams.set("st",r),o.searchParams.set("sv",a),o.toString()},getChainNamespaceImageUrl:function(e){return this.getAssetImageUrl(u[e])},getImageByToken:function(e,t){return(0,r.Z)(A().mark(function n(){var r,a,o,s,c,u;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("native"!==e){n.next=3;break}return o=null!==(a=i.b.NATIVE_IMAGE_IDS_BY_NAMESPACE[t])&&void 0!==a?a:null,n.abrupt("return",o?d.fetchNetworkImage(o):void 0);case 3:if(s=null!==(r=Object.entries(i.b.TOKEN_SYMBOLS_BY_ADDRESS).find(function(t){return C(t,1)[0].toLowerCase()===e.toLowerCase()}))&&void 0!==r?r:[],c=C(s,2),!(u=c[1])){n.next=6;break}return n.abrupt("return",d.fetchTokenImage(u));case 6:case"end":return n.stop()}},n)}))()}}},56276:function(e,t,n){"use strict";n.d(t,{Q:function(){return b}});var r,a=n(8239),i=n(62282),o=n(34063),s=n(72290),c=n(32750),u=n(71848),l=n(63908),d=n(7551),p=n(27297),f={createBalance:function(e,t){var n={name:e.metadata.name||"",symbol:e.metadata.symbol||"",decimals:e.metadata.decimals||0,value:e.metadata.value||0,price:e.metadata.price||0,iconUrl:e.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:t,address:"native"===e.address?void 0:this.convertAddressToCAIP10Address(e.address,t),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:e.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance:function(e){var t=e.hex,n=e.decimals;return(0,o.b)(BigInt(t),n)},convertAddressToCAIP10Address:function(e,t){return"".concat(t,":").concat(e)},createCAIP2ChainId:function(e,t){return"".concat(t,":").concat(parseInt(e,16))},getChainIdHexFromCAIP2ChainId:function(e){var t=e.split(":");if(t.length<2||!t[1])return"0x0";var n=parseInt(t[1],10);return isNaN(n)?"0x0":"0x".concat(n.toString(16))},isWalletGetAssetsResponse:function(e){var t=this;return"object"==typeof e&&null!==e&&Object.values(e).every(function(e){return Array.isArray(e)&&e.every(function(e){return t.isValidAsset(e)})})},isValidAsset:function(e){return"object"==typeof e&&null!==e&&"string"==typeof e.address&&"string"==typeof e.balance&&("ERC20"===e.type||"NATIVE"===e.type)&&"object"==typeof e.metadata&&null!==e.metadata&&"string"==typeof e.metadata.name&&"string"==typeof e.metadata.symbol&&"number"==typeof e.metadata.decimals&&"number"==typeof e.metadata.price&&"string"==typeof e.metadata.iconUrl}},h=n(42916),v=n(32628);function g(){return m.apply(this,arguments)}function m(){return(m=(0,a.Z)(A().mark(function e(){var t,a,i,o;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=8;break}return e.next=3,n.e(7662).then(n.bind(n,57662));case 3:t=e.sent,a=t.createPublicClient,i=t.http,o=t.defineChain,r={createPublicClient:a,http:i,defineChain:o};case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}var y={getBlockchainApiRpcUrl:function(e,t){var n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",e),n.searchParams.set("projectId",t),n.toString()},getViemChain:function(e){return(0,a.Z)(A().mark(function t(){var n,r,a,i;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:return n=t.sent,r=n.defineChain,a=c.u.parseCaipNetworkId(e.caipNetworkId),i=a.chainId,t.abrupt("return",r(E(E({},e),{},{id:Number(i)})));case 7:case"end":return t.stop()}},t)}))()},createViemPublicClient:function(e){return(0,a.Z)(A().mark(function t(){var n,r,a,i,o;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:return n=t.sent,r=n.createPublicClient,a=n.http,i=v.h.state.projectId,t.next=8,y.getViemChain(e);case 8:if(o=t.sent){t.next=11;break}throw new Error("Chain ".concat(e.caipNetworkId," not found in viem/chains"));case 11:return t.abrupt("return",r({chain:o,transport:a(y.getBlockchainApiRpcUrl(e.caipNetworkId,i))}));case 12:case"end":return t.stop()}},t)}))()}},b={getMyTokensWithBalance:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{forceUpdate:void 0,caipNetwork:l.R.state.activeCaipNetwork,address:null===(e=l.R.getAccountData())||void 0===e?void 0:e.address},n=this;return(0,a.Z)(A().mark(function e(){var r,a,i,o,c,l,d;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.forceUpdate,a=t.caipNetwork,i=t.address,o=p.A.getConnectorId("eip155")===s.b.CONNECTOR_ID.AUTH,i){e.next=3;break}return e.abrupt("return",[]);case 3:if(!(c=h.M.getBalanceCacheForCaipAddress(a?"".concat(a.caipNetworkId,":").concat(i):i))){e.next=6;break}return e.abrupt("return",c.balances);case 6:if(!a||a.chainNamespace!==s.b.CHAIN.EVM||!o){e.next=12;break}return e.next=9,n.getEIP155Balances(i,a);case 9:if(!(l=e.sent)){e.next=12;break}return e.abrupt("return",n.filterLowQualityTokens(l));case 12:return e.next=14,u.L.getBalance(i,null==a?void 0:a.caipNetworkId,r);case 14:return d=e.sent,e.abrupt("return",n.filterLowQualityTokens(d.balances));case 16:case"end":return e.stop()}},e)}))()},getEIP155Balances:function(e,t){return(0,a.Z)(A().mark(function n(){var r,a,i,o,s,c;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o=f.getChainIdHexFromCAIP2ChainId(t.caipNetworkId),n.next=4,d.l.getCapabilities(e);case 4:if(n.t2=r=n.sent,n.t1=null!==n.t2,!n.t1){n.next=8;break}n.t1=void 0!==r;case 8:if(n.t0=n.t1,!n.t0){n.next=11;break}n.t0=null!==(a=r[o])&&void 0!==a&&null!==(i=a.assetDiscovery)&&void 0!==i&&i.supported;case 11:if(n.t0){n.next=13;break}return n.abrupt("return",null);case 13:return n.next=15,d.l.walletGetAssets({account:e,chainFilter:[o]});case 15:if(s=n.sent,f.isWalletGetAssetsResponse(s)){n.next=18;break}return n.abrupt("return",null);case 18:return c=(s[o]||[]).map(function(e){return f.createBalance(e,t.caipNetworkId)}),n.abrupt("return",(h.M.updateBalanceCache({caipAddress:"".concat(t.caipNetworkId,":").concat(e),balance:{balances:c},timestamp:Date.now()}),c));case 22:return n.prev=22,n.t3=n.catch(0),n.abrupt("return",null);case 25:case"end":return n.stop()}},n,null,[[0,22]])}))()},filterLowQualityTokens:function(e){return e.filter(function(e){return"0"!==e.quantity.decimals})},fetchERC20Balance:function(e){var t=e.caipAddress,n=e.assetAddress,r=e.caipNetwork;return(0,a.Z)(A().mark(function e(){var a,s,u,l,d,p,f,h,v;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.createViemPublicClient(r);case 2:return a=e.sent,s=c.u.parseCaipAddress(t),u=s.address,e.next=7,a.multicall({contracts:[{address:n,functionName:"name",args:[],abi:i.Wo},{address:n,functionName:"symbol",args:[],abi:i.Wo},{address:n,functionName:"balanceOf",args:[u],abi:i.Wo},{address:n,functionName:"decimals",args:[],abi:i.Wo}]});case 7:return l=e.sent,d=C(l,4),p=d[0].result,f=d[1].result,h=d[2].result,v=d[3].result,e.abrupt("return",{name:p,symbol:f,decimals:v,balance:h&&v?(0,o.b)(h,v):"0"});case 14:case"end":return e.stop()}},e)}))()}}},71166:function(e,t,n){"use strict";n.d(t,{EO:function(){return i},rG:function(){return o},r9:function(){return s},eq:function(){return c}});var r=n(63908),a=n(28153);function i(){var e=r.R.state.activeCaipNetwork.chainNamespace||"eip155";return"".concat(e,":").concat(r.R.state.activeCaipNetwork.id||1,":").concat(a.bq.NATIVE_TOKEN_ADDRESS[e])}function o(e){return a.bq.NATIVE_TOKEN_ADDRESS[e]}function s(e){var t;return null===(t=r.R.getAccountData(e))||void 0===t?void 0:t.preferredAccountType}function c(e){var t,n;return e?null===(t=r.R.state.chains.get(e))||void 0===t||null===(n=t.networkState)||void 0===n?void 0:n.caipNetwork:r.R.state.activeCaipNetwork}},15563:function(e,t,n){"use strict";n.d(t,{f:function(){return c}});var r=n(7551),a=n(27297),i=n(68886),o=n(32628),s=n(53574),c={getConnectionStatus:function(e,t){var n=a.A.state.activeConnectorIds[t],i=r.l.getConnections(t);return Boolean(n)&&e.connectorId===n?"connected":i.some(function(t){return t.connectorId.toLowerCase()===e.connectorId.toLowerCase()})?"active":"disconnected"},excludeConnectorAddressFromConnections:function(e){var t=e.connections,n=e.connectorId,r=e.addresses;return t.map(function(e){if(n&&e.connectorId.toLowerCase()===n.toLowerCase()&&r){var t=e.accounts.filter(function(e){return!r.some(function(t){return t.toLowerCase()===e.address.toLowerCase()})});return E(E({},e),{},{accounts:t})}return e})},excludeExistingConnections:function(e,t){var n=new Set(e);return t.filter(function(e){return!n.has(e.connectorId)})},getConnectionsByConnectorId:function(e,t){return e.filter(function(e){return e.connectorId.toLowerCase()===t.toLowerCase()})},getConnectionsData:function(e){var t,n=Boolean(o.h.state.remoteFeatures.multiWallet),i=a.A.state.activeConnectorIds[e],s=r.l.getConnections(e),u=(null!==(t=r.l.state.recentConnections.get(e))&&void 0!==t?t:[]).filter(function(e){return a.A.getConnectorById(e.connectorId)}),l=c.excludeExistingConnections([].concat(x(s.map(function(e){return e.connectorId})),x(i?[i]:[])),u);return n?{connections:s,recentConnections:l}:{connections:s.filter(function(e){return e.connectorId.toLowerCase()===(null==i?void 0:i.toLowerCase())}),recentConnections:[]}},onConnectMobile:function(e){var t=r.l.state.wcUri;if(null!=e&&e.mobile_link&&t)try{r.l.setWcError(!1);var n=e.mobile_link,a=e.link_mode,c=e.name,u=s.j.formatNativeUrl(n,t,a),l=u.redirect,d=u.redirectUniversalLink,p=u.href,f=l,h=d,v=s.j.isIframe()?"_top":"_self";r.l.setWcLinking({name:c,href:p}),r.l.setRecentWallet(e),s.j.openHref(o.h.state.experimental_preferUniversalLinks&&h?h:f,v)}catch(n){i.X.sendEvent({type:"track",event:"CONNECT_PROXY_ERROR",properties:{message:n instanceof Error?n.message:"Error parsing the deep link",uri:t,mobile_link:e.mobile_link,name:e.name}}),r.l.setWcError(!0)}}}},38720:function(e,t,n){"use strict";n.d(t,{C:function(){return v}});var r=n(8239),a=n(67933),i=n(72290),o=n(91951),s=n(63908),c=n(7551),u=n(27297),l=n(32628),d=n(53574),p=n(57564),f=n(42916),h=n(97088),v={getConnectorsByType:function(e,t,n){var r=l.h.state.customWallets,a=f.M.getRecentWallets(),i=h.J.filterOutDuplicateWallets(t),o=h.J.filterOutDuplicateWallets(n),s=e.filter(function(e){return"MULTI_CHAIN"===e.type}),c=e.filter(function(e){return"ANNOUNCED"===e.type}),u=e.filter(function(e){return"INJECTED"===e.type});return{custom:r,recent:a,external:e.filter(function(e){return"EXTERNAL"===e.type}),multiChain:s,announced:c,injected:u,recommended:i,featured:o}},showConnector:function(e){var t,n=null===(t=e.info)||void 0===t?void 0:t.rdns,r=Boolean(n)&&o.Q.state.excludedWallets.some(function(e){return Boolean(e.rdns)&&e.rdns===n}),i=Boolean(e.name)&&o.Q.state.excludedWallets.some(function(t){return a.g.isLowerCaseMatch(t.name,e.name)});return!("INJECTED"===e.type&&("Browser Wallet"===e.name&&(!d.j.isMobile()||d.j.isMobile()&&!n&&!c.l.checkInstalled())||r||i)||("ANNOUNCED"===e.type||"EXTERNAL"===e.type)&&(r||i))},getIsConnectedWithWC:function(){return Array.from(s.R.state.chains.values()).some(function(e){return u.A.getConnectorId(e.namespace)===i.b.CONNECTOR_ID.WALLET_CONNECT})},getConnectorTypeOrder:function(e){var t,n=e.recommended,r=e.featured,a=e.custom,i=e.recent,o=e.announced,s=e.injected,c=e.multiChain,u=e.external,d=e.overriddenConnectors,p=void 0===d?null!==(t=l.h.state.features.connectorTypeOrder)&&void 0!==t?t:[]:d,f=[{type:"walletConnect",isEnabled:!0},{type:"recent",isEnabled:i.length>0},{type:"injected",isEnabled:[].concat(x(s),x(o),x(c)).length>0},{type:"featured",isEnabled:r.length>0},{type:"custom",isEnabled:a&&a.length>0},{type:"external",isEnabled:u.length>0},{type:"recommended",isEnabled:n.length>0}].filter(function(e){return e.isEnabled}),h=new Set(f.map(function(e){return e.type})),v=p.filter(function(e){return h.has(e)}).map(function(e){return{type:e,isEnabled:!0}}),g=f.filter(function(e){var t=e.type;return!v.some(function(e){return e.type===t})});return Array.from(new Set([].concat(x(v),x(g)).map(function(e){return e.type})))},sortConnectorsByExplorerWallet:function(e){return x(e).sort(function(e,t){var n,r;return e.explorerWallet&&t.explorerWallet?(null!==(n=e.explorerWallet.order)&&void 0!==n?n:0)-(null!==(r=t.explorerWallet.order)&&void 0!==r?r:0):e.explorerWallet?-1:t.explorerWallet?1:0})},getPriority:function(e){return e.id===i.b.CONNECTOR_ID.BASE_ACCOUNT?0:e.id===i.b.CONNECTOR_ID.COINBASE||e.id===i.b.CONNECTOR_ID.COINBASE_SDK?1:2},sortConnectorsByPriority:function(e){return x(e).sort(function(e,t){return v.getPriority(e)-v.getPriority(t)})},getAuthName:function(e){var t=e.email,n=e.socialUsername,r=e.socialProvider;return n?r&&"discord"===r&&n.endsWith("0")?n.slice(0,-1):n:t.length>30?"".concat(t.slice(0,-3),"..."):t},fetchProviderData:function(e){return(0,r.Z)(A().mark(function t(){var n,r,a,o,s,c;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"Browser Wallet"!==e.name||d.j.isMobile()){t.next=3;break}return t.abrupt("return",{accounts:[],chainId:void 0});case 3:if(e.id!==i.b.CONNECTOR_ID.AUTH){t.next=5;break}return t.abrupt("return",{accounts:[],chainId:void 0});case 5:return t.next=7,Promise.all([null===(n=e.provider)||void 0===n?void 0:n.request({method:"eth_accounts"}),null===(r=e.provider)||void 0===r?void 0:r.request({method:"eth_chainId"}).then(function(e){return Number(e)})]);case 7:return a=t.sent,o=C(a,2),s=o[0],c=o[1],t.abrupt("return",{accounts:s,chainId:c});case 14:return t.prev=14,t.t0=t.catch(0),t.abrupt("return",(console.warn("Failed to fetch provider data for ".concat(e.name),t.t0),{accounts:[],chainId:void 0}));case 17:case"end":return t.stop()}},t,null,[[0,14]])}))()},getFilteredCustomWallets:function(e){var t=f.M.getRecentWallets(),n=u.A.state.connectors.map(function(e){var t;return null===(t=e.info)||void 0===t?void 0:t.rdns}).filter(Boolean),r=t.map(function(e){return e.rdns}).filter(Boolean),a=n.concat(r);if(a.includes("io.metamask.mobile")&&d.j.isMobile()){var i=a.indexOf("io.metamask.mobile");a[i]="io.metamask"}return e.filter(function(e){return!a.includes(String(null==e?void 0:e.rdns))})},hasWalletConnector:function(e){return u.A.state.connectors.some(function(t){return t.id===e.id||t.name===e.name})},isWalletCompatibleWithCurrentChain:function(e){var t=s.R.state.activeChain;return!t||!e.chains||e.chains.some(function(e){var n=e.split(":")[0];return t===n})},getFilteredRecentWallets:function(){var e=this;return f.M.getRecentWallets().filter(function(e){return!h.J.isExcluded(e)}).filter(function(t){return!e.hasWalletConnector(t)}).filter(function(t){return e.isWalletCompatibleWithCurrentChain(t)})},getCappedRecommendedWallets:function(e){var t=u.A.state.connectors,n=l.h.state,r=n.customWallets,a=n.featuredWalletIds,i=t.find(function(e){return"walletConnect"===e.id}),o=t.filter(function(e){return"INJECTED"===e.type||"ANNOUNCED"===e.type||"MULTI_CHAIN"===e.type});if(!(i||o.length||null!=r&&r.length))return[];var s=p.$.isEmailEnabled(),c=p.$.isSocialsEnabled(),d=o.filter(function(e){return"Browser Wallet"!==e.name&&"WalletConnect"!==e.name}),f=Math.max(0,4-(((null==a?void 0:a.length)||0)+((null==r?void 0:r.length)||0)+(d.length||0)+(s?1:0)+(c?1:0)));return f<=0?[]:h.J.filterOutDuplicateWallets(e).slice(0,f)},processConnectorsByType:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=v.sortConnectorsByExplorerWallet(x(e));return t?n.filter(v.showConnector):n},connectorList:function(){var e,t=v.getConnectorsByType(u.A.state.connectors,o.Q.state.recommended,o.Q.state.featured),n=this.processConnectorsByType(t.announced.filter(function(e){return"walletConnect"!==e.id})),r=this.processConnectorsByType(t.injected),a=this.processConnectorsByType(t.multiChain.filter(function(e){return"WalletConnect"!==e.name}),!1),s=t.custom,c=t.recent,l=this.processConnectorsByType(t.external.filter(function(e){return e.id!==i.b.CONNECTOR_ID.COINBASE_SDK&&e.id!==i.b.CONNECTOR_ID.BASE_ACCOUNT})),p=t.recommended,f=t.featured,h=v.getConnectorTypeOrder({custom:s,recent:c,announced:n,injected:r,multiChain:a,recommended:p,featured:f,external:l}),g=u.A.state.connectors.find(function(e){return"walletConnect"===e.id}),m=d.j.isMobile(),y=[],b=M(h);try{for(b.s();!(e=b.n()).done;){var w=e.value;switch(w){case"walletConnect":!m&&g&&y.push({kind:"connector",subtype:"walletConnect",connector:g});break;case"recent":v.getFilteredRecentWallets().forEach(function(e){return y.push({kind:"wallet",subtype:"recent",wallet:e})});break;case"injected":a.forEach(function(e){return y.push({kind:"connector",subtype:"multiChain",connector:e})}),n.forEach(function(e){return y.push({kind:"connector",subtype:"announced",connector:e})}),r.forEach(function(e){return y.push({kind:"connector",subtype:"injected",connector:e})});break;case"featured":f.forEach(function(e){return y.push({kind:"wallet",subtype:"featured",wallet:e})});break;case"custom":v.getFilteredCustomWallets(null!=s?s:[]).forEach(function(e){return y.push({kind:"wallet",subtype:"custom",wallet:e})});break;case"external":l.forEach(function(e){return y.push({kind:"connector",subtype:"external",connector:e})});break;case"recommended":v.getCappedRecommendedWallets(p).forEach(function(e){return y.push({kind:"wallet",subtype:"recommended",wallet:e})});break;default:console.warn("Unknown connector type: ".concat(w))}}}catch(E){b.e(E)}finally{b.f()}return y},hasInjectedConnectors:function(){return u.A.state.connectors.filter(function(e){return("INJECTED"===e.type||"ANNOUNCED"===e.type||"MULTI_CHAIN"===e.type)&&"Browser Wallet"!==e.name&&"WalletConnect"!==e.name}).length}}},28153:function(e,t,n){"use strict";var r,a,i,o;n.d(t,{bq:function(){return p},a$:function(){return d},gy:function(){return l}});var s=n(72290),c={ConnectorExplorerIds:(r={},k(r,s.b.CONNECTOR_ID.COINBASE,"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa"),k(r,s.b.CONNECTOR_ID.COINBASE_SDK,"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa"),k(r,s.b.CONNECTOR_ID.BASE_ACCOUNT,"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa"),k(r,s.b.CONNECTOR_ID.SAFE,"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f"),k(r,s.b.CONNECTOR_ID.LEDGER,"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927"),k(r,s.b.CONNECTOR_ID.OKX,"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709"),k(r,s.b.METMASK_CONNECTOR_NAME,"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96"),k(r,s.b.TRUST_CONNECTOR_NAME,"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0"),k(r,s.b.SOLFLARE_CONNECTOR_NAME,"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79"),k(r,s.b.PHANTOM_CONNECTOR_NAME,"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393"),k(r,s.b.COIN98_CONNECTOR_NAME,"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01"),k(r,s.b.MAGIC_EDEN_CONNECTOR_NAME,"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6"),k(r,s.b.BACKPACK_CONNECTOR_NAME,"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0"),k(r,s.b.BITGET_CONNECTOR_NAME,"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662"),k(r,s.b.FRONTIER_CONNECTOR_NAME,"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041"),k(r,s.b.XVERSE_CONNECTOR_NAME,"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b"),k(r,s.b.LEATHER_CONNECTOR_NAME,"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"),k(r,s.b.OKX_CONNECTOR_NAME,"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709"),k(r,s.b.BINANCE_CONNECTOR_NAME,"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25"),r),NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200","00000008819873e925422c1ff0f99f7c":"b3406e4a-bbfc-44fb-e3a6-89673c78b700","-239":"20f673c0-095e-49b2-07cf-eb5049dcf600","-3":"20f673c0-095e-49b2-07cf-eb5049dcf600"},ConnectorImageIds:(a={},k(a,s.b.CONNECTOR_ID.COINBASE,"0c2840c3-5b04-4c44-9661-fbd4b49e1800"),k(a,s.b.CONNECTOR_ID.COINBASE_SDK,"0c2840c3-5b04-4c44-9661-fbd4b49e1800"),k(a,s.b.CONNECTOR_ID.BASE_ACCOUNT,"bba2c8be-7fd1-463e-42b1-796ecb0ad200"),k(a,s.b.CONNECTOR_ID.SAFE,"461db637-8616-43ce-035a-d89b8a1d5800"),k(a,s.b.CONNECTOR_ID.LEDGER,"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300"),k(a,s.b.CONNECTOR_ID.WALLET_CONNECT,"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400"),k(a,s.b.CONNECTOR_ID.INJECTED,"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"),a),ConnectorNamesMap:(i={},k(i,s.b.CONNECTOR_ID.INJECTED,"Browser Wallet"),k(i,s.b.CONNECTOR_ID.WALLET_CONNECT,"WalletConnect"),k(i,s.b.CONNECTOR_ID.COINBASE,"Coinbase"),k(i,s.b.CONNECTOR_ID.COINBASE_SDK,"Coinbase"),k(i,s.b.CONNECTOR_ID.BASE_ACCOUNT,"Base Account"),k(i,s.b.CONNECTOR_ID.LEDGER,"Ledger"),k(i,s.b.CONNECTOR_ID.SAFE,"Safe"),i),ConnectorTypesMap:(o={},k(o,s.b.CONNECTOR_ID.INJECTED,"INJECTED"),k(o,s.b.CONNECTOR_ID.WALLET_CONNECT,"WALLET_CONNECT"),k(o,s.b.CONNECTOR_ID.EIP6963,"ANNOUNCED"),k(o,s.b.CONNECTOR_ID.AUTH,"AUTH"),o),WalletConnectRpcChainIds:[1,5,11155111,10,420,42161,421613,137,80001,42220,1313161554,1313161555,56,97,43114,43113,100,8453,84531,7777777,999,324,280]},u=("undefined"!=typeof process&&void 0!==process.env?process.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",l=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],d="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",p={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:u,SECURE_SITE_DASHBOARD:"".concat(u,"/dashboard"),SECURE_SITE_FAVICON:"".concat(u,"/images/favicon.png"),SOLANA_NATIVE_TOKEN_ADDRESS:"So11111111111111111111111111111111111111111",RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],SUGGESTED_TOKENS_BY_CHAIN:{"eip155:42161":["USD\u20ae0"]},BALANCE_SUPPORTED_CHAINS:[s.b.CHAIN.EVM,s.b.CHAIN.SOLANA],SEND_PARAMS_SUPPORTED_CHAINS:[s.b.CHAIN.EVM],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[s.b.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[s.b.CHAIN.EVM,s.b.CHAIN.SOLANA],PAY_WITH_EXCHANGE_SUPPORTED_CHAIN_NAMESPACES:[s.b.CHAIN.EVM,s.b.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[s.b.CHAIN.EVM,s.b.CHAIN.TON],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x",sui:"0x",stacks:"0x",ton:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[s.b.CHAIN.EVM,s.b.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1,emailCapture:!1,payWithExchange:!1,payments:!1,reownAuthentication:!1,headless:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1,emailCapture:!1,reownAuthentication:!1,headless:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1,reownAuthentication:!1,headless:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa",ton:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0},MANDATORY_WALLET_IDS_ON_MOBILE:[c.ConnectorExplorerIds[s.b.CONNECTOR_ID.COINBASE],c.ConnectorExplorerIds[s.b.CONNECTOR_ID.COINBASE_SDK],c.ConnectorExplorerIds[s.b.CONNECTOR_ID.BASE_ACCOUNT],c.ConnectorExplorerIds[s.b.SOLFLARE_CONNECTOR_NAME],c.ConnectorExplorerIds[s.b.PHANTOM_CONNECTOR_NAME],c.ConnectorExplorerIds[s.b.BINANCE_CONNECTOR_NAME]],DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]}},53574:function(e,t,n){"use strict";n.d(t,{j:function(){return s}});var r=n(8239),a=n(72290),i=n(28153),o=n(42916),s={getWindow:function(){if("undefined"!=typeof window)return window},isMobile:function(){var e,t;return!!this.isClient()&&Boolean((null===(e=window)||void 0===e?void 0:e.matchMedia)&&"function"==typeof window.matchMedia&&(null===(t=window.matchMedia("(pointer:coarse)"))||void 0===t?void 0:t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/.test(navigator.userAgent))},checkCaipNetwork:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null==e?void 0:e.caipNetworkId.toLocaleLowerCase().includes(t.toLowerCase())},isAndroid:function(){var e;if(!this.isMobile())return!1;var t=null===(e=window)||void 0===e?void 0:e.navigator.userAgent.toLowerCase();return s.isMobile()&&t.includes("android")},isIos:function(){var e;if(!this.isMobile())return!1;var t=null===(e=window)||void 0===e?void 0:e.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari:function(){var e;return!!this.isClient()&&(null===(e=window)||void 0===e?void 0:e.navigator.userAgent.toLowerCase().includes("safari"))},isClient:function(){return"undefined"!=typeof window},isPairingExpired:function(e){return!e||e-Date.now()<=i.bq.TEN_SEC_MS},isAllowedRetry:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.bq.ONE_SEC_MS;return Date.now()-e>=t},copyToClopboard:function(e){navigator.clipboard.writeText(e)},isIframe:function(){try{var e,t;return(null===(e=window)||void 0===e?void 0:e.self)!==(null===(t=window)||void 0===t?void 0:t.top)}catch(n){return!1}},isSafeApp:function(){if(s.isClient()&&window.self!==window.top)try{var e,t,n,r=null===(e=window)||void 0===e||null===(t=e.location)||void 0===t||null===(n=t.ancestorOrigins)||void 0===n?void 0:n[0];if(r){var a=new URL(r),i=new URL("https://app.safe.global");return a.hostname===i.hostname}}catch(o){return!1}return!1},getPairingExpiry:function(){return Date.now()+i.bq.FOUR_MINUTES_MS},getNetworkId:function(e){return null==e?void 0:e.split(":")[1]},getPlainAddress:function(e){return null==e?void 0:e.split(":")[2]},wait:function(e){return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){setTimeout(t,e)}));case 1:case"end":return t.stop()}},t)}))()},debounce:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];t&&clearTimeout(t),t=setTimeout(function(){e.apply(void 0,a)},n)}},isHttpUrl:function(e){return e.startsWith("http://")||e.startsWith("https://")},formatNativeUrl:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(s.isHttpUrl(e))return this.formatUniversalUrl(e,t);var a=e,i=r;a.includes("://")||(a=e.replaceAll("/","").replaceAll(":",""),a="".concat(a,"://")),a.endsWith("/")||(a="".concat(a,"/")),i&&!(null!==(n=i)&&void 0!==n&&n.endsWith("/"))&&(i="".concat(i,"/")),this.isTelegram()&&this.isAndroid()&&(t=encodeURIComponent(t));var o=encodeURIComponent(t);return{redirect:"".concat(a,"wc?uri=").concat(o),redirectUniversalLink:i?"".concat(i,"wc?uri=").concat(o):void 0,href:a}},formatUniversalUrl:function(e,t){if(!s.isHttpUrl(e))return this.formatNativeUrl(e,t);var n=e;return n.endsWith("/")||(n="".concat(n,"/")),{redirect:"".concat(n,"wc?uri=").concat(encodeURIComponent(t)),href:n}},getOpenTargetForPlatform:function(e){return"popupWindow"===e?e:this.isTelegram()?o.M.getTelegramSocialProvider()?"_top":"_blank":e},openHref:function(e,t,n){var r;null===(r=window)||void 0===r||r.open(e,this.getOpenTargetForPlatform(t),n||"noreferrer noopener")},returnOpenHref:function(e,t,n){var r;return null===(r=window)||void 0===r?void 0:r.open(e,this.getOpenTargetForPlatform(t),n||"noreferrer noopener")},isTelegram:function(){return"undefined"!=typeof window&&(Boolean(window.TelegramWebviewProxy)||Boolean(window.Telegram)||Boolean(window.TelegramWebviewProxyProto))},isPWA:function(){var e,t,n,r;if("undefined"==typeof window)return!1;var a=!(null===(e=window)||void 0===e||!e.matchMedia||"function"!=typeof window.matchMedia)&&(null===(t=window.matchMedia("(display-mode: standalone)"))||void 0===t?void 0:t.matches),i=null===(n=window)||void 0===n||null===(r=n.navigator)||void 0===r?void 0:r.standalone;return Boolean(a||i)},preloadImage:function(e){return(0,r.Z)(A().mark(function t(){var n;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Promise(function(t,n){var r=new Image;r.onload=t,r.onerror=n,r.crossOrigin="anonymous",r.src=e}),t.abrupt("return",Promise.race([n,s.wait(2e3)]));case 2:case"end":return t.stop()}},t)}))()},parseBalance:function(e,t){var n="0.000";if("string"==typeof e){var r=Number(e);if(!isNaN(r)){var a=(Math.floor(1e3*r)/1e3).toFixed(3);a&&(n=a)}}var i=C(n.split("."),2),o=i[0]||"0",s=i[1]||"000";return{formattedText:"".concat(o,".").concat(s).concat(t?" ".concat(t):""),value:o,decimals:s,symbol:t}},getApiUrl:function(){return a.b.W3M_API_URL},getBlockchainApiUrl:function(){return a.b.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl:function(){return a.b.PULSE_API_URL},getUUID:function(){var e;return null!==(e=crypto)&&void 0!==e&&e.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},parseError:function(e){var t,n;return"string"==typeof e?e:"string"==typeof(null==e||null===(t=e.issues)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.message)?e.issues[0].message:e instanceof Error?e.message:"Unknown error"},sortRequestedNetworks:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};return t&&e&&(e.forEach(function(e,t){n[e]=t}),t.sort(function(e,t){var r=n[e.id],a=n[t.id];return void 0!==r&&void 0!==a?r-a:void 0!==r?-1:void 0!==a?1:0})),t},calculateBalance:function(e){var t,n=0,r=M(e);try{for(r.s();!(t=r.n()).done;){var a;n+=null!==(a=t.value.value)&&void 0!==a?a:0}}catch(i){r.e(i)}finally{r.f()}return n},formatTokenBalance:function(e){var t=C(e.toFixed(2).split("."),2);return{dollars:t[0],pennies:t[1]}},isAddress:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"eip155";switch(t){case"eip155":return!(!/^(?:0x)?[0-9a-f]{40}$/i.test(e)||!/^(?:0x)?[0-9a-f]{40}$/i.test(e)&&!/^(?:0x)?[0-9A-F]{40}$/i.test(e));case"solana":return/[1-9A-HJ-NP-Za-km-z\u017F\u212A]{32,44}$/i.test(e);case"bip122":var n=/^1[1-9A-HJ-NP-Za-km-z]{25,34}$/.test(e),r=/^3[1-9A-HJ-NP-Za-km-z]{25,34}$/.test(e),a=/^bc1[0-9a-z]{39,87}$/.test(e),i=/^bc1p[0-9a-z]{58}$/.test(e);return n||r||a||i;default:return!1}},uniqueBy:function(e,t){var n=new Set;return e.filter(function(e){var r=e[t];return!n.has(r)&&(n.add(r),!0)})},generateSdkVersion:function(e,t,n){return"".concat(t,"-").concat(0===e.length?i.bq.ADAPTER_TYPES.UNIVERSAL:e.map(function(e){return e.adapterType}).join(","),"-").concat(n)},createAccount:function(e,t,n,r,a){return{namespace:e,address:t,type:n,publicKey:r,path:a}},isCaipAddress:function(e){if("string"!=typeof e)return!1;var t=e.split(":"),n=t[0];return 3===t.filter(Boolean).length&&n in a.b.CHAIN_NAME_MAP},getAccount:function(e){return e?"string"==typeof e?{address:e,chainId:void 0}:{address:e.address,chainId:e.chainId}:{address:void 0,chainId:void 0}},isMac:function(){var e,t=null===(e=window)||void 0===e?void 0:e.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl:function(e){var t,n="--".concat(encodeURIComponent(null===(t=window)||void 0===t?void 0:t.location.href)),r="state=";if("auth.magic.link"===new URL(e).host){var a="provider_authorization_url=",i=e.substring(e.indexOf(a)+a.length),o=this.injectIntoUrl(decodeURIComponent(i),r,n);return e.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(e,r,n)},injectIntoUrl:function(e,t,n){var r=e.indexOf(t);if(-1===r)throw new Error("".concat(t," parameter not found in the URL: ").concat(e));var a=e.indexOf("&",r),i=t.length,o=-1!==a?a:e.length;return e.substring(0,r+i)+(e.substring(r+i,o)+n)+e.substring(a)},isNumber:function(e){return("number"==typeof e||"string"==typeof e)&&!isNaN(Number(e))}}},44329:function(e,t,n){"use strict";n.d(t,{V:function(){return o}});var r=n(8239);function a(){return i.apply(this,arguments)}function i(){return(i=(0,r.Z)(A().mark(function e(){var t,n=arguments;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch.apply(void 0,n);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("HTTP status code: ".concat(t.status),{cause:t});case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var o=function(){function e(t){var n=t.baseUrl,r=t.clientId;B(this,e),this.baseUrl=n,this.clientId=r}return F(e,[{key:"get",value:function(e){var t=e.headers,n=e.signal,i=e.cache,o=b(e,s),c=this;return(0,r.Z)(A().mark(function e(){var r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.createUrl(o),e.next=3,a(r,{method:"GET",headers:t,signal:n,cache:i});case 3:return e.abrupt("return",e.sent.json());case 4:case"end":return e.stop()}},e)}))()}},{key:"getBlob",value:function(e){var t=e.headers,n=e.signal,i=b(e,c),o=this;return(0,r.Z)(A().mark(function e(){var r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.createUrl(i),e.next=3,a(r,{method:"GET",headers:t,signal:n});case 3:return e.abrupt("return",e.sent.blob());case 4:case"end":return e.stop()}},e)}))()}},{key:"post",value:function(e){var t=e.body,n=e.headers,i=e.signal,o=b(e,u),s=this;return(0,r.Z)(A().mark(function e(){var r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.createUrl(o),e.next=3,a(r,{method:"POST",headers:n,body:t?JSON.stringify(t):void 0,signal:i});case 3:return e.abrupt("return",e.sent.json());case 4:case"end":return e.stop()}},e)}))()}},{key:"put",value:function(e){var t=e.body,n=e.headers,i=e.signal,o=b(e,l),s=this;return(0,r.Z)(A().mark(function e(){var r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.createUrl(o),e.next=3,a(r,{method:"PUT",headers:n,body:t?JSON.stringify(t):void 0,signal:i});case 3:return e.abrupt("return",e.sent.json());case 4:case"end":return e.stop()}},e)}))()}},{key:"delete",value:function(e){var t=e.body,n=e.headers,i=e.signal,o=b(e,d),s=this;return(0,r.Z)(A().mark(function e(){var r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.createUrl(o),e.next=3,a(r,{method:"DELETE",headers:n,body:t?JSON.stringify(t):void 0,signal:i});case 3:return e.abrupt("return",e.sent.json());case 4:case"end":return e.stop()}},e)}))()}},{key:"createUrl",value:function(e){var t=e.path,n=e.params,r=new URL(t,this.baseUrl);return n&&Object.entries(n).forEach(function(e){var t=C(e,2),n=t[0],a=t[1];a&&r.searchParams.append(n,a)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}},{key:"sendBeacon",value:function(e){var t=e.body,n=b(e,p),r=this.createUrl(n);return navigator.sendBeacon(r.toString(),t?JSON.stringify(t):void 0)}}]),e}()},67529:function(e,t,n){"use strict";n.d(t,{m:function(){return i},R:function(){return o}});var r=n(72290),a=n(63908),i={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"},BINANCE:{id:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25",appId:"yFK5FCqYprrXDiVFbhyRx7",deeplink:"bnc://app.binance.com/mp/app",url:"https://app.binance.com/en/download"}},o={handleMobileDeeplinkRedirect:function(e,t){var n=window.location.href,o=encodeURIComponent(n);if(e===i.PHANTOM.id&&!("phantom"in window)){var s=n.startsWith("https")?"https":"http",c=n.split("/")[2],u=encodeURIComponent("".concat(s,"://").concat(c));window.location.href="".concat(i.PHANTOM.url,"/ul/browse/").concat(o,"?ref=").concat(u)}if(e===i.SOLFLARE.id&&!("solflare"in window)&&(window.location.href="".concat(i.SOLFLARE.url,"/ul/v1/browse/").concat(o,"?ref=").concat(o)),t===r.b.CHAIN.SOLANA&&e===i.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href="".concat(i.COINBASE.url,"/dapp?cb_url=").concat(o)),t===r.b.CHAIN.BITCOIN&&e===i.BINANCE.id&&!("binancew3w"in window)){var l,d=a.R.state.activeCaipNetwork,p=window.btoa("/pages/browser/index"),f=window.btoa("url=".concat(o,"&defaultChainId=").concat(null!==(l=null==d?void 0:d.id)&&void 0!==l?l:1)),h=new URL(i.BINANCE.deeplink);h.searchParams.set("appId",i.BINANCE.appId),h.searchParams.set("startPagePath",p),h.searchParams.set("startPageQuery",f);var v=new URL(i.BINANCE.url);v.searchParams.set("_dp",window.btoa(h.toString())),window.location.href=v.toString()}}}},57564:function(e,t,n){"use strict";n.d(t,{$:function(){return o}});var r=n(32628),a=n(28153),i=n(53574),o={getFeatureValue:function(e,t){var n=null==t?void 0:t[e];return void 0===n?a.bq.DEFAULT_FEATURES[e]:n},filterSocialsByPlatform:function(e){if(!e||!e.length)return e;var t=e;return i.j.isTelegram()&&(i.j.isIos()&&(t=t.filter(function(e){return"google"!==e})),i.j.isMac()&&(t=t.filter(function(e){return"x"!==e})),i.j.isAndroid()&&(t=t.filter(function(e){return!["facebook","x"].includes(e)}))),i.j.isMobile()&&(t=t.filter(function(e){return"facebook"!==e})),t},isSocialsEnabled:function(){return Array.isArray(r.h.state.features.socials)&&r.h.state.features.socials.length>0||Array.isArray(r.h.state.remoteFeatures.socials)&&r.h.state.remoteFeatures.socials.length>0},isEmailEnabled:function(){return Boolean(r.h.state.features.email||r.h.state.remoteFeatures.email)}}},69419:function(e,t,n){"use strict";n.d(t,{w:function(){return y}});var r=n(8239),a=(n(15863),n(32750)),i=n(72290),o=n(3628),s=n(63908),c=n(7551),u=n(27297),l=n(68886),d=n(22167),p=n(32628),f=n(40378),h=n(56152),v=n(71166),g=n(53574),m=null,y={getSIWX:function(){return p.h.state.siwx},initializeIfEnabled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.R.getActiveCaipAddress(),t=this;return(0,r.Z)(A().mark(function n(){var r,a,i,o,u,v,g,y,b,w;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if((r=p.h.state.siwx)&&e){n.next=3;break}return n.abrupt("return");case 3:if(a=e.split(":"),i=C(a,3),o=i[0],u=i[1],v=i[2],!s.R.checkIfSupportedNetwork(o,"".concat(o,":").concat(u))){n.next=31;break}if(n.prev=5,!p.h.state.remoteFeatures.emailCapture){n.next=11;break}return b=null===(g=s.R.getAccountData(o))||void 0===g?void 0:g.user,n.next=10,d.I.open({view:"DataCapture",data:{email:null!==(y=null==b?void 0:b.email)&&void 0!==y?y:void 0}});case 10:return n.abrupt("return",void n.sent);case 11:if(n.t0=m,!n.t0){n.next=15;break}return n.next=15,m;case 15:return n.next=17,r.getSessions("".concat(o,":").concat(u),v);case 17:if(!n.sent.length){n.next=19;break}return n.abrupt("return");case 19:return n.next=21,d.I.open({view:"SIWXSignMessage"});case 21:n.next=31;break;case 23:return n.prev=23,n.t1=n.catch(5),console.error("SIWXUtil:initializeIfEnabled",n.t1),l.X.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:t.getSIWXEventProperties(n.t1)}),n.next=29,null===(w=c.l._getClient())||void 0===w?void 0:w.disconnect().catch(console.error);case 29:f.P.reset("Connect"),h.K.showError("A problem occurred while trying initialize authentication");case 31:case"end":return n.stop()}},n,null,[[5,23]])}))()},isAuthenticated:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.R.getActiveCaipAddress();return(0,r.Z)(A().mark(function t(){var n,r,i,o,s;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(p.h.state.siwx&&e){t.next=2;break}return t.abrupt("return",!0);case 2:return n=a.u.parseCaipAddress(e),r=n.chainNamespace,i=n.chainId,o=n.address,s="".concat(r,":").concat(i),t.next=5,y.getSessions({address:o,caipNetworkId:s});case 5:return t.t0=t.sent.length,t.abrupt("return",t.t0>0);case 7:case"end":return t.stop()}},t)}))()},requestSignMessage:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n,r,a,o,m,y;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=p.h.state.siwx,r=g.j.getPlainAddress(s.R.getActiveCaipAddress()),a=(0,v.eq)(),n){t.next=3;break}throw new Error("SIWX is not enabled");case 3:if(r){t.next=5;break}throw new Error("No ActiveCaipAddress found");case 5:if(a){t.next=7;break}throw new Error("No ActiveCaipNetwork or client found");case 7:return t.prev=7,t.next=10,n.createMessage({chainId:a.caipNetworkId,accountAddress:r});case 10:if(o=t.sent,m=o.toString(),y="",!n.signMessage){t.next=19;break}return t.next=16,n.signMessage({message:m,chainId:a.caipNetworkId,accountAddress:r});case 16:y=t.sent,t.next=26;break;case 19:return u.A.getConnectorId(a.chainNamespace)===i.b.CONNECTOR_ID.AUTH&&f.P.pushTransactionStack({}),t.next=22,c.l.signMessage(m);case 22:if(t.t0=t.sent,t.t0){t.next=25;break}t.t0="";case 25:y=t.t0;case 26:return t.next=28,n.addSession({data:o,message:m,signature:y});case 28:s.R.setLastConnectedSIWECaipNetwork(a),d.I.close(),l.X.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:e.getSIWXEventProperties()}),t.next=42;break;case 33:if(t.prev=33,t.t1=t.catch(7),t.t2=!d.I.state.open||"ApproveTransaction"===f.P.state.view,!t.t2){t.next=39;break}return t.next=39,d.I.open({view:"SIWXSignMessage"});case 39:h.K.showError("Error signing message"),l.X.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:e.getSIWXEventProperties(t.t1)}),console.error("SWIXUtil:requestSignMessage",t.t1);case 42:case"end":return t.stop()}},t,null,[[7,33]])}))()},cancelSignMessage:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n,r,a,i;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null==(r=e.getSIWX())||null===(n=r.getRequired)||void 0===n||!n.call(r)){t.next=21;break}if(!(a=s.R.getLastConnectedSIWECaipNetwork())){t.next=17;break}return t.next=7,null==r?void 0:r.getSessions(null==a?void 0:a.caipNetworkId,g.j.getPlainAddress(s.R.getActiveCaipAddress())||"");case 7:if(!((i=t.sent)&&i.length>0)){t.next=13;break}return t.next=11,s.R.switchActiveNetwork(a);case 11:t.next=15;break;case 13:return t.next=15,c.l.disconnect();case 15:t.next=19;break;case 17:return t.next=19,c.l.disconnect();case 19:t.next=22;break;case 21:d.I.close();case 22:d.I.close(),l.X.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:e.getSIWXEventProperties()}),t.next=28;break;case 25:t.prev=25,t.t0=t.catch(0),console.error("SIWXUtil:cancelSignMessage",t.t0);case 28:case"end":return t.stop()}},t,null,[[0,25]])}))()},getAllSessions:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n,a,i;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getSIWX(),a=s.R.getAllRequestedCaipNetworks(),i=[],t.next=3,Promise.all(a.map(function(){var e=(0,r.Z)(A().mark(function e(t){var r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==n?void 0:n.getSessions(t.caipNetworkId,g.j.getPlainAddress(s.R.getActiveCaipAddress())||"");case 2:(r=e.sent)&&i.push.apply(i,x(r));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 3:return t.abrupt("return",i);case 4:case"end":return t.stop()}},t)}))()},getSessions:function(e){return(0,r.Z)(A().mark(function t(){var n,r,a,i,o;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=p.h.state.siwx,(a=null==e?void 0:e.address)||(i=s.R.getActiveCaipAddress(),a=g.j.getPlainAddress(i)),o=null==e?void 0:e.caipNetworkId,t.abrupt("return",(o||(o=null===(n=s.R.getActiveCaipNetwork())||void 0===n?void 0:n.caipNetworkId),r&&a&&o?r.getSessions(o,a):[]));case 5:case"end":return t.stop()}},t)}))()},isSIWXCloseDisabled:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n,r,a;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.getSIWX())){t.next=11;break}if(a="SIWXSignMessage"===f.P.state.view,"ApproveTransaction"!==f.P.state.view&&!a){t.next=11;break}if(t.t0=null===(r=n.getRequired)||void 0===r?void 0:r.call(n),!t.t0){t.next=10;break}return t.next=8,e.getSessions();case 8:t.t1=t.sent.length,t.t0=0===t.t1;case 10:return t.abrupt("return",t.t0);case 11:return t.abrupt("return",!1);case 12:case"end":return t.stop()}},t)}))()},authConnectorAuthenticate:function(e){var t=e.authConnector,n=e.chainId,a=e.socialUri,o=e.preferredAccountType,c=e.chainNamespace;return(0,r.Z)(A().mark(function e(){var r,u,l,d,f,h,g;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=y.getSIWX(),u=(0,v.eq)(),r&&c.includes(i.b.CHAIN.EVM)&&!p.h.state.remoteFeatures.emailCapture){e.next=6;break}return e.next=4,t.connect({chainId:n,socialUri:a,preferredAccountType:o});case 4:return l=e.sent,e.abrupt("return",{address:l.address,chainId:l.chainId,accounts:l.accounts});case 6:return d="".concat(c,":").concat(n),e.next=9,r.createMessage({chainId:d,accountAddress:"<<AccountAddress>>"});case 9:return f=e.sent,h={accountAddress:f.accountAddress,chainId:f.chainId,domain:f.domain,uri:f.uri,version:f.version,nonce:f.nonce,notBefore:f.notBefore,statement:f.statement,resources:f.resources,requestId:f.requestId,issuedAt:f.issuedAt,expirationTime:f.expirationTime,serializedMessage:f.toString()},e.next=13,t.connect({chainId:n,socialUri:a,siwxMessage:h,preferredAccountType:o});case 13:if(g=e.sent,h.accountAddress=g.address,h.serializedMessage=g.message||"",e.t0=g.signature&&g.message,!e.t0){e.next=20;break}return e.next=20,y.addEmbeddedWalletSession(h,g.message,g.signature);case 20:return s.R.setLastConnectedSIWECaipNetwork(u),e.abrupt("return",{address:g.address,chainId:g.chainId,accounts:g.accounts});case 22:case"end":return e.stop()}},e)}))()},addEmbeddedWalletSession:function(e,t,n){return(0,r.Z)(A().mark(function r(){var a;return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!m){r.next=2;break}return r.abrupt("return",m);case 2:return a=y.getSIWX(),r.abrupt("return",a?m=a.addSession({data:e,message:t,signature:n}).finally(function(){m=null}):Promise.resolve());case 4:case"end":return r.stop()}},r)}))()},universalProviderAuthenticate:function(e){var t=e.universalProvider,n=e.chains,a=e.methods;return(0,r.Z)(A().mark(function e(){var r,i,o,c,u,d,p,f,g,m;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=y.getSIWX(),u=(0,v.eq)(),d=new Set(n.map(function(e){return e.split(":")[0]})),c&&1===d.size&&d.has("eip155")){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,c.createMessage({chainId:(null===(r=(0,v.eq)())||void 0===r?void 0:r.caipNetworkId)||"",accountAddress:""});case 5:return p=e.sent,e.next=8,t.authenticate({nonce:p.nonce,domain:p.domain,uri:p.uri,exp:p.expirationTime,iat:p.issuedAt,nbf:p.notBefore,requestId:p.requestId,version:p.version,resources:p.resources,statement:p.statement,chainId:p.chainId,methods:a,chains:[p.chainId].concat(x(n.filter(function(e){return e!==p.chainId})))});case 8:if(f=e.sent,h.K.showLoading("Authenticating...",{autoClose:!1}),g=E(E({},f.session.peer.metadata),{},{name:f.session.peer.metadata.name,icon:null===(i=f.session.peer.metadata.icons)||void 0===i?void 0:i[0],type:"WALLET_CONNECT"}),s.R.setAccountProp("connectedWalletInfo",g,Array.from(d)[0]),null==f||null===(o=f.auths)||void 0===o||!o.length){e.next=30;break}return m=f.auths.map(function(e){var n,r=t.client.formatAuthMessage({request:e.p,iss:e.p.iss});return{data:E(E({},e.p),{},{accountAddress:e.p.iss.split(":").slice(-1).join(""),chainId:e.p.iss.split(":").slice(2,4).join(":"),uri:null!==(n=e.p.aud)&&void 0!==n?n:"",version:e.p.version||p.version,expirationTime:e.p.exp,issuedAt:e.p.iat,notBefore:e.p.nbf}),message:r,signature:e.s.s,cacao:e}}),e.prev=13,e.next=16,c.setSessions(m);case 16:u&&s.R.setLastConnectedSIWECaipNetwork(u),l.X.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:y.getSIWXEventProperties()}),e.next=27;break;case 20:return e.prev=20,e.t0=e.catch(13),console.error("SIWX:universalProviderAuth - failed to set sessions",e.t0),l.X.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:y.getSIWXEventProperties(e.t0)}),e.next=26,t.disconnect().catch(console.error);case 26:throw e.t0;case 27:return e.prev=27,h.K.hide(),e.finish(27);case 30:return e.abrupt("return",!0);case 31:case"end":return e.stop()}},e,null,[[13,20,27,30]])}))()},getSIWXEventProperties:function(e){var t=s.R.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:s.R.state.activeCaipNetwork.caipNetworkId||"",isSmartAccount:(0,v.r9)(t)===o.y_.ACCOUNT_TYPES.SMART_ACCOUNT,message:e?g.j.parseError(e):void 0}},clearSessions:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.getSIWX(),t.t0=n,!t.t0){t.next=5;break}return t.next=5,n.setSessions([]);case 5:case"end":return t.stop()}},t)}))()}}},42916:function(e,t,n){"use strict";n.d(t,{M:function(){return i}});var r=n(86462),a=n(72290),i={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5,transactionsHistory:15e3,tokenPrice:15e3,latestAppKitVersion:6048e5,tonWallets:864e5},isCacheExpired:function(e,t){return Date.now()-e>t},getActiveNetworkProps:function(){var e=i.getActiveNamespace(),t=i.getActiveCaipNetworkId(),n=t?t.split(":")[1]:void 0;return{namespace:e,caipNetworkId:t,chainId:n?isNaN(Number(n))?n:Number(n):void 0}},setWalletConnectDeepLink:function(e){var t=e.name,n=e.href;try{r.mr.setItem(r.uJ.DEEPLINK_CHOICE,JSON.stringify({href:n,name:t}))}catch(a){console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink:function(){try{var e=r.mr.getItem(r.uJ.DEEPLINK_CHOICE);if(e)return JSON.parse(e)}catch(t){console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink:function(){try{r.mr.removeItem(r.uJ.DEEPLINK_CHOICE)}catch(e){console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace:function(e){try{r.mr.setItem(r.uJ.ACTIVE_NAMESPACE,e)}catch(t){console.info("Unable to set active namespace")}},setActiveCaipNetworkId:function(e){try{r.mr.setItem(r.uJ.ACTIVE_CAIP_NETWORK_ID,e),i.setActiveNamespace(e.split(":")[0])}catch(t){console.info("Unable to set active caip network id")}},getActiveCaipNetworkId:function(){try{return r.mr.getItem(r.uJ.ACTIVE_CAIP_NETWORK_ID)}catch(e){return void console.info("Unable to get active caip network id")}},deleteActiveCaipNetworkId:function(){try{r.mr.removeItem(r.uJ.ACTIVE_CAIP_NETWORK_ID)}catch(e){console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId:function(e){try{var t=(0,r.Vk)(e);r.mr.removeItem(t)}catch(n){console.info("Unable to delete connected connector id")}},setAppKitRecent:function(e){try{var t=i.getRecentWallets();t.find(function(t){return t.id===e.id})||(t.unshift(e),t.length>2&&t.pop(),r.mr.setItem(r.uJ.RECENT_WALLETS,JSON.stringify(t)),r.mr.setItem(r.uJ.RECENT_WALLET,JSON.stringify(e)))}catch(n){console.info("Unable to set AppKit recent")}},getRecentWallets:function(){try{var e=r.mr.getItem(r.uJ.RECENT_WALLETS);return e?JSON.parse(e):[]}catch(t){console.info("Unable to get AppKit recent")}return[]},getRecentWallet:function(){try{var e=r.mr.getItem(r.uJ.RECENT_WALLET);return e?JSON.parse(e):null}catch(t){console.info("Unable to get AppKit recent")}return null},deleteRecentWallet:function(){try{r.mr.removeItem(r.uJ.RECENT_WALLET)}catch(e){console.info("Unable to delete AppKit recent")}},setConnectedConnectorId:function(e,t){try{var n=(0,r.Vk)(e);r.mr.setItem(n,t)}catch(a){console.info("Unable to set Connected Connector Id")}},getActiveNamespace:function(){try{return r.mr.getItem(r.uJ.ACTIVE_NAMESPACE)}catch(e){console.info("Unable to get active namespace")}},getConnectedConnectorId:function(e){if(e)try{var t=(0,r.Vk)(e);return r.mr.getItem(t)}catch(n){console.info("Unable to get connected connector id in namespace",e)}},setConnectedSocialProvider:function(e){try{r.mr.setItem(r.uJ.CONNECTED_SOCIAL,e)}catch(t){console.info("Unable to set connected social provider")}},getConnectedSocialProvider:function(){try{return r.mr.getItem(r.uJ.CONNECTED_SOCIAL)}catch(e){console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider:function(){try{r.mr.removeItem(r.uJ.CONNECTED_SOCIAL)}catch(e){console.info("Unable to delete connected social provider")}},getConnectedSocialUsername:function(){try{return r.mr.getItem(r.uJ.CONNECTED_SOCIAL_USERNAME)}catch(e){console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId:function(){var e,t;return null===(e=r.mr.getItem(r.uJ.ACTIVE_CAIP_NETWORK_ID))||void 0===e||null===(t=e.split(":"))||void 0===t?void 0:t[1]},setConnectionStatus:function(e){try{r.mr.setItem(r.uJ.CONNECTION_STATUS,e)}catch(t){console.info("Unable to set connection status")}},getConnectionStatus:function(){try{return r.mr.getItem(r.uJ.CONNECTION_STATUS)}catch(e){return}},getConnectedNamespaces:function(){try{var e=r.mr.getItem(r.uJ.CONNECTED_NAMESPACES);return null!=e&&e.length?e.split(","):[]}catch(t){return[]}},setConnectedNamespaces:function(e){try{var t=Array.from(new Set(e));r.mr.setItem(r.uJ.CONNECTED_NAMESPACES,t.join(","))}catch(n){console.info("Unable to set namespaces in storage")}},addConnectedNamespace:function(e){try{var t=i.getConnectedNamespaces();t.includes(e)||(t.push(e),i.setConnectedNamespaces(t))}catch(n){console.info("Unable to add connected namespace")}},removeConnectedNamespace:function(e){try{var t=i.getConnectedNamespaces(),n=t.indexOf(e);n>-1&&(t.splice(n,1),i.setConnectedNamespaces(t))}catch(r){console.info("Unable to remove connected namespace")}},getTelegramSocialProvider:function(){try{return r.mr.getItem(r.uJ.TELEGRAM_SOCIAL_PROVIDER)}catch(e){return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider:function(e){try{r.mr.setItem(r.uJ.TELEGRAM_SOCIAL_PROVIDER,e)}catch(t){console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider:function(){try{r.mr.removeItem(r.uJ.TELEGRAM_SOCIAL_PROVIDER)}catch(e){console.info("Unable to remove telegram social provider")}},getBalanceCache:function(){var e={};try{var t=r.mr.getItem(r.uJ.PORTFOLIO_CACHE);e=t?JSON.parse(t):{}}catch(n){console.info("Unable to get balance cache")}return e},removeAddressFromBalanceCache:function(e){try{var t=i.getBalanceCache();r.mr.setItem(r.uJ.PORTFOLIO_CACHE,JSON.stringify(E(E({},t),{},k({},e,void 0))))}catch(n){console.info("Unable to remove address from balance cache",e)}},getBalanceCacheForCaipAddress:function(e){try{var t=i.getBalanceCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.portfolio))return t.balance;i.removeAddressFromBalanceCache(e)}catch(n){console.info("Unable to get balance cache for address",e)}},updateBalanceCache:function(e){try{var t=i.getBalanceCache();t[e.caipAddress]=e,r.mr.setItem(r.uJ.PORTFOLIO_CACHE,JSON.stringify(t))}catch(n){console.info("Unable to update balance cache",e)}},getNativeBalanceCache:function(){var e={};try{var t=r.mr.getItem(r.uJ.NATIVE_BALANCE_CACHE);e=t?JSON.parse(t):{}}catch(n){console.info("Unable to get balance cache")}return e},removeAddressFromNativeBalanceCache:function(e){try{var t=i.getBalanceCache();r.mr.setItem(r.uJ.NATIVE_BALANCE_CACHE,JSON.stringify(E(E({},t),{},k({},e,void 0))))}catch(n){console.info("Unable to remove address from balance cache",e)}},getNativeBalanceCacheForCaipAddress:function(e){try{var t=i.getNativeBalanceCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.nativeBalance))return t;console.info("Discarding cache for address",e),i.removeAddressFromBalanceCache(e)}catch(n){console.info("Unable to get balance cache for address",e)}},updateNativeBalanceCache:function(e){try{var t=i.getNativeBalanceCache();t[e.caipAddress]=e,r.mr.setItem(r.uJ.NATIVE_BALANCE_CACHE,JSON.stringify(t))}catch(n){console.info("Unable to update balance cache",e)}},getEnsCache:function(){var e={};try{var t=r.mr.getItem(r.uJ.ENS_CACHE);e=t?JSON.parse(t):{}}catch(n){console.info("Unable to get ens name cache")}return e},getEnsFromCacheForAddress:function(e){try{var t=i.getEnsCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.ens))return t.ens;i.removeEnsFromCache(e)}catch(n){console.info("Unable to get ens name from cache",e)}},updateEnsCache:function(e){try{var t=i.getEnsCache();t[e.address]=e,r.mr.setItem(r.uJ.ENS_CACHE,JSON.stringify(t))}catch(n){console.info("Unable to update ens name cache",e)}},removeEnsFromCache:function(e){try{var t=i.getEnsCache();r.mr.setItem(r.uJ.ENS_CACHE,JSON.stringify(E(E({},t),{},k({},e,void 0))))}catch(n){console.info("Unable to remove ens name from cache",e)}},getIdentityCache:function(){var e={};try{var t=r.mr.getItem(r.uJ.IDENTITY_CACHE);e=t?JSON.parse(t):{}}catch(n){console.info("Unable to get identity cache")}return e},getIdentityFromCacheForAddress:function(e){try{var t=i.getIdentityCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.identity))return t.identity;i.removeIdentityFromCache(e)}catch(n){console.info("Unable to get identity from cache",e)}},updateIdentityCache:function(e){try{var t=i.getIdentityCache();t[e.address]={identity:e.identity,timestamp:e.timestamp},r.mr.setItem(r.uJ.IDENTITY_CACHE,JSON.stringify(t))}catch(n){console.info("Unable to update identity cache",e)}},removeIdentityFromCache:function(e){try{var t=i.getIdentityCache();r.mr.setItem(r.uJ.IDENTITY_CACHE,JSON.stringify(E(E({},t),{},k({},e,void 0))))}catch(n){console.info("Unable to remove identity from cache",e)}},getTonWalletsCache:function(){try{var e=r.mr.getItem(r.uJ.TON_WALLETS_CACHE),t=e?JSON.parse(e):void 0;if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.tonWallets))return t;i.removeTonWalletsCache()}catch(n){console.info("Unable to get ton wallets cache")}},updateTonWalletsCache:function(e){try{var t=i.getTonWalletsCache()||{timestamp:0,wallets:[]};t.timestamp=(new Date).getTime(),t.wallets=e,r.mr.setItem(r.uJ.TON_WALLETS_CACHE,JSON.stringify(t))}catch(n){console.info("Unable to update ton wallets cache",e)}},removeTonWalletsCache:function(){try{r.mr.removeItem(r.uJ.TON_WALLETS_CACHE)}catch(e){console.info("Unable to remove ton wallets cache")}},clearAddressCache:function(){try{r.mr.removeItem(r.uJ.PORTFOLIO_CACHE),r.mr.removeItem(r.uJ.NATIVE_BALANCE_CACHE),r.mr.removeItem(r.uJ.ENS_CACHE),r.mr.removeItem(r.uJ.IDENTITY_CACHE),r.mr.removeItem(r.uJ.HISTORY_TRANSACTIONS_CACHE)}catch(e){console.info("Unable to clear address cache")}},setPreferredAccountTypes:function(e){try{r.mr.setItem(r.uJ.PREFERRED_ACCOUNT_TYPES,JSON.stringify(e))}catch(t){console.info("Unable to set preferred account types",e)}},getPreferredAccountTypes:function(){try{var e=r.mr.getItem(r.uJ.PREFERRED_ACCOUNT_TYPES);return e?JSON.parse(e):{}}catch(t){console.info("Unable to get preferred account types")}return{}},setConnections:function(e,t){try{var n,o,s=i.getConnections(),c=null!==(n=s[t])&&void 0!==n?n:[],u=new Map,l=M(c);try{for(l.s();!(o=l.n()).done;){var d=o.value;u.set(d.connectorId,E({},d))}}catch(y){l.e(y)}finally{l.f()}var p,f=M(e);try{for(f.s();!(p=f.n()).done;){var h=p.value,v=u.get(h.connectorId),g=h.connectorId===a.b.CONNECTOR_ID.AUTH;v&&!g?function(){var e,t=new Set(v.accounts.map(function(e){return e.address.toLowerCase()})),n=h.accounts.filter(function(e){return!t.has(e.address.toLowerCase())});(e=v.accounts).push.apply(e,x(n))}():u.set(h.connectorId,E({},h))}}catch(y){f.e(y)}finally{f.f()}var m=E(E({},s),{},k({},t,Array.from(u.values())));r.mr.setItem(r.uJ.CONNECTIONS,JSON.stringify(m))}catch(s){console.error("Unable to sync connections to storage",s)}},getConnections:function(){try{var e=r.mr.getItem(r.uJ.CONNECTIONS);return e?JSON.parse(e):{}}catch(e){return console.error("Unable to get connections from storage",e),{}}},deleteAddressFromConnection:function(e){var t=e.connectorId,n=e.address,a=e.namespace;try{var o,s=i.getConnections(),c=new Map((null!==(o=s[a])&&void 0!==o?o:[]).map(function(e){return[e.connectorId,e]})),u=c.get(t);u&&(0===u.accounts.filter(function(e){return e.address.toLowerCase()!==n.toLowerCase()}).length?c.delete(t):c.set(t,E(E({},u),{},{accounts:u.accounts.filter(function(e){return e.address.toLowerCase()!==n.toLowerCase()})}))),r.mr.setItem(r.uJ.CONNECTIONS,JSON.stringify(E(E({},s),{},k({},a,Array.from(c.values())))))}catch(l){console.error('Unable to remove address "'.concat(n,'" from connector "').concat(t,'" in namespace "').concat(a,'"'))}},getDisconnectedConnectorIds:function(){try{var e=r.mr.getItem(r.uJ.DISCONNECTED_CONNECTOR_IDS);return e?JSON.parse(e):{}}catch(t){console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId:function(e,t){try{var n,a=i.getDisconnectedConnectorIds(),o=null!==(n=a[t])&&void 0!==n?n:[];o.push(e),r.mr.setItem(r.uJ.DISCONNECTED_CONNECTOR_IDS,JSON.stringify(E(E({},a),{},k({},t,Array.from(new Set(o))))))}catch(s){console.error('Unable to set disconnected connector id "'.concat(e,'" for namespace "').concat(t,'"'))}},removeDisconnectedConnectorId:function(e,t){try{var n,a=i.getDisconnectedConnectorIds(),o=null!==(n=a[t])&&void 0!==n?n:[];o=o.filter(function(t){return t.toLowerCase()!==e.toLowerCase()}),r.mr.setItem(r.uJ.DISCONNECTED_CONNECTOR_IDS,JSON.stringify(E(E({},a),{},k({},t,Array.from(new Set(o))))))}catch(s){console.error('Unable to remove disconnected connector id "'.concat(e,'" for namespace "').concat(t,'"'))}},isConnectorDisconnected:function(e,t){try{var n;return(null!==(n=i.getDisconnectedConnectorIds()[t])&&void 0!==n?n:[]).some(function(t){return t.toLowerCase()===e.toLowerCase()})}catch(r){console.info('Unable to get disconnected connector id "'.concat(e,'" for namespace "').concat(t,'"'))}return!1},getTransactionsCache:function(){try{var e=r.mr.getItem(r.uJ.HISTORY_TRANSACTIONS_CACHE);return e?JSON.parse(e):{}}catch(t){console.info("Unable to get transactions cache")}return{}},getTransactionsCacheForAddress:function(e){var t=e.address,n=e.chainId,r=void 0===n?"":n;try{var a,o=null===(a=i.getTransactionsCache()[t])||void 0===a?void 0:a[r];if(o&&!this.isCacheExpired(o.timestamp,this.cacheExpiry.transactionsHistory))return o.transactions;i.removeTransactionsCache({address:t,chainId:r})}catch(s){console.info("Unable to get transactions cache")}},updateTransactionsCache:function(e){var t=e.address,n=e.chainId,a=void 0===n?"":n,o=e.timestamp,s=e.transactions;try{var c=i.getTransactionsCache();c[t]=E(E({},c[t]),{},k({},a,{timestamp:o,transactions:s})),r.mr.setItem(r.uJ.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(c))}catch(u){console.info("Unable to update transactions cache",{address:t,chainId:a,timestamp:o,transactions:s})}},removeTransactionsCache:function(e){var t=e.address,n=e.chainId;try{var a=i.getTransactionsCache(),o=(null==a?void 0:a[t])||{},s=(o[n],b(o,[n].map(y)));r.mr.setItem(r.uJ.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(E(E({},a),{},k({},t,s))))}catch(c){console.info("Unable to remove transactions cache",{address:t,chainId:n})}},getTokenPriceCache:function(){try{var e=r.mr.getItem(r.uJ.TOKEN_PRICE_CACHE);return e?JSON.parse(e):{}}catch(t){console.info("Unable to get token price cache")}return{}},getTokenPriceCacheForAddresses:function(e){try{var t=i.getTokenPriceCache()[e.join(",")];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.tokenPrice))return t.tokenPrice;i.removeTokenPriceCache(e)}catch(n){console.info("Unable to get token price cache for addresses",e)}},updateTokenPriceCache:function(e){try{var t=i.getTokenPriceCache();t[e.addresses.join(",")]={timestamp:e.timestamp,tokenPrice:e.tokenPrice},r.mr.setItem(r.uJ.TOKEN_PRICE_CACHE,JSON.stringify(t))}catch(n){console.info("Unable to update token price cache",e)}},removeTokenPriceCache:function(e){try{var t=i.getTokenPriceCache();r.mr.setItem(r.uJ.TOKEN_PRICE_CACHE,JSON.stringify(E(E({},t),{},k({},e.join(","),void 0))))}catch(n){console.info("Unable to remove token price cache",e)}},getLatestAppKitVersion:function(){try{var e=this.getLatestAppKitVersionCache(),t=null==e?void 0:e.version;return t&&!this.isCacheExpired(e.timestamp,this.cacheExpiry.latestAppKitVersion)?t:void 0}catch(n){console.info("Unable to get latest AppKit version")}},getLatestAppKitVersionCache:function(){try{var e=r.mr.getItem(r.uJ.LATEST_APPKIT_VERSION);return e?JSON.parse(e):{}}catch(t){console.info("Unable to get latest AppKit version cache")}return{}},updateLatestAppKitVersion:function(e){try{var t=i.getLatestAppKitVersionCache();t.timestamp=e.timestamp,t.version=e.version,r.mr.setItem(r.uJ.LATEST_APPKIT_VERSION,JSON.stringify(t))}catch(n){console.info("Unable to update latest AppKit version on local storage",e)}}}},44926:function(e,t,n){"use strict";n.d(t,{n:function(){return u}});var r=n(8239),a=n(71848),i=n(63908),o=n(7551),s=n(56276),c=n(71166),u={getTokenList:function(e){return(0,r.Z)(A().mark(function t(){var n,r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.L.fetchSwapTokens({chainId:e});case 2:if(t.t2=n=t.sent,t.t1=null===t.t2,t.t1){t.next=6;break}t.t1=void 0===n;case 6:if(!t.t1){t.next=10;break}t.t3=void 0,t.next=11;break;case 10:t.t3=null===(r=n.tokens)||void 0===r?void 0:r.map(function(e){return E(E({},e),{},{eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})});case 11:if(t.t0=t.t3,t.t0){t.next=14;break}t.t0=[];case 14:return t.abrupt("return",t.t0);case 15:case"end":return t.stop()}},t)}))()},fetchGasPrice:function(){return(0,r.Z)(A().mark(function e(){var t,n,r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.R.state.activeCaipNetwork){e.next=3;break}return e.abrupt("return",null);case 3:if(e.prev=3,"solana"!==t.chainNamespace){e.next=18;break}return e.next=7,o.l.estimateGas({chainNamespace:"solana"});case 7:if(e.t1=n=e.sent,e.t0=null===e.t1,e.t0){e.next=11;break}e.t0=void 0===n;case 11:if(!e.t0){e.next=15;break}e.t2=void 0,e.next=16;break;case 15:e.t2=n.toString();case 16:return r=e.t2,e.abrupt("return",{standard:r,fast:r,instant:r});case 18:return e.next=20,a.L.fetchGasPrice({chainId:t.caipNetworkId});case 20:return e.abrupt("return",e.sent);case 23:return e.prev=23,e.t3=e.catch(3),e.abrupt("return",null);case 26:case"end":return e.stop()}},e,null,[[3,23]])}))()},fetchSwapAllowance:function(e){var t=e.tokenAddress,n=e.userAddress,i=e.sourceTokenAmount,s=e.sourceTokenDecimals;return(0,r.Z)(A().mark(function e(){var r,c;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.L.fetchSwapAllowance({tokenAddress:t,userAddress:n});case 2:if(!(null!=(r=e.sent)&&r.allowance&&i&&s)){e.next=6;break}return c=o.l.parseUnits(i,s)||0,e.abrupt("return",BigInt(r.allowance)>=c);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}},e)}))()},getMyTokensWithBalance:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,a;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.Q.getMyTokensWithBalance({forceUpdate:e,caipNetwork:i.R.state.activeCaipNetwork,address:null===(r=i.R.getAccountData())||void 0===r?void 0:r.address});case 2:return a=n.sent,n.abrupt("return",(i.R.setAccountProp("tokenBalance",a,i.R.state.activeChain),t.mapBalancesToSwapTokens(a)));case 4:case"end":return n.stop()}},n)}))()},mapBalancesToSwapTokens:function(e){return(null==e?void 0:e.map(function(e){return E(E({},e),{},{address:null!=e&&e.address?e.address:(0,c.EO)(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})}))||[]},handleSwapError:function(e){return(0,r.Z)(A().mark(function t(){var n,r,a,i,o;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=null==e?void 0:e.cause,t.t0=null!=o&&o.json,!t.t0){t.next=14;break}return t.next=6,o.json();case 6:if(t.t3=n=t.sent,t.t2=null!==t.t3,!t.t2){t.next=10;break}t.t2=void 0!==n;case 10:if(t.t1=t.t2,!t.t1){t.next=13;break}t.t1=null!==(r=n.reasons)&&void 0!==r&&null!==(a=r[0])&&void 0!==a&&null!==(i=a.description)&&void 0!==i&&i.includes("insufficient liquidity");case 13:t.t0=t.t1;case 14:if(!t.t0){t.next=18;break}t.t4="Insufficient liquidity",t.next=19;break;case 18:t.t4=void 0;case 19:return t.abrupt("return",t.t4);case 22:return t.prev=22,t.t5=t.catch(0),t.abrupt("return");case 25:case"end":return t.stop()}},t,null,[[0,22]])}))()}}},97088:function(e,t,n){"use strict";n.d(t,{J:function(){return p}});var r=n(67933),a=n(91951),i=n(7551),o=n(27297),s=n(32628),c=n(38720),u=n(28153),l=n(53574),d=n(42916),p={filterOutDuplicatesByRDNS:function(e){var t=s.h.state.enableEIP6963?o.A.state.connectors:[],n=d.M.getRecentWallets(),r=t.map(function(e){var t;return null===(t=e.info)||void 0===t?void 0:t.rdns}).filter(Boolean),a=n.map(function(e){return e.rdns}).filter(Boolean),i=r.concat(a);if(i.includes("io.metamask.mobile")&&l.j.isMobile()){var c=i.indexOf("io.metamask.mobile");i[c]="io.metamask"}return e.filter(function(e){return!(null!=e&&e.rdns&&i.includes(String(e.rdns))||(null==e||!e.rdns)&&t.some(function(t){return t.name===e.name}))})},filterOutDuplicatesByIds:function(e){var t=o.A.state.connectors.filter(function(e){return"ANNOUNCED"===e.type||"INJECTED"===e.type||"MULTI_CHAIN"===e.type}),n=d.M.getRecentWallets(),r=t.map(function(e){var t;return e.explorerId||(null===(t=e.explorerWallet)||void 0===t?void 0:t.id)||e.id}),a=n.map(function(e){return e.id}),i=r.concat(a);return e.filter(function(e){return!i.includes(null==e?void 0:e.id)})},filterOutDuplicateWallets:function(e){var t=this.filterOutDuplicatesByRDNS(e);return this.filterOutDuplicatesByIds(t)},markWalletsAsInstalled:function(e){var t=o.A.state.connectors,n=s.h.state.featuredWalletIds,r=t.filter(function(e){return"ANNOUNCED"===e.type}).reduce(function(e,t){var n;return null!==(n=t.info)&&void 0!==n&&n.rdns&&(e[t.info.rdns]=!0),e},{});return e.map(function(e){var t;return E(E({},e),{},{installed:Boolean(e.rdns)&&Boolean(r[null!==(t=e.rdns)&&void 0!==t?t:""])})}).sort(function(e,t){var r=Number(t.installed)-Number(e.installed);if(0!==r)return r;if(null!=n&&n.length){var a=n.indexOf(e.id),i=n.indexOf(t.id);if(-1!==a&&-1!==i)return a-i;if(-1!==a)return-1;if(-1!==i)return 1}return 0})},getConnectOrderMethod:function(e,t){var n=(null==e?void 0:e.connectMethodsOrder)||s.h.state.features.connectMethodsOrder,r=t||o.A.state.connectors;if(n)return n;var i=c.C.getConnectorsByType(r,a.Q.state.recommended,a.Q.state.featured),l=i.injected,d=i.announced,p=l.filter(c.C.showConnector),f=d.filter(c.C.showConnector);return p.length||f.length?["wallet","email","social"]:u.bq.DEFAULT_CONNECT_METHOD_ORDER},isExcluded:function(e){var t=Boolean(e.rdns)&&a.Q.state.excludedWallets.some(function(t){return t.rdns===e.rdns}),n=Boolean(e.name)&&a.Q.state.excludedWallets.some(function(t){return r.g.isLowerCaseMatch(t.name,e.name)});return t||n},markWalletsWithDisplayIndex:function(e){return e.map(function(e,t){return E(E({},e),{},{display_index:t})})},filterWalletsByWcSupport:function(e){return i.l.state.wcBasic?e.filter(function(e){return e.supports_wc}):l.j.isMobile()?e.filter(function(e){return e.supports_wc||u.bq.MANDATORY_WALLET_IDS_ON_MOBILE.includes(e.id)}):e},getWalletConnectWallets:function(e){var t=[].concat(x(a.Q.state.featured),x(a.Q.state.recommended));a.Q.state.filteredWallets.length>0?t.push.apply(t,x(a.Q.state.filteredWallets)):t.push.apply(t,x(e));var n=l.j.uniqueBy(t,"id"),r=p.markWalletsAsInstalled(n),i=p.filterWalletsByWcSupport(r);return p.markWalletsWithDisplayIndex(i)}}},79781:function(e,t,n){"use strict";n.d(t,{g:function(){return p},P:function(){return h}});var r=n(8239),a=n(23250),i=(n(31254),n(53574)),o=n(44329),s=n(32628),c=Object.freeze({enabled:!0,events:[]}),u=new o.V({baseUrl:i.j.getAnalyticsUrl(),clientId:null}),l=(0,a.sj)(E({},c)),d=function(e,t){return(0,r.Z)(A().mark(function n(){var r,a,o,c,d,p;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(l.enabled){n.next=2;break}return n.abrupt("return");case 2:if(r=Date.now(),!(l.events.filter(function(e){var t=new Date(e.properties.timestamp||"").getTime();return r-t<6e4}).length>=5)){n.next=5;break}return n.abrupt("return");case 5:if(a={type:"error",event:t,properties:{errorType:e.name,errorMessage:e.message,stackTrace:e.stack,timestamp:(new Date).toISOString()}},l.events.push(a),n.prev=7,"undefined"!=typeof window){n.next=10;break}return n.abrupt("return");case 10:return o=s.h.state,c=o.projectId,d=o.sdkType,p=o.sdkVersion,n.next=13,u.post({path:"/e",params:{projectId:c,st:d,sv:p||"html-wagmi-4.2.2"},body:{eventId:i.j.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:(new Date).toISOString(),props:{type:"error",event:t,errorType:e.name,errorMessage:e.message,stackTrace:e.stack}}});case 13:n.next=17;break;case 15:n.prev=15,n.t0=n.catch(7);case 17:case"end":return n.stop()}},n,null,[[7,15]])}))()},p=function(e){N(n,e);var t=I(n);function n(e,r,a){var i;B(this,n),(i=t.call(this,e)).originalName="AppKitError",i.name="AppKitError",i.category=r,i.originalError=a,a&&a instanceof Error&&(i.originalName=a.name),Object.setPrototypeOf(S(i),n.prototype);var o=!1;if(a instanceof Error&&"string"==typeof a.stack&&a.stack){var s=a.stack,c=s.indexOf("\n");if(c>-1){var u=s.substring(c+1);i.stack="".concat(i.name,": ").concat(i.message,"\n").concat(u),o=!0}}return o||(Error.captureStackTrace?Error.captureStackTrace(S(i),n):i.stack||(i.stack="".concat(i.name,": ").concat(i.message))),i}return F(n)}(T(Error));function f(e,t){var n="";try{n=e instanceof Error?e.message:"string"==typeof e?e:"object"==typeof e&&null!==e?0===Object.keys(e).length?"Unknown error":(null==e?void 0:e.message)||JSON.stringify(e):String(e)}catch(a){n="Unknown error",console.error("Error parsing error message",a)}var r=e instanceof p?e:new p(n,t,e);throw d(r,r.category),r}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INTERNAL_SDK_ERROR",n={};return Object.keys(e).forEach(function(a){var i,o=e[a];if("function"==typeof o){var s;s="AsyncFunction"===o.constructor.name?(i=(0,r.Z)(A().mark(function e(){var n=arguments;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.apply(void 0,n);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",f(e.t0,t));case 9:case"end":return e.stop()}},e,null,[[0,6]])})),function(){return i.apply(this,arguments)}):function(){try{return o.apply(void 0,arguments)}catch(e){return f(e,t)}},n[a]=s}else n[a]=o}),n}},15863:function(e,t,n){"use strict";n(22339),n(2517),n(39330),n(93105)},86499:function(e,t,n){"use strict";n.d(t,{kj:function(){return r},Hg:function(){return i.H},iv:function(){return p.iv},Mo:function(){return d.M},n:function(){return a.n},Hs:function(){return a.Hs},R:function(){return a.R},gR:function(){return p.gR}});var r={interpolate:function(e,t,n){if(2!==e.length||2!==t.length)throw new Error("inputRange and outputRange must be an array of length 2");var r=e[0]||0,a=e[1]||0,i=t[0]||0,o=t[1]||0;return n<r?i:n>a?o:(o-i)/(a-r)*(n-r)+i}},a=n(61831),i=n(18504),o=n(48873),s=n(86102),c=n(43603),u=n(48968);o.extend(c),o.extend(u);var l=E(E({},s),{},{name:"en-web3-modal",relativeTime:{future:"in %s",past:"%s ago",s:"%d sec",m:"1 min",mm:"%d min",h:"1 hr",hh:"%d hrs",d:"1 d",dd:"%d d",M:"1 mo",MM:"%d mo",y:"1 yr",yy:"%d yr"}});o.locale("en-web3-modal",l);var d=n(35896),p=(n(53707),n(17139))},53707:function(e,t,n){"use strict";n.d(t,{TV:function(){return r},W2:function(){return a}});var r={core:{backgroundAccentPrimary:"#0988F0",backgroundAccentCertified:"#C7B994",backgroundWalletKit:"#FFB800",backgroundAppKit:"#FF573B",backgroundCloud:"#0988F0",backgroundDocumentation:"#008847",backgroundSuccess:"rgba(48, 164, 107, 0.20)",backgroundError:"rgba(223, 74, 52, 0.20)",backgroundWarning:"rgba(243, 161, 63, 0.20)",textAccentPrimary:"#0988F0",textAccentCertified:"#C7B994",textWalletKit:"#FFB800",textAppKit:"#FF573B",textCloud:"#0988F0",textDocumentation:"#008847",textSuccess:"#30A46B",textError:"#DF4A34",textWarning:"#F3A13F",borderAccentPrimary:"#0988F0",borderSecondary:"#C7B994",borderSuccess:"#30A46B",borderError:"#DF4A34",borderWarning:"#F3A13F",foregroundAccent010:"rgba(9, 136, 240, 0.1)",foregroundAccent020:"rgba(9, 136, 240, 0.2)",foregroundAccent040:"rgba(9, 136, 240, 0.4)",foregroundAccent060:"rgba(9, 136, 240, 0.6)",foregroundSecondary020:"rgba(199, 185, 148, 0.2)",foregroundSecondary040:"rgba(199, 185, 148, 0.4)",foregroundSecondary060:"rgba(199, 185, 148, 0.6)",iconAccentPrimary:"#0988F0",iconAccentCertified:"#C7B994",iconSuccess:"#30A46B",iconError:"#DF4A34",iconWarning:"#F3A13F",glass010:"rgba(255, 255, 255, 0.1)",zIndex:"9999"},dark:{overlay:"rgba(0, 0, 0, 0.50)",backgroundPrimary:"#202020",backgroundInvert:"#FFFFFF",textPrimary:"#FFFFFF",textSecondary:"#9A9A9A",textTertiary:"#BBBBBB",textInvert:"#202020",borderPrimary:"#2A2A2A",borderPrimaryDark:"#363636",borderSecondary:"#4F4F4F",foregroundPrimary:"#252525",foregroundSecondary:"#2A2A2A",foregroundTertiary:"#363636",iconDefault:"#9A9A9A",iconInverse:"#FFFFFF"},light:{overlay:"rgba(230 , 230, 230, 0.5)",backgroundPrimary:"#FFFFFF",borderPrimaryDark:"#E9E9E9",backgroundInvert:"#202020",textPrimary:"#202020",textSecondary:"#9A9A9A",textTertiary:"#6C6C6C",textInvert:"#FFFFFF",borderPrimary:"#E9E9E9",borderSecondary:"#D0D0D0",foregroundPrimary:"#F3F3F3",foregroundSecondary:"#E9E9E9",foregroundTertiary:"#D0D0D0",iconDefault:"#9A9A9A",iconInverse:"#202020"}},a={colors:{black:"#202020",white:"#FFFFFF",white010:"rgba(255, 255, 255, 0.1)",accent010:"rgba(9, 136, 240, 0.1)",accent020:"rgba(9, 136, 240, 0.2)",accent030:"rgba(9, 136, 240, 0.3)",accent040:"rgba(9, 136, 240, 0.4)",accent050:"rgba(9, 136, 240, 0.5)",accent060:"rgba(9, 136, 240, 0.6)",accent070:"rgba(9, 136, 240, 0.7)",accent080:"rgba(9, 136, 240, 0.8)",accent090:"rgba(9, 136, 240, 0.9)",accent100:"rgba(9, 136, 240, 1.0)",accentSecondary010:"rgba(199, 185, 148, 0.1)",accentSecondary020:"rgba(199, 185, 148, 0.2)",accentSecondary030:"rgba(199, 185, 148, 0.3)",accentSecondary040:"rgba(199, 185, 148, 0.4)",accentSecondary050:"rgba(199, 185, 148, 0.5)",accentSecondary060:"rgba(199, 185, 148, 0.6)",accentSecondary070:"rgba(199, 185, 148, 0.7)",accentSecondary080:"rgba(199, 185, 148, 0.8)",accentSecondary090:"rgba(199, 185, 148, 0.9)",accentSecondary100:"rgba(199, 185, 148, 1.0)",productWalletKit:"#FFB800",productAppKit:"#FF573B",productCloud:"#0988F0",productDocumentation:"#008847",neutrals050:"#F6F6F6",neutrals100:"#F3F3F3",neutrals200:"#E9E9E9",neutrals300:"#D0D0D0",neutrals400:"#BBB",neutrals500:"#9A9A9A",neutrals600:"#6C6C6C",neutrals700:"#4F4F4F",neutrals800:"#363636",neutrals900:"#2A2A2A",neutrals1000:"#252525",semanticSuccess010:"rgba(48, 164, 107, 0.1)",semanticSuccess020:"rgba(48, 164, 107, 0.2)",semanticSuccess030:"rgba(48, 164, 107, 0.3)",semanticSuccess040:"rgba(48, 164, 107, 0.4)",semanticSuccess050:"rgba(48, 164, 107, 0.5)",semanticSuccess060:"rgba(48, 164, 107, 0.6)",semanticSuccess070:"rgba(48, 164, 107, 0.7)",semanticSuccess080:"rgba(48, 164, 107, 0.8)",semanticSuccess090:"rgba(48, 164, 107, 0.9)",semanticSuccess100:"rgba(48, 164, 107, 1.0)",semanticError010:"rgba(223, 74, 52, 0.1)",semanticError020:"rgba(223, 74, 52, 0.2)",semanticError030:"rgba(223, 74, 52, 0.3)",semanticError040:"rgba(223, 74, 52, 0.4)",semanticError050:"rgba(223, 74, 52, 0.5)",semanticError060:"rgba(223, 74, 52, 0.6)",semanticError070:"rgba(223, 74, 52, 0.7)",semanticError080:"rgba(223, 74, 52, 0.8)",semanticError090:"rgba(223, 74, 52, 0.9)",semanticError100:"rgba(223, 74, 52, 1.0)",semanticWarning010:"rgba(243, 161, 63, 0.1)",semanticWarning020:"rgba(243, 161, 63, 0.2)",semanticWarning030:"rgba(243, 161, 63, 0.3)",semanticWarning040:"rgba(243, 161, 63, 0.4)",semanticWarning050:"rgba(243, 161, 63, 0.5)",semanticWarning060:"rgba(243, 161, 63, 0.6)",semanticWarning070:"rgba(243, 161, 63, 0.7)",semanticWarning080:"rgba(243, 161, 63, 0.8)",semanticWarning090:"rgba(243, 161, 63, 0.9)",semanticWarning100:"rgba(243, 161, 63, 1.0)"},fontFamily:{regular:"KHTeka",mono:"KHTekaMono"},fontWeight:{regular:"400",medium:"500"},textSize:{h1:"50px",h2:"44px",h3:"38px",h4:"32px",h5:"26px",h6:"20px",large:"16px",medium:"14px",small:"12px"},typography:{"h1-regular-mono":{lineHeight:"50px",letterSpacing:"-3px"},"h1-regular":{lineHeight:"50px",letterSpacing:"-1px"},"h1-medium":{lineHeight:"50px",letterSpacing:"-0.84px"},"h2-regular-mono":{lineHeight:"44px",letterSpacing:"-2.64px"},"h2-regular":{lineHeight:"44px",letterSpacing:"-0.88px"},"h2-medium":{lineHeight:"44px",letterSpacing:"-0.88px"},"h3-regular-mono":{lineHeight:"38px",letterSpacing:"-2.28px"},"h3-regular":{lineHeight:"38px",letterSpacing:"-0.76px"},"h3-medium":{lineHeight:"38px",letterSpacing:"-0.76px"},"h4-regular-mono":{lineHeight:"32px",letterSpacing:"-1.92px"},"h4-regular":{lineHeight:"32px",letterSpacing:"-0.32px"},"h4-medium":{lineHeight:"32px",letterSpacing:"-0.32px"},"h5-regular-mono":{lineHeight:"26px",letterSpacing:"-1.56px"},"h5-regular":{lineHeight:"26px",letterSpacing:"-0.26px"},"h5-medium":{lineHeight:"26px",letterSpacing:"-0.26px"},"h6-regular-mono":{lineHeight:"20px",letterSpacing:"-1.2px"},"h6-regular":{lineHeight:"20px",letterSpacing:"-0.6px"},"h6-medium":{lineHeight:"20px",letterSpacing:"-0.6px"},"lg-regular-mono":{lineHeight:"16px",letterSpacing:"-0.96px"},"lg-regular":{lineHeight:"18px",letterSpacing:"-0.16px"},"lg-medium":{lineHeight:"18px",letterSpacing:"-0.16px"},"md-regular-mono":{lineHeight:"14px",letterSpacing:"-0.84px"},"md-regular":{lineHeight:"16px",letterSpacing:"-0.14px"},"md-medium":{lineHeight:"16px",letterSpacing:"-0.14px"},"sm-regular-mono":{lineHeight:"12px",letterSpacing:"-0.72px"},"sm-regular":{lineHeight:"14px",letterSpacing:"-0.12px"},"sm-medium":{lineHeight:"14px",letterSpacing:"-0.12px"}},tokens:{core:r.core,theme:r.dark},borderRadius:{1:"4px",2:"8px",10:"10px",3:"12px",4:"16px",6:"24px",5:"20px",8:"32px",16:"64px",20:"80px",32:"128px",64:"256px",128:"512px",round:"9999px"},spacing:{0:"0px","01":"2px",1:"4px",2:"8px",3:"12px",4:"16px",5:"20px",6:"24px",7:"28px",8:"32px",9:"36px",10:"40px",12:"48px",14:"56px",16:"64px",20:"80px",32:"128px",64:"256px"},durations:{xl:"400ms",lg:"200ms",md:"125ms",sm:"75ms"},easings:{"ease-out-power-2":"cubic-bezier(0.23, 0.09, 0.08, 1.13)","ease-out-power-1":"cubic-bezier(0.12, 0.04, 0.2, 1.06)","ease-in-power-2":"cubic-bezier(0.92, -0.13, 0.77, 0.91)","ease-in-power-1":"cubic-bezier(0.88, -0.06, 0.8, 0.96)","ease-inout-power-2":"cubic-bezier(0.77, 0.09, 0.23, 1.13)","ease-inout-power-1":"cubic-bezier(0.88, 0.04, 0.12, 1.06)"}}},17139:function(e,t,n){"use strict";n.d(t,{e5:function(){return s},iv:function(){return u},gR:function(){return c}});var r=n(14350),a=n(53707),i="--apkt";function o(e){var t,n,r,a,i,o,s,c,u,l,d,p;if(!e)return{};var f={};return f["font-family"]=null!==(t=null!==(n=e["--apkt-font-family"])&&void 0!==n?n:e["--w3m-font-family"])&&void 0!==t?t:"KHTeka",f.accent=null!==(r=null!==(a=e["--apkt-accent"])&&void 0!==a?a:e["--w3m-accent"])&&void 0!==r?r:"#0988F0",f["color-mix"]=null!==(i=null!==(o=e["--apkt-color-mix"])&&void 0!==o?o:e["--w3m-color-mix"])&&void 0!==i?i:"#000",f["color-mix-strength"]=null!==(s=null!==(c=e["--apkt-color-mix-strength"])&&void 0!==c?c:e["--w3m-color-mix-strength"])&&void 0!==s?s:0,f["font-size-master"]=null!==(u=null!==(l=e["--apkt-font-size-master"])&&void 0!==l?l:e["--w3m-font-size-master"])&&void 0!==u?u:"10px",f["border-radius-master"]=null!==(d=null!==(p=e["--apkt-border-radius-master"])&&void 0!==p?p:e["--w3m-border-radius-master"])&&void 0!==d?d:"4px",void 0!==e["--apkt-z-index"]?f["z-index"]=e["--apkt-z-index"]:void 0!==e["--w3m-z-index"]&&(f["z-index"]=e["--w3m-z-index"]),f}var s={createCSSVariables:function(e){var t={},n={};return function e(t,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=0,o=Object.entries(t);a<o.length;a++){var s=C(o[a],2),c=s[0],u=s[1],l=r?"".concat(r,"-").concat(c):c;u&&"object"==typeof u&&Object.keys(u).length?(n[c]={},e(u,n[c],l)):"string"==typeof u&&(n[c]="".concat(i,"-").concat(l))}}(e,t),function e(t,n){for(var r=0,a=Object.entries(t);r<a.length;r++){var i=C(a[r],2),o=i[0],s=i[1];s&&"object"==typeof s?(n[o]={},e(s,n[o])):"string"==typeof s&&(n[o]="var(".concat(s,")"))}}(t,n),{cssVariables:t,cssVariablesVarPrefix:n}},assignCSSVariables:function(e,t){var n={};return function e(t,r,a){for(var o=0,s=Object.entries(t);o<s.length;o++){var c=C(s[o],2),u=c[0],l=c[1],d=a?"".concat(a,"-").concat(u):u,p=r[u];l&&"object"==typeof l?e(l,p,d):"string"==typeof p&&(n["".concat(i,"-").concat(d)]=p)}}(e,t),n},createRootStyles:function(e,t){var n=E(E({},a.W2),{},{tokens:E(E({},a.W2.tokens),{},{theme:"light"===e?a.TV.light:a.TV.dark})}),r=s.createCSSVariables(n).cssVariables,i=s.assignCSSVariables(r,n),o=s.generateW3MVariables(t),c=s.generateW3MOverrides(t),u=s.generateScaledVariables(t),l=s.generateBaseVariables(i),d=E(E(E(E(E({},i),l),o),c),u),p=s.applyColorMixToVariables(t,d),f=E(E({},d),p);return":root {".concat(Object.entries(f).map(function(e){var t=C(e,2),n=t[0],r=t[1];return"".concat(n,":").concat(r.replace("/[:;{}</>]/g",""),";")}).join(""),"}")},generateW3MVariables:function(e){if(!e)return{};var t=o(e),n={};return n["--w3m-font-family"]=t["font-family"],n["--w3m-accent"]=t.accent,n["--w3m-color-mix"]=t["color-mix"],n["--w3m-color-mix-strength"]="".concat(t["color-mix-strength"],"%"),n["--w3m-font-size-master"]=t["font-size-master"],n["--w3m-border-radius-master"]=t["border-radius-master"],n},generateW3MOverrides:function(e){if(!e)return{};var t=o(e),n={};if(e["--apkt-accent"]||e["--w3m-accent"]){var r=t.accent;n["--apkt-tokens-core-iconAccentPrimary"]=r,n["--apkt-tokens-core-borderAccentPrimary"]=r,n["--apkt-tokens-core-textAccentPrimary"]=r,n["--apkt-tokens-core-backgroundAccentPrimary"]=r}return(e["--apkt-font-family"]||e["--w3m-font-family"])&&(n["--apkt-fontFamily-regular"]=t["font-family"]),void 0!==t["z-index"]&&(n["--apkt-tokens-core-zIndex"]="".concat(t["z-index"])),n},generateScaledVariables:function(e){if(!e)return{};var t=o(e),n={};if(e["--apkt-font-size-master"]||e["--w3m-font-size-master"]){var r=parseFloat(t["font-size-master"].replace("px",""));n["--apkt-textSize-h1"]=5*Number(r)+"px",n["--apkt-textSize-h2"]=4.4*Number(r)+"px",n["--apkt-textSize-h3"]=3.8*Number(r)+"px",n["--apkt-textSize-h4"]=3.2*Number(r)+"px",n["--apkt-textSize-h5"]=2.6*Number(r)+"px",n["--apkt-textSize-h6"]=2*Number(r)+"px",n["--apkt-textSize-large"]=1.6*Number(r)+"px",n["--apkt-textSize-medium"]=1.4*Number(r)+"px",n["--apkt-textSize-small"]=1.2*Number(r)+"px"}if(e["--apkt-border-radius-master"]||e["--w3m-border-radius-master"]){var a=parseFloat(t["border-radius-master"].replace("px",""));n["--apkt-borderRadius-1"]="".concat(Number(a),"px"),n["--apkt-borderRadius-2"]=2*Number(a)+"px",n["--apkt-borderRadius-3"]=3*Number(a)+"px",n["--apkt-borderRadius-4"]=4*Number(a)+"px",n["--apkt-borderRadius-5"]=5*Number(a)+"px",n["--apkt-borderRadius-6"]=6*Number(a)+"px",n["--apkt-borderRadius-8"]=8*Number(a)+"px",n["--apkt-borderRadius-16"]=16*Number(a)+"px",n["--apkt-borderRadius-20"]=20*Number(a)+"px",n["--apkt-borderRadius-32"]=32*Number(a)+"px",n["--apkt-borderRadius-64"]=64*Number(a)+"px",n["--apkt-borderRadius-128"]=128*Number(a)+"px"}return n},generateColorMixCSS:function(e,t){if(null==e||!e["--w3m-color-mix"]||!e["--w3m-color-mix-strength"])return"";var n=e["--w3m-color-mix"],r=e["--w3m-color-mix-strength"];if(!r||0===r)return"";var a=Object.keys(t||{}).filter(function(e){var t=e.includes("-tokens-core-background")||e.includes("-tokens-core-text")||e.includes("-tokens-core-border")||e.includes("-tokens-core-foreground")||e.includes("-tokens-core-icon")||e.includes("-tokens-theme-background")||e.includes("-tokens-theme-text")||e.includes("-tokens-theme-border")||e.includes("-tokens-theme-foreground")||e.includes("-tokens-theme-icon"),n=e.includes("-borderRadius-")||e.includes("-spacing-")||e.includes("-textSize-")||e.includes("-fontFamily-")||e.includes("-fontWeight-")||e.includes("-typography-")||e.includes("-duration-")||e.includes("-ease-")||e.includes("-path-")||e.includes("-width-")||e.includes("-height-")||e.includes("-visual-size-")||e.includes("-modal-width")||e.includes("-cover");return t&&!n});return 0===a.length?"":" @supports (background: color-mix(in srgb, white 50%, black)) {\n      :root {\n        ".concat(a.map(function(e){var a=(null==t?void 0:t[e])||"";return a.includes("color-mix")||a.startsWith("#")||a.startsWith("rgb")?"".concat(e,": color-mix(in srgb, ").concat(n," ").concat(r,"%, ").concat(a,");"):"".concat(e,": color-mix(in srgb, ").concat(n," ").concat(r,"%, var(").concat(e,"-base, ").concat(a,"));")}).join(""),"\n      }\n    }")},generateBaseVariables:function(e){var t={},n=e["--apkt-tokens-theme-backgroundPrimary"];n&&(t["--apkt-tokens-theme-backgroundPrimary-base"]=n);var r=e["--apkt-tokens-core-backgroundAccentPrimary"];return r&&(t["--apkt-tokens-core-backgroundAccentPrimary-base"]=r),t},applyColorMixToVariables:function(e,t){var n={};null!=t&&t["--apkt-tokens-theme-backgroundPrimary"]&&(n["--apkt-tokens-theme-backgroundPrimary"]="var(--apkt-tokens-theme-backgroundPrimary-base)"),(null==t?void 0:t["--apkt-tokens-core-backgroundAccentPrimary"])&&(n["--apkt-tokens-core-backgroundAccentPrimary"]="var(--apkt-tokens-core-backgroundAccentPrimary-base)");var r=o(e),a=r["color-mix"],i=r["color-mix-strength"];if(!i||0===i)return n;var s=Object.keys(t||{}).filter(function(e){var t=e.includes("-tokens-core-background")||e.includes("-tokens-core-text")||e.includes("-tokens-core-border")||e.includes("-tokens-core-foreground")||e.includes("-tokens-core-icon")||e.includes("-tokens-theme-background")||e.includes("-tokens-theme-text")||e.includes("-tokens-theme-border")||e.includes("-tokens-theme-foreground")||e.includes("-tokens-theme-icon")||e.includes("-tokens-theme-overlay"),n=e.includes("-borderRadius-")||e.includes("-spacing-")||e.includes("-textSize-")||e.includes("-fontFamily-")||e.includes("-fontWeight-")||e.includes("-typography-")||e.includes("-duration-")||e.includes("-ease-")||e.includes("-path-")||e.includes("-width-")||e.includes("-height-")||e.includes("-visual-size-")||e.includes("-modal-width")||e.includes("-cover");return t&&!n});return 0===s.length||s.forEach(function(e){var r=(null==t?void 0:t[e])||"";e.endsWith("-base")||(n[e]="--apkt-tokens-theme-backgroundPrimary"===e||"--apkt-tokens-core-backgroundAccentPrimary"===e?"color-mix(in srgb, ".concat(a," ").concat(i,"%, var(").concat(e,"-base))"):r.includes("color-mix")||r.startsWith("#")||r.startsWith("rgb")?"color-mix(in srgb, ".concat(a," ").concat(i,"%, ").concat(r,")"):"color-mix(in srgb, ".concat(a," ").concat(i,"%, var(").concat(e,"-base, ").concat(r,"))"))}),n}},c=s.createCSSVariables(a.W2).cssVariablesVarPrefix;function u(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return r.iv.apply(void 0,[e].concat(x(n.map(function(e){return(0,r.$m)("function"==typeof e?e(c):e)}))))}},61831:function(s,c,u){"use strict";u.d(c,{n:function(){return w},Hs:function(){return E},R:function(){return k},ET:function(){return A},ZM:function(){return N}});var l,d,p,f,h,v=u(14350),g=u(17139),y={"KHTeka-500-woff2":"https://fonts.reown.com/KHTeka-Medium.woff2","KHTeka-400-woff2":"https://fonts.reown.com/KHTeka-Regular.woff2","KHTeka-300-woff2":"https://fonts.reown.com/KHTeka-Light.woff2","KHTekaMono-400-woff2":"https://fonts.reown.com/KHTekaMono-Regular.woff2","KHTeka-500-woff":"https://fonts.reown.com/KHTeka-Light.woff","KHTeka-400-woff":"https://fonts.reown.com/KHTeka-Regular.woff","KHTeka-300-woff":"https://fonts.reown.com/KHTeka-Light.woff","KHTekaMono-400-woff":"https://fonts.reown.com/KHTekaMono-Regular.woff"};function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dark";l&&document.head.removeChild(l),(l=document.createElement("style")).textContent=g.e5.createRootStyles(t,e),document.head.appendChild(l)}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dark";if(h=e,d=document.createElement("style"),p=document.createElement("style"),f=document.createElement("style"),d.textContent=x(e).core.cssText,p.textContent=x(e).dark.cssText,f.textContent=x(e).light.cssText,document.head.appendChild(d),document.head.appendChild(p),document.head.appendChild(f),b(e,t),E(t),!(null!=e&&e["--apkt-font-family"]||null!=e&&e["--w3m-font-family"]))for(var n=0,r=Object.entries(y);n<r.length;n++){var a=C(r[n],2),i=a[0],o=a[1],s=document.createElement("link");s.rel="preload",s.href=o,s.as="font",s.type=i.includes("woff2")?"font/woff2":"font/woff",s.crossOrigin="anonymous",document.head.appendChild(s)}E(t)}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dark";p&&f&&l&&("light"===e?(b(h,e),p.removeAttribute("media"),f.media="enabled"):(b(h,e),f.removeAttribute("media"),p.media="enabled"))}function k(e){var t;if(h=e,d&&p&&f){var n,r,a;d.textContent=x(e).core.cssText,p.textContent=x(e).dark.cssText,f.textContent=x(e).light.cssText;var i=(null==e?void 0:e["--apkt-font-family"])||(null==e?void 0:e["--w3m-font-family"]);i&&(d.textContent=null===(n=d.textContent)||void 0===n?void 0:n.replace("font-family: KHTeka","font-family: ".concat(i)),p.textContent=null===(r=p.textContent)||void 0===r?void 0:r.replace("font-family: KHTeka","font-family: ".concat(i)),f.textContent=null===(a=f.textContent)||void 0===a?void 0:a.replace("font-family: KHTeka","font-family: ".concat(i)))}l&&b(e,"enabled"===(null===(t=f)||void 0===t?void 0:t.media)?"light":"dark")}function x(i){var o=Boolean((null==i?void 0:i["--apkt-font-family"])||(null==i?void 0:i["--w3m-font-family"]));return{core:v.iv(e||(e=m(["\n      ","\n\n      @keyframes w3m-shake {\n        0% {\n          transform: scale(1) rotate(0deg);\n        }\n        20% {\n          transform: scale(1) rotate(-1deg);\n        }\n        40% {\n          transform: scale(1) rotate(1.5deg);\n        }\n        60% {\n          transform: scale(1) rotate(-1.5deg);\n        }\n        80% {\n          transform: scale(1) rotate(1deg);\n        }\n        100% {\n          transform: scale(1) rotate(0deg);\n        }\n      }\n      @keyframes w3m-iframe-fade-out {\n        0% {\n          opacity: 1;\n        }\n        100% {\n          opacity: 0;\n        }\n      }\n      @keyframes w3m-iframe-zoom-in {\n        0% {\n          transform: translateY(50px);\n          opacity: 0;\n        }\n        100% {\n          transform: translateY(0px);\n          opacity: 1;\n        }\n      }\n      @keyframes w3m-iframe-zoom-in-mobile {\n        0% {\n          transform: scale(0.95);\n          opacity: 0;\n        }\n        100% {\n          transform: scale(1);\n          opacity: 1;\n        }\n      }\n      :root {\n        --apkt-modal-width: 370px;\n\n        --apkt-visual-size-inherit: inherit;\n        --apkt-visual-size-sm: 40px;\n        --apkt-visual-size-md: 55px;\n        --apkt-visual-size-lg: 80px;\n\n        --apkt-path-network-sm: path(\n          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'\n        );\n\n        --apkt-path-network-md: path(\n          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'\n        );\n\n        --apkt-path-network-lg: path(\n          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'\n        );\n\n        --apkt-width-network-sm: 36px;\n        --apkt-width-network-md: 48px;\n        --apkt-width-network-lg: 86px;\n\n        --apkt-duration-dynamic: 0ms;\n        --apkt-height-network-sm: 40px;\n        --apkt-height-network-md: 54px;\n        --apkt-height-network-lg: 96px;\n      }\n    "])),o?v.iv(t||(t=m([""]))):v.iv(n||(n=m(["\n            @font-face {\n              font-family: 'KHTeka';\n              src:\n                url(",") format('woff2'),\n                url(",") format('woff');\n              font-weight: 400;\n              font-style: normal;\n              font-display: swap;\n            }\n\n            @font-face {\n              font-family: 'KHTeka';\n              src:\n                url(",") format('woff2'),\n                url(",") format('woff');\n              font-weight: 300;\n              font-style: normal;\n            }\n\n            @font-face {\n              font-family: 'KHTekaMono';\n              src:\n                url(",") format('woff2'),\n                url(",") format('woff');\n              font-weight: 400;\n              font-style: normal;\n            }\n\n            @font-face {\n              font-family: 'KHTeka';\n              src:\n                url(",") format('woff2'),\n                url(",") format('woff');\n              font-weight: 400;\n              font-style: normal;\n            }\n          "])),(0,v.$m)(y["KHTeka-400-woff2"]),(0,v.$m)(y["KHTeka-400-woff"]),(0,v.$m)(y["KHTeka-300-woff2"]),(0,v.$m)(y["KHTeka-300-woff"]),(0,v.$m)(y["KHTekaMono-400-woff2"]),(0,v.$m)(y["KHTekaMono-400-woff"]),(0,v.$m)(y["KHTeka-400-woff2"]),(0,v.$m)(y["KHTeka-400-woff"]))),dark:v.iv(r||(r=m(["\n      :root {\n      }\n    "]))),light:v.iv(a||(a=m(["\n      :root {\n      }\n    "])))}}var A=v.iv(i||(i=m(["\n  div,\n  span,\n  iframe,\n  a,\n  img,\n  form,\n  button,\n  label,\n  *::after,\n  *::before {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font-style: normal;\n    text-rendering: optimizeSpeed;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    -webkit-tap-highlight-color: transparent;\n    backface-visibility: hidden;\n  }\n\n  :host {\n    font-family: var(--apkt-fontFamily-regular);\n  }\n"]))),N=v.iv(o||(o=m(["\n  button,\n  a {\n    cursor: pointer;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: relative;\n\n    will-change: background-color, color, border, box-shadow, width, height, transform, opacity;\n    outline: none;\n    border: none;\n    text-decoration: none;\n    transition:\n      background-color var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),\n      color var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),\n      border var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),\n      box-shadow var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),\n      width var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),\n      height var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),\n      transform var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),\n      opacity var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),\n      scale var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),\n      border-radius var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2);\n    will-change:\n      background-color, color, border, box-shadow, width, height, transform, opacity, scale,\n      border-radius;\n  }\n\n  a:active:not([disabled]),\n  button:active:not([disabled]) {\n    scale: 0.975;\n    transform-origin: center;\n  }\n\n  button:disabled {\n    cursor: default;\n  }\n\n  input {\n    border: none;\n    outline: none;\n    appearance: none;\n  }\n"])))},18504:function(e,t,n){"use strict";n.d(t,{H:function(){return r}});var r={getSpacingStyles:function(e,t){return Array.isArray(e)?e[t]?"var(--apkt-spacing-".concat(e[t],")"):void 0:"string"==typeof e?"var(--apkt-spacing-".concat(e,")"):void 0},getFormattedDate:function(e){return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(e)},formatCurrency:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Number(e);return isNaN(n)?"$0.00":new Intl.NumberFormat("en-US",E({style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2},t)).format(n)},getHostName:function(e){try{return new URL(e).hostname}catch(t){return""}},getTruncateString:function(e){var t=e.string,n=e.charsStart,r=e.charsEnd,a=e.truncate;return t.length<=n+r?t:"end"===a?"".concat(t.substring(0,n),"..."):"start"===a?"...".concat(t.substring(t.length-r)):"".concat(t.substring(0,Math.floor(n)),"...").concat(t.substring(t.length-Math.floor(r)))},generateAvatarColors:function(e){for(var t=e.toLowerCase().replace(/^0x/i,"").replace(/(?:(?![0-9a-f])[\s\S])/g,"").substring(0,6).padEnd(6,"0"),n=this.hexToRgb(t),r=getComputedStyle(document.documentElement).getPropertyValue("--w3m-border-radius-master"),a=100-3*Number(null==r?void 0:r.replace("px","")),i="".concat(a,"% ").concat(a,"% at 65% 40%"),o=[],s=0;s<5;s+=1){var c=this.tintColor(n,.15*s);o.push("rgb(".concat(c[0],", ").concat(c[1],", ").concat(c[2],")"))}return"\n    --local-color-1: ".concat(o[0],";\n    --local-color-2: ").concat(o[1],";\n    --local-color-3: ").concat(o[2],";\n    --local-color-4: ").concat(o[3],";\n    --local-color-5: ").concat(o[4],";\n    --local-radial-circle: ").concat(i,"\n   ")},hexToRgb:function(e){var t=parseInt(e,16);return[t>>16&255,t>>8&255,255&t]},tintColor:function(e,t){var n=C(e,3),r=n[0],a=n[1],i=n[2];return[Math.round(r+(255-r)*t),Math.round(a+(255-a)*t),Math.round(i+(255-i)*t)]},isNumber:function(e){return/^[0-9]+$/.test(e)},getColorTheme:function(e){var t;return e||("undefined"!=typeof window&&window.matchMedia&&"function"==typeof window.matchMedia?null!==(t=window.matchMedia("(prefers-color-scheme: dark)"))&&void 0!==t&&t.matches?"dark":"light":"dark")},splitBalance:function(e){var t=e.split(".");return 2===t.length?[t[0],t[1]]:["0","00"]},roundNumber:function(e,t,n){return e.toString().length>=t?Number(e).toFixed(n):e},cssDurationToNumber:function(e){return e.endsWith("s")?1e3*Number(e.replace("s","")):e.endsWith("ms")?Number(e.replace("ms","")):0},maskInput:function(e){var t,n=e.value,r=e.decimals,a=e.integers;if("."===(n=n.replace(",",".")))return"0.";var i=C(n.split(".").map(function(e){return e.replace(/(?:(?![0-9])[\s\S])/g,"")}),2),o=i[0],s=void 0===o?"":o,c=i[1],u=a?s.substring(0,a):s,l=2===u.length?String(Number(u)):u,d="number"==typeof r?null==c?void 0:c.substring(0,r):c;return null!==(t="string"==typeof d&&("number"!=typeof r||r>0)?[l,d].join("."):l)&&void 0!==t?t:""},capitalize:function(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}}},35896:function(e,t,n){"use strict";function r(e){return function(t){return"function"==typeof t?function(e,t){return customElements.get(e)||customElements.define(e,t),t}(e,t):function(e,t){return{kind:t.kind,elements:t.elements,finisher:function(t){customElements.get(e)||customElements.define(e,t)}}}(e,t)}}n.d(t,{M:function(){return r}})},87002:function(e,t,n){"use strict";var r,a,i,o;n.d(t,{f:function(){return g}});var s=n(60168),c=n(33984),u=n(72290),l=n(42916),d=n(63908),p=n(52991),f={ConnectorExplorerIds:(r={},k(r,u.b.CONNECTOR_ID.COINBASE,"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa"),k(r,u.b.CONNECTOR_ID.COINBASE_SDK,"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa"),k(r,u.b.CONNECTOR_ID.BASE_ACCOUNT,"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa"),k(r,u.b.CONNECTOR_ID.SAFE,"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f"),k(r,u.b.CONNECTOR_ID.LEDGER,"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927"),k(r,u.b.CONNECTOR_ID.OKX,"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709"),k(r,p.b.METMASK_CONNECTOR_NAME,"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96"),k(r,p.b.TRUST_CONNECTOR_NAME,"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0"),k(r,p.b.SOLFLARE_CONNECTOR_NAME,"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79"),k(r,p.b.PHANTOM_CONNECTOR_NAME,"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393"),k(r,p.b.COIN98_CONNECTOR_NAME,"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01"),k(r,p.b.MAGIC_EDEN_CONNECTOR_NAME,"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6"),k(r,p.b.BACKPACK_CONNECTOR_NAME,"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0"),k(r,p.b.BITGET_CONNECTOR_NAME,"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662"),k(r,p.b.FRONTIER_CONNECTOR_NAME,"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041"),k(r,p.b.XVERSE_CONNECTOR_NAME,"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b"),k(r,p.b.LEATHER_CONNECTOR_NAME,"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"),k(r,p.b.OKX_CONNECTOR_NAME,"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709"),k(r,p.b.BINANCE_CONNECTOR_NAME,"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25"),r),NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200","00000008819873e925422c1ff0f99f7c":"b3406e4a-bbfc-44fb-e3a6-89673c78b700","-239":"20f673c0-095e-49b2-07cf-eb5049dcf600","-3":"20f673c0-095e-49b2-07cf-eb5049dcf600"},ConnectorImageIds:(a={},k(a,u.b.CONNECTOR_ID.COINBASE,"0c2840c3-5b04-4c44-9661-fbd4b49e1800"),k(a,u.b.CONNECTOR_ID.COINBASE_SDK,"0c2840c3-5b04-4c44-9661-fbd4b49e1800"),k(a,u.b.CONNECTOR_ID.BASE_ACCOUNT,"bba2c8be-7fd1-463e-42b1-796ecb0ad200"),k(a,u.b.CONNECTOR_ID.SAFE,"461db637-8616-43ce-035a-d89b8a1d5800"),k(a,u.b.CONNECTOR_ID.LEDGER,"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300"),k(a,u.b.CONNECTOR_ID.WALLET_CONNECT,"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400"),k(a,u.b.CONNECTOR_ID.INJECTED,"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"),a),ConnectorNamesMap:(i={},k(i,u.b.CONNECTOR_ID.INJECTED,"Browser Wallet"),k(i,u.b.CONNECTOR_ID.WALLET_CONNECT,"WalletConnect"),k(i,u.b.CONNECTOR_ID.COINBASE,"Coinbase"),k(i,u.b.CONNECTOR_ID.COINBASE_SDK,"Coinbase"),k(i,u.b.CONNECTOR_ID.BASE_ACCOUNT,"Base Account"),k(i,u.b.CONNECTOR_ID.LEDGER,"Ledger"),k(i,u.b.CONNECTOR_ID.SAFE,"Safe"),i),ConnectorTypesMap:(o={},k(o,u.b.CONNECTOR_ID.INJECTED,"INJECTED"),k(o,u.b.CONNECTOR_ID.WALLET_CONNECT,"WALLET_CONNECT"),k(o,u.b.CONNECTOR_ID.EIP6963,"ANNOUNCED"),k(o,u.b.CONNECTOR_ID.AUTH,"AUTH"),k(o,p.b.CONNECTOR_TYPE_AUTH,"AUTH"),o),WalletConnectRpcChainIds:[1,5,11155111,10,420,42161,421613,137,80001,42220,1313161554,1313161555,56,97,43114,43113,100,8453,84531,7777777,999,324,280]};function h(e,t){var n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",e),n.searchParams.set("projectId",t),n.toString()}var v=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","eip155:80094","eip155:80069","eip155:560048","eip155:31","eip155:2818","eip155:57054","eip155:911867","eip155:534351","eip155:1112","eip155:534352","eip155:1111","eip155:146","eip155:130","eip155:1284","eip155:30","eip155:2810","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],g={extendRpcUrlWithProjectId:function(e,t){var n=!1;try{n="rpc.walletconnect.org"===new URL(e).host}catch(a){n=!1}if(n){var r=new URL(e);return r.searchParams.has("projectId")||r.searchParams.set("projectId",t),r.toString()}return e},isCaipNetwork:function(e){return"chainNamespace"in e&&"caipNetworkId"in e},getChainNamespace:function(e){return this.isCaipNetwork(e)?e.chainNamespace:u.b.CHAIN.EVM},getCaipNetworkId:function(e){return this.isCaipNetwork(e)?e.caipNetworkId:"".concat(u.b.CHAIN.EVM,":").concat(e.id)},getDefaultRpcUrl:function(e,t,n){var r,a,i,o=null===(r=e.rpcUrls)||void 0===r||null===(a=r.default)||void 0===a||null===(i=a.http)||void 0===i?void 0:i[0];return v.includes(t)?h(t,n):o||""},extendCaipNetwork:function(e,t){var n,r,a,i,o,s,c,u=t.customNetworkImageUrls,l=t.projectId,d=t.customRpcUrls,p=this.getChainNamespace(e),h=this.getCaipNetworkId(e),v=null===(n=e.rpcUrls)||void 0===n||null===(r=n.default)||void 0===r||null===(a=r.http)||void 0===a?void 0:a[0],g=this.getDefaultRpcUrl(e,h,l),m=(null==e||null===(i=e.rpcUrls)||void 0===i||null===(o=i.chainDefault)||void 0===o||null===(s=o.http)||void 0===s?void 0:s[0])||v,y=(null==d||null===(c=d[h])||void 0===c?void 0:c.map(function(e){return e.url}))||[],b=[].concat(x(y),x(g?[g]:[])),w=x(y);return m&&!w.includes(m)&&w.push(m),E(E({},e),{},{chainNamespace:p,caipNetworkId:h,assets:{imageId:f.NetworkImageIds[e.id],imageUrl:null==u?void 0:u[e.id]},rpcUrls:E(E({},e.rpcUrls),{},{default:{http:b},chainDefault:{http:w}})})},extendCaipNetworks:function(e,t){var n=t.customNetworkImageUrls,r=t.projectId,a=t.customRpcUrls;return e.map(function(e){return g.extendCaipNetwork(e,{customNetworkImageUrls:n,customRpcUrls:a,projectId:r})})},getViemTransport:function(e,t,n){var r,a,i,o=[];return null!=n&&n.forEach(function(e){o.push((0,s.d)(e.url,e.config))}),v.includes(e.caipNetworkId)&&o.push((0,s.d)(h(e.caipNetworkId,t),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),null!=e&&null!==(r=e.rpcUrls)&&void 0!==r&&null!==(a=r.default)&&void 0!==a&&null!==(i=a.http)&&void 0!==i&&i.forEach(function(e){o.push((0,s.d)(e))}),(0,c.tv)(o)},extendWagmiTransports:function(e,t,n){if(v.includes(e.caipNetworkId)){var r=this.getDefaultRpcUrl(e,e.caipNetworkId,t);return(0,c.tv)([n,(0,s.d)(r)])}return n},getUnsupportedNetwork:function(e){return{id:e.split(":")[1],caipNetworkId:e,name:u.b.UNSUPPORTED_NETWORK_NAME,chainNamespace:e.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage:function(e){var t=l.M.getActiveCaipNetworkId(),n=d.R.getAllRequestedCaipNetworks(),r=Array.from(d.R.state.chains.keys()||[]),a=null==t?void 0:t.split(":")[0],i=!!a&&r.includes(a),o=null==n?void 0:n.find(function(e){return e.caipNetworkId===t});return i&&!o&&t?this.getUnsupportedNetwork(t):o||e||(null==n?void 0:n[0])}}},52991:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});var r={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",OKX_CONNECTOR_NAME:"OKX Wallet",BINANCE_CONNECTOR_NAME:"Binance Wallet",EIP155:n(72290).b.CHAIN.EVM,ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"AUTH",getSDKVersionWarningMessage:function(e,t){return"\n     @@@@@@@           @@@@@@@@@@@@@@@@@@      \n   @@@@@@@@@@@      @@@@@@@@@@@@@@@@@@@@@@@@   \n  @@@@@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@  \n @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@  \n @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@   @@@@@@@@@@@ \n @@@@@@@@@@@@@@@  @@@@@@@@@@@@@   @@@@@@@@@@@@ \n @@@@@@@@@@@@@@@  @@@@@@@@@@@@@  @@@@@@@@@@@@@\n @@@@@@@@@@@@@@@  @@@@@@@@@@@@   @@@@@@@@@@@@@    \n @@@@@@   @@@@@@  @@@@@@@@@@@   @@@@@@@@@@@@@@    \n @@@@@@   @@@@@@  @@@@@@@@@@@  @@@@@@@@@@@@@@@ \n @@@@@@@@@@@@@@@  @@@@@@@@@@   @@@@@@@@@@@@@@@ \n @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@  \n  @@@@@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@  \n   @@@@@@@@@@@      @@@@@@@@@@@@@@@@@@@@@@@@   \n      @@@@@            @@@@@@@@@@@@@@@@@@  \n      \nAppKit SDK version ".concat(e," is outdated. Latest version is ").concat(t,". Please update to the latest version for bug fixes and new features.\n            \nChangelog: https://github.com/reown-com/appkit/releases\nNPM Registry: https://www.npmjs.com/package/@reown/appkit")}}},33726:function(e,t,n){"use strict";n.d(t,{g:function(){return u}});var r=n(8239),a=n(72290),i=n(63908),o=n(27297),s=n(42916),c=n(52991),u={getCaipTokens:function(e){if(e){var t={};return Object.entries(e).forEach(function(e){var n=C(e,2),r=n[0],a=n[1];t["".concat(c.b.EIP155,":").concat(r)]=a}),t}},isLowerCaseMatch:function(e,t){return(null==e?void 0:e.toLowerCase())===(null==t?void 0:t.toLowerCase())},getActiveNamespaceConnectedToAuth:function(){var e=i.R.state.activeChain;return a.b.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(function(t){return o.A.getConnectorId(t)===a.b.CONNECTOR_ID.AUTH&&t===e})},withRetry:function(e){var t=e.conditionFn,n=e.intervalMs,a=e.maxRetries,i=0;return new Promise(function(e){function o(){return s.apply(this,arguments)}function s(){return(s=(0,r.Z)(A().mark(function r(){return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i+=1,r.next=3,t();case 3:if(!r.sent){r.next=7;break}r.t0=e(!0),r.next=8;break;case 7:r.t0=i>=a?e(!1):(setTimeout(o,n),null);case 8:return r.abrupt("return",r.t0);case 9:case"end":return r.stop()}},r)}))).apply(this,arguments)}o()})},userChainIdToChainNamespace:function(e){return"number"==typeof e?a.b.CHAIN.EVM:C(e.split(":"),1)[0]},getOtherAuthNamespaces:function(e){return e?a.b.AUTH_CONNECTOR_SUPPORTED_CHAINS.filter(function(t){return t!==e}):[]},getConnectorStorageInfo:function(e,t){var n,r=null!==(n=s.M.getConnections()[t])&&void 0!==n?n:[];return{hasDisconnected:s.M.isConnectorDisconnected(e,t),hasConnected:r.some(function(t){return u.isLowerCaseMatch(t.connectorId,e)})}}}},3628:function(e,t,n){"use strict";n.d(t,{$0:function(){return r},y_:function(){return a}}),"undefined"!=typeof process&&void 0!==process.env&&process,"undefined"!=typeof process&&void 0!==process.env&&process,"undefined"!=typeof process&&void 0!==process.env&&process;var r={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},a={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}}},71426:function(e,t,n){"use strict";n.r(t),n.d(t,{AppKit:function(){return Ih},createAppKit:function(){return _h}});var r=n(8239),a=n(27297),i=n(63908),o=n(7551),s=n(53574),c=n(32628),u=n(93105),l=n(59093),d=n(39927),p=n(14616),f=n(52399),g=Object.defineProperty,m=function(e,t,n){return function(e,t,n){return t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n)},y=function(e){N(n,e);var t=I(n);function n(e){var r;return B(this,n),(r=t.call(this)).opts=e,m(S(r),"protocol","wc"),m(S(r),"version",2),r}return F(n)}(f.q),b=Object.defineProperty,w=function(e){N(n,e);var t=I(n);function n(e,r){var a;return B(this,n),(a=t.call(this)).core=e,a.logger=r,function(e,t,n){!function(e,t,n){t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,t+"",new Map)}(S(a),"records"),a}return F(n)}(f.q),O=function(e){N(n,e);var t=I(n);function n(e,r){var a;return B(this,n),(a=t.call(this)).relayer=e,a.logger=r,a}return F(n)}(f.q),R=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this)}return F(n)}(f.q),P=function(e){N(n,e);var t=I(n);function n(e,r){var a;return B(this,n),(a=t.call(this)).relayer=e,a.logger=r,a}return F(n)}(f.q),D=function(e){N(n,e);var t=I(n);function n(e,r){var a;return B(this,n),(a=t.call(this)).core=e,a.logger=r,a}return F(n)}(f.q),L=Object.defineProperty,j=function(e,t,n){return function(e,t,n){return t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n)},W=n(14611),q=n(80328),Z=n(29168),H=n(97057),K=n(37167),V=n(78359),z=n(13324),G=n(4180),$=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var r=0;r<e.length;r++){var a=e.charAt(r),i=a.charCodeAt(0);if(255!==t[i])throw new TypeError(a+" is ambiguous");t[i]=r}var o=e.length,s=e.charAt(0),c=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var n=0,r=0,a=0;e[n]===s;)r++,n++;for(var i=(e.length-n)*c+1>>>0,u=new Uint8Array(i);n<e.length;){var l=e.charCodeAt(n);if(l>255)return;var d=t[l];if(255===d)return;for(var p=0,f=i-1;(0!==d||p<a)&&-1!==f;f--,p++)d+=o*u[f]>>>0,u[f]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");a=p,n++}for(var h=i-a;h!==i&&0===u[h];)h++;for(var v=new Uint8Array(r+(i-h)),g=r;h!==i;)v[g++]=u[h++];return v}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,a=0,i=t.length;a!==i&&0===t[a];)a++,n++;for(var c=(i-a)*u+1>>>0,l=new Uint8Array(c);a!==i;){for(var d=t[a],p=0,f=c-1;(0!==d||p<r)&&-1!==f;f--,p++)d+=256*l[f]>>>0,l[f]=d%o>>>0,d=d/o>>>0;if(0!==d)throw new Error("Non-zero carry");r=p,a++}for(var h=c-r;h!==c&&0===l[h];)h++;for(var v=s.repeat(n);h<c;++h)v+=e.charAt(l[h]);return v},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw new Error("Non-base"+o+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),J=n(5640),Y=n(48415),X=n(19663);function Q(e){return"".concat(e<0?"-":"","0x").concat(Math.abs(e).toString(16).padStart(2,"0"))}var ee=F(function e(t,n){B(this,e),this.type=t,this.data=n}),te=function(e){N(n,e);var t=I(n);function n(e){var r;B(this,n),r=t.call(this,e);var a=Object.create(n.prototype);return Object.setPrototypeOf(S(r),a),Object.defineProperty(S(r),"name",{configurable:!0,enumerable:!1,value:n.name}),r}return F(n)}(T(Error)),ne=4294967295;function re(e,t,n){var r=Math.floor(n/4294967296),a=n;e.setUint32(t,r),e.setUint32(t+4,a)}function ae(e,t){return 4294967296*e.getInt32(t)+e.getUint32(t+4)}var ie={type:-1,encode:function(e){if(e instanceof Date){var t=function(e){var t=e.getTime(),n=Math.floor(t/1e3),r=1e6*(t-1e3*n),a=Math.floor(r/1e9);return{sec:n+a,nsec:r-1e9*a}}(e);return function(e){var t=e.sec,n=e.nsec;if(t>=0&&n>=0&&t<=17179869183){if(0===n&&t<=4294967295){var r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,t),r}var a=t/4294967296,i=4294967295&t,o=new Uint8Array(8),s=new DataView(o.buffer);return s.setUint32(0,n<<2|3&a),s.setUint32(4,i),o}var c=new Uint8Array(12),u=new DataView(c.buffer);return u.setUint32(0,n),re(u,4,t),c}(t)}return null},decode:function(e){var t=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:var n=t.getUint32(0);return{sec:4294967296*(3&n)+t.getUint32(4),nsec:n>>>2};case 12:return{sec:ae(t,4),nsec:t.getUint32(0)};default:throw new te("Unrecognized data size for timestamp (expected 4, 8, or 12): ".concat(e.length))}}(e);return new Date(1e3*t.sec+t.nsec/1e6)}},oe=function(){function e(){B(this,e),this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(ie)}return F(e,[{key:"register",value:function(e){var t=e.type,n=e.encode,r=e.decode;if(t>=0)this.encoders[t]=n,this.decoders[t]=r;else{var a=-1-t;this.builtInEncoders[a]=n,this.builtInDecoders[a]=r}}},{key:"tryToEncode",value:function(e,t){for(var n=0;n<this.builtInEncoders.length;n++){var r=this.builtInEncoders[n];if(null!=r){var a=r(e,t);if(null!=a)return new ee(-1-n,a)}}for(var i=0;i<this.encoders.length;i++){var o=this.encoders[i];if(null!=o){var s=o(e,t);if(null!=s)return new ee(i,s)}}return e instanceof ee?e:null}},{key:"decode",value:function(e,t,n){var r=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return r?r(e,t,n):new ee(t,e)}}]),e}();oe.defaultCodec=new oe;var se=new TextEncoder;function ce(e,t,n){for(var r=t,a=r+n,i=[],o="";r<a;){var s=e[r++];if(0==(128&s))i.push(s);else if(192==(224&s)){var c=63&e[r++];i.push((31&s)<<6|c)}else if(224==(240&s)){var u=63&e[r++],l=63&e[r++];i.push((31&s)<<12|u<<6|l)}else if(240==(248&s)){var d=(7&s)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++];d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|1023&d),i.push(d)}else i.push(s);i.length>=4096&&(o+=String.fromCharCode.apply(String,i),i.length=0)}return i.length>0&&(o+=String.fromCharCode.apply(String,i)),o}var ue=new TextDecoder;function le(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):function(e){return e instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer}(e)?new Uint8Array(e):Uint8Array.from(e)}function de(e){var t,n,r,a=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);a--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new pe(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function pe(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(pe=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new pe(e)}var fe="array",he="map_key",ve="map_value",ge=function(e){if("string"==typeof e||"number"==typeof e)return e;throw new te("The type of key must be string or number but "+typeof e)},me=function(){function e(){B(this,e),this.stack=[],this.stackHeadPosition=-1}return F(e,[{key:"length",get:function(){return this.stackHeadPosition+1}},{key:"top",value:function(){return this.stack[this.stackHeadPosition]}},{key:"pushArrayState",value:function(e){var t=this.getUninitializedStateFromPool();t.type=fe,t.position=0,t.size=e,t.array=new Array(e)}},{key:"pushMapState",value:function(e){var t=this.getUninitializedStateFromPool();t.type=he,t.readCount=0,t.size=e,t.map={}}},{key:"getUninitializedStateFromPool",value:function(){return this.stackHeadPosition++,this.stackHeadPosition===this.stack.length&&this.stack.push({type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null}),this.stack[this.stackHeadPosition]}},{key:"release",value:function(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===fe){var t=e;t.size=0,t.array=void 0,t.position=0,t.type=void 0}if(e.type===he||e.type===ve){var n=e;n.size=0,n.map=void 0,n.readCount=0,n.type=void 0}this.stackHeadPosition--}},{key:"reset",value:function(){this.stack.length=0,this.stackHeadPosition=-1}}]),e}(),ye=new DataView(new ArrayBuffer(0)),be=new Uint8Array(ye.buffer);try{ye.getInt8(0)}catch(En){if(!(En instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}var we=new RangeError("Insufficient data"),Ee=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;B(this,e),this.hit=0,this.miss=0,this.maxKeyLength=t,this.maxLengthPerKey=n,this.caches=[];for(var r=0;r<this.maxKeyLength;r++)this.caches.push([])}return F(e,[{key:"canBeCached",value:function(e){return e>0&&e<=this.maxKeyLength}},{key:"find",value:function(e,t,n){var r,a=M(this.caches[n-1]);try{e:for(a.s();!(r=a.n()).done;){for(var i=r.value,o=i.bytes,s=0;s<n;s++)if(o[s]!==e[t+s])continue e;return i.str}}catch(c){a.e(c)}finally{a.f()}return null}},{key:"store",value:function(e,t){var n=this.caches[e.length-1],r={bytes:e,str:t};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=r:n.push(r)}},{key:"decode",value:function(e,t,n){var r=this.find(e,t,n);if(null!=r)return this.hit++,r;this.miss++;var a=ce(e,t,n),i=Uint8Array.prototype.slice.call(e,t,t+n);return this.store(i,a),a}}]),e}()),ke=function(){function e(t){var n,r,a,i,o,s,c,u,l;B(this,e),this.totalPos=0,this.pos=0,this.view=ye,this.bytes=be,this.headByte=-1,this.stack=new me,this.entered=!1,this.extensionCodec=null!==(n=null==t?void 0:t.extensionCodec)&&void 0!==n?n:oe.defaultCodec,this.context=null==t?void 0:t.context,this.useBigInt64=null!==(r=null==t?void 0:t.useBigInt64)&&void 0!==r&&r,this.rawStrings=null!==(a=null==t?void 0:t.rawStrings)&&void 0!==a&&a,this.maxStrLength=null!==(i=null==t?void 0:t.maxStrLength)&&void 0!==i?i:ne,this.maxBinLength=null!==(o=null==t?void 0:t.maxBinLength)&&void 0!==o?o:ne,this.maxArrayLength=null!==(s=null==t?void 0:t.maxArrayLength)&&void 0!==s?s:ne,this.maxMapLength=null!==(c=null==t?void 0:t.maxMapLength)&&void 0!==c?c:ne,this.maxExtLength=null!==(u=null==t?void 0:t.maxExtLength)&&void 0!==u?u:ne,this.keyDecoder=void 0!==(null==t?void 0:t.keyDecoder)?t.keyDecoder:Ee,this.mapKeyConverter=null!==(l=null==t?void 0:t.mapKeyConverter)&&void 0!==l?l:ge}return F(e,[{key:"clone",value:function(){return new e({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}},{key:"reinitializeState",value:function(){this.totalPos=0,this.headByte=-1,this.stack.reset()}},{key:"setBuffer",value:function(e){var t=le(e);this.bytes=t,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.pos=0}},{key:"appendBuffer",value:function(e){if(-1!==this.headByte||this.hasRemaining(1)){var t=this.bytes.subarray(this.pos),n=le(e),r=new Uint8Array(t.length+n.length);r.set(t),r.set(n,t.length),this.setBuffer(r)}else this.setBuffer(e)}},{key:"hasRemaining",value:function(e){return this.view.byteLength-this.pos>=e}},{key:"createExtraByteError",value:function(e){var t=this.view,n=this.pos;return new RangeError("Extra ".concat(t.byteLength-n," of ").concat(t.byteLength," byte(s) found at buffer[").concat(e,"]"))}},{key:"decode",value:function(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);var t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t}finally{this.entered=!1}}},{key:"decodeMulti",value:A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.entered){e.next=4;break}return e.delegateYield(this.clone().decodeMulti(t),"t0",2);case 2:e.next=14;break;case 4:e.prev=4,this.entered=!0,this.reinitializeState(),this.setBuffer(t);case 6:if(!this.hasRemaining(1)){e.next=11;break}return e.next=9,this.doDecodeSync();case 9:e.next=6;break;case 11:return e.prev=11,this.entered=!1,e.finish(11);case 14:case"end":return e.stop()}},e,this,[[4,,11,14]])})},{key:"decodeAsync",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,a,i,o,s,c,u,l,d,p,f,h;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.entered){n.next=2;break}return n.abrupt("return",t.clone().decodeAsync(e));case 2:n.prev=2,t.entered=!0,a=!1,o=!0,s=!1,n.prev=6,l=de(e);case 8:return n.next=10,l.next();case 10:return o=(c=n.sent).done,n.next=13,c.value;case 13:if(u=n.sent,o){n.next=31;break}if(d=u,!a){n.next=18;break}throw t.entered=!1,t.createExtraByteError(t.totalPos);case 18:t.appendBuffer(d),n.prev=19,r=t.doDecodeSync(),a=!0,n.next=27;break;case 23:if(n.prev=23,n.t0=n.catch(19),n.t0 instanceof RangeError){n.next=27;break}throw n.t0;case 27:t.totalPos+=t.pos;case 28:o=!0,n.next=8;break;case 31:n.next=36;break;case 33:n.prev=33,n.t1=n.catch(6),s=!0,i=n.t1;case 36:if(n.prev=36,n.prev=37,n.t2=!o&&null!=l.return,!n.t2){n.next=42;break}return n.next=42,l.return();case 42:if(n.prev=42,!s){n.next=45;break}throw i;case 45:return n.finish(42);case 46:return n.finish(36);case 47:if(!a){n.next=51;break}if(!t.hasRemaining(1)){n.next=50;break}throw t.createExtraByteError(t.totalPos);case 50:return n.abrupt("return",r);case 51:throw p=t.headByte,f=t.pos,h=t.totalPos,new RangeError("Insufficient data in parsing ".concat(Q(p)," at ").concat(h," (").concat(f," in the current buffer)"));case 53:return n.prev=53,t.entered=!1,n.finish(53);case 56:case"end":return n.stop()}},n,null,[[2,,53,56],[6,33,36,47],[19,23],[37,,42,46]])}))()}},{key:"decodeArrayStream",value:function(e){return this.decodeMultiAsync(e,!0)}},{key:"decodeStream",value:function(e){return this.decodeMultiAsync(e,!1)}},{key:"decodeMultiAsync",value:function(e,t){var n=this;return(0,J.Z)(A().mark(function r(){var a,i,o,s,c,u,l,d,p,f;return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!n.entered){r.next=5;break}return a=n.clone(),r.delegateYield((0,X.Z)(de(a.decodeMultiAsync(e,t)),Y.Z),"t0",3);case 3:r.next=58;break;case 5:r.prev=5,n.entered=!0,i=t,o=-1,c=!0,u=!1,r.prev=9,p=de(e);case 11:return r.next=13,(0,Y.Z)(p.next());case 13:return c=(l=r.sent).done,r.next=16,(0,Y.Z)(l.value);case 16:if(d=r.sent,c){r.next=39;break}if(f=d,!t||0!==o){r.next=21;break}throw n.createExtraByteError(n.totalPos);case 21:n.appendBuffer(f),i&&(o=n.readArraySize(),i=!1,n.complete()),r.prev=22;case 23:return r.next=25,n.doDecodeSync();case 25:if(0==--o){r.next=29;break}case 27:r.next=23;break;case 29:r.next=35;break;case 31:if(r.prev=31,r.t1=r.catch(22),r.t1 instanceof RangeError){r.next=35;break}throw r.t1;case 35:n.totalPos+=n.pos;case 36:c=!0,r.next=11;break;case 39:r.next=44;break;case 41:r.prev=41,r.t2=r.catch(9),u=!0,s=r.t2;case 44:if(r.prev=44,r.prev=45,r.t3=!c&&null!=p.return,!r.t3){r.next=50;break}return r.next=50,(0,Y.Z)(p.return());case 50:if(r.prev=50,!u){r.next=53;break}throw s;case 53:return r.finish(50);case 54:return r.finish(44);case 55:return r.prev=55,n.entered=!1,r.finish(55);case 58:case"end":return r.stop()}},r,null,[[5,,55,58],[9,41,44,55],[22,31],[45,,50,54]])}))()}},{key:"doDecodeSync",value:function(){e:for(;;){var e=this.readHeadByte(),t=void 0;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){var n=e-128;if(0!==n){this.pushMapState(n),this.complete();continue e}t={}}else if(e<160){var r=e-144;if(0!==r){this.pushArrayState(r),this.complete();continue e}t=[]}else t=this.decodeString(e-160,0);else if(192===e)t=null;else if(194===e)t=!1;else if(195===e)t=!0;else if(202===e)t=this.readF32();else if(203===e)t=this.readF64();else if(204===e)t=this.readU8();else if(205===e)t=this.readU16();else if(206===e)t=this.readU32();else if(207===e)t=this.useBigInt64?this.readU64AsBigInt():this.readU64();else if(208===e)t=this.readI8();else if(209===e)t=this.readI16();else if(210===e)t=this.readI32();else if(211===e)t=this.useBigInt64?this.readI64AsBigInt():this.readI64();else if(217===e){var a=this.lookU8();t=this.decodeString(a,1)}else if(218===e){var i=this.lookU16();t=this.decodeString(i,2)}else if(219===e){var o=this.lookU32();t=this.decodeString(o,4)}else if(220===e){var s=this.readU16();if(0!==s){this.pushArrayState(s),this.complete();continue e}t=[]}else if(221===e){var c=this.readU32();if(0!==c){this.pushArrayState(c),this.complete();continue e}t=[]}else if(222===e){var u=this.readU16();if(0!==u){this.pushMapState(u),this.complete();continue e}t={}}else if(223===e){var l=this.readU32();if(0!==l){this.pushMapState(l),this.complete();continue e}t={}}else if(196===e){var d=this.lookU8();t=this.decodeBinary(d,1)}else if(197===e){var p=this.lookU16();t=this.decodeBinary(p,2)}else if(198===e){var f=this.lookU32();t=this.decodeBinary(f,4)}else if(212===e)t=this.decodeExtension(1,0);else if(213===e)t=this.decodeExtension(2,0);else if(214===e)t=this.decodeExtension(4,0);else if(215===e)t=this.decodeExtension(8,0);else if(216===e)t=this.decodeExtension(16,0);else if(199===e){var h=this.lookU8();t=this.decodeExtension(h,1)}else if(200===e){var v=this.lookU16();t=this.decodeExtension(v,2)}else{if(201!==e)throw new te("Unrecognized type byte: ".concat(Q(e)));var g=this.lookU32();t=this.decodeExtension(g,4)}this.complete();for(var m=this.stack;m.length>0;){var y=m.top();if(y.type===fe){if(y.array[y.position]=t,y.position++,y.position!==y.size)continue e;t=y.array,m.release(y)}else{if(y.type===he){if("__proto__"===t)throw new te("The key __proto__ is not allowed");y.key=this.mapKeyConverter(t),y.type=ve;continue e}if(y.map[y.key]=t,y.readCount++,y.readCount!==y.size){y.key=null,y.type=he;continue e}t=y.map,m.release(y)}}return t}}},{key:"readHeadByte",value:function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte}},{key:"complete",value:function(){this.headByte=-1}},{key:"readArraySize",value:function(){var e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(e<160)return e-144;throw new te("Unrecognized array type byte: ".concat(Q(e)))}}},{key:"pushMapState",value:function(e){if(e>this.maxMapLength)throw new te("Max length exceeded: map length (".concat(e,") > maxMapLengthLength (").concat(this.maxMapLength,")"));this.stack.pushMapState(e)}},{key:"pushArrayState",value:function(e){if(e>this.maxArrayLength)throw new te("Max length exceeded: array length (".concat(e,") > maxArrayLength (").concat(this.maxArrayLength,")"));this.stack.pushArrayState(e)}},{key:"decodeString",value:function(e,t){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,t):this.decodeBinary(e,t)}},{key:"decodeUtf8String",value:function(e,t){var n;if(e>this.maxStrLength)throw new te("Max length exceeded: UTF-8 byte length (".concat(e,") > maxStrLength (").concat(this.maxStrLength,")"));if(this.bytes.byteLength<this.pos+t+e)throw we;var r,a=this.pos+t;return r=this.stateIsMapKey()&&null!==(n=this.keyDecoder)&&void 0!==n&&n.canBeCached(e)?this.keyDecoder.decode(this.bytes,a,e):function(e,t,n){return n>200?function(e,t,n){var r=e.subarray(t,t+n);return ue.decode(r)}(e,t,n):ce(e,t,n)}(this.bytes,a,e),this.pos+=t+e,r}},{key:"stateIsMapKey",value:function(){return this.stack.length>0&&this.stack.top().type===he}},{key:"decodeBinary",value:function(e,t){if(e>this.maxBinLength)throw new te("Max length exceeded: bin length (".concat(e,") > maxBinLength (").concat(this.maxBinLength,")"));if(!this.hasRemaining(e+t))throw we;var n=this.pos+t,r=this.bytes.subarray(n,n+e);return this.pos+=t+e,r}},{key:"decodeExtension",value:function(e,t){if(e>this.maxExtLength)throw new te("Max length exceeded: ext length (".concat(e,") > maxExtLength (").concat(this.maxExtLength,")"));var n=this.view.getInt8(this.pos+t),r=this.decodeBinary(e,t+1);return this.extensionCodec.decode(r,n,this.context)}},{key:"lookU8",value:function(){return this.view.getUint8(this.pos)}},{key:"lookU16",value:function(){return this.view.getUint16(this.pos)}},{key:"lookU32",value:function(){return this.view.getUint32(this.pos)}},{key:"readU8",value:function(){var e=this.view.getUint8(this.pos);return this.pos++,e}},{key:"readI8",value:function(){var e=this.view.getInt8(this.pos);return this.pos++,e}},{key:"readU16",value:function(){var e=this.view.getUint16(this.pos);return this.pos+=2,e}},{key:"readI16",value:function(){var e=this.view.getInt16(this.pos);return this.pos+=2,e}},{key:"readU32",value:function(){var e=this.view.getUint32(this.pos);return this.pos+=4,e}},{key:"readI32",value:function(){var e=this.view.getInt32(this.pos);return this.pos+=4,e}},{key:"readU64",value:function(){var e=function(e,t){return 4294967296*e.getUint32(t)+e.getUint32(t+4)}(this.view,this.pos);return this.pos+=8,e}},{key:"readI64",value:function(){var e=ae(this.view,this.pos);return this.pos+=8,e}},{key:"readU64AsBigInt",value:function(){var e=this.view.getBigUint64(this.pos);return this.pos+=8,e}},{key:"readI64AsBigInt",value:function(){var e=this.view.getBigInt64(this.pos);return this.pos+=8,e}},{key:"readF32",value:function(){var e=this.view.getFloat32(this.pos);return this.pos+=4,e}},{key:"readF64",value:function(){var e=this.view.getFloat64(this.pos);return this.pos+=8,e}}]),e}(),xe=function(){function e(t){var n,r,a,i,o,s,c,u;B(this,e),this.entered=!1,this.extensionCodec=null!==(n=null==t?void 0:t.extensionCodec)&&void 0!==n?n:oe.defaultCodec,this.context=null==t?void 0:t.context,this.useBigInt64=null!==(r=null==t?void 0:t.useBigInt64)&&void 0!==r&&r,this.maxDepth=null!==(a=null==t?void 0:t.maxDepth)&&void 0!==a?a:100,this.initialBufferSize=null!==(i=null==t?void 0:t.initialBufferSize)&&void 0!==i?i:2048,this.sortKeys=null!==(o=null==t?void 0:t.sortKeys)&&void 0!==o&&o,this.forceFloat32=null!==(s=null==t?void 0:t.forceFloat32)&&void 0!==s&&s,this.ignoreUndefined=null!==(c=null==t?void 0:t.ignoreUndefined)&&void 0!==c&&c,this.forceIntegerToFloat=null!==(u=null==t?void 0:t.forceIntegerToFloat)&&void 0!==u&&u,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return F(e,[{key:"clone",value:function(){return new e({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}},{key:"reinitializeState",value:function(){this.pos=0}},{key:"encodeSharedRef",value:function(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}},{key:"encode",value:function(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}},{key:"doEncode",value:function(e,t){if(t>this.maxDepth)throw new Error("Too deep objects in depth ".concat(t));null==e?this.encodeNil():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.useBigInt64&&"bigint"==typeof e?this.encodeBigInt64(e):this.encodeObject(e,t)}},{key:"ensureBufferSizeToWrite",value:function(e){var t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(2*t)}},{key:"resizeBuffer",value:function(e){var t=new ArrayBuffer(e),n=new Uint8Array(t),r=new DataView(t);n.set(this.bytes),this.view=r,this.bytes=n}},{key:"encodeNil",value:function(){this.writeU8(192)}},{key:"encodeBoolean",value:function(e){this.writeU8(!1===e?194:195)}},{key:"encodeNumber",value:function(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}},{key:"encodeNumberAsFloat",value:function(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}},{key:"encodeBigInt64",value:function(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}},{key:"writeStringHeader",value:function(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else{if(!(e<4294967296))throw new Error("Too long string: ".concat(e," bytes in UTF-8"));this.writeU8(219),this.writeU32(e)}}},{key:"encodeString",value:function(e){var t=function(e){for(var t=e.length,n=0,r=0;r<t;){var a=e.charCodeAt(r++);if(0!=(4294967168&a))if(0==(4294965248&a))n+=2;else{if(a>=55296&&a<=56319&&r<t){var i=e.charCodeAt(r);56320==(64512&i)&&(++r,a=((1023&a)<<10)+(1023&i)+65536)}n+=0==(4294901760&a)?3:4}else n++}return n}(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),function(e,t,n){e.length>50?function(e,t,n){se.encodeInto(e,t.subarray(n))}(e,t,n):function(e,t,n){for(var r=e.length,a=n,i=0;i<r;){var o=e.charCodeAt(i++);if(0!=(4294967168&o)){if(0==(4294965248&o))t[a++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){var s=e.charCodeAt(i);56320==(64512&s)&&(++i,o=((1023&o)<<10)+(1023&s)+65536)}0==(4294901760&o)?(t[a++]=o>>12&15|224,t[a++]=o>>6&63|128):(t[a++]=o>>18&7|240,t[a++]=o>>12&63|128,t[a++]=o>>6&63|128)}t[a++]=63&o|128}else t[a++]=o}}(e,t,n)}(e,this.bytes,this.pos),this.pos+=t}},{key:"encodeObject",value:function(e,t){var n=this.extensionCodec.tryToEncode(e,this.context);if(null!=n)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else{if("object"!=typeof e)throw new Error("Unrecognized object: ".concat(Object.prototype.toString.apply(e)));this.encodeMap(e,t)}}},{key:"encodeBinary",value:function(e){var t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large binary: ".concat(t));this.writeU8(198),this.writeU32(t)}var n=le(e);this.writeU8a(n)}},{key:"encodeArray",value:function(e,t){var n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else{if(!(n<4294967296))throw new Error("Too large array: ".concat(n));this.writeU8(221),this.writeU32(n)}var r,a=M(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.doEncode(i,t+1)}}catch(o){a.e(o)}finally{a.f()}}},{key:"countWithoutUndefined",value:function(e,t){var n,r=0,a=M(t);try{for(a.s();!(n=a.n()).done;){void 0!==e[n.value]&&r++}}catch(i){a.e(i)}finally{a.f()}return r}},{key:"encodeMap",value:function(e,t){var n=Object.keys(e);this.sortKeys&&n.sort();var r=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(r<16)this.writeU8(128+r);else if(r<65536)this.writeU8(222),this.writeU16(r);else{if(!(r<4294967296))throw new Error("Too large map object: ".concat(r));this.writeU8(223),this.writeU32(r)}for(var a=0,i=n;a<i.length;a++){var o=i[a],s=e[o];this.ignoreUndefined&&void 0===s||(this.encodeString(o),this.doEncode(s,t+1))}}},{key:"encodeExtension",value:function(e){if("function"==typeof e.data){var t=e.data(this.pos+6),n=t.length;if(n>=4294967296)throw new Error("Too large extension object: ".concat(n));return this.writeU8(201),this.writeU32(n),this.writeI8(e.type),void this.writeU8a(t)}var r=e.data.length;if(1===r)this.writeU8(212);else if(2===r)this.writeU8(213);else if(4===r)this.writeU8(214);else if(8===r)this.writeU8(215);else if(16===r)this.writeU8(216);else if(r<256)this.writeU8(199),this.writeU8(r);else if(r<65536)this.writeU8(200),this.writeU16(r);else{if(!(r<4294967296))throw new Error("Too large extension object: ".concat(r));this.writeU8(201),this.writeU32(r)}this.writeI8(e.type),this.writeU8a(e.data)}},{key:"writeU8",value:function(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}},{key:"writeU8a",value:function(e){var t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t}},{key:"writeI8",value:function(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}},{key:"writeU16",value:function(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}},{key:"writeI16",value:function(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}},{key:"writeU32",value:function(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}},{key:"writeI32",value:function(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}},{key:"writeF32",value:function(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}},{key:"writeF64",value:function(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}},{key:"writeU64",value:function(e){this.ensureBufferSizeToWrite(8),function(e,t,n){var r=n;e.setUint32(t,n/4294967296),e.setUint32(t+4,r)}(this.view,this.pos,e),this.pos+=8}},{key:"writeI64",value:function(e){this.ensureBufferSizeToWrite(8),re(this.view,this.pos,e),this.pos+=8}},{key:"writeBigUint64",value:function(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}},{key:"writeBigInt64",value:function(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}}]),e}(),Ce=n(24517),Ae=n(51462),Ne=n(63840),Ie=n(40187);function _e(e){var t=C(e.split(":"),2);return{namespace:t[0],reference:t[1]}}function Se(e,t){return e.includes(":")?[e]:t.chains||[]}var Te=Object.defineProperty,Oe=Object.defineProperties,Re=Object.getOwnPropertyDescriptors,Pe=Object.getOwnPropertySymbols,Ue=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable,De=function(e,t,n){return t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Le=function(e,t){for(var n in t||(t={}))Ue.call(t,n)&&De(e,n,t[n]);if(Pe){var r,a=M(Pe(t));try{for(a.s();!(r=a.n()).done;){n=r.value;Me.call(t,n)&&De(e,n,t[n])}}catch(i){a.e(i)}finally{a.f()}}return e},Be=function(e,t,n){return De(e,"symbol"!=typeof t?t+"":t,n)},je="js";function Fe(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function We(){return!(0,K.getDocument)()&&!!(0,K.getNavigator)()&&"ReactNative"===navigator.product}function qe(){return!Fe()&&!!(0,K.getNavigator)()&&!!(0,K.getDocument)()}function Ze(){return We()?"react-native":Fe()?"node":qe()?"browser":"unknown"}function He(){var e;try{return We()&&typeof global<"u"&&typeof(null==global?void 0:global.Application)<"u"?null==(e=global.Application)?void 0:e.applicationId:void 0}catch(t){return}}function Ke(){return(0,V.D)()||{name:"",description:"",url:"",icons:[""]}}function Ve(e,t,n){var r=function(){if("react-native"===Ze()&&typeof global<"u"&&typeof(null==global?void 0:global.Platform)<"u"){var e=global.Platform;return[e.OS,e.Version].join("-")}var t=(0,H.qY)();if(null===t)return"unknown";var n=t.os?t.os.replace(" ","").toLowerCase():"unknown";return"browser"===t.type?[n,t.name,t.version].join("-"):[n,t.version].join("-")}(),a=function(){var e,t=Ze();return"browser"===t?[t,(null==(e=(0,K.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),[je,n].join("-"),r,a].join("/")}function ze(e,t){return e.filter(function(e){return t.includes(e)}).length===e.length}function Ge(e){return Object.fromEntries(e.entries())}function $e(e){return new Map(Object.entries(e))}function Je(){var e,t,n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W.FIVE_MINUTES,i=arguments.length>1?arguments[1]:void 0,o=(0,W.toMiliseconds)(a||W.FIVE_MINUTES);return{resolve:function(t){n&&e&&(clearTimeout(n),e(t),r=Promise.resolve(t))},reject:function(e){n&&t&&(clearTimeout(n),t(e))},done:function(){return new Promise(function(a,s){if(r)return a(r);n=setTimeout(function(){var e=new Error(i);r=Promise.reject(e),s(e)},o),e=a,t=s})}}}function Ye(e,t,n){return new Promise(function(){var a=(0,r.Z)(A().mark(function r(a,i){var o;return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=setTimeout(function(){return i(new Error(n))},t),r.prev=1,r.t0=a,r.next=5,e;case 5:r.t1=r.sent,(0,r.t0)(r.t1),r.next=12;break;case 9:r.prev=9,r.t2=r.catch(1),i(r.t2);case 12:clearTimeout(o);case 13:case"end":return r.stop()}},r,null,[[1,9]])}));return function(e,t){return a.apply(this,arguments)}}())}function Xe(e,t){if("string"==typeof t&&t.startsWith("".concat(e,":")))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw new Error('Value must be "string" for expirer target type: topic');return"topic:".concat(t)}if("id"===e.toLowerCase()){if("number"!=typeof t)throw new Error('Value must be "number" for expirer target type: id');return"id:".concat(t)}throw new Error("Unknown expirer target type: ".concat(e))}function Qe(e){var t=C(e.split(":"),2),n=t[0],r=t[1],a={id:void 0,topic:void 0};if("topic"===n&&"string"==typeof r)a.topic=r;else{if("id"!==n||!Number.isInteger(Number(r)))throw new Error("Invalid target, expected id:number or topic:string, got ".concat(n,":").concat(r));a.id=Number(r)}return a}function et(e,t){return(0,W.fromMiliseconds)((t||Date.now())+(0,W.toMiliseconds)(e))}function tt(e){return Date.now()>=(0,W.toMiliseconds)(e)}function nt(e,t){return"".concat(e).concat(t?":".concat(t):"")}function rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return x(new Set([].concat(x(e),x(t))))}function at(){return(at=(0,r.Z)(function(e){var t=e.id,n=e.topic,r=e.wcDeepLink;return A().mark(function e(){var a,i,o,s,c;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r){e.next=3;break}return e.abrupt("return");case 3:if("string"==typeof(o=null===(i="string"==typeof r?JSON.parse(r):r)||void 0===i?void 0:i.href)){e.next=6;break}return e.abrupt("return");case 6:if(s=it(o,t,n),"browser"!==(c=Ze())){e.next=13;break}if(null!=(a=(0,K.getDocument)())&&a.hasFocus()){e.next=10;break}return e.abrupt("return",void console.warn("Document does not have focus, skipping deeplink."));case 10:ot(s),e.next=17;break;case 13:if(e.t0="react-native"===c&&typeof(null==global?void 0:global.Linking)<"u",!e.t0){e.next=17;break}return e.next=17,global.Linking.openURL(s);case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(0),console.error(e.t1);case 22:case"end":return e.stop()}},e,null,[[0,19]])})()})).apply(this,arguments)}function it(e,t,n){var r="requestId=".concat(t,"&sessionTopic=").concat(n);e.endsWith("/")&&(e=e.slice(0,-1));var a="".concat(e);return a=e.startsWith("https://t.me")?"".concat(a).concat(e.includes("?")?"&startapp=":"?startapp=").concat(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Buffer.from(e).toString("base64");return t?n.replace(/[=]/g,""):n}(r,!0)):"".concat(a,"/wc?").concat(r),a}function ot(e){var t="_self";!function(){try{return window.self!==window.top}catch(e){return!1}}()?(typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"):t="_top",window.open(e,t,"noreferrer noopener")}function st(){return(st=(0,r.Z)(A().mark(function e(t,n){var r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r="",e.prev=1,!qe()||!(r=localStorage.getItem(n))){e.next=4;break}return e.abrupt("return",r);case 4:return e.next=6,t.getItem(n);case 6:r=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}},e,null,[[1,9]])}))).apply(this,arguments)}function ct(e,t){if(!e.includes(t))return null;var n=e.split(/([&,?,=])/),r=n.indexOf(t);return n[r+2]}function ut(){return typeof crypto<"u"&&null!=crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function lt(){return typeof process<"u"&&"true"===process.env.IS_VITEST}function dt(e){return Buffer.from(e,"base64").toString("utf-8")}var pt=function(){function e(t){var n=t.limit;B(this,e),Be(this,"limit"),Be(this,"set"),this.limit=n,this.set=new Set}return F(e,[{key:"add",value:function(e){if(!this.set.has(e)){if(this.set.size>=this.limit){var t=this.set.values().next().value;t&&this.set.delete(t)}this.set.add(e)}}},{key:"has",value:function(e){return this.set.has(e)}}]),e}(),ft=BigInt(Math.pow(2,32)-1),ht=BigInt(32);function vt(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?{h:Number(e&ft),l:Number(e>>ht&ft)}:{h:0|Number(e>>ht&ft),l:0|Number(e&ft)}}function gt(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.length,r=new Uint32Array(n),a=new Uint32Array(n),i=0;i<n;i++){var o=vt(e[i],t),s=o.h,c=o.l,u=[s,c];r[i]=u[0],a[i]=u[1]}return[r,a]}var mt=function(e,t,n){return e>>>n},yt=function(e,t,n){return e<<32-n|t>>>n},bt=function(e,t,n){return e>>>n|t<<32-n},wt=function(e,t,n){return e<<32-n|t>>>n},Et=function(e,t,n){return e<<64-n|t>>>n-32},kt=function(e,t,n){return e>>>n-32|t<<64-n},xt=function(e,t){return t},Ct=function(e,t){return e};function At(e,t,n,r){var a=(t>>>0)+(r>>>0);return{h:e+n+(a/Math.pow(2,32)|0)|0,l:0|a}}var Nt=function(e,t,n){return(e>>>0)+(t>>>0)+(n>>>0)},It=function(e,t,n,r){return t+n+r+(e/Math.pow(2,32)|0)|0},_t=function(e,t,n,r){return(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)},St=function(e,t,n,r,a){return t+n+r+a+(e/Math.pow(2,32)|0)|0},Tt=function(e,t,n,r,a){return(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(a>>>0)},Ot=function(e,t,n,r,a,i){return t+n+r+a+i+(e/Math.pow(2,32)|0)|0},Rt="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function Pt(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function Ut(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Mt(e){if(!Pt(e))throw new Error("Uint8Array expected");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error("Uint8Array expected of length "+n+", got length="+e.length)}function Dt(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.createHasher");Ut(e.outputLen),Ut(e.blockLen)}function Lt(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Bt(e,t){Mt(e);var n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function jt(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Ft(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++)t[r].fill(0)}function Wt(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function qt(e,t){return e<<32-t|e>>>t}var Zt=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Ht(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}var Kt=Zt?function(e){return e}:function(e){return Ht(e)},Vt=Zt?function(e){return e}:function(e){for(var t=0;t<e.length;t++)e[t]=Ht(e[t]);return e},zt="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,Gt=Array.from({length:256},function(e,t){return t.toString(16).padStart(2,"0")});function $t(e){if(Mt(e),zt)return e.toHex();for(var t="",n=0;n<e.length;n++)t+=Gt[e[n]];return t}function Jt(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function Yt(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);if(zt)return Uint8Array.fromHex(e);var t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);for(var r=new Uint8Array(n),a=0,i=0;a<n;a++,i+=2){var o=Jt(e.charCodeAt(i)),s=Jt(e.charCodeAt(i+1));if(void 0===o||void 0===s)throw new Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);r[a]=16*o+s}return r}function Xt(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}function Qt(e){return"string"==typeof e&&(e=Xt(e)),Mt(e),e}function en(){for(var e=0,t=0;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t];Mt(n),e+=n.length}for(var r=new Uint8Array(e),a=0,i=0;a<arguments.length;a++){var o=a<0||arguments.length<=a?void 0:arguments[a];r.set(o,i),i+=o.length}return r}var tn=F(function e(){B(this,e)});function nn(e){var t=function(t){return e().update(Qt(t)).digest()},n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=function(){return e()},t}function rn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(Rt&&"function"==typeof Rt.getRandomValues)return Rt.getRandomValues(new Uint8Array(e));if(Rt&&"function"==typeof Rt.randomBytes)return Uint8Array.from(Rt.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}for(var an=BigInt(0),on=BigInt(1),sn=BigInt(2),cn=BigInt(7),un=BigInt(256),ln=BigInt(113),dn=[],pn=[],fn=[],hn=0,vn=on,gn=1,mn=0;hn<24;hn++){var yn;gn=(yn=[mn,(2*gn+3*mn)%5])[0],mn=yn[1],dn.push(2*(5*mn+gn)),pn.push((hn+1)*(hn+2)/2%64);for(var bn=an,wn=0;wn<7;wn++)(vn=(vn<<on^(vn>>cn)*ln)%un)&sn&&(bn^=on<<(on<<BigInt(wn))-on);fn.push(bn)}var En,kn=gt(fn,!0),xn=kn[0],Cn=kn[1],An=function(e,t,n){return n>32?function(e,t,n){return t<<n-32|e>>>64-n}(e,t,n):function(e,t,n){return e<<n|t>>>32-n}(e,t,n)},Nn=function(e,t,n){return n>32?function(e,t,n){return e<<n-32|t>>>64-n}(e,t,n):function(e,t,n){return t<<n|e>>>32-n}(e,t,n)},In=function(e){N(n,e);var t=I(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:24;if(B(this,n),(i=t.call(this)).pos=0,i.posOut=0,i.finished=!1,i.destroyed=!1,i.enableXOF=!1,i.blockLen=e,i.suffix=r,i.outputLen=a,i.enableXOF=o,i.rounds=s,Ut(a),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");return i.state=new Uint8Array(200),i.state32=jt(i.state),_(i)}return F(n,[{key:"clone",value:function(){return this._cloneInto()}},{key:"keccak",value:function(){Vt(this.state32),function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,n=new Uint32Array(10),r=24-t;r<24;r++){for(var a=0;a<10;a++)n[a]=e[a]^e[a+10]^e[a+20]^e[a+30]^e[a+40];for(var i=0;i<10;i+=2)for(var o=(i+8)%10,s=(i+2)%10,c=n[s],u=n[s+1],l=An(c,u,1)^n[o],d=Nn(c,u,1)^n[o+1],p=0;p<50;p+=10)e[i+p]^=l,e[i+p+1]^=d;for(var f=e[2],h=e[3],v=0;v<24;v++){var g=pn[v],m=An(f,h,g),y=Nn(f,h,g),b=dn[v];f=e[b],h=e[b+1],e[b]=m,e[b+1]=y}for(var w=0;w<50;w+=10){for(var E=0;E<10;E++)n[E]=e[w+E];for(var k=0;k<10;k++)e[w+k]^=~n[(k+2)%10]&n[(k+4)%10]}e[0]^=xn[r],e[1]^=Cn[r]}Ft(n)}(this.state32,this.rounds),Vt(this.state32),this.posOut=0,this.pos=0}},{key:"update",value:function(e){Lt(this),Mt(e=Qt(e));for(var t=this.blockLen,n=this.state,r=e.length,a=0;a<r;){for(var i=Math.min(t-this.pos,r-a),o=0;o<i;o++)n[this.pos++]^=e[a++];this.pos===t&&this.keccak()}return this}},{key:"finish",value:function(){if(!this.finished){this.finished=!0;var e=this.state,t=this.suffix,n=this.pos,r=this.blockLen;e[n]^=t,0!=(128&t)&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}}},{key:"writeInto",value:function(e){Lt(this,!1),Mt(e),this.finish();for(var t=this.state,n=this.blockLen,r=0,a=e.length;r<a;){this.posOut>=n&&this.keccak();var i=Math.min(n-this.posOut,a-r);e.set(t.subarray(this.posOut,this.posOut+i),r),this.posOut+=i,r+=i}return e}},{key:"xofInto",value:function(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}},{key:"xof",value:function(e){return Ut(e),this.xofInto(new Uint8Array(e))}},{key:"digestInto",value:function(e){if(Bt(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}},{key:"digest",value:function(){return this.digestInto(new Uint8Array(this.outputLen))}},{key:"destroy",value:function(){this.destroyed=!0,Ft(this.state)}},{key:"_cloneInto",value:function(e){var t=this.blockLen,r=this.suffix,a=this.outputLen,i=this.rounds,o=this.enableXOF;return e||(e=new n(t,r,a,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=a,e.enableXOF=o,e.destroyed=this.destroyed,e}}]),n}(tn),_n=(En=1,nn(function(){return new In(136,1,32)}));function Sn(e,t,n){return e&t^~e&n}function Tn(e,t,n){return e&t^e&n^t&n}var On=function(e){N(n,e);var t=I(n);function n(e,r,a,i){var o;return B(this,n),(o=t.call(this)).finished=!1,o.length=0,o.pos=0,o.destroyed=!1,o.blockLen=e,o.outputLen=r,o.padOffset=a,o.isLE=i,o.buffer=new Uint8Array(e),o.view=Wt(o.buffer),o}return F(n,[{key:"update",value:function(e){Lt(this),Mt(e=Qt(e));for(var t=this.view,n=this.buffer,r=this.blockLen,a=e.length,i=0;i<a;){var o=Math.min(r-this.pos,a-i);if(o!==r)n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(t,0),this.pos=0);else for(var s=Wt(e);r<=a-i;i+=r)this.process(s,i)}return this.length+=e.length,this.roundClean(),this}},{key:"digestInto",value:function(e){Lt(this),Bt(e,this),this.finished=!0;var t=this.buffer,n=this.view,r=this.blockLen,a=this.isLE,i=this.pos;t[i++]=128,Ft(this.buffer.subarray(i)),this.padOffset>r-i&&(this.process(n,0),i=0);for(var o=i;o<r;o++)t[o]=0;(function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);var a=BigInt(32),i=BigInt(4294967295),o=Number(n>>a&i),s=Number(n&i),c=r?0:4;e.setUint32(t+(r?4:0),o,r),e.setUint32(t+c,s,r)})(n,r-8,BigInt(8*this.length),a),this.process(n,0);var s=Wt(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");var u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(var d=0;d<u;d++)s.setUint32(4*d,l[d],a)}},{key:"digest",value:function(){var e=this.buffer,t=this.outputLen;this.digestInto(e);var n=e.slice(0,t);return this.destroy(),n}},{key:"_cloneInto",value:function(e){var t;e||(e=new this.constructor),(t=e).set.apply(t,x(this.get()));var n=this.blockLen,r=this.buffer,a=this.length,i=this.finished,o=this.destroyed,s=this.pos;return e.destroyed=o,e.finished=i,e.length=a,e.pos=s,a%n&&e.buffer.set(r),e}},{key:"clone",value:function(){return this._cloneInto()}}]),n}(tn),Rn=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Pn=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Un=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Mn=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Dn=new Uint32Array(64),Ln=function(e){N(n,e);var t=I(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return B(this,n),(e=t.call(this,64,r,8,!1)).A=0|Rn[0],e.B=0|Rn[1],e.C=0|Rn[2],e.D=0|Rn[3],e.E=0|Rn[4],e.F=0|Rn[5],e.G=0|Rn[6],e.H=0|Rn[7],e}return F(n,[{key:"get",value:function(){return[this.A,this.B,this.C,this.D,this.E,this.F,this.G,this.H]}},{key:"set",value:function(e,t,n,r,a,i,o,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|a,this.F=0|i,this.G=0|o,this.H=0|s}},{key:"process",value:function(e,t){for(var n=0;n<16;n++,t+=4)Dn[n]=e.getUint32(t,!1);for(var r=16;r<64;r++){var a=Dn[r-15],i=Dn[r-2],o=qt(a,7)^qt(a,18)^a>>>3,s=qt(i,17)^qt(i,19)^i>>>10;Dn[r]=s+Dn[r-7]+o+Dn[r-16]|0}var c=this.A,u=this.B,l=this.C,d=this.D,p=this.E,f=this.F,h=this.G,v=this.H;for(n=0;n<64;n++){i=v+(qt(p,6)^qt(p,11)^qt(p,25))+Sn(p,f,h)+Mn[n]+Dn[n]|0,o=(qt(c,2)^qt(c,13)^qt(c,22))+Tn(c,u,l)|0;v=h,h=f,f=p,p=d+i|0,d=l,l=u,u=c,c=i+o|0}c=c+this.A|0,u=u+this.B|0,l=l+this.C|0,d=d+this.D|0,p=p+this.E|0,f=f+this.F|0,h=h+this.G|0,v=v+this.H|0,this.set(c,u,l,d,p,f,h,v)}},{key:"roundClean",value:function(){Ft(Dn)}},{key:"destroy",value:function(){this.set(0,0,0,0,0,0,0,0),Ft(this.buffer)}}]),n}(On),Bn=gt(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(function(e){return BigInt(e)})),jn=Bn[0],Fn=Bn[1],Wn=new Uint32Array(80),qn=new Uint32Array(80),Zn=function(e){N(n,e);var t=I(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:64;return B(this,n),(e=t.call(this,128,r,16,!1)).Ah=0|Un[0],e.Al=0|Un[1],e.Bh=0|Un[2],e.Bl=0|Un[3],e.Ch=0|Un[4],e.Cl=0|Un[5],e.Dh=0|Un[6],e.Dl=0|Un[7],e.Eh=0|Un[8],e.El=0|Un[9],e.Fh=0|Un[10],e.Fl=0|Un[11],e.Gh=0|Un[12],e.Gl=0|Un[13],e.Hh=0|Un[14],e.Hl=0|Un[15],e}return F(n,[{key:"get",value:function(){return[this.Ah,this.Al,this.Bh,this.Bl,this.Ch,this.Cl,this.Dh,this.Dl,this.Eh,this.El,this.Fh,this.Fl,this.Gh,this.Gl,this.Hh,this.Hl]}},{key:"set",value:function(e,t,n,r,a,i,o,s,c,u,l,d,p,f,h,v){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|a,this.Cl=0|i,this.Dh=0|o,this.Dl=0|s,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|d,this.Gh=0|p,this.Gl=0|f,this.Hh=0|h,this.Hl=0|v}},{key:"process",value:function(e,t){for(var n,r,a,i,o,s,c,u,l=0;l<16;l++,t+=4)Wn[l]=e.getUint32(t),qn[l]=e.getUint32(t+=4);for(var d=16;d<80;d++){var p=0|Wn[d-15],f=0|qn[d-15],h=bt(p,f,1)^bt(p,f,8)^mt(p,0,7),v=wt(p,f,1)^wt(p,f,8)^yt(p,f,7),g=0|Wn[d-2],m=0|qn[d-2],y=bt(g,m,19)^Et(g,m,61)^mt(g,0,6),b=wt(g,m,19)^kt(g,m,61)^yt(g,m,6),w=_t(v,b,qn[d-7],qn[d-16]),E=St(w,h,y,Wn[d-7],Wn[d-16]);Wn[d]=0|E,qn[d]=0|w}var k=this.Ah,x=this.Al,C=this.Bh,A=this.Bl,N=this.Ch,I=this.Cl,_=this.Dh,S=this.Dl,T=this.Eh,O=this.El,R=this.Fh,P=this.Fl,U=this.Gh,M=this.Gl,D=this.Hh,L=this.Hl;for(l=0;l<80;l++){p=bt(T,O,14)^bt(T,O,18)^Et(T,O,41),f=wt(T,O,14)^wt(T,O,18)^kt(T,O,41),h=T&R^~T&U,g=Tt(L,f,O&P^~O&M,Fn[l],qn[l]),m=Ot(g,D,p,h,jn[l],Wn[l]),y=0|g,b=bt(k,x,28)^Et(k,x,34)^Et(k,x,39),w=wt(k,x,28)^kt(k,x,34)^kt(k,x,39),E=k&C^k&N^C&N;var B,j=x&A^x&I^A&I;D=0|U,L=0|M,U=0|R,M=0|P,R=0|T,P=0|O,T=(B=At(0|_,0|S,0|m,0|y)).h,O=B.l,_=0|N,S=0|I,N=0|C,I=0|A,C=0|k,A=0|x;var F=Nt(y,w,j);k=It(F,m,b,E),x=0|F}k=(n=At(0|this.Ah,0|this.Al,0|k,0|x)).h,x=n.l,C=(r=At(0|this.Bh,0|this.Bl,0|C,0|A)).h,A=r.l,N=(a=At(0|this.Ch,0|this.Cl,0|N,0|I)).h,I=a.l,_=(i=At(0|this.Dh,0|this.Dl,0|_,0|S)).h,S=i.l,T=(o=At(0|this.Eh,0|this.El,0|T,0|O)).h,O=o.l,R=(s=At(0|this.Fh,0|this.Fl,0|R,0|P)).h,P=s.l,U=(c=At(0|this.Gh,0|this.Gl,0|U,0|M)).h,M=c.l,D=(u=At(0|this.Hh,0|this.Hl,0|D,0|L)).h,L=u.l,this.set(k,x,C,A,N,I,_,S,T,O,R,P,U,M,D,L)}},{key:"roundClean",value:function(){Ft(Wn,qn)}},{key:"destroy",value:function(){Ft(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}]),n}(On),Hn=function(e){N(n,e);var t=I(n);function n(){var e;return B(this,n),(e=t.call(this,48)).Ah=0|Pn[0],e.Al=0|Pn[1],e.Bh=0|Pn[2],e.Bl=0|Pn[3],e.Ch=0|Pn[4],e.Cl=0|Pn[5],e.Dh=0|Pn[6],e.Dl=0|Pn[7],e.Eh=0|Pn[8],e.El=0|Pn[9],e.Fh=0|Pn[10],e.Fl=0|Pn[11],e.Gh=0|Pn[12],e.Gl=0|Pn[13],e.Hh=0|Pn[14],e.Hl=0|Pn[15],e}return F(n)}(Zn),Kn=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]),Vn=function(e){N(n,e);var t=I(n);function n(){var e;return B(this,n),(e=t.call(this,32)).Ah=0|Kn[0],e.Al=0|Kn[1],e.Bh=0|Kn[2],e.Bl=0|Kn[3],e.Ch=0|Kn[4],e.Cl=0|Kn[5],e.Dh=0|Kn[6],e.Dl=0|Kn[7],e.Eh=0|Kn[8],e.El=0|Kn[9],e.Fh=0|Kn[10],e.Fl=0|Kn[11],e.Gh=0|Kn[12],e.Gl=0|Kn[13],e.Hh=0|Kn[14],e.Hl=0|Kn[15],e}return F(n)}(Zn),zn=nn(function(){return new Ln}),Gn=nn(function(){return new Zn}),$n=nn(function(){return new Hn}),Jn=nn(function(){return new Vn}),Yn=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Xn=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Qn=new Uint32Array(32);function er(e,t,n,r,a,i){var o,s,c,u,l,d=a[i+1],p=Qn[2*e],f=Qn[2*e+1],h=Qn[2*t],v=Qn[2*t+1],g=Qn[2*n],m=Qn[2*n+1],y=Qn[2*r],b=Qn[2*r+1],w=Nt(p,h,a[i]);b=(o={Dh:b^(f=It(w,f,v,d)),Dl:y^(p=0|w)}).Dh,m=(c=At(m,g,b=(s={Dh:xt(0,y=o.Dl),Dl:Ct(b)}).Dh,y=s.Dl)).h,g=c.l,v=(l={Bh:bt(v=(u={Bh:v^m,Bl:h^g}).Bh,h=u.Bl,24),Bl:wt(v,h,24)}).Bh,h=l.Bl,Qn[2*e]=p,Qn[2*e+1]=f,Qn[2*t]=h,Qn[2*t+1]=v,Qn[2*n]=g,Qn[2*n+1]=m,Qn[2*r]=y,Qn[2*r+1]=b}function tr(e,t,n,r,a,i){var o,s,c,u,l,d=a[i+1],p=Qn[2*e],f=Qn[2*e+1],h=Qn[2*t],v=Qn[2*t+1],g=Qn[2*n],m=Qn[2*n+1],y=Qn[2*r],b=Qn[2*r+1],w=Nt(p,h,a[i]);f=It(w,f,v,d),m=(c=At(m,g,b=(s={Dh:bt(b=(o={Dh:b^f,Dl:y^(p=0|w)}).Dh,y=o.Dl,16),Dl:wt(b,y,16)}).Dh,y=s.Dl)).h,g=c.l,v=(l={Bh:Et(v=(u={Bh:v^m,Bl:h^g}).Bh,h=u.Bl,63),Bl:kt(v,h,63)}).Bh,h=l.Bl,Qn[2*e]=p,Qn[2*e+1]=f,Qn[2*t]=h,Qn[2*t+1]=v,Qn[2*n]=g,Qn[2*n+1]=m,Qn[2*r]=y,Qn[2*r+1]=b}var nr=function(e){N(n,e);var t=I(n);function n(e,r){var a;return B(this,n),(a=t.call(this)).finished=!1,a.destroyed=!1,a.length=0,a.pos=0,Ut(e),Ut(r),a.blockLen=e,a.outputLen=r,a.buffer=new Uint8Array(e),a.buffer32=jt(a.buffer),a}return F(n,[{key:"update",value:function(e){Lt(this),Mt(e=Qt(e));for(var t=this.blockLen,n=this.buffer,r=this.buffer32,a=e.length,i=e.byteOffset,o=e.buffer,s=0;s<a;){this.pos===t&&(Vt(r),this.compress(r,0,!1),Vt(r),this.pos=0);var c=Math.min(t-this.pos,a-s),u=i+s;if(c!==t||u%4||!(s+c<a))n.set(e.subarray(s,s+c),this.pos),this.pos+=c,this.length+=c,s+=c;else{var l=new Uint32Array(o,u,Math.floor((a-s)/4));Vt(l);for(var d=0;s+t<a;d+=r.length,s+=t)this.length+=t,this.compress(l,d,!1);Vt(l)}}return this}},{key:"digestInto",value:function(e){Lt(this),Bt(e,this);var t=this.pos,n=this.buffer32;this.finished=!0,Ft(this.buffer.subarray(t)),Vt(n),this.compress(n,0,!0),Vt(n);var r=jt(e);this.get().forEach(function(e,t){return r[t]=Kt(e)})}},{key:"digest",value:function(){var e=this.buffer,t=this.outputLen;this.digestInto(e);var n=e.slice(0,t);return this.destroy(),n}},{key:"_cloneInto",value:function(e){var t,n=this.buffer,r=this.length,a=this.finished,i=this.destroyed,o=this.outputLen,s=this.pos;return e||(e=new this.constructor({dkLen:o})),(t=e).set.apply(t,x(this.get())),e.buffer.set(n),e.destroyed=i,e.finished=a,e.length=r,e.pos=s,e.outputLen=o,e}},{key:"clone",value:function(){return this._cloneInto()}}]),n}(tn),rr=function(e){N(n,e);var t=I(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B(this,n);var a=void 0===r.dkLen?64:r.dkLen;(e=t.call(this,128,a)).v0l=0|Xn[0],e.v0h=0|Xn[1],e.v1l=0|Xn[2],e.v1h=0|Xn[3],e.v2l=0|Xn[4],e.v2h=0|Xn[5],e.v3l=0|Xn[6],e.v3h=0|Xn[7],e.v4l=0|Xn[8],e.v4h=0|Xn[9],e.v5l=0|Xn[10],e.v5h=0|Xn[11],e.v6l=0|Xn[12],e.v6h=0|Xn[13],e.v7l=0|Xn[14],e.v7h=0|Xn[15],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(Ut(n),e<0||e>n)throw new Error("outputLen bigger than keyLen");var i=t.key,o=t.salt,s=t.personalization;if(void 0!==i&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(void 0!==o&&o.length!==r)throw new Error("salt must be undefined or "+r);if(void 0!==s&&s.length!==a)throw new Error("personalization must be undefined or "+a)}(a,r,64,16,16);var i=r.key,o=r.personalization,s=r.salt,c=0;if(void 0!==i&&(c=(i=Qt(i)).length),e.v0l^=e.outputLen|c<<8|65536|1<<24,void 0!==s){var u=jt(s=Qt(s));e.v4l^=Kt(u[0]),e.v4h^=Kt(u[1]),e.v5l^=Kt(u[2]),e.v5h^=Kt(u[3])}if(void 0!==o){var l=jt(o=Qt(o));e.v6l^=Kt(l[0]),e.v6h^=Kt(l[1]),e.v7l^=Kt(l[2]),e.v7h^=Kt(l[3])}if(void 0!==i){var d=new Uint8Array(e.blockLen);d.set(i),e.update(d)}return e}return F(n,[{key:"get",value:function(){return[this.v0l,this.v0h,this.v1l,this.v1h,this.v2l,this.v2h,this.v3l,this.v3h,this.v4l,this.v4h,this.v5l,this.v5h,this.v6l,this.v6h,this.v7l,this.v7h]}},{key:"set",value:function(e,t,n,r,a,i,o,s,c,u,l,d,p,f,h,v){this.v0l=0|e,this.v0h=0|t,this.v1l=0|n,this.v1h=0|r,this.v2l=0|a,this.v2h=0|i,this.v3l=0|o,this.v3h=0|s,this.v4l=0|c,this.v4h=0|u,this.v5l=0|l,this.v5h=0|d,this.v6l=0|p,this.v6h=0|f,this.v7l=0|h,this.v7h=0|v}},{key:"compress",value:function(e,t,n){this.get().forEach(function(e,t){return Qn[t]=e}),Qn.set(Xn,16);var r=vt(BigInt(this.length)),a=r.h,i=r.l;Qn[24]=Xn[8]^i,Qn[25]=Xn[9]^a,n&&(Qn[28]=~Qn[28],Qn[29]=~Qn[29]);for(var o=0,s=Yn,c=0;c<12;c++)er(0,4,8,12,e,t+2*s[o++]),tr(0,4,8,12,e,t+2*s[o++]),er(1,5,9,13,e,t+2*s[o++]),tr(1,5,9,13,e,t+2*s[o++]),er(2,6,10,14,e,t+2*s[o++]),tr(2,6,10,14,e,t+2*s[o++]),er(3,7,11,15,e,t+2*s[o++]),tr(3,7,11,15,e,t+2*s[o++]),er(0,5,10,15,e,t+2*s[o++]),tr(0,5,10,15,e,t+2*s[o++]),er(1,6,11,12,e,t+2*s[o++]),tr(1,6,11,12,e,t+2*s[o++]),er(2,7,8,13,e,t+2*s[o++]),tr(2,7,8,13,e,t+2*s[o++]),er(3,4,9,14,e,t+2*s[o++]),tr(3,4,9,14,e,t+2*s[o++]);this.v0l^=Qn[0]^Qn[16],this.v0h^=Qn[1]^Qn[17],this.v1l^=Qn[2]^Qn[18],this.v1h^=Qn[3]^Qn[19],this.v2l^=Qn[4]^Qn[20],this.v2h^=Qn[5]^Qn[21],this.v3l^=Qn[6]^Qn[22],this.v3h^=Qn[7]^Qn[23],this.v4l^=Qn[8]^Qn[24],this.v4h^=Qn[9]^Qn[25],this.v5l^=Qn[10]^Qn[26],this.v5h^=Qn[11]^Qn[27],this.v6l^=Qn[12]^Qn[28],this.v6h^=Qn[13]^Qn[29],this.v7l^=Qn[14]^Qn[30],this.v7h^=Qn[15]^Qn[31],Ft(Qn)}},{key:"destroy",value:function(){this.destroyed=!0,Ft(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}]),n}(nr),ar=function(e){var t=function(t,n){return e(n).update(Qt(t)).digest()},n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=function(t){return e(t)},t}(function(e){return new rr(e)}),ir="https://rpc.walletconnect.org/v1";function or(e){var t="\x19Ethereum Signed Message:\n".concat(e.length),n=(new TextEncoder).encode(t+e);return"0x"+Buffer.from(_n(n)).toString("hex")}function sr(e,t,n,r,a,i){return cr.apply(this,arguments)}function cr(){return cr=(0,r.Z)(A().mark(function e(t,n,r,a,i,o){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r.t,e.next="eip191"===e.t0?3:"eip1271"===e.t0?6:9;break;case 3:return e.next=5,ur(t,n,r.s);case 5:case 8:return e.abrupt("return",e.sent);case 6:return e.next=8,lr(t,n,r.s,a,i,o);case 9:throw new Error("verifySignature failed: Attempted to verify CacaoSignature with unknown type: ".concat(r.t));case 10:case"end":return e.stop()}},e)})),cr.apply(this,arguments)}function ur(e,t,n){var r=z.H_(n);return G.RJ({payload:or(t),signature:r}).toLowerCase()===e.toLowerCase()}function lr(e,t,n,r,a,i){return dr.apply(this,arguments)}function dr(){return dr=(0,r.Z)(A().mark(function e(t,n,r,a,i,o){var s,c,u,l,d,p,f,h;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((s=_e(a)).namespace&&s.reference){e.next=3;break}throw new Error("isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ".concat(a));case 3:return e.prev=3,c="0x1626ba7e","0000000000000000000000000000000000000000000000000000000000000040",u=r.substring(2),l=(u.length/2).toString(16).padStart(64,"0"),d=c+(n.startsWith("0x")?n:or(n)).substring(2)+"0000000000000000000000000000000000000000000000000000000000000040"+l+u,e.next=11,fetch("".concat(o||ir,"/?chainId=").concat(a,"&projectId=").concat(i),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:pr(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:d},"latest"]})});case 11:return p=e.sent,e.next=14,p.json();case 14:return f=e.sent,h=f.result,e.abrupt("return",!!h&&h.slice(0,c.length).toLowerCase()===c.toLowerCase());case 19:return e.prev=19,e.t0=e.catch(3),e.abrupt("return",(console.error("isValidEip1271Signature: ",e.t0),!1));case 22:case"end":return e.stop()}},e,null,[[3,19]])})),dr.apply(this,arguments)}function pr(){return Date.now()+Math.floor(1e3*Math.random())}function fr(e){var t=new Uint8Array(Buffer.from(e,"base64")),n=Array.from("TransactionData::").map(function(e){return e.charCodeAt(0)}),r=new Uint8Array(n.length+t.length);r.set(n),r.set(t,n.length);var a=ar(r,{dkLen:32});return $.encode(a)}function hr(e){var t=new Uint8Array(zn(function(e){if(e instanceof Uint8Array)return e;if(Array.isArray(e))return new Uint8Array(e);if("object"==typeof e&&null!=e&&e.data)return new Uint8Array(Object.values(e.data));if("object"==typeof e&&e)return new Uint8Array(Object.values(e));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}(e)));return $.encode(t)}function vr(e){var t=function(e,t){return new ke(void 0).decode(e)}(Buffer.from(e,"base64")).txn;if(!t)throw new Error("Invalid signed transaction: missing 'txn' field");var n=function(e,t){return new xe(void 0).encodeSharedRef(e)}(t),r=Buffer.from("TX"),a=Buffer.concat([r,Buffer.from(n)]),i=Jn(a);return Ce.pJ.encode(i).replace(/=+$/,"")}function gr(e){for(var t=[],n=BigInt(e);n>=BigInt(128);)t.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return t.push(Number(n)),Buffer.from(t)}function mr(e){var t=Buffer.from(e.signed.bodyBytes,"base64"),n=Buffer.from(e.signed.authInfoBytes,"base64"),r=Buffer.from(e.signature.signature,"base64"),a=[];a.push(Buffer.from([10])),a.push(gr(t.length)),a.push(t),a.push(Buffer.from([18])),a.push(gr(n.length)),a.push(n),a.push(Buffer.from([26])),a.push(gr(r.length)),a.push(r);var i=Buffer.concat(a),o=zn(i);return Buffer.from(o).toString("hex").toUpperCase()}var yr=Object.defineProperty,br=Object.defineProperties,wr=Object.getOwnPropertyDescriptors,Er=Object.getOwnPropertySymbols,kr=Object.prototype.hasOwnProperty,xr=Object.prototype.propertyIsEnumerable,Cr=function(e,t,n){return t in e?yr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Ar="did:pkh:",Nr={eip155:"Ethereum",solana:"Solana",bip122:"Bitcoin"},Ir=function(e){return null==e?void 0:e.split(":")},_r=function(e){var t=e&&Ir(e);if(t)return t[2]+":"+t[3]},Sr=function(e){var t=e&&Ir(e);if(t)return t.pop()};function Tr(e){return Or.apply(this,arguments)}function Or(){return Or=(0,r.Z)(A().mark(function e(t){var n,r,a,i,o,s;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.cacao,r=t.projectId,a=n.s,i=n.p,o=Rr(i,i.iss),s=Sr(i.iss),e.next=3,sr(s,o,a,_r(i.iss),r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),Or.apply(this,arguments)}var Rr=function(e,t){var n=function(e){var t=e&&Ir(e);if(t)return e.includes(Ar)?t[2]:t[0]}(t);if(!n)throw new Error("Invalid issuer: "+t);var r="".concat(e.domain," wants you to sign in with your ").concat(function(e){return e?Nr[e]||e:""}(n)," account:"),a=Sr(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");var i=e.statement||void 0,o="URI: ".concat(e.aud||e.uri),s="Version: ".concat(e.version),c="Chain ID: ".concat(function(e){var t=e&&Ir(e);if(t)return e.includes(Ar)?t[3]:t[1]}(t)),u="Nonce: ".concat(e.nonce),l="Issued At: ".concat(e.iat),d=e.exp?"Expiration Time: ".concat(e.exp):void 0,p=e.nbf?"Not Before: ".concat(e.nbf):void 0,f=e.requestId?"Request ID: ".concat(e.requestId):void 0,h=e.resources?"Resources:".concat(e.resources.map(function(e){return"\n- ".concat(e)}).join("")):void 0,v=Fr(e.resources);return v&&(i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;Pr(t);var n="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(n))return e;var r=[],a=0;return Object.keys(t.att).forEach(function(e){var n=Object.keys(t.att[e]).map(function(e){return{ability:e.split("/")[0],action:e.split("/")[1]}});n.sort(function(e,t){return e.action.localeCompare(t.action)});var i={};n.forEach(function(e){i[e.ability]||(i[e.ability]=[]),i[e.ability].push(e.action)});var o=Object.keys(i).map(function(t){return a++,"(".concat(a,") '").concat(t,"': '").concat(i[t].join("', '"),"' for '").concat(e,"'.")});r.push(o.join(", ").replace(".,","."))}),"".concat(e?e+" ":"").concat(n).concat(r.join(" "))}(i,Dr(v))),[r,a,"",i,"",o,s,c,u,l,d,p,f,h].filter(function(e){return null!=e}).join("\n")};function Pr(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");var t=Object.keys(e.att);if(null==t||!t.length)throw new Error("No resources found in `att` property");t.forEach(function(t){var n=e.att[t];if(Array.isArray(n))throw new Error("Resource must be an object: ".concat(t));if("object"!=typeof n)throw new Error("Resource must be an object: ".concat(t));if(!Object.keys(n).length)throw new Error("Resource object is empty: ".concat(t));Object.keys(n).forEach(function(e){var t=n[e];if(!Array.isArray(t))throw new Error("Ability limits ".concat(e," must be an array of objects, found: ").concat(t));if(!t.length)throw new Error("Value of ".concat(e," is empty array, must be an array with objects"));t.forEach(function(t){if("object"!=typeof t)throw new Error("Ability limits (".concat(e,") must be an array of objects, found: ").concat(t))})})})}function Ur(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=null===(n=t)||void 0===n?void 0:n.sort(function(e,t){return e.localeCompare(t)});var a=t.map(function(t){return k({},"".concat(e,"/").concat(t),[r])});return Object.assign.apply(Object,[{}].concat(x(a)))}function Mr(e){return Pr(e),"urn:recap:".concat(function(e){return Buffer.from(JSON.stringify(e)).toString("base64")}(e).replace(/=/g,""))}function Dr(e){var t=function(e){return JSON.parse(Buffer.from(e,"base64").toString("utf-8"))}(e.replace("urn:recap:",""));return Pr(t),t}function Lr(e,t){var n=function(e,t){Pr(e),Pr(t);var n=Object.keys(e.att).concat(Object.keys(t.att)).sort(function(e,t){return e.localeCompare(t)}),r={att:{}};return n.forEach(function(n){var a,i;Object.keys((null==(a=e.att)?void 0:a[n])||{}).concat(Object.keys((null==(i=t.att)?void 0:i[n])||{})).sort(function(e,t){return e.localeCompare(t)}).forEach(function(a){var i,o;r.att[n]=function(e,t){return br(e,wr(t))}(function(e,t){for(var n in t||(t={}))kr.call(t,n)&&Cr(e,n,t[n]);if(Er){var r,a=M(Er(t));try{for(a.s();!(r=a.n()).done;){n=r.value;xr.call(t,n)&&Cr(e,n,t[n])}}catch(i){a.e(i)}finally{a.f()}}return e}({},r.att[n]),k({},a,(null==(i=e.att[n])?void 0:i[a])||(null==(o=t.att[n])?void 0:o[a])))})}),r}(Dr(e),Dr(t));return Mr(n)}function Br(e){var t,n=Dr(e);Pr(n);var r=null==(t=n.att)?void 0:t.eip155;return r?Object.keys(r).map(function(e){return e.split("/")[1]}):[]}function jr(e){var t=Dr(e);Pr(t);var n=[];return Object.values(t.att).forEach(function(e){Object.values(e).forEach(function(e){var t;null!=(t=null==e?void 0:e[0])&&t.chains&&n.push(e[0].chains)})}),x(new Set(n.flat()))}function Fr(e){if(e){var t=null==e?void 0:e[e.length-1];return function(e){return e&&e.includes("urn:recap:")}(t)?t:void 0}}function Wr(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function qr(e){if("boolean"!=typeof e)throw new Error("boolean expected, not ".concat(e))}function Zr(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Hr(e){if(!Wr(e))throw new Error("Uint8Array expected");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error("Uint8Array expected of length "+n+", got length="+e.length)}function Kr(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Vr(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function zr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++)t[r].fill(0)}var Gr=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function $r(e){if("string"==typeof e)e=function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}(e);else{if(!Wr(e))throw new Error("Uint8Array expected, got "+typeof e);e=Xr(e)}return e}function Jr(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===t)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(n&&!function(e){return e.byteOffset%4==0}(t))throw new Error("invalid output, must be aligned");return t}function Yr(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);var a=BigInt(32),i=BigInt(4294967295),o=Number(n>>a&i),s=Number(n&i),c=r?0:4;e.setUint32(t+(r?4:0),o,r),e.setUint32(t+c,s,r)}function Xr(e){return Uint8Array.from(e)}var Qr=function(e){return Uint8Array.from(e.split("").map(function(e){return e.charCodeAt(0)}))},ea=Qr("expand 16-byte k"),ta=Qr("expand 32-byte k"),na=Vr(ea),ra=Vr(ta);function aa(e,t){return e<<t|e>>>32-t}function ia(e){return e.byteOffset%4==0}var oa=Math.pow(2,32)-1,sa=new Uint32Array,ca=function(e,t){return 255&e[t++]|(255&e[t++])<<8},ua=function(){function e(t){B(this,e),this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,Hr(t=$r(t),32);var n=ca(t,0),r=ca(t,2),a=ca(t,4),i=ca(t,6),o=ca(t,8),s=ca(t,10),c=ca(t,12),u=ca(t,14);this.r[0]=8191&n,this.r[1]=8191&(n>>>13|r<<3),this.r[2]=7939&(r>>>10|a<<6),this.r[3]=8191&(a>>>7|i<<9),this.r[4]=255&(i>>>4|o<<12),this.r[5]=o>>>1&8190,this.r[6]=8191&(o>>>14|s<<2),this.r[7]=8065&(s>>>11|c<<5),this.r[8]=8191&(c>>>8|u<<8),this.r[9]=u>>>5&127;for(var l=0;l<8;l++)this.pad[l]=ca(t,16+2*l)}return F(e,[{key:"process",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n?0:2048,a=this.h,i=this.r,o=i[0],s=i[1],c=i[2],u=i[3],l=i[4],d=i[5],p=i[6],f=i[7],h=i[8],v=i[9],g=ca(e,t+0),m=ca(e,t+2),y=ca(e,t+4),b=ca(e,t+6),w=ca(e,t+8),E=ca(e,t+10),k=ca(e,t+12),x=ca(e,t+14),C=a[0]+(8191&g),A=a[1]+(8191&(g>>>13|m<<3)),N=a[2]+(8191&(m>>>10|y<<6)),I=a[3]+(8191&(y>>>7|b<<9)),_=a[4]+(8191&(b>>>4|w<<12)),S=a[5]+(w>>>1&8191),T=a[6]+(8191&(w>>>14|E<<2)),O=a[7]+(8191&(E>>>11|k<<5)),R=a[8]+(8191&(k>>>8|x<<8)),P=a[9]+(x>>>5|r),U=0,M=U+C*o+A*(5*v)+N*(5*h)+I*(5*f)+_*(5*p);U=M>>>13,M&=8191;var D=(U+=(M+=S*(5*d)+T*(5*l)+O*(5*u)+R*(5*c)+P*(5*s))>>>13)+C*s+A*o+N*(5*v)+I*(5*h)+_*(5*f);U=D>>>13,D&=8191,U+=(D+=S*(5*p)+T*(5*d)+O*(5*l)+R*(5*u)+P*(5*c))>>>13,D&=8191;var L=U+C*c+A*s+N*o+I*(5*v)+_*(5*h);U=L>>>13,L&=8191,U+=(L+=S*(5*f)+T*(5*p)+O*(5*d)+R*(5*l)+P*(5*u))>>>13,L&=8191;var B=U+C*u+A*c+N*s+I*o+_*(5*v);U=B>>>13,B&=8191,U+=(B+=S*(5*h)+T*(5*f)+O*(5*p)+R*(5*d)+P*(5*l))>>>13,B&=8191;var j=U+C*l+A*u+N*c+I*s+_*o;U=j>>>13,j&=8191,U+=(j+=S*(5*v)+T*(5*h)+O*(5*f)+R*(5*p)+P*(5*d))>>>13,j&=8191;var F=U+C*d+A*l+N*u+I*c+_*s;U=F>>>13,F&=8191,U+=(F+=S*o+T*(5*v)+O*(5*h)+R*(5*f)+P*(5*p))>>>13,F&=8191;var W=U+C*p+A*d+N*l+I*u+_*c;U=W>>>13,W&=8191,U+=(W+=S*s+T*o+O*(5*v)+R*(5*h)+P*(5*f))>>>13,W&=8191;var q=U+C*f+A*p+N*d+I*l+_*u;U=q>>>13,q&=8191,U+=(q+=S*c+T*s+O*o+R*(5*v)+P*(5*h))>>>13,q&=8191;var Z=U+C*h+A*f+N*p+I*d+_*l;U=Z>>>13,Z&=8191,U+=(Z+=S*u+T*c+O*s+R*o+P*(5*v))>>>13,Z&=8191;var H=U+C*v+A*h+N*f+I*p+_*d;U=H>>>13,H&=8191,U+=(H+=S*l+T*u+O*c+R*s+P*o)>>>13,H&=8191,M=8191&(U=(U=(U<<2)+U|0)+(M&=8191)|0),D+=U>>>=13,a[0]=M,a[1]=D,a[2]=L,a[3]=B,a[4]=j,a[5]=F,a[6]=W,a[7]=q,a[8]=Z,a[9]=H}},{key:"finalize",value:function(){var e=this.h,t=this.pad,n=new Uint16Array(10),r=e[1]>>>13;e[1]&=8191;for(var a=2;a<10;a++)e[a]+=r,r=e[a]>>>13,e[a]&=8191;e[0]+=5*r,r=e[0]>>>13,e[0]&=8191,e[1]+=r,r=e[1]>>>13,e[1]&=8191,e[2]+=r,n[0]=e[0]+5,r=n[0]>>>13,n[0]&=8191;for(var i=1;i<10;i++)n[i]=e[i]+r,r=n[i]>>>13,n[i]&=8191;n[9]-=8192;for(var o=(1^r)-1,s=0;s<10;s++)n[s]&=o;o=~o;for(var c=0;c<10;c++)e[c]=e[c]&o|n[c];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);var u=e[0]+t[0];e[0]=65535&u;for(var l=1;l<8;l++)u=(e[l]+t[l]|0)+(u>>>16)|0,e[l]=65535&u;zr(n)}},{key:"update",value:function(e){Kr(this),Hr(e=$r(e));for(var t=this.buffer,n=this.blockLen,r=e.length,a=0;a<r;){var i=Math.min(n-this.pos,r-a);if(i!==n)t.set(e.subarray(a,a+i),this.pos),this.pos+=i,a+=i,this.pos===n&&(this.process(t,0,!1),this.pos=0);else for(;n<=r-a;a+=n)this.process(e,a)}return this}},{key:"destroy",value:function(){zr(this.h,this.r,this.buffer,this.pad)}},{key:"digestInto",value:function(e){Kr(this),function(e,t){Hr(e);var n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}(e,this),this.finished=!0;var t=this.buffer,n=this.h,r=this.pos;if(r){for(t[r++]=1;r<16;r++)t[r]=0;this.process(t,0,!0)}this.finalize();for(var a=0,i=0;i<8;i++)e[a++]=n[i]>>>0,e[a++]=n[i]>>>8;return e}},{key:"digest",value:function(){var e=this.buffer,t=this.outputLen;this.digestInto(e);var n=e.slice(0,t);return this.destroy(),n}}]),e}(),la=function(e){var t=function(t,n){return e(n).update($r(t)).digest()},n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=function(t){return e(t)},t}(function(e){return new ua(e)}),da=function(e,t){var n=function(e,t){if(null==t||"object"!=typeof t)throw new Error("options must be defined");return Object.assign({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t)}(0,{counterRight:!1,counterLength:4,allowShortKeys:!1}),r=n.allowShortKeys,a=n.extendNonceFn,i=n.counterLength,o=n.counterRight,s=n.rounds;return Zr(i),Zr(s),qr(o),qr(r),function(t,n,c,u){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;Hr(t),Hr(n),Hr(c);var d=c.length;if(void 0===u&&(u=new Uint8Array(d)),Hr(u),Zr(l),l<0||l>=oa)throw new Error("arx: counter overflow");if(u.length<d)throw new Error("arx: output (".concat(u.length,") is shorter than data (").concat(d,")"));var p,f,h=[],v=t.length;if(32===v)h.push(p=Xr(t)),f=ra;else{if(16!==v||!r)throw new Error("arx: invalid 32-byte key, got length=".concat(v));(p=new Uint8Array(32)).set(t),p.set(t,16),f=na,h.push(p)}ia(n)||h.push(n=Xr(n));var g=Vr(p);if(a){if(24!==n.length)throw new Error("arx: extended nonce must be 24 bytes");a(f,g,Vr(n.subarray(0,16)),g),n=n.subarray(16)}var m=16-i;if(m!==n.length)throw new Error("arx: nonce must be ".concat(m," or 16 bytes"));if(12!==m){var y=new Uint8Array(12);y.set(n,o?0:12-n.length),h.push(n=y)}var b=Vr(n);return function(e,t,n,r,a,i,o,s){for(var c=a.length,u=new Uint8Array(64),l=Vr(u),d=ia(a)&&ia(i),p=d?Vr(a):sa,f=d?Vr(i):sa,h=0;h<c;o++){if(e(t,n,r,l,o,s),o>=oa)throw new Error("arx: counter overflow");var v=Math.min(64,c-h);if(d&&64===v){var g=h/4;if(h%4!=0)throw new Error("arx: invalid block position");for(var m,y=0;y<16;y++)f[m=g+y]=p[m]^l[y];h+=64}else{for(var b,w=0;w<v;w++)i[b=h+w]=a[b]^u[w];h+=v}}}(e,f,g,b,c,u,l,s),zr.apply(void 0,h),u}}(function(e,t,n,r,a){for(var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:20,o=e[0],s=e[1],c=e[2],u=e[3],l=t[0],d=t[1],p=t[2],f=t[3],h=t[4],v=t[5],g=t[6],m=t[7],y=a,b=n[0],w=n[1],E=n[2],k=o,x=s,C=c,A=u,N=l,I=d,_=p,S=f,T=h,O=v,R=g,P=m,U=y,M=b,D=w,L=E,B=0;B<i;B+=2)U=aa(U^(k=k+N|0),16),N=aa(N^(T=T+U|0),12),U=aa(U^(k=k+N|0),8),N=aa(N^(T=T+U|0),7),M=aa(M^(x=x+I|0),16),I=aa(I^(O=O+M|0),12),M=aa(M^(x=x+I|0),8),I=aa(I^(O=O+M|0),7),D=aa(D^(C=C+_|0),16),_=aa(_^(R=R+D|0),12),D=aa(D^(C=C+_|0),8),_=aa(_^(R=R+D|0),7),L=aa(L^(A=A+S|0),16),S=aa(S^(P=P+L|0),12),L=aa(L^(A=A+S|0),8),S=aa(S^(P=P+L|0),7),L=aa(L^(k=k+I|0),16),I=aa(I^(R=R+L|0),12),L=aa(L^(k=k+I|0),8),I=aa(I^(R=R+L|0),7),U=aa(U^(x=x+_|0),16),_=aa(_^(P=P+U|0),12),U=aa(U^(x=x+_|0),8),_=aa(_^(P=P+U|0),7),M=aa(M^(C=C+S|0),16),S=aa(S^(T=T+M|0),12),M=aa(M^(C=C+S|0),8),S=aa(S^(T=T+M|0),7),D=aa(D^(A=A+N|0),16),N=aa(N^(O=O+D|0),12),D=aa(D^(A=A+N|0),8),N=aa(N^(O=O+D|0),7);var j=0;r[j++]=o+k|0,r[j++]=s+x|0,r[j++]=c+C|0,r[j++]=u+A|0,r[j++]=l+N|0,r[j++]=d+I|0,r[j++]=p+_|0,r[j++]=f+S|0,r[j++]=h+T|0,r[j++]=v+O|0,r[j++]=g+R|0,r[j++]=m+P|0,r[j++]=y+U|0,r[j++]=b+M|0,r[j++]=w+D|0,r[j++]=E+L|0}),pa=new Uint8Array(16),fa=function(e,t){e.update(t);var n=t.length%16;n&&e.update(pa.subarray(n))},ha=new Uint8Array(32);function va(e,t,n,r,a){var i=e(t,n,ha),o=la.create(i);a&&fa(o,a),fa(o,r);var s=function(e,t,n){qr(n);var r=new Uint8Array(16),a=function(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}(r);return Yr(a,0,BigInt(t),n),Yr(a,8,BigInt(e),n),r}(r.length,a?a.length:0,!0);o.update(s);var c=o.digest();return zr(i,s),c}var ga=function(e,t){function n(n){if(Hr(n),!Gr)throw new Error("Non little-endian hardware is not yet supported");for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];if(void 0!==e.nonceLength){var o=a[0];if(!o)throw new Error("nonce / iv required");e.varSizeNonce?Hr(o):Hr(o,e.nonceLength)}var s=e.tagLength;s&&void 0!==a[1]&&Hr(a[1]);var c=t.apply(void 0,[n].concat(a)),u=function(e,t){if(void 0!==t){if(2!==e)throw new Error("cipher output not supported");Hr(t)}},l=!1;return{encrypt:function(e,t){if(l)throw new Error("cannot encrypt() twice with same key + nonce");return l=!0,Hr(e),u(c.encrypt.length,t),c.encrypt(e,t)},decrypt:function(e,t){if(Hr(e),s&&e.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return u(c.decrypt.length,t),c.decrypt(e,t)}}}return Object.assign(n,e),n}({blockSize:64,nonceLength:12,tagLength:16},function(e){return function(t,n,r){return{encrypt:function(a,i){var o=a.length;(i=Jr(o+16,i,!1)).set(a);var s=i.subarray(0,-16);e(t,n,s,s,1);var c=va(e,t,n,s,r);return i.set(c,o),zr(c),i},decrypt:function(a,i){i=Jr(a.length-16,i,!1);var o=a.subarray(0,-16),s=a.subarray(-16),c=va(e,t,n,o,r);if(!function(e,t){if(e.length!==t.length)return!1;for(var n=0,r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n}(s,c))throw new Error("invalid tag");return i.set(a.subarray(0,-16)),e(t,n,i,i,1),zr(c),i}}}}(da)),ma=function(e){N(n,e);var t=I(n);function n(e,r){var a;B(this,n),(a=t.call(this)).finished=!1,a.destroyed=!1,Dt(e);var i=Qt(r);if(a.iHash=e.create(),"function"!=typeof a.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");a.blockLen=a.iHash.blockLen,a.outputLen=a.iHash.outputLen;var o=a.blockLen,s=new Uint8Array(o);s.set(i.length>o?e.create().update(i).digest():i);for(var c=0;c<s.length;c++)s[c]^=54;a.iHash.update(s),a.oHash=e.create();for(var u=0;u<s.length;u++)s[u]^=106;return a.oHash.update(s),Ft(s),a}return F(n,[{key:"update",value:function(e){return Lt(this),this.iHash.update(e),this}},{key:"digestInto",value:function(e){Lt(this),Mt(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}},{key:"digest",value:function(){var e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}},{key:"_cloneInto",value:function(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));var t=this.oHash,n=this.iHash,r=this.finished,a=this.destroyed,i=this.blockLen,o=this.outputLen;return e.finished=r,e.destroyed=a,e.blockLen=i,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}},{key:"clone",value:function(){return this._cloneInto()}},{key:"destroy",value:function(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}]),n}(tn),ya=function(e,t,n){return new ma(e,t).update(n).digest()};ya.create=function(e,t){return new ma(e,t)};var ba=Uint8Array.from([0]),wa=Uint8Array.of(),Ea=zn,ka=BigInt(0),xa=BigInt(1);function Ca(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("boolean"!=typeof e)throw new Error((t&&'"'.concat(t,'"'))+"expected boolean, got type="+typeof e);return e}function Aa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=Pt(e),a=null==e?void 0:e.length,i=void 0!==t;if(!r||i&&a!==t)throw new Error((n&&'"'.concat(n,'" '))+"expected Uint8Array"+(i?" of length ".concat(t):"")+", got "+(r?"length=".concat(a):"type="+typeof e));return e}function Na(e){var t=e.toString(16);return 1&t.length?"0"+t:t}function Ia(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?ka:BigInt("0x"+e)}function _a(e){return Ia($t(e))}function Sa(e){return Mt(e),Ia($t(Uint8Array.from(e).reverse()))}function Ta(e,t){return Yt(e.toString(16).padStart(2*t,"0"))}function Oa(e,t){return Ta(e,t).reverse()}function Ra(e,t,n){var r;if("string"==typeof t)try{r=Yt(t)}catch(wn){throw new Error(e+" must be hex string or Uint8Array, cause: "+wn)}else{if(!Pt(t))throw new Error(e+" must be hex string or Uint8Array");r=Uint8Array.from(t)}var a=r.length;if("number"==typeof n&&a!==n)throw new Error(e+" of length "+n+" expected, got "+a);return r}var Pa=function(e){return"bigint"==typeof e&&ka<=e};function Ua(e,t,n,r){if(!function(e,t,n){return Pa(e)&&Pa(t)&&Pa(n)&&t<=e&&e<n}(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function Ma(e){var t;for(t=0;e>ka;e>>=xa,t+=1);return t}var Da=function(e){return(xa<<BigInt(e))-xa};function La(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||"object"!=typeof e)throw new Error("expected valid options object");function r(t,n,r){var a=e[t];if(!r||void 0!==a){var i=typeof a;if(i!==n||null===a)throw new Error('param "'.concat(t,'" is invalid: expected ').concat(n,", got ").concat(i))}}Object.entries(t).forEach(function(e){var t=C(e,2);return r(t[0],t[1],!1)}),Object.entries(n).forEach(function(e){var t=C(e,2);return r(t[0],t[1],!0)})}function Ba(e){var t=new WeakMap;return function(n){var r=t.get(n);if(void 0!==r)return r;for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];var s=e.apply(void 0,[n].concat(i));return t.set(n,s),s}}var ja=BigInt(0),Fa=BigInt(1),Wa=BigInt(2),qa=BigInt(3),Za=BigInt(4),Ha=BigInt(5),Ka=BigInt(7),Va=BigInt(8),za=BigInt(9),Ga=BigInt(16);function $a(e,t){var n=e%t;return n>=ja?n:t+n}function Ja(e,t,n){for(var r=e;t-- >ja;)r*=r,r%=n;return r}function Ya(e,t){if(e===ja)throw new Error("invert: expected non-zero number");if(t<=ja)throw new Error("invert: expected positive modulus, got "+t);for(var n=$a(e,t),r=t,a=ja,i=Fa;n!==ja;){var o=r%n,s=a-i*(r/n);r=n,n=o,a=i,i=s}if(r!==Fa)throw new Error("invert: does not exist");return $a(a,t)}function Xa(e,t,n){if(!e.eql(e.sqr(t),n))throw new Error("Cannot find square root")}function Qa(e,t){var n=e.pow(t,(e.ORDER+Fa)/Za);return Xa(e,n,t),n}function ei(e,t){var n=(e.ORDER-Ha)/Va,r=e.mul(t,Wa),a=e.pow(r,n),i=e.mul(t,a),o=e.mul(e.mul(i,Wa),a),s=e.mul(i,e.sub(o,e.ONE));return Xa(e,s,t),s}function ti(e){if(e<qa)throw new Error("sqrt is not defined for small field");for(var t=e-Fa,n=0;t%Wa===ja;)t/=Wa,n++;for(var r=Wa,a=oi(e);1===ai(a,r);)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(1===n)return Qa;var i=a.pow(r,t),o=(t+Fa)/Wa;return function(e,r){if(e.is0(r))return r;if(1!==ai(e,r))throw new Error("Cannot find square root");for(var a=n,s=e.mul(e.ONE,i),c=e.pow(r,t),u=e.pow(r,o);!e.eql(c,e.ONE);){if(e.is0(c))return e.ZERO;for(var l=1,d=e.sqr(c);!e.eql(d,e.ONE);)if(l++,d=e.sqr(d),l===a)throw new Error("Cannot find square root");var p=Fa<<BigInt(a-l-1),f=e.pow(s,p);a=l,s=e.sqr(f),c=e.mul(c,s),u=e.mul(u,f)}return u}}var ni=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ri(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Array(t.length).fill(n?e.ZERO:void 0),a=t.reduce(function(t,n,a){return e.is0(n)?t:(r[a]=t,e.mul(t,n))},e.ONE),i=e.inv(a);return t.reduceRight(function(t,n,a){return e.is0(n)?t:(r[a]=e.mul(t,r[a]),e.mul(t,n))},i),r}function ai(e,t){var n=e.pow(t,(e.ORDER-Fa)/Wa),r=e.eql(n,e.ONE),a=e.eql(n,e.ZERO),i=e.eql(n,e.neg(e.ONE));if(!r&&!a&&!i)throw new Error("invalid Legendre symbol result");return r?1:a?0:-1}function ii(e,t){void 0!==t&&Ut(t);var n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function oi(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e<=ja)throw new Error("invalid field: expected ORDER > 0, got "+e);var a,i,o,s=!1;if("object"==typeof t&&null!=t){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");var c=t;c.BITS&&(a=c.BITS),c.sqrt&&(i=c.sqrt),"boolean"==typeof c.isLE&&(n=c.isLE),"boolean"==typeof c.modFromBytes&&(s=c.modFromBytes),o=c.allowedLengths}else"number"==typeof t&&(a=t),r.sqrt&&(i=r.sqrt);var u,l=ii(e,a),d=l.nBitLength,p=l.nByteLength;if(p>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");var f=Object.freeze({ORDER:e,isLE:n,BITS:d,BYTES:p,MASK:Da(d),ZERO:ja,ONE:Fa,allowedLengths:o,create:function(t){return $a(t,e)},isValid:function(t){if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return ja<=t&&t<e},is0:function(e){return e===ja},isValidNot0:function(e){return!f.is0(e)&&f.isValid(e)},isOdd:function(e){return(e&Fa)===Fa},neg:function(t){return $a(-t,e)},eql:function(e,t){return e===t},sqr:function(t){return $a(t*t,e)},add:function(t,n){return $a(t+n,e)},sub:function(t,n){return $a(t-n,e)},mul:function(t,n){return $a(t*n,e)},pow:function(e,t){return function(e,t,n){if(n<ja)throw new Error("invalid exponent, negatives unsupported");if(n===ja)return e.ONE;if(n===Fa)return t;for(var r=e.ONE,a=t;n>ja;)n&Fa&&(r=e.mul(r,a)),a=e.sqr(a),n>>=Fa;return r}(f,e,t)},div:function(t,n){return $a(t*Ya(n,e),e)},sqrN:function(e){return e*e},addN:function(e,t){return e+t},subN:function(e,t){return e-t},mulN:function(e,t){return e*t},inv:function(t){return Ya(t,e)},sqrt:i||function(t){return u||(u=function(e){return e%Za===qa?Qa:e%Va===Ha?ei:e%Ga===za?function(e){var t=oi(e),n=ti(e),r=n(t,t.neg(t.ONE)),a=n(t,r),i=n(t,t.neg(r)),o=(e+Ka)/Ga;return function(e,t){var n=e.pow(t,o),s=e.mul(n,r),c=e.mul(n,a),u=e.mul(n,i),l=e.eql(e.sqr(s),t),d=e.eql(e.sqr(c),t);n=e.cmov(n,s,l),s=e.cmov(u,c,d);var p=e.eql(e.sqr(s),t),f=e.cmov(n,s,p);return Xa(e,f,t),f}}(e):ti(e)}(e)),u(f,t)},toBytes:function(e){return n?Oa(e,p):Ta(e,p)},fromBytes:function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(o){if(!o.includes(t.length)||t.length>p)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+t.length);var a=new Uint8Array(p);a.set(t,n?0:a.length-t.length),t=a}if(t.length!==p)throw new Error("Field.fromBytes: expected "+p+" bytes, got "+t.length);var i=n?Sa(t):_a(t);if(s&&(i=$a(i,e)),!r&&!f.isValid(i))throw new Error("invalid field element: outside of range 0..ORDER");return i},invertBatch:function(e){return ri(f,e)},cmov:function(e,t,n){return n?t:e}});return Object.freeze(f)}function si(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");var t=e.toString(2).length;return Math.ceil(t/8)}function ci(e){var t=si(e);return t+Math.ceil(t/2)}var ui=BigInt(0),li=BigInt(1);function di(e,t){var n=t.negate();return e?n:t}function pi(e,t){var n=ri(e.Fp,t.map(function(e){return e.Z}));return t.map(function(t,r){return e.fromAffine(t.toAffine(n[r]))})}function fi(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function hi(e,t){fi(e,t);var n=Math.pow(2,e);return{windows:Math.ceil(t/e)+1,windowSize:Math.pow(2,e-1),mask:Da(e),maxNumber:n,shiftBy:BigInt(e)}}function vi(e,t,n){var r=n.windowSize,a=n.mask,i=n.maxNumber,o=n.shiftBy,s=Number(e&a),c=e>>o;s>r&&(s-=i,c+=li);var u=t*r;return{nextN:c,offset:u+Math.abs(s)-1,isZero:0===s,isNeg:s<0,isNegF:t%2!=0,offsetF:u}}var gi=new WeakMap,mi=new WeakMap;function yi(e){return mi.get(e)||1}function bi(e){if(e!==ui)throw new Error("invalid wNAF")}var wi=function(){function e(t,n){B(this,e),this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=n}return F(e,[{key:"_unsafeLadder",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.ZERO,r=e;t>ui;)t&li&&(n=n.add(r)),r=r.double(),t>>=li;return n}},{key:"precomputeWindow",value:function(e,t){for(var n=hi(t,this.bits),r=n.windows,a=n.windowSize,i=[],o=e,s=o,c=0;c<r;c++){s=o,i.push(s);for(var u=1;u<a;u++)s=s.add(o),i.push(s);o=s.double()}return i}},{key:"wNAF",value:function(e,t,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");for(var r=this.ZERO,a=this.BASE,i=hi(e,this.bits),o=0;o<i.windows;o++){var s=vi(n,o,i),c=s.nextN,u=s.offset,l=s.isZero,d=s.isNeg,p=s.isNegF,f=s.offsetF;n=c,l?a=a.add(di(p,t[f])):r=r.add(di(d,t[u]))}return bi(n),{p:r,f:a}}},{key:"wNAFUnsafe",value:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.ZERO,a=hi(e,this.bits),i=0;i<a.windows&&n!==ui;i++){var o=vi(n,i,a),s=o.nextN,c=o.offset,u=o.isZero,l=o.isNeg;if(n=s,!u){var d=t[c];r=r.add(l?d.negate():d)}}return bi(n),r}},{key:"getPrecomputes",value:function(e,t,n){var r=gi.get(t);return r||(r=this.precomputeWindow(t,e),1!==e&&("function"==typeof n&&(r=n(r)),gi.set(t,r))),r}},{key:"cached",value:function(e,t,n){var r=yi(e);return this.wNAF(r,this.getPrecomputes(r,e,n),t)}},{key:"unsafe",value:function(e,t,n,r){var a=yi(e);return 1===a?this._unsafeLadder(e,t,r):this.wNAFUnsafe(a,this.getPrecomputes(a,e,n),t,r)}},{key:"createCache",value:function(e,t){fi(t,this.bits),mi.set(e,t),gi.delete(e)}},{key:"hasCache",value:function(e){return 1!==yi(e)}}]),e}();function Ei(e,t,n){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return function(e){La(e,ni.reduce(function(e,t){return e[t]="function",e},{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"}))}(t),t}return oi(e,{isLE:n})}BigInt(0),BigInt(1),BigInt(2),BigInt(8),Xt("HashToScalar-");var ki=BigInt(0),xi=BigInt(1),Ci=BigInt(2),Ai=BigInt(1),Ni=BigInt(2),Ii=BigInt(3),_i=BigInt(5),Si=(BigInt(8),BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"));function Ti(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}var Oi=oi([Si,BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")][0],{isLE:!0}),Ri=function(){var e=Oi.ORDER;return function(e){var t=function(e){return La(e,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze(E({},e))}(e),n=t.P,r=t.type,a=t.adjustScalarBytes,i=t.powPminus2,o=t.randomBytes,s="x25519"===r;if(!s&&"x448"!==r)throw new Error("invalid type");var c=o||rn,u=s?255:448,l=s?32:56,d=BigInt(s?9:5),p=BigInt(s?121665:39081),f=s?Math.pow(Ci,BigInt(254)):Math.pow(Ci,BigInt(447)),h=s?BigInt(8)*Math.pow(Ci,BigInt(251))-xi:BigInt(4)*Math.pow(Ci,BigInt(445))-xi,v=f+h+xi,g=function(e){return $a(e,n)},m=y(d);function y(e){return Oa(g(e),l)}function b(e,t){var r=function(e,t){var r,a;Ua("u",e,ki,n),Ua("scalar",t,f,v);for(var o=t,s=e,c=xi,l=ki,d=e,h=xi,m=ki,y=BigInt(u-1);y>=ki;y--){var b,w,E=o>>y&xi;c=(b=k(m^=E,c,d)).x_2,d=b.x_3,l=(w=k(m,l,h)).x_2,h=w.x_3,m=E;var x=c+l,C=g(x*x),A=c-l,N=g(A*A),I=C-N,_=d+h,S=g((d-h)*x),T=g(_*A),O=S+T,R=S-T;d=g(O*O),h=g(s*g(R*R)),c=g(C*N),l=g(I*(C+g(p*I)))}c=(r=k(m,c,d)).x_2,d=r.x_3,l=(a=k(m,l,h)).x_2,h=a.x_3;var P=i(l);return g(c*P)}(function(e){var t=Ra("u coordinate",e,l);return s&&(t[31]&=127),g(Sa(t))}(t),function(e){return Sa(a(Ra("scalar",e,l)))}(e));if(r===ki)throw new Error("invalid private or public key received");return y(r)}function w(e){return b(e,m)}function k(e,t,n){var r=g(e*(t-n));return{x_2:t=g(t-r),x_3:n=g(n+r)}}var x={secretKey:l,publicKey:l,seed:l},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c(l);return Mt(e,x.seed),e};return{keygen:function(e){var t=C(e);return{secretKey:t,publicKey:w(t)}},getSharedSecret:function(e,t){return b(e,t)},getPublicKey:function(e){return w(e)},scalarMult:b,scalarMultBase:w,utils:{randomSecretKey:C,randomPrivateKey:C},GuBytes:m.slice(),lengths:x}}({P:e,type:"x25519",powPminus2:function(t){var n=function(e){var t=BigInt(10),n=BigInt(20),r=BigInt(40),a=BigInt(80),i=Si,o=e*e%i*e%i,s=Ja(o,Ni,i)*o%i,c=Ja(s,Ai,i)*e%i,u=Ja(c,_i,i)*c%i,l=Ja(u,t,i)*u%i,d=Ja(l,n,i)*l%i,p=Ja(d,r,i)*d%i,f=Ja(p,a,i)*p%i,h=Ja(f,a,i)*p%i,v=Ja(h,t,i)*u%i;return{pow_p_5_8:Ja(v,Ni,i)*e%i,b2:o}}(t),r=n.pow_p_5_8,a=n.b2;return $a(Ja(r,Ii,e)*a,e)},adjustScalarBytes:Ti})}(),Pi=function(e,t){return(e+(e>=0?t:-t)/Fi)/t};function Ui(e){if(!["compact","recovered","der"].includes(e))throw new Error('Signature format must be "compact", "recovered", or "der"');return e}function Mi(e,t){for(var n={},r=0,a=Object.keys(t);r<a.length;r++){var i=a[r];n[i]=void 0===e[i]?t[i]:e[i]}return Ca(n.lowS,"lowS"),Ca(n.prehash,"prehash"),void 0!==n.format&&Ui(n.format),n}var Di=function(e){N(n,e);var t=I(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return B(this,n),t.call(this,e)}return F(n)}(T(Error)),Li={Err:Di,_tlv:{encode:function(e,t){var n=Li.Err;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(1&t.length)throw new n("tlv.encode: unpadded data");var r=t.length/2,a=Na(r);if(a.length/2&128)throw new n("tlv.encode: long form length too big");var i=r>127?Na(a.length/2|128):"";return Na(e)+i+a+t},decode:function(e,t){var n=Li.Err,r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");var a=t[r++],i=0;if(128&a){var o=127&a;if(!o)throw new n("tlv.decode(long): indefinite length not supported");if(o>4)throw new n("tlv.decode(long): byte length is too big");var s=t.subarray(r,r+o);if(s.length!==o)throw new n("tlv.decode: length bytes not complete");if(0===s[0])throw new n("tlv.decode(long): zero leftmost byte");var c,u=M(s);try{for(u.s();!(c=u.n()).done;){i=i<<8|c.value}}catch(d){u.e(d)}finally{u.f()}if(r+=o,i<128)throw new n("tlv.decode(long): not minimal encoding")}else i=a;var l=t.subarray(r,r+i);if(l.length!==i)throw new n("tlv.decode: wrong value length");return{v:l,l:t.subarray(r+i)}}},_int:{encode:function(e){var t=Li.Err;if(e<Bi)throw new t("integer: negative integers are not allowed");var n=Na(e);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode:function(e){var t=Li.Err;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return _a(e)}},toSig:function(e){var t=Li.Err,n=Li._int,r=Li._tlv,a=Ra("signature",e),i=r.decode(48,a),o=i.v;if(i.l.length)throw new t("invalid signature: left bytes after parsing");var s=r.decode(2,o),c=s.v,u=s.l,l=r.decode(2,u),d=l.v;if(l.l.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(c),s:n.decode(d)}},hexFromSig:function(e){var t=Li._tlv,n=Li._int,r=t.encode(2,n.encode(e.r)),a=t.encode(2,n.encode(e.s));return t.encode(48,r+a)}},Bi=BigInt(0),ji=BigInt(1),Fi=BigInt(2),Wi=BigInt(3),qi=BigInt(4);function Zi(e,t){var n,r=e.BYTES;if("bigint"==typeof t)n=t;else{var a=Ra("private key",t);try{n=e.fromBytes(a)}catch(i){throw new Error("invalid private key: expected ui8a of size ".concat(r,", got ").concat(typeof t))}}if(!e.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function Hi(e){return Uint8Array.of(e?2:3)}function Ki(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function Vi(e){var t=function(e){var t=function(e){var t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp,r=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(function(e){return Math.ceil(e/2)}))):void 0;return{CURVE:t,curveOpts:{Fp:n,Fn:oi(t.n,{BITS:e.nBitLength,allowedLengths:r,modFromBytes:e.wrapPrivateKey}),allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes}}}(e);return{CURVE:t.CURVE,curveOpts:t.curveOpts,hash:e.hash,ecdsaOpts:{hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN}}}(e),n=t.CURVE,r=t.curveOpts,a=t.hash,i=t.ecdsaOpts;return function(e,t){var n=t.Point;return Object.assign({},t,{ProjectivePoint:n,CURVE:Object.assign({},e,ii(n.Fn.ORDER,n.Fn.BITS))})}(e,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Dt(t),La(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});var r=n.randomBytes||rn,a=n.hmac||function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return ya(t,e,en.apply(void 0,r))},i=e.Fp,o=e.Fn,s=o.ORDER,c=o.BITS,u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.Fn,r=t.randomBytes||rn,a=Object.assign(Ki(e.Fp,n),{seed:ci(n.ORDER)});function i(e){try{return!!Zi(n,e)}catch(t){return!1}}function o(){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.length,a=si(t),i=ci(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);var o=$a(n?Sa(e):_a(e),t-Fa)+Fa;return n?Oa(o,a):Ta(o,a)}(Aa(arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(a.seed),a.seed,"seed"),n.ORDER)}function s(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.BASE.multiply(Zi(n,t)).toBytes(r)}function c(t){if("bigint"==typeof t)return!1;if(t instanceof e)return!0;var r=a.secretKey,i=a.publicKey,o=a.publicKeyUncompressed;if(!n.allowedLengths&&r!==i){var s=Ra("key",t).length;return s===i||s===o}}return Object.freeze({getPublicKey:s,getSharedSecret:function(t,r){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!0===c(t))throw new Error("first arg must be private key");if(!1===c(r))throw new Error("second arg must be public key");var i=Zi(n,t);return e.fromHex(r).multiply(i).toBytes(a)},keygen:function(e){var t=o(e);return{secretKey:t,publicKey:s(t)}},Point:e,utils:{isValidSecretKey:i,isValidPublicKey:function(t,n){var r=a.publicKey,i=a.publicKeyUncompressed;try{var o=t.length;return!(!0===n&&o!==r||!1===n&&o!==i||!e.fromBytes(t))}catch(s){return!1}},randomSecretKey:o,isValidPrivateKey:i,randomPrivateKey:o,normPrivateKeyToScalar:function(e){return Zi(n,e)},precompute:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.BASE).precompute(t,!1)}},lengths:a})}(e,n),l=u.keygen,d=u.getPublicKey,p=u.getSharedSecret,f=u.utils,h=u.lengths,v={prehash:!1,lowS:"boolean"==typeof n.lowS&&n.lowS,format:void 0,extraEntropy:!1},g="compact";function m(e){return e>s>>ji}function y(e,t){if(!o.isValidNot0(t))throw new Error("invalid signature ".concat(e,": out of range 1..Point.Fn.ORDER"));return t}var b=function(){function t(e,n,r){B(this,t),this.r=y("r",e),this.s=y("s",n),null!=r&&(this.recovery=r),Object.freeze(this)}return F(t,[{key:"addRecoveryBit",value:function(e){return new t(this.r,this.s,e)}},{key:"recoverPublicKey",value:function(t){var n=i.ORDER,r=this.r,a=this.s,c=this.recovery;if(null==c||![0,1,2,3].includes(c))throw new Error("recovery id invalid");if(s*Fi<n&&c>1)throw new Error("recovery id is ambiguous for h>1 curve");var u=2===c||3===c?r+s:r;if(!i.isValid(u))throw new Error("recovery id 2 or 3 invalid");var l=i.toBytes(u),d=e.fromBytes(en(Hi(0==(1&c)),l)),p=o.inv(u),f=E(Ra("msgHash",t)),h=o.create(-f*p),v=o.create(a*p),g=e.BASE.multiplyUnsafe(h).add(d.multiplyUnsafe(v));if(g.is0())throw new Error("point at infinify");return g.assertValidity(),g}},{key:"hasHighS",value:function(){return m(this.s)}},{key:"toBytes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;if(Ui(e),"der"===e)return Yt(Li.hexFromSig(this));var t=o.toBytes(this.r),n=o.toBytes(this.s);if("recovered"===e){if(null==this.recovery)throw new Error("recovery bit must be present");return en(Uint8Array.of(this.recovery),t,n)}return en(t,n)}},{key:"toHex",value:function(e){return $t(this.toBytes(e))}},{key:"assertValidity",value:function(){}},{key:"normalizeS",value:function(){return this.hasHighS()?new t(this.r,o.neg(this.s),this.recovery):this}},{key:"toDERRawBytes",value:function(){return this.toBytes("der")}},{key:"toDERHex",value:function(){return $t(this.toBytes("der"))}},{key:"toCompactRawBytes",value:function(){return this.toBytes("compact")}},{key:"toCompactHex",value:function(){return $t(this.toBytes("compact"))}}],[{key:"fromBytes",value:function(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;if(function(e,t){Ui(t);var n=h.signature;Aa(e,"compact"===t?n:"recovered"===t?n+1:void 0,"".concat(t," signature"))}(e,r),"der"===r){var a=Li.toSig(Aa(e));return new t(a.r,a.s)}"recovered"===r&&(n=e[0],r="compact",e=e.subarray(1));var i=o.BYTES,s=e.subarray(0,i),c=e.subarray(i,2*i);return new t(o.fromBytes(s),o.fromBytes(c),n)}},{key:"fromHex",value:function(e,t){return this.fromBytes(Yt(e),t)}},{key:"fromCompact",value:function(e){return t.fromBytes(Ra("sig",e),"compact")}},{key:"fromDER",value:function(e){return t.fromBytes(Ra("sig",e),"der")}}]),t}(),w=n.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");var t=_a(e),n=8*e.length-c;return n>0?t>>BigInt(n):t},E=n.bits2int_modN||function(e){return o.create(w(e))},k=Da(c);function x(e){return Ua("num < 2^"+c,e,Bi,k),o.toBytes(e)}function C(e,n){return Aa(e,void 0,"message"),n?Aa(t(e),void 0,"prehashed message"):e}return Object.freeze({keygen:l,getPublicKey:d,getSharedSecret:p,utils:f,lengths:h,Point:e,sign:function(n,i){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=function(t,n,a){if(["recovered","canonical"].some(function(e){return e in a}))throw new Error("sign() legacy options not supported");var i=Mi(a,v),s=i.lowS,c=i.prehash,u=i.extraEntropy;t=C(t,c);var l=E(t),d=Zi(o,n),p=[x(d),x(l)];if(null!=u&&!1!==u){var f=!0===u?r(h.secretKey):u;p.push(Ra("extraEntropy",f))}var g=en.apply(void 0,p),y=l;return{seed:g,k2sig:function(t){var n=w(t);if(o.isValidNot0(n)){var r=o.inv(n),a=e.BASE.multiply(n).toAffine(),i=o.create(a.x);if(i!==Bi){var c=o.create(r*o.create(y+i*d));if(c!==Bi){var u=(a.x===i?0:2)|Number(a.y&ji),l=c;return s&&m(c)&&(l=o.neg(c),u^=1),new b(i,l,u)}}}}}}(n=Ra("message",n),i,s),u=c.seed,l=c.k2sig;return function(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");var r=function(e){return new Uint8Array(e)},a=function(e){return Uint8Array.of(e)},i=r(e),o=r(e),s=0,c=function(){i.fill(1),o.fill(0),s=0},u=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(void 0,[o,i].concat(t))},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(0);o=u(a(0),e),i=u(),0!==e.length&&(o=u(a(1),e),i=u())},d=function(){if(s++>=1e3)throw new Error("drbg: tried 1000 values");for(var e=0,n=[];e<t;){var r=(i=u()).slice();n.push(r),e+=i.length}return en.apply(void 0,n)};return function(e,t){var n;for(c(),l(e);!(n=t(d()));)l();return c(),n}}(t.outputLen,o.BYTES,a)(u,l)},verify:function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=Mi(a,v),s=i.lowS,c=i.prehash,u=i.format;if(r=Ra("publicKey",r),n=C(Ra("message",n),c),"strict"in a)throw new Error("options.strict was renamed to lowS");var l=void 0===u?function(e){var t,n="string"==typeof e||Pt(e),r=!n&&null!==e&&"object"==typeof e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!n&&!r)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(r)t=new b(e.r,e.s);else if(n){try{t=b.fromBytes(Ra("sig",e),"der")}catch(s){if(!(s instanceof Li.Err))throw s}if(!t)try{t=b.fromBytes(Ra("sig",e),"compact")}catch(a){return!1}}return t||!1}(t):b.fromBytes(Ra("sig",t),u);if(!1===l)return!1;try{var d=e.fromBytes(r);if(s&&l.hasHighS())return!1;var p=l.r,f=l.s,h=E(n),g=o.inv(f),m=o.create(h*g),y=o.create(p*g),w=e.BASE.multiplyUnsafe(m).add(d.multiplyUnsafe(y));return!w.is0()&&o.create(w.x)===p}catch(k){return!1}},recoverPublicKey:function(e,t){return t=C(t,Mi(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},v).prehash),b.fromBytes(e,"recovered").recoverPublicKey(t).toBytes()},Signature:b,hash:t})}(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(void 0===r&&(r="edwards"===e),!t||"object"!=typeof t)throw new Error("expected valid ".concat(e," CURVE object"));for(var a=0,i=["p","n","h"];a<i.length;a++){var o=i[a],s=t[o];if(!("bigint"==typeof s&&s>ui))throw new Error("CURVE.".concat(o," must be positive bigint"))}for(var c=Ei(t.p,n.Fp,r),u=Ei(t.n,n.Fn,r),l=0,d=["Gx","Gy","a","weierstrass"===e?"b":"d"];l<d.length;l++){var p=d[l];if(!c.isValid(t[p]))throw new Error("CURVE.".concat(p," must be valid field element of CURVE.Fp"))}return{CURVE:t=Object.freeze(Object.assign({},t)),Fp:c,Fn:u}}("weierstrass",e,t),r=n.Fp,a=n.Fn,i=n.CURVE,o=i.h,s=i.n;La(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});var c=t.endo;if(c&&(!r.is0(i.a)||"bigint"!=typeof c.beta||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');var u=Ki(r,a);function l(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}var d=t.toBytes||function(e,t,n){var a=t.toAffine(),i=a.x,o=a.y,s=r.toBytes(i);return Ca(n,"isCompressed"),n?(l(),en(Hi(!r.isOdd(o)),s)):en(Uint8Array.of(4),s,r.toBytes(o))},p=t.fromBytes||function(e){Aa(e,void 0,"Point");var t=u.publicKey,n=u.publicKeyUncompressed,a=e.length,i=e[0],o=e.subarray(1);if(a!==t||2!==i&&3!==i){if(a===n&&4===i){var s=r.BYTES,c=r.fromBytes(o.subarray(0,s)),d=r.fromBytes(o.subarray(s,2*s));if(!h(c,d))throw new Error("bad point: is not on curve");return{x:c,y:d}}throw new Error("bad point: got length ".concat(a,", expected compressed=").concat(t," or uncompressed=").concat(n))}var p=r.fromBytes(o);if(!r.isValid(p))throw new Error("bad point: is not on curve, wrong x");var v,g=f(p);try{v=r.sqrt(g)}catch(y){var m=y instanceof Error?": "+y.message:"";throw new Error("bad point: is not on curve, sqrt error"+m)}return l(),1==(1&i)!==r.isOdd(v)&&(v=r.neg(v)),{x:p,y:v}};function f(e){var t=r.sqr(e),n=r.mul(t,e);return r.add(r.add(n,r.mul(e,i.a)),i.b)}function h(e,t){var n=r.sqr(t),a=f(e);return r.eql(n,a)}if(!h(i.Gx,i.Gy))throw new Error("bad curve params: generator point");var v=r.mul(r.pow(i.a,Wi),qi),g=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(v,g)))throw new Error("bad curve params: a or b");function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!r.isValid(t)||n&&r.is0(t))throw new Error("bad point coordinate ".concat(e));return t}function y(e){if(!(e instanceof x))throw new Error("ProjectivePoint expected")}function b(e){if(!c||!c.basises)throw new Error("no endo");return function(e,t,n){var r=C(t,2),a=C(r[0],2),i=a[0],o=a[1],s=C(r[1],2),c=s[0],u=s[1],l=Pi(u*e,n),d=Pi(-o*e,n),p=e-l*i-d*c,f=-l*o-d*u,h=p<Bi,v=f<Bi;h&&(p=-p),v&&(f=-f);var g=Da(Math.ceil(Ma(n)/2))+ji;if(p<Bi||p>=g||f<Bi||f>=g)throw new Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:h,k1:p,k2neg:v,k2:f}}(e,c.basises,a.ORDER)}var w=Ba(function(e,t){var n=e.X,a=e.Y,i=e.Z;if(r.eql(i,r.ONE))return{x:n,y:a};var o=e.is0();null==t&&(t=o?r.ONE:r.inv(i));var s=r.mul(n,t),c=r.mul(a,t),u=r.mul(i,t);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw new Error("invZ was invalid");return{x:s,y:c}}),E=Ba(function(e){if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.Y))return;throw new Error("bad point: ZERO")}var n=e.toAffine(),a=n.x,i=n.y;if(!r.isValid(a)||!r.isValid(i))throw new Error("bad point: x or y not field elements");if(!h(a,i))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function k(e,t,n,a,i){return n=new x(r.mul(n.X,e),n.Y,n.Z),t=di(a,t),n=di(i,n),t.add(n)}var x=function(){function e(t,n,r){B(this,e),this.X=m("x",t),this.Y=m("y",n,!0),this.Z=m("z",r),Object.freeze(this)}return F(e,[{key:"x",get:function(){return this.toAffine().x}},{key:"y",get:function(){return this.toAffine().y}},{key:"precompute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return N.createCache(this,e),t||this.multiply(Wi),this}},{key:"assertValidity",value:function(){E(this)}},{key:"hasEvenY",value:function(){var e=this.toAffine().y;if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(e)}},{key:"equals",value:function(e){y(e);var t=this.X,n=this.Y,a=this.Z,i=e.X,o=e.Y,s=e.Z,c=r.eql(r.mul(t,s),r.mul(i,a)),u=r.eql(r.mul(n,s),r.mul(o,a));return c&&u}},{key:"negate",value:function(){return new e(this.X,r.neg(this.Y),this.Z)}},{key:"double",value:function(){var t=i.a,n=i.b,a=r.mul(n,Wi),o=this.X,s=this.Y,c=this.Z,u=r.ZERO,l=r.ZERO,d=r.ZERO,p=r.mul(o,o),f=r.mul(s,s),h=r.mul(c,c),v=r.mul(o,s);return v=r.add(v,v),d=r.mul(o,c),d=r.add(d,d),u=r.mul(t,d),l=r.mul(a,h),l=r.add(u,l),u=r.sub(f,l),l=r.add(f,l),l=r.mul(u,l),u=r.mul(v,u),d=r.mul(a,d),h=r.mul(t,h),v=r.sub(p,h),v=r.mul(t,v),v=r.add(v,d),d=r.add(p,p),p=r.add(d,p),p=r.add(p,h),p=r.mul(p,v),l=r.add(l,p),h=r.mul(s,c),h=r.add(h,h),p=r.mul(h,v),u=r.sub(u,p),d=r.mul(h,f),d=r.add(d,d),new e(u,l,d=r.add(d,d))}},{key:"add",value:function(t){y(t);var n=this.X,a=this.Y,o=this.Z,s=t.X,c=t.Y,u=t.Z,l=r.ZERO,d=r.ZERO,p=r.ZERO,f=i.a,h=r.mul(i.b,Wi),v=r.mul(n,s),g=r.mul(a,c),m=r.mul(o,u),b=r.add(n,a),w=r.add(s,c);b=r.mul(b,w),w=r.add(v,g),b=r.sub(b,w),w=r.add(n,o);var E=r.add(s,u);return w=r.mul(w,E),E=r.add(v,m),w=r.sub(w,E),E=r.add(a,o),l=r.add(c,u),E=r.mul(E,l),l=r.add(g,m),E=r.sub(E,l),p=r.mul(f,w),l=r.mul(h,m),p=r.add(l,p),l=r.sub(g,p),p=r.add(g,p),d=r.mul(l,p),g=r.add(v,v),g=r.add(g,v),m=r.mul(f,m),w=r.mul(h,w),g=r.add(g,m),m=r.sub(v,m),m=r.mul(f,m),w=r.add(w,m),v=r.mul(g,w),d=r.add(d,v),v=r.mul(E,w),l=r.mul(b,l),l=r.sub(l,v),v=r.mul(b,g),p=r.mul(E,p),new e(l,d,p=r.add(p,v))}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"is0",value:function(){return this.equals(e.ZERO)}},{key:"multiply",value:function(n){var r,i,o=this,s=t.endo;if(!a.isValidNot0(n))throw new Error("invalid scalar: out of range");var c=function(t){return N.cached(o,t,function(t){return pi(e,t)})};if(s){var u=b(n),l=u.k1neg,d=u.k1,p=u.k2neg,f=u.k2,h=c(d),v=h.p,g=h.f,m=c(f),y=m.p,w=m.f;i=g.add(w),r=k(s.beta,v,y,l,p)}else{var E=c(n);r=E.p,i=E.f}return pi(e,[r,i])[0]}},{key:"multiplyUnsafe",value:function(n){var r=t.endo,i=this;if(!a.isValid(n))throw new Error("invalid scalar: out of range");if(n===Bi||i.is0())return e.ZERO;if(n===ji)return i;if(N.hasCache(this))return this.multiply(n);if(r){var o=b(n),s=o.k1neg,c=o.k1,u=o.k2neg,l=function(e,t,n,r){for(var a=t,i=e.ZERO,o=e.ZERO;n>ui||r>ui;)n&li&&(i=i.add(a)),r&li&&(o=o.add(a)),a=a.double(),n>>=li,r>>=li;return{p1:i,p2:o}}(e,i,c,o.k2),d=l.p1,p=l.p2;return k(r.beta,d,p,s,u)}return N.unsafe(i,n)}},{key:"multiplyAndAddUnsafe",value:function(e,t,n){var r=this.multiplyUnsafe(t).add(e.multiplyUnsafe(n));return r.is0()?void 0:r}},{key:"toAffine",value:function(e){return w(this,e)}},{key:"isTorsionFree",value:function(){var n=t.isTorsionFree;return o===ji||(n?n(e,this):N.unsafe(this,s).is0())}},{key:"clearCofactor",value:function(){var n=t.clearCofactor;return o===ji?this:n?n(e,this):this.multiplyUnsafe(o)}},{key:"isSmallOrder",value:function(){return this.multiplyUnsafe(o).is0()}},{key:"toBytes",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Ca(t,"isCompressed"),this.assertValidity(),d(e,this,t)}},{key:"toHex",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return $t(this.toBytes(e))}},{key:"toString",value:function(){return"<Point ".concat(this.is0()?"ZERO":this.toHex(),">")}},{key:"px",get:function(){return this.X}},{key:"py",get:function(){return this.X}},{key:"pz",get:function(){return this.Z}},{key:"toRawBytes",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.toBytes(e)}},{key:"_setWindowSize",value:function(e){this.precompute(e)}}],[{key:"CURVE",value:function(){return i}},{key:"fromAffine",value:function(t){var n=t||{},a=n.x,i=n.y;if(!t||!r.isValid(a)||!r.isValid(i))throw new Error("invalid affine point");if(t instanceof e)throw new Error("projective point not allowed");return r.is0(a)&&r.is0(i)?e.ZERO:new e(a,i,r.ONE)}},{key:"fromBytes",value:function(t){var n=e.fromAffine(p(Aa(t,void 0,"point")));return n.assertValidity(),n}},{key:"fromHex",value:function(t){return e.fromBytes(Ra("pointHex",t))}},{key:"normalizeZ",value:function(t){return pi(e,t)}},{key:"msm",value:function(t,n){return function(e,t,n,r){(function(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(function(e,n){if(!(e instanceof t))throw new Error("invalid point at index "+n)})})(n,e),function(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(function(e,n){if(!t.isValid(e))throw new Error("invalid scalar at index "+n)})}(r,t);var a=n.length,i=r.length;if(a!==i)throw new Error("arrays of points and scalars must have equal length");var o=e.ZERO,s=Ma(BigInt(a)),c=1;s>12?c=s-3:s>4?c=s-2:s>0&&(c=2);for(var u=Da(c),l=new Array(Number(u)+1).fill(o),d=o,p=Math.floor((t.BITS-1)/c)*c;p>=0;p-=c){l.fill(o);for(var f=0;f<i;f++){var h=Number(r[f]>>BigInt(p)&u);l[h]=l[h].add(n[f])}for(var v=o,g=l.length-1,m=o;g>0;g--)m=m.add(l[g]),v=v.add(m);if(d=d.add(v),0!==p)for(var y=0;y<c;y++)d=d.double()}return d}(e,a,t,n)}},{key:"fromPrivateKey",value:function(t){return e.BASE.multiply(Zi(a,t))}}]),e}();x.BASE=new x(i.Gx,i.Gy,r.ONE),x.ZERO=new x(r.ZERO,r.ONE,r.ZERO),x.Fp=r,x.Fn=a;var A=a.BITS,N=new wi(x,t.endo?Math.ceil(A/2):A);return x.BASE.precompute(8),x}(n,r),a,i))}function zi(e,t){var n=function(t){return Vi(E(E({},e),{},{hash:t}))};return E(E({},n(t)),{},{create:n})}var Gi={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},$i={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},Ji={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Yi=oi(Gi.p),Xi=oi($i.p),Qi=oi(Ji.p),eo=zi(E(E({},Gi),{},{Fp:Yi,lowS:!1}),zn);zi(E(E({},$i),{},{Fp:Xi,lowS:!1}),$n),zi(E(E({},Ji),{},{Fp:Qi,lowS:!1,allowedPrivateKeyLengths:[130,131,132]}),Gn);var to=eo,no="base16",ro="base64pad",ao="base64url",io="utf8";function oo(){var e=rn(32);return(0,Ae.BB)(e,no)}function so(e){var t=Ea((0,Ae.mL)(e,no));return(0,Ae.BB)(t,no)}function co(e){var t=Ea((0,Ae.mL)(e,io));return(0,Ae.BB)(t,no)}function uo(e){return(0,Ae.mL)("".concat(e),"base10")}function lo(e){return Number((0,Ae.BB)(e,"base10"))}function po(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function fo(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");return t+"=".repeat((4-t.length%4)%4)}function ho(e){if(2===lo(e.type))return(0,Ae.BB)((0,Ae.zo)([e.type,e.sealed]),ro);if(1===lo(e.type)){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return(0,Ae.BB)((0,Ae.zo)([e.type,e.senderPublicKey,e.iv,e.sealed]),ro)}return(0,Ae.BB)((0,Ae.zo)([e.type,e.iv,e.sealed]),ro)}function vo(e){var t=(e.encoding||ro)===ao?fo(e.encoded):e.encoded,n=(0,Ae.mL)(t,ro),r=n.slice(0,1);if(1===lo(r)){var a=n.slice(1,33),i=n.slice(33,45);return{type:r,sealed:n.slice(45),iv:i,senderPublicKey:a}}if(2===lo(r))return{type:r,sealed:n.slice(1),iv:rn(12)};var o=n.slice(1,13);return{type:r,sealed:n.slice(13),iv:o}}function go(e){var t=(null==e?void 0:e.type)||0;if(1===t){if(typeof(null==e?void 0:e.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(null==e?void 0:e.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:null==e?void 0:e.senderPublicKey,receiverPublicKey:null==e?void 0:e.receiverPublicKey}}function mo(e){return 1===e.type&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}function yo(e){return 2===e.type}function bo(e){return(null==e?void 0:e.relay)||{protocol:"irn"}}function wo(e){var t=Ne.iO[e];if(typeof t>"u")throw new Error("Relay Protocol not supported: ".concat(e));return t}var Eo=Object.defineProperty,ko=Object.defineProperties,xo=Object.getOwnPropertyDescriptors,Co=Object.getOwnPropertySymbols,Ao=Object.prototype.hasOwnProperty,No=Object.prototype.propertyIsEnumerable,Io=function(e,t,n){return t in e?Eo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},_o=function(e,t){for(var n in t||(t={}))Ao.call(t,n)&&Io(e,n,t[n]);if(Co){var r,a=M(Co(t));try{for(a.s();!(r=a.n()).done;){n=r.value;No.call(t,n)&&Io(e,n,t[n])}}catch(i){a.e(i)}finally{a.f()}}return e};function So(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n={},r="relay"+t;return Object.keys(e).forEach(function(t){if(t.startsWith(r)){var a=t.replace(r,"");n[a]=e[t]}}),n}function To(e){if(!e.includes("wc:")){var t=dt(e);null!=t&&t.includes("wc:")&&(e=t)}var n=(e=(e=e.includes("wc://")?e.replace("wc://",""):e).includes("wc:")?e.replace("wc:",""):e).indexOf(":"),r=-1!==e.indexOf("?")?e.indexOf("?"):void 0,a=e.substring(0,n),i=e.substring(n+1,r).split("@"),o=typeof r<"u"?e.substring(r):"",s=new URLSearchParams(o),c=Object.fromEntries(s.entries()),u="string"==typeof c.methods?c.methods.split(","):void 0;return{protocol:a,topic:Oo(i[0]),version:parseInt(i[1],10),symKey:c.symKey,relay:So(c),methods:u,expiryTimestamp:c.expiryTimestamp?parseInt(c.expiryTimestamp,10):void 0}}function Oo(e){return e.startsWith("//")?e.substring(2):e}function Ro(e){var t=new URLSearchParams,n=_o(_o(function(e,t){return ko(e,xo(t))}(_o({},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n={};return Object.keys(e).forEach(function(r){e[r]&&(n["relay"+t+r]=e[r])}),n}(e.relay)),{symKey:e.symKey}),e.expiryTimestamp&&{expiryTimestamp:e.expiryTimestamp.toString()}),e.methods&&{methods:e.methods.join(",")});return Object.entries(n).sort(function(e,t){var n=C(e,1)[0],r=C(t,1)[0];return n.localeCompare(r)}).forEach(function(e){var n=C(e,2),r=n[0],a=n[1];void 0!==a&&t.append(r,String(a))}),"".concat(e.protocol,":").concat(e.topic,"@").concat(e.version,"?").concat(t)}function Po(e,t,n){return"".concat(e,"?wc_ev=").concat(n,"&topic=").concat(t)}var Uo=Object.defineProperty,Mo=Object.defineProperties,Do=Object.getOwnPropertyDescriptors,Lo=Object.getOwnPropertySymbols,Bo=Object.prototype.hasOwnProperty,jo=Object.prototype.propertyIsEnumerable,Fo=function(e,t,n){return t in e?Uo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Wo=function(e,t){for(var n in t||(t={}))Bo.call(t,n)&&Fo(e,n,t[n]);if(Lo){var r,a=M(Lo(t));try{for(a.s();!(r=a.n()).done;){n=r.value;jo.call(t,n)&&Fo(e,n,t[n])}}catch(i){a.e(i)}finally{a.f()}}return e},qo=function(e,t){return Mo(e,Do(t))};function Zo(e){var t=[];return e.forEach(function(e){var n=C(e.split(":"),2),r=n[0],a=n[1];t.push("".concat(r,":").concat(a))}),t}function Ho(e){var t=[];return Object.values(e).forEach(function(e){t.push.apply(t,x(Zo(e.accounts)))}),x(new Set(t))}function Ko(e){return e.includes(":")}function Vo(e){return Ko(e)?e.split(":")[0]:e}function zo(e){var t,n,r,a={};if(!es(e))return a;for(var i=0,o=Object.entries(e);i<o.length;i++){var s=C(o[i],2),c=s[0],u=s[1],l=Ko(c)?[c]:u.chains,d=u.methods||[],p=u.events||[],f=Vo(c);a[f]=qo(Wo({},a[f]),{chains:rt(l,null==(t=a[f])?void 0:t.chains),methods:rt(d,null==(n=a[f])?void 0:n.methods),events:rt(p,null==(r=a[f])?void 0:r.events)})}return a}function Go(e,t){for(var n=function(e){var t={};return null!=e&&e.forEach(function(e){var n,r=C(e.split(":"),2),a=r[0],i=r[1];t[a]||(t[a]={accounts:[],chains:[],events:[],methods:[]}),t[a].accounts.push(e),null==(n=t[a].chains)||n.push("".concat(a,":").concat(i))}),t}(t=t.map(function(e){return e.replace("did:pkh:","")})),r=0,a=Object.entries(n);r<a.length;r++){var i=C(a[r],2),o=(i[0],i[1]);o.methods=o.methods?rt(o.methods,e):e,o.events=["chainChanged","accountsChanged"]}return n}var $o={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Jo={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Yo(e,t){var n=Jo[e],r=n.message,a=n.code;return{message:t?"".concat(r," ").concat(t):r,code:a}}function Xo(e,t){var n=$o[e],r=n.message,a=n.code;return{message:t?"".concat(r," ").concat(t):r,code:a}}function Qo(e,t){return!!Array.isArray(e)&&(!(typeof t<"u"&&e.length)||e.every(t))}function es(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function ts(e){return typeof e>"u"}function ns(e,t){return!(!t||!ts(e))||"string"==typeof e&&!!e.trim().length}function rs(e,t){return!(!t||!ts(e))||"number"==typeof e&&!isNaN(e)}function as(e){return!(!ns(e,!1)||!e.includes(":"))&&2===e.split(":").length}function is(e){var t=!0;return Qo(e)?e.length&&(t=e.every(function(e){return ns(e,!1)})):t=!1,t}function os(e,t){var n=null;return Object.values(e).forEach(function(e){if(!n){var r=function(e,t){var n=null;return is(null==e?void 0:e.methods)?is(null==e?void 0:e.events)||(n=Xo("UNSUPPORTED_EVENTS","".concat(t,", events should be an array of strings or empty array for no events"))):n=Xo("UNSUPPORTED_METHODS","".concat(t,", methods should be an array of strings or empty array for no methods")),n}(e,"".concat(t,", namespace"));r&&(n=r)}}),n}function ss(e,t){var n=null;if(e&&es(e)){var r=os(e,t);r&&(n=r);var a=function(e,t){var n=null;return Object.values(e).forEach(function(e){if(!n){var r=function(e,t){var n=null;return Qo(e)?e.forEach(function(e){n||function(e){if(ns(e,!1)&&e.includes(":")){var t=e.split(":");if(3===t.length){var n=t[0]+":"+t[1];return!!t[2]&&as(n)}}return!1}(e)||(n=Xo("UNSUPPORTED_ACCOUNTS","".concat(t,", account ").concat(e,' should be a string and conform to "namespace:chainId:address" format')))}):n=Xo("UNSUPPORTED_ACCOUNTS","".concat(t,', accounts should be an array of strings conforming to "namespace:chainId:address" format')),n}(null==e?void 0:e.accounts,"".concat(t," namespace"));r&&(n=r)}}),n}(e,t);a&&(n=a)}else n=Yo("MISSING_OR_INVALID","".concat(t,", namespaces should be an object with data"));return n}function cs(e){return ns(e.protocol,!0)}function us(e){return typeof e<"u"&&null!==typeof e}function ls(e,t){return!(!as(t)||!Ho(e).includes(t))}function ds(e,t,n){var r=null,a=function(e){var t={};return Object.keys(e).forEach(function(n){var r;n.includes(":")?t[n]=e[n]:null==(r=e[n].chains)||r.forEach(function(r){t[r]={methods:e[n].methods,events:e[n].events}})}),t}(e),i=function(e){var t={};return Object.keys(e).forEach(function(n){var r;n.includes(":")?t[n]=e[n]:null===(r=Zo(e[n].accounts))||void 0===r||r.forEach(function(r){t[r]={accounts:e[n].accounts.filter(function(e){return e.includes("".concat(r,":"))}),methods:e[n].methods,events:e[n].events}})}),t}(t),o=Object.keys(a),s=Object.keys(i),c=ps(Object.keys(e)),u=ps(Object.keys(t)),l=c.filter(function(e){return!u.includes(e)});return l.length&&(r=Yo("NON_CONFORMING_NAMESPACES","".concat(n," namespaces keys don't satisfy requiredNamespaces.\n      Required: ").concat(l.toString(),"\n      Received: ").concat(Object.keys(t).toString()))),ze(o,s)||(r=Yo("NON_CONFORMING_NAMESPACES","".concat(n," namespaces chains don't satisfy required namespaces.\n      Required: ").concat(o.toString(),"\n      Approved: ").concat(s.toString()))),Object.keys(t).forEach(function(e){if(e.includes(":")&&!r){var a=Zo(t[e].accounts);a.includes(e)||(r=Yo("NON_CONFORMING_NAMESPACES","".concat(n," namespaces accounts don't satisfy namespace accounts for ").concat(e,"\n        Required: ").concat(e,"\n        Approved: ").concat(a.toString())))}}),o.forEach(function(e){r||(ze(a[e].methods,i[e].methods)?ze(a[e].events,i[e].events)||(r=Yo("NON_CONFORMING_NAMESPACES","".concat(n," namespaces events don't satisfy namespace events for ").concat(e))):r=Yo("NON_CONFORMING_NAMESPACES","".concat(n," namespaces methods don't satisfy namespace methods for ").concat(e)))}),r}function ps(e){return x(new Set(e.map(function(e){return e.includes(":")?e.split(":")[0]:e})))}function fs(){var e=Ze();return new Promise(function(t){var n;switch(e){case"browser":t(qe()&&(null===(n=navigator)||void 0===n?void 0:n.onLine));break;case"react-native":t(function(){return hs.apply(this,arguments)}());break;default:t(!0)}})}function hs(){return(hs=(0,r.Z)(A().mark(function e(){var t;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!(We()&&typeof global<"u"&&null!=global&&global.NetInfo),e.t0){e.next=14;break}return e.next=4,null==global?void 0:global.NetInfo.fetch();case 4:if(e.t2=t=e.sent,e.t1=null===e.t2,e.t1){e.next=8;break}e.t1=void 0===t;case 8:if(!e.t1){e.next=12;break}e.t3=void 0,e.next=13;break;case 12:e.t3=t.isConnected;case 13:e.t0=e.t3;case 14:return e.abrupt("return",e.t0);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}var vs={},gs=function(){function e(){B(this,e)}return F(e,null,[{key:"get",value:function(e){return vs[e]}},{key:"set",value:function(e,t){vs[e]=t}},{key:"delete",value:function(e){delete vs[e]}}]),e}();function ms(e){return new Uint8Array(e.replace(/^0x/,"").match(/.{1,2}/g).map(function(e){return parseInt(e,16)}))}function ys(e){var t=Uint8Array.from(Buffer.from(e.signature,"hex")),n=function(e){var t=$.decode(e);if(t.length<33)throw new Error("Too short to contain a public key");return t.slice(1,33)}(e.transaction.address),r=function(e){var t,n=e.publicKey,r=e.signature,a=e.payload,i=ms(a.method),o=128|parseInt((null==(t=a.version)?void 0:t.toString())||"4"),s=function(e){var t=$.decode(e)[0];return 42===t?0:60===t?2:1}(a.address),c="00"===a.era?new Uint8Array([0]):ms(a.era);if(1!==c.length&&2!==c.length)throw new Error("Invalid era length");var u=parseInt(a.nonce,16),l=new Uint8Array([255&u,u>>8&255]),d=BigInt("0x".concat(function(e){return e.startsWith("0x")?e.slice(2):e}(a.tip))),p=function(e){if(e<BigInt(1)<<BigInt(6))return new Uint8Array([Number(e<<BigInt(2))]);if(e<BigInt(1)<<BigInt(14)){var t=e<<BigInt(2)|BigInt(1);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255))])}if(e<BigInt(1)<<BigInt(30)){var n=e<<BigInt(2)|BigInt(2);return new Uint8Array([Number(n&BigInt(255)),Number(n>>BigInt(8)&BigInt(255)),Number(n>>BigInt(16)&BigInt(255)),Number(n>>BigInt(24)&BigInt(255))])}throw new Error("BigInt compact encoding not supported > 2^30")}(d),f=new Uint8Array([0].concat(x(n),[s],x(r),x(c),x(l),x(p),x(i))),h=function(e){if(e<64)return new Uint8Array([e<<2]);if(e<16384){var t=e<<2|1;return new Uint8Array([255&t,t>>8&255])}if(e<1<<30){var n=e<<2|2;return new Uint8Array([255&n,n>>8&255,n>>16&255,n>>24&255])}throw new Error("Compact encoding > 2^30 not supported")}(f.length+1);return new Uint8Array([].concat(x(h),[o],x(f)))}({publicKey:n,signature:t,payload:e.transaction});return function(e){var t=ms(e),n=(0,Ie.blake2b)(t,void 0,32);return"0x"+Buffer.from(n).toString("hex")}(Buffer.from(r).toString("hex"))}function bs(e){var t=e.logger,n=e.name,r="string"==typeof t?(0,p.Rt)({opts:{level:t,name:n}}).logger:t;return r.level="string"==typeof t?t:t.level,r}var ws=n(2517),Es=n(22339),ks=n(70213),xs="wc@2:core:",Cs={database:":memory:"},As="client_ed25519_seed",Ns=W.ONE_DAY,Is=W.SIX_HOURS,_s="wss://relay.walletconnect.org",Ss="relayer_publish",Ts="2.23.2",Os="link_mode",Rs="relay",Ps="WALLETCONNECT_LINK_MODE_APPS",Us="subscription_created",Ms="subscription_deleted",Ds={wc_pairingDelete:{req:{ttl:W.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:W.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:W.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:W.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:W.ONE_DAY,prompt:!1,tag:0},res:{ttl:W.ONE_DAY,prompt:!1,tag:0}}},Ls="expirer_expired",Bs="https://verify.walletconnect.org",js=Bs,Fs="".concat(js,"/v3"),Ws=["https://verify.walletconnect.com",Bs],qs=function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},Zs=function(){function e(t,n,r){B(this,e),this.name=t,this.prefix=n,this.baseEncode=r}return F(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),Hs=function(){function e(t,n,r){if(B(this,e),this.name=t,this.prefix=n,void 0===n.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}return F(e,[{key:"decode",value:function(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return Vs(this,e)}}]),e}(),Ks=function(){function e(t){B(this,e),this.decoders=t}return F(e,[{key:"or",value:function(e){return Vs(this,e)}},{key:"decode",value:function(e){var t=this.decoders[e[0]];if(t)return t.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),Vs=function(e,t){return new Ks(E(E({},e.decoders||k({},e.prefix,e)),t.decoders||k({},t.prefix,t)))},zs=function(){function e(t,n,r,a){B(this,e),this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=a,this.encoder=new Zs(t,n,r),this.decoder=new Hs(t,n,a)}return F(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),Gs=function(e){var t=e.name,n=e.prefix,r=e.encode,a=e.decode;return new zs(t,n,r,a)},$s=function(e){var t=e.prefix,n=e.name,r=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==n[o])throw new TypeError(i+" is ambiguous");n[o]=a}var s=e.length,c=e.charAt(0),u=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function d(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,a=0;e[t]===c;)r++,t++;for(var i=(e.length-t)*u+1>>>0,o=new Uint8Array(i);e[t];){var l=n[e.charCodeAt(t)];if(255===l)return;for(var d=0,p=i-1;(0!==l||d<a)&&-1!==p;p--,d++)o[p]=(l+=s*o[p]>>>0)%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");a=d,t++}if(" "!==e[t]){for(var f=i-a;f!==i&&0===o[f];)f++;for(var h=new Uint8Array(r+(i-f)),v=r;f!==i;)h[v++]=o[f++];return h}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,a=0,i=t.length;a!==i&&0===t[a];)a++,n++;for(var o=(i-a)*l+1>>>0,u=new Uint8Array(o);a!==i;){for(var d=t[a],p=0,f=o-1;(0!==d||p<r)&&-1!==f;f--,p++)u[f]=(d+=256*u[f]>>>0)%s>>>0,d=d/s>>>0;if(0!==d)throw new Error("Non-zero carry");r=p,a++}for(var h=o-r;h!==o&&0===u[h];)h++;for(var v=c.repeat(n);h<o;++h)v+=e.charAt(u[h]);return v},decodeUnsafe:d,decode:function(e){var n=d(e);if(n)return n;throw new Error("Non-".concat(t," character"))}}}(e.alphabet,n),a=r.encode,i=r.decode;return Gs({prefix:t,name:n,encode:a,decode:function(e){return qs(i(e))}})},Js=function(e){var t=e.name,n=e.prefix,r=e.bitsPerChar,a=e.alphabet;return Gs({prefix:n,name:t,encode:function(e){return function(e,t,n){for(var r="="===t[t.length-1],a=(1<<n)-1,i="",o=0,s=0,c=0;c<e.length;++c)for(s=s<<8|e[c],o+=8;o>n;)i+=t[a&s>>(o-=n)];if(o&&(i+=t[a&s<<n-o]),r)for(;i.length*n&7;)i+="=";return i}(e,a,r)},decode:function(e){return function(e,t,n,r){for(var a={},i=0;i<t.length;++i)a[t[i]]=i;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*n/8|0),c=0,u=0,l=0,d=0;d<o;++d){var p=a[e[d]];if(void 0===p)throw new SyntaxError("Non-".concat(r," character"));u=u<<n|p,(c+=n)>=8&&(c-=8,s[l++]=255&u>>c)}if(c>=n||255&u<<8-c)throw new SyntaxError("Unexpected end of data");return s}(e,a,r,t)}})},Ys=Gs({prefix:"\0",name:"identity",encode:function(e){return function(e){return(new TextDecoder).decode(e)}(e)},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),Xs=Object.freeze({__proto__:null,identity:Ys}),Qs=Js({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),ec=Object.freeze({__proto__:null,base2:Qs}),tc=Js({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),nc=Object.freeze({__proto__:null,base8:tc}),rc=$s({prefix:"9",name:"base10",alphabet:"0123456789"}),ac=Object.freeze({__proto__:null,base10:rc}),ic=Js({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),oc=Js({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),sc=Object.freeze({__proto__:null,base16:ic,base16upper:oc}),cc=Js({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),uc=Js({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),lc=Js({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),dc=Js({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),pc=Js({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),fc=Js({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),hc=Js({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),vc=Js({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),gc=Js({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),mc=Object.freeze({__proto__:null,base32:cc,base32upper:uc,base32pad:lc,base32padupper:dc,base32hex:pc,base32hexupper:fc,base32hexpad:hc,base32hexpadupper:vc,base32z:gc}),yc=$s({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),bc=$s({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),wc=Object.freeze({__proto__:null,base36:yc,base36upper:bc}),Ec=$s({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),kc=$s({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),xc=Object.freeze({__proto__:null,base58btc:Ec,base58flickr:kc}),Cc=Js({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ac=Js({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Nc=Js({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Ic=Js({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),_c=Object.freeze({__proto__:null,base64:Cc,base64pad:Ac,base64url:Nc,base64urlpad:Ic}),Sc=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),Tc=Sc.reduce(function(e,t,n){return e[n]=t,e},[]),Oc=Sc.reduce(function(e,t,n){return e[t.codePointAt(0)]=n,e},[]),Rc=Gs({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce(function(e,t){return e+Tc[t]},"")},decode:function(e){var t,n=[],r=M(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,i=Oc[a.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(a));n.push(i)}}catch(o){r.e(o)}finally{r.f()}return new Uint8Array(n)}}),Pc=Object.freeze({__proto__:null,base256emoji:Rc}),Uc=Math.pow(2,31),Mc=Math.pow(2,7),Dc=Math.pow(2,14),Lc=Math.pow(2,21),Bc=Math.pow(2,28),jc=Math.pow(2,35),Fc=Math.pow(2,42),Wc=Math.pow(2,49),qc=Math.pow(2,56),Zc=Math.pow(2,63),Hc={encode:function e(t,n,r){n=n||[];for(var a=r=r||0;t>=Uc;)n[r++]=255&t|128,t/=128;for(;-128&t;)n[r++]=255&t|128,t>>>=7;return n[r]=0|t,e.bytes=r-a+1,n},decode:function e(t,n){var r,a=0,i=0,o=n=n||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");r=t[o++],a+=i<28?(127&r)<<i:(127&r)*Math.pow(2,i),i+=7}while(r>=128);return e.bytes=o-n,a},encodingLength:function(e){return e<Mc?1:e<Dc?2:e<Lc?3:e<Bc?4:e<jc?5:e<Fc?6:e<Wc?7:e<qc?8:e<Zc?9:10}},Kc=Hc,Vc=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Kc.encode(e,t,n),t},zc=function(e){return Kc.encodingLength(e)},Gc=function(e,t){var n=t.byteLength,r=zc(e),a=r+zc(n),i=new Uint8Array(a+n);return Vc(e,i,0),Vc(n,i,r),i.set(t,a),new $c(e,n,t,i)},$c=F(function e(t,n,r,a){B(this,e),this.code=t,this.size=n,this.digest=r,this.bytes=a}),Jc=function(e){var t=e.name,n=e.code,r=e.encode;return new Yc(t,n,r)},Yc=function(){function e(t,n,r){B(this,e),this.name=t,this.code=n,this.encode=r}return F(e,[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var n=this.encode(e);return n instanceof Uint8Array?Gc(this.code,n):n.then(function(e){return Gc(t.code,e)})}throw Error("Unknown type, must be binary type")}}]),e}(),Xc=function(e){return function(){var t=(0,r.Z)(A().mark(function t(n){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,crypto.subtle.digest(e,n);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},Qc=Jc({name:"sha2-256",code:18,encode:Xc("SHA-256")}),eu=Jc({name:"sha2-512",code:19,encode:Xc("SHA-512")});Object.freeze({__proto__:null,sha256:Qc,sha512:eu});var tu=qs;Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:tu,digest:function(e){return Gc(0,tu(e))}}}),new TextEncoder,new TextDecoder;var nu=E(E(E(E(E(E(E(E(E(E({},Xs),ec),nc),ac),sc),mc),wc),xc),_c),Pc);function ru(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function au(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}var iu=au("utf8","u",function(e){return"u"+new TextDecoder("utf8").decode(e)},function(e){return(new TextEncoder).encode(e.substring(1))}),ou=au("ascii","a",function(e){for(var t="a",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},function(e){for(var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?ru(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}((e=e.substring(1)).length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),su=E({utf8:iu,"utf-8":iu,hex:nu.base16,latin1:ou,ascii:ou,binary:ou},nu),cu=Object.defineProperty,uu=function(e,t,n){return function(e,t,n){return t in e?cu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n)},lu=function(){function e(t,n){var a=this;B(this,e);var i=this;this.core=t,this.logger=n,uu(this,"keychain",new Map),uu(this,"name","keychain"),uu(this,"version","0.3"),uu(this,"initialized",!1),uu(this,"storagePrefix",xs),uu(this,"init",(0,r.Z)(A().mark(function e(){var t;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.initialized){e.next=5;break}return e.next=3,i.getKeyChain();case 3:typeof(t=e.sent)<"u"&&(i.keychain=t),i.initialized=!0;case 5:case"end":return e.stop()}},e)}))),uu(this,"has",function(e){return a.isInitialized(),a.keychain.has(e)}),uu(this,"set",function(){var e=(0,r.Z)(A().mark(function e(t,n){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.isInitialized(),i.keychain.set(t,n),e.next=4,i.persist();case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),uu(this,"get",function(e){a.isInitialized();var t=a.keychain.get(e);if(typeof t>"u"){var n=Yo("NO_MATCHING_KEY","".concat(a.name,": ").concat(e)).message;throw new Error(n)}return t}),uu(this,"del",function(){var e=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.isInitialized(),i.keychain.delete(t),e.next=4,i.persist();case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),this.core=t,this.logger=(0,p.Ep)(n,this.name)}return F(e,[{key:"context",get:function(){return(0,p.Fd)(this.logger)}},{key:"storageKey",get:function(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}},{key:"setKeyChain",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.core.storage.setItem(t.storageKey,Ge(e));case 2:case"end":return n.stop()}},n)}))()}},{key:"getKeyChain",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.core.storage.getItem(e.storageKey);case 2:return n=t.sent,t.abrupt("return",typeof n<"u"?$e(n):void 0);case 4:case"end":return t.stop()}},t)}))()}},{key:"persist",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setKeyChain(e.keychain);case 2:case"end":return t.stop()}},t)}))()}},{key:"isInitialized",value:function(){if(!this.initialized){var e=Yo("NOT_INITIALIZED",this.name).message;throw new Error(e)}}}]),e}(),du=Object.defineProperty,pu=function(e,t,n){return function(e,t,n){return t in e?du(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n)},fu=function(){function e(t,n,a){var i=this;B(this,e);var o=this;this.core=t,this.logger=n,pu(this,"name","crypto"),pu(this,"keychain"),pu(this,"randomSessionIdentifier",oo()),pu(this,"initialized",!1),pu(this,"clientId"),pu(this,"init",(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=o.initialized,e.t0){e.next=5;break}return e.next=4,o.keychain.init();case 4:o.initialized=!0;case 5:case"end":return e.stop()}},e)}))),pu(this,"hasKeys",function(e){return i.isInitialized(),i.keychain.has(e)}),pu(this,"getClientId",(0,r.Z)(A().mark(function e(){var t,n,r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.isInitialized(),!o.clientId){e.next=2;break}return e.abrupt("return",o.clientId);case 2:return e.next=4,o.getClientSeed();case 4:return t=e.sent,n=Z.Au(t),r=Z.bG(n.publicKey),e.abrupt("return",(o.clientId=r,r));case 8:case"end":return e.stop()}},e)}))),pu(this,"generateKeyPair",function(){i.isInitialized();var e=function(){var e=Ri.utils.randomPrivateKey(),t=Ri.getPublicKey(e);return{privateKey:(0,Ae.BB)(e,no),publicKey:(0,Ae.BB)(t,no)}}();return i.setPrivateKey(e.publicKey,e.privateKey)}),pu(this,"signJWT",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,i;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.isInitialized(),e.next=3,o.getClientSeed();case 3:return n=e.sent,r=Z.Au(n),a=o.randomSessionIdentifier,i=Ns,e.next=9,Z.vf(a,t,i,r);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),pu(this,"generateSharedKey",function(e,t,n){i.isInitialized();var r=function(e,t){var n=Ri.getSharedSecret((0,Ae.mL)(e,no),(0,Ae.mL)(t,no)),r=function(e,t,n,r,a){return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32;Dt(e),Ut(r);var a=e.outputLen;if(r>255*a)throw new Error("Length should be <= 255*HashLen");var i=Math.ceil(r/a);void 0===n&&(n=wa);for(var o=new Uint8Array(i*a),s=ya.create(e,t),c=s._cloneInto(),u=new Uint8Array(s.outputLen),l=0;l<i;l++)ba[0]=l+1,c.update(0===l?wa:u).update(n).update(ba).digestInto(u),o.set(u,a*l),s._cloneInto(c);return s.destroy(),c.destroy(),Ft(u,ba),o.slice(0,r)}(e,function(e,t,n){return Dt(e),void 0===n&&(n=new Uint8Array(e.outputLen)),ya(e,Qt(n),Qt(t))}(e,t,void 0),void 0,32)}(Ea,n);return(0,Ae.BB)(r,no)}(i.getPrivateKey(e),t);return i.setSymKey(r,n)}),pu(this,"setSymKey",function(){var e=(0,r.Z)(A().mark(function e(t,n){var r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.isInitialized(),r=n||so(t),e.next=4,o.keychain.set(r,t);case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),pu(this,"deleteKeyPair",function(){var e=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.isInitialized(),e.next=3,o.keychain.del(t);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),pu(this,"deleteSymKey",function(){var e=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.isInitialized(),e.next=3,o.keychain.del(t);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),pu(this,"encode",function(){var e=(0,r.Z)(A().mark(function e(t,n,r){var a,i,s,c,u,l,d;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.isInitialized(),a=go(r),i=(0,q.u)(n),!yo(a)){e.next=4;break}return e.abrupt("return",function(e,t){var n=uo(2),r=rn(12),a=ho({type:n,sealed:(0,Ae.mL)(e,io),iv:r});return t===ao?po(a):a}(i,null==r?void 0:r.encoding));case 4:if(!mo(a)){e.next=9;break}return s=a.senderPublicKey,c=a.receiverPublicKey,e.next=8,o.generateSharedKey(s,c);case 8:t=e.sent;case 9:return u=o.getSymKey(t),l=a.type,d=a.senderPublicKey,e.abrupt("return",function(e){var t=uo(typeof e.type<"u"?e.type:0);if(1===lo(t)&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");var n=typeof e.senderPublicKey<"u"?(0,Ae.mL)(e.senderPublicKey,no):void 0,r=typeof e.iv<"u"?(0,Ae.mL)(e.iv,no):rn(12),a=(0,Ae.mL)(e.symKey,no),i=ho({type:t,sealed:ga(a,r).encrypt((0,Ae.mL)(e.message,io)),iv:r,senderPublicKey:n});return e.encoding===ao?po(i):i}({type:l,symKey:u,message:i,senderPublicKey:d,encoding:null==r?void 0:r.encoding}));case 11:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()),pu(this,"decode",function(){var e=(0,r.Z)(A().mark(function e(t,n,r){var a,i,s,c,u;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.isInitialized(),a=function(e,t){var n=vo({encoded:e,encoding:null==t?void 0:t.encoding});return go({type:lo(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?(0,Ae.BB)(n.senderPublicKey,no):void 0,receiverPublicKey:null==t?void 0:t.receiverPublicKey})}(n,r),!yo(a)){e.next=5;break}return i=function(e,t){var n=vo({encoded:e,encoding:t}).sealed;return(0,Ae.BB)(n,io)}(n,null==r?void 0:r.encoding),e.abrupt("return",(0,q.D)(i));case 5:if(!mo(a)){e.next=10;break}return s=a.receiverPublicKey,c=a.senderPublicKey,e.next=9,o.generateSharedKey(s,c);case 9:t=e.sent;case 10:return e.prev=10,u=function(e){var t=(0,Ae.mL)(e.symKey,no),n=vo({encoded:e.encoded,encoding:e.encoding}),r=n.sealed,a=n.iv,i=ga(t,a).decrypt(r);if(null===i)throw new Error("Failed to decrypt");return(0,Ae.BB)(i,io)}({symKey:o.getSymKey(t),encoded:n,encoding:null==r?void 0:r.encoding}),e.abrupt("return",(0,q.D)(u));case 15:return e.prev=15,e.t0=e.catch(10),e.t1=o.logger,e.t2="Failed to decode message from topic: '".concat(t,"', clientId: '"),e.next=21,o.getClientId();case 21:e.t3=e.sent,e.t4=e.t2.concat.call(e.t2,e.t3,"'"),e.t1.error.call(e.t1,e.t4),o.logger.error(e.t0);case 25:case"end":return e.stop()}},e,null,[[10,15]])}));return function(t,n,r){return e.apply(this,arguments)}}()),pu(this,"getPayloadType",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ro;return lo(vo({encoded:e,encoding:t}).type)}),pu(this,"getPayloadSenderPublicKey",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ro,n=vo({encoded:e,encoding:t});return n.senderPublicKey?(0,Ae.BB)(n.senderPublicKey,no):void 0}),this.core=t,this.logger=(0,p.Ep)(n,this.name),this.keychain=a||new lu(this.core,this.logger)}return F(e,[{key:"context",get:function(){return(0,p.Fd)(this.logger)}},{key:"setPrivateKey",value:function(e,t){var n=this;return(0,r.Z)(A().mark(function r(){return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.keychain.set(e,t);case 2:return r.abrupt("return",e);case 3:case"end":return r.stop()}},r)}))()}},{key:"getPrivateKey",value:function(e){return this.keychain.get(e)}},{key:"getClientSeed",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n="",t.prev=1,n=e.keychain.get(As),t.next=10;break;case 5:return t.prev=5,t.t0=t.catch(1),n=oo(),t.next=10,e.keychain.set(As,n);case 10:return t.abrupt("return",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",n=su[t];if(!n)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.decoder.decode("".concat(n.prefix).concat(e)):ru(globalThis.Buffer.from(e,"utf-8"))}(n,"base16"));case 11:case"end":return t.stop()}},t,null,[[1,5]])}))()}},{key:"getSymKey",value:function(e){return this.keychain.get(e)}},{key:"isInitialized",value:function(){if(!this.initialized){var e=Yo("NOT_INITIALIZED",this.name).message;throw new Error(e)}}}]),e}(),hu=Object.defineProperty,vu=Object.defineProperties,gu=Object.getOwnPropertyDescriptors,mu=Object.getOwnPropertySymbols,yu=Object.prototype.hasOwnProperty,bu=Object.prototype.propertyIsEnumerable,wu=function(e,t,n){return t in e?hu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Eu=function(e,t,n){return wu(e,"symbol"!=typeof t?t+"":t,n)},ku=function(e){N(n,e);var t=I(n);function n(e,a){var i,o;return B(this,n),i=t.call(this,e,a),o=S(i),i.logger=e,i.core=a,Eu(S(i),"messages",new Map),Eu(S(i),"messagesWithoutClientAck",new Map),Eu(S(i),"name","messages"),Eu(S(i),"version","0.3"),Eu(S(i),"initialized",!1),Eu(S(i),"storagePrefix",xs),Eu(S(i),"init",(0,r.Z)(A().mark(function e(){var t,n;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.initialized){e.next=19;break}return o.logger.trace("Initialized"),e.prev=2,e.next=5,o.getRelayerMessages();case 5:return typeof(t=e.sent)<"u"&&(o.messages=t),e.next=9,o.getRelayerMessagesWithoutClientAck();case 9:typeof(n=e.sent)<"u"&&(o.messagesWithoutClientAck=n),o.logger.debug("Successfully Restored records for ".concat(o.name)),o.logger.trace({type:"method",method:"restore",size:o.messages.size}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),o.logger.debug("Failed to Restore records for ".concat(o.name)),o.logger.error(e.t0);case 16:return e.prev=16,o.initialized=!0,e.finish(16);case 19:case"end":return e.stop()}},e,null,[[2,13,16,19]])}))),Eu(S(i),"set",function(){var e=(0,r.Z)(A().mark(function e(t,n,r){var a,i,s;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.isInitialized(),a=co(n),typeof(i=o.messages.get(t))>"u"&&(i={}),!(typeof i[a]<"u")){e.next=5;break}return e.abrupt("return",a);case 5:return i[a]=n,o.messages.set(t,i),"inbound"===r&&(s=o.messagesWithoutClientAck.get(t)||{},o.messagesWithoutClientAck.set(t,function(e,t){return vu(e,gu(t))}(function(e,t){for(var n in t||(t={}))yu.call(t,n)&&wu(e,n,t[n]);if(mu){var r,a=M(mu(t));try{for(a.s();!(r=a.n()).done;){n=r.value;bu.call(t,n)&&wu(e,n,t[n])}}catch(i){a.e(i)}finally{a.f()}}return e}({},s),k({},a,n)))),e.next=8,o.persist();case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()),Eu(S(i),"get",function(e){i.isInitialized();var t=i.messages.get(e);return typeof t>"u"&&(t={}),t}),Eu(S(i),"getWithoutAck",function(e){i.isInitialized();var t,n={},r=M(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,o=i.messagesWithoutClientAck.get(a)||{};n[a]=Object.values(o)}}catch(s){r.e(s)}finally{r.f()}return n}),Eu(S(i),"has",function(e,t){return i.isInitialized(),typeof i.get(e)[co(t)]<"u"}),Eu(S(i),"ack",function(){var e=(0,r.Z)(A().mark(function e(t,n){var r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.isInitialized(),r=o.messagesWithoutClientAck.get(t),e.t0=typeof r>"u",e.t0){e.next=8;break}return delete r[co(n)],0===Object.keys(r).length?o.messagesWithoutClientAck.delete(t):o.messagesWithoutClientAck.set(t,r),e.next=8,o.persist();case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),Eu(S(i),"del",function(){var e=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.isInitialized(),o.messages.delete(t),o.messagesWithoutClientAck.delete(t),e.next=5,o.persist();case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),i.logger=(0,p.Ep)(e,i.name),i.core=a,i}return F(n,[{key:"context",get:function(){return(0,p.Fd)(this.logger)}},{key:"storageKey",get:function(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}},{key:"storageKeyWithoutClientAck",get:function(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}},{key:"setRelayerMessages",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.core.storage.setItem(t.storageKey,Ge(e));case 2:case"end":return n.stop()}},n)}))()}},{key:"setRelayerMessagesWithoutClientAck",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.core.storage.setItem(t.storageKeyWithoutClientAck,Ge(e));case 2:case"end":return n.stop()}},n)}))()}},{key:"getRelayerMessages",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.core.storage.getItem(e.storageKey);case 2:return n=t.sent,t.abrupt("return",typeof n<"u"?$e(n):void 0);case 4:case"end":return t.stop()}},t)}))()}},{key:"getRelayerMessagesWithoutClientAck",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.core.storage.getItem(e.storageKeyWithoutClientAck);case 2:return n=t.sent,t.abrupt("return",typeof n<"u"?$e(n):void 0);case 4:case"end":return t.stop()}},t)}))()}},{key:"persist",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setRelayerMessages(e.messages);case 2:return t.next=4,e.setRelayerMessagesWithoutClientAck(e.messagesWithoutClientAck);case 4:case"end":return t.stop()}},t)}))()}},{key:"isInitialized",value:function(){if(!this.initialized){var e=Yo("NOT_INITIALIZED",this.name).message;throw new Error(e)}}}]),n}(function(){return F(function e(t,n){B(this,e),this.logger=t,this.core=n})}()),xu=Object.defineProperty,Cu=Object.defineProperties,Au=Object.getOwnPropertyDescriptors,Nu=Object.getOwnPropertySymbols,Iu=Object.prototype.hasOwnProperty,_u=Object.prototype.propertyIsEnumerable,Su=function(e,t,n){return t in e?xu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Tu=function(e,t){for(var n in t||(t={}))Iu.call(t,n)&&Su(e,n,t[n]);if(Nu){var r,a=M(Nu(t));try{for(a.s();!(r=a.n()).done;){n=r.value;_u.call(t,n)&&Su(e,n,t[n])}}catch(i){a.e(i)}finally{a.f()}}return e},Ou=function(e,t){return Cu(e,Au(t))},Ru=function(e,t,n){return Su(e,"symbol"!=typeof t?t+"":t,n)},Pu=function(e){N(n,e);var t=I(n);function n(e,a){var i,o;return B(this,n),i=t.call(this,e,a),o=S(i),i.relayer=e,i.logger=a,Ru(S(i),"events",new u.EventEmitter),Ru(S(i),"name","publisher"),Ru(S(i),"queue",new Map),Ru(S(i),"publishTimeout",(0,W.toMiliseconds)(W.ONE_MINUTE)),Ru(S(i),"initialPublishTimeout",(0,W.toMiliseconds)(15*W.ONE_SECOND)),Ru(S(i),"needsTransportRestart",!1),Ru(S(i),"publish",function(){var e=(0,r.Z)(A().mark(function e(t,n,a){var i,s,c,u,l,d,p,f,h,v,g,m,y;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.logger.debug("Publishing Payload"),o.logger.trace({type:"method",method:"publish",params:{topic:t,message:n,opts:a}}),d=(null==a?void 0:a.ttl)||Is,p=(null==a?void 0:a.prompt)||!1,f=(null==a?void 0:a.tag)||0,h=(null==a?void 0:a.id)||(0,Es.getBigIntRpcId)().toString(),v=wo(bo().protocol),g={id:h,method:(null==a?void 0:a.publishMethod)||v.publish,params:Tu({topic:t,message:n,ttl:d,prompt:p,tag:f,attestation:null==a?void 0:a.attestation},null==a?void 0:a.tvf)},m="Failed to publish payload, please try again. id:".concat(h," tag:").concat(f),e.prev=2,ts(null==(i=g.params)?void 0:i.prompt)&&(null==(s=g.params)||delete s.prompt),ts(null==(c=g.params)?void 0:c.tag)&&(null==(u=g.params)||delete u.tag),y=new Promise(function(){var e=(0,r.Z)(A().mark(function e(t){var n,r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=function e(n){var r,a=n.id;(null==(r=g.id)?void 0:r.toString())===a.toString()&&(o.removeRequestFromQueue(a),o.relayer.events.removeListener(Ss,e),t())},o.relayer.events.on(Ss,n),r=Ye(new Promise(function(e,t){o.rpcPublish(g,a).then(e).catch(function(e){o.logger.warn(e,null==e?void 0:e.message),t(e)})}),o.initialPublishTimeout,"Failed initial publish, retrying.... id:".concat(h," tag:").concat(f)),e.prev=3,e.next=6,r;case 6:o.events.removeListener(Ss,n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),o.queue.set(h,{request:g,opts:a,attempt:1}),o.logger.warn(e.t0,null===e.t0||void 0===e.t0?void 0:e.t0.message);case 12:case"end":return e.stop()}},e,null,[[3,9]])}));return function(t){return e.apply(this,arguments)}}()),o.logger.trace({type:"method",method:"publish",params:{id:h,topic:t,message:n,opts:a}}),e.next=8,Ye(y,o.publishTimeout,m);case 8:e.next=14;break;case 10:if(e.prev=10,e.t0=e.catch(2),o.logger.debug("Failed to Publish Payload"),o.logger.error(e.t0),null==(l=null==a?void 0:a.internal)||!l.throwOnFailedPublish){e.next=14;break}throw e.t0;case 14:return e.prev=14,o.queue.delete(h),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[2,10,14,17]])}));return function(t,n,r){return e.apply(this,arguments)}}()),Ru(S(i),"publishCustom",function(){var e=(0,r.Z)(A().mark(function e(t){var n,a,i,s,c,u,l,d,p,f,h,v,g,m,y,b,w,E,k,x,C;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.logger.debug("Publishing custom payload"),o.logger.trace({type:"method",method:"publishCustom",params:t}),u=t.payload,l=t.opts,p=(d=void 0===l?{}:l).attestation,f=d.tvf,h=d.publishMethod,v=d.prompt,g=d.tag,m=d.ttl,y=void 0===m?W.FIVE_MINUTES:m,b=d.id||(0,Es.getBigIntRpcId)().toString(),w=wo(bo().protocol),E=h||w.publish,k={id:b,method:E,params:Tu(Ou(Tu({},u),{ttl:y,prompt:v,tag:g,attestation:p}),f)},x="Failed to publish custom payload, please try again. id:".concat(b," tag:").concat(g),e.prev=2,ts(null==(n=k.params)?void 0:n.prompt)&&(null==(a=k.params)||delete a.prompt),ts(null==(i=k.params)?void 0:i.tag)&&(null==(s=k.params)||delete s.tag),C=new Promise(function(){var e=(0,r.Z)(A().mark(function e(t){var n,r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=function e(n){var r,a=n.id;(null==(r=k.id)?void 0:r.toString())===a.toString()&&(o.removeRequestFromQueue(a),o.relayer.events.removeListener(Ss,e),t())},o.relayer.events.on(Ss,n),r=Ye(new Promise(function(e,t){o.rpcPublish(k,d).then(e).catch(function(e){o.logger.warn(e,null==e?void 0:e.message),t(e)})}),o.initialPublishTimeout,"Failed initial custom payload publish, retrying.... method:".concat(E," id:").concat(b," tag:").concat(g)),e.prev=3,e.next=6,r;case 6:o.events.removeListener(Ss,n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),o.queue.set(b,{request:k,opts:d,attempt:1}),o.logger.warn(e.t0,null===e.t0||void 0===e.t0?void 0:e.t0.message);case 12:case"end":return e.stop()}},e,null,[[3,9]])}));return function(t){return e.apply(this,arguments)}}()),o.logger.trace({type:"method",method:"publish",params:{id:b,payload:u,opts:d}}),e.next=8,Ye(C,o.publishTimeout,x);case 8:e.next=14;break;case 10:if(e.prev=10,e.t0=e.catch(2),o.logger.debug("Failed to Publish Payload"),o.logger.error(e.t0),null==(c=null==d?void 0:d.internal)||!c.throwOnFailedPublish){e.next=14;break}throw e.t0;case 14:return e.prev=14,o.queue.delete(b),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[2,10,14,17]])}));return function(t){return e.apply(this,arguments)}}()),Ru(S(i),"on",function(e,t){i.events.on(e,t)}),Ru(S(i),"once",function(e,t){i.events.once(e,t)}),Ru(S(i),"off",function(e,t){i.events.off(e,t)}),Ru(S(i),"removeListener",function(e,t){i.events.removeListener(e,t)}),i.relayer=e,i.logger=(0,p.Ep)(a,i.name),i.registerEventListeners(),i}return F(n,[{key:"context",get:function(){return(0,p.Fd)(this.logger)}},{key:"rpcPublish",value:function(e,t){var n=this;return(0,r.Z)(A().mark(function r(){var a;return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n.logger.debug("Outgoing Relay Payload"),n.logger.trace({type:"message",direction:"outgoing",request:e}),r.next=3,n.relayer.request(e);case 3:return a=r.sent,r.abrupt("return",(n.relayer.events.emit(Ss,Tu(Tu({},e),t)),n.logger.debug("Successfully Published Payload"),a));case 5:case"end":return r.stop()}},r)}))()}},{key:"removeRequestFromQueue",value:function(e){this.queue.delete(e)}},{key:"checkQueue",value:function(){var e=this;this.queue.forEach(function(){var t=(0,r.Z)(A().mark(function t(n,r){var a,i;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.attempt+1,e.queue.set(r,Ou(Tu({},n),{attempt:i})),e.logger.warn({},"Publisher: queue->publishing: ".concat(n.request.id,", tag: ").concat(null==(a=n.request.params)?void 0:a.tag,", attempt: ").concat(i)),t.next=5,e.rpcPublish(n.request,n.opts);case 5:e.logger.warn({},"Publisher: queue->published: ".concat(n.request.id));case 6:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())}},{key:"registerEventListeners",value:function(){var e=this;this.relayer.core.heartbeat.on(l.Lx.pulse,function(){if(e.needsTransportRestart)return e.needsTransportRestart=!1,void e.relayer.events.emit("relayer_connection_stalled");e.checkQueue()}),this.relayer.on("relayer_message_ack",function(t){e.removeRequestFromQueue(t.id.toString())})}}]),n}(O),Uu=Object.defineProperty,Mu=function(e,t,n){return function(e,t,n){return t in e?Uu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n)},Du=function(){function e(){var t=this;B(this,e),Mu(this,"map",new Map),Mu(this,"set",function(e,n){var r=t.get(e);t.exists(e,n)||t.map.set(e,[].concat(x(r),[n]))}),Mu(this,"get",function(e){return t.map.get(e)||[]}),Mu(this,"exists",function(e,n){return t.get(e).includes(n)}),Mu(this,"delete",function(e,n){if(typeof n>"u")t.map.delete(e);else if(t.map.has(e)){var r=t.get(e);if(t.exists(e,n)){var a=r.filter(function(e){return e!==n});a.length?t.map.set(e,a):t.map.delete(e)}}}),Mu(this,"clear",function(){t.map.clear()})}return F(e,[{key:"topics",get:function(){return Array.from(this.map.keys())}}]),e}(),Lu=Object.defineProperty,Bu=Object.defineProperties,ju=Object.getOwnPropertyDescriptors,Fu=Object.getOwnPropertySymbols,Wu=Object.prototype.hasOwnProperty,qu=Object.prototype.propertyIsEnumerable,Zu=function(e,t,n){return t in e?Lu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Hu=function(e,t){for(var n in t||(t={}))Wu.call(t,n)&&Zu(e,n,t[n]);if(Fu){var r,a=M(Fu(t));try{for(a.s();!(r=a.n()).done;){n=r.value;qu.call(t,n)&&Zu(e,n,t[n])}}catch(i){a.e(i)}finally{a.f()}}return e},Ku=function(e,t){return Bu(e,ju(t))},Vu=function(e,t,n){return Zu(e,"symbol"!=typeof t?t+"":t,n)},zu=function(e){N(n,e);var t=I(n);function n(e,a){var i,o;return B(this,n),i=t.call(this,e,a),o=S(i),i.relayer=e,i.logger=a,Vu(S(i),"subscriptions",new Map),Vu(S(i),"topicMap",new Du),Vu(S(i),"events",new u.EventEmitter),Vu(S(i),"name","subscription"),Vu(S(i),"version","0.3"),Vu(S(i),"pending",new Map),Vu(S(i),"cached",[]),Vu(S(i),"initialized",!1),Vu(S(i),"storagePrefix",xs),Vu(S(i),"subscribeTimeout",(0,W.toMiliseconds)(W.ONE_MINUTE)),Vu(S(i),"initialSubscribeTimeout",(0,W.toMiliseconds)(15*W.ONE_SECOND)),Vu(S(i),"clientId"),Vu(S(i),"batchSubscribeTopicsLimit",500),Vu(S(i),"init",(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=o.initialized,e.t0){e.next=6;break}return o.logger.trace("Initialized"),o.registerEventListeners(),e.next=6,o.restore();case 6:o.initialized=!0;case 7:case"end":return e.stop()}},e)}))),Vu(S(i),"subscribe",function(){var e=(0,r.Z)(A().mark(function e(t,n){var r,a,i,s;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.isInitialized(),o.logger.debug("Subscribing Topic"),o.logger.trace({type:"method",method:"subscribe",params:{topic:t,opts:n}}),e.prev=1,a=bo(n),i={topic:t,relay:a,transportType:null==n?void 0:n.transportType},null!=(r=null==n?void 0:n.internal)&&r.skipSubscribe||o.pending.set(t,i),e.next=6,o.rpcSubscribe(t,a,n);case 6:return s=e.sent,e.abrupt("return",("string"==typeof s&&(o.onSubscribe(s,i),o.logger.debug("Successfully Subscribed Topic"),o.logger.trace({type:"method",method:"subscribe",params:{topic:t,opts:n}})),s));case 10:throw e.prev=10,e.t0=e.catch(1),o.logger.debug("Failed to Subscribe Topic"),o.logger.error(e.t0),e.t0;case 13:case"end":return e.stop()}},e,null,[[1,10]])}));return function(t,n){return e.apply(this,arguments)}}()),Vu(S(i),"unsubscribe",function(){var e=(0,r.Z)(A().mark(function e(t,n){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.isInitialized(),!(typeof(null==n?void 0:n.id)<"u")){e.next=6;break}return e.next=4,o.unsubscribeById(t,n.id,n);case 4:e.next=8;break;case 6:return e.next=8,o.unsubscribeByTopic(t,n);case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),Vu(S(i),"isSubscribed",function(e){return new Promise(function(t){t(i.topicMap.topics.includes(e))})}),Vu(S(i),"isKnownTopic",function(e){return new Promise(function(t){t(i.topicMap.topics.includes(e)||i.pending.has(e)||i.cached.some(function(t){return t.topic===e}))})}),Vu(S(i),"on",function(e,t){i.events.on(e,t)}),Vu(S(i),"once",function(e,t){i.events.once(e,t)}),Vu(S(i),"off",function(e,t){i.events.off(e,t)}),Vu(S(i),"removeListener",function(e,t){i.events.removeListener(e,t)}),Vu(S(i),"start",(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.onConnect();case 2:case"end":return e.stop()}},e)}))),Vu(S(i),"stop",(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.onDisconnect();case 2:case"end":return e.stop()}},e)}))),Vu(S(i),"restart",(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.restore();case 2:return e.next=4,o.onRestart();case 4:case"end":return e.stop()}},e)}))),Vu(S(i),"checkPending",(0,r.Z)(A().mark(function e(){var t;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==o.pending.size||o.initialized&&o.relayer.connected){e.next=2;break}return e.abrupt("return");case 2:return t=[],o.pending.forEach(function(e){t.push(e)}),e.next=6,o.batchSubscribe(t);case 6:case"end":return e.stop()}},e)}))),Vu(S(i),"registerEventListeners",function(){i.relayer.core.heartbeat.on(l.Lx.pulse,(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.checkPending();case 2:case"end":return e.stop()}},e)}))),i.events.on(Us,function(){var e=(0,r.Z)(A().mark(function e(t){var n;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Us,o.logger.info("Emitting ".concat(n)),o.logger.debug({type:"event",event:n,data:t}),e.next=5,o.persist();case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),i.events.on(Ms,function(){var e=(0,r.Z)(A().mark(function e(t){var n;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ms,o.logger.info("Emitting ".concat(n)),o.logger.debug({type:"event",event:n,data:t}),e.next=5,o.persist();case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}),i.relayer=e,i.logger=(0,p.Ep)(a,i.name),i.clientId="",i}return F(n,[{key:"context",get:function(){return(0,p.Fd)(this.logger)}},{key:"storageKey",get:function(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}},{key:"length",get:function(){return this.subscriptions.size}},{key:"ids",get:function(){return Array.from(this.subscriptions.keys())}},{key:"values",get:function(){return Array.from(this.subscriptions.values())}},{key:"topics",get:function(){return this.topicMap.topics}},{key:"hasAnyTopics",get:function(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}},{key:"hasSubscription",value:function(e,t){var n=!1;try{n=this.getSubscription(e).topic===t}catch(r){}return n}},{key:"reset",value:function(){this.cached=[],this.initialized=!0}},{key:"onDisable",value:function(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}},{key:"unsubscribeByTopic",value:function(e,t){var n=this;return(0,r.Z)(A().mark(function a(){var i;return A().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i=n.topicMap.get(e),a.next=3,Promise.all(i.map(function(){var a=(0,r.Z)(A().mark(function r(a){return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.unsubscribeById(e,a,t);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},r)}));return function(e){return a.apply(this,arguments)}}()));case 3:case"end":return a.stop()}},a)}))()}},{key:"unsubscribeById",value:function(e,t,n){var a=this;return(0,r.Z)(A().mark(function r(){var i,o;return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a.logger.debug("Unsubscribing Topic"),a.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}}),r.prev=1,i=bo(n),r.next=5,a.restartToComplete({topic:e,id:t,relay:i});case 5:return r.next=7,a.rpcUnsubscribe(e,t,i);case 7:return o=Xo("USER_DISCONNECTED","".concat(a.name,", ").concat(e)),r.next=10,a.onUnsubscribe(e,t,o);case 10:a.logger.debug("Successfully Unsubscribed Topic"),a.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}}),r.next=17;break;case 14:throw r.prev=14,r.t0=r.catch(1),a.logger.debug("Failed to Unsubscribe Topic"),a.logger.error(r.t0),r.t0;case 17:case"end":return r.stop()}},r,null,[[1,14]])}))()}},{key:"rpcSubscribe",value:function(e,t,n){var a=this;return(0,r.Z)(A().mark(function i(){var o,s,c,u,l,d,p;return A().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,a.getSubscriptionId(e);case 2:if(c=i.sent,null==(o=null==n?void 0:n.internal)||!o.skipSubscribe){i.next=5;break}return i.abrupt("return",c);case 5:if(i.t0=!n||(null==n?void 0:n.transportType)===Rs,!i.t0){i.next=9;break}return i.next=9,a.restartToComplete({topic:e,id:e,relay:t});case 9:if(u={method:wo(t.protocol).subscribe,params:{topic:e}},a.logger.debug("Outgoing Relay Payload"),a.logger.trace({type:"payload",direction:"outgoing",request:u}),l=null==(s=null==n?void 0:n.internal)?void 0:s.throwOnFailedPublish,i.prev=12,(null==n?void 0:n.transportType)!==Os){i.next=15;break}return i.abrupt("return",(setTimeout(function(){(a.relayer.connected||a.relayer.connecting)&&a.relayer.request(u).catch(function(e){return a.logger.warn(e)})},(0,W.toMiliseconds)(W.ONE_SECOND)),c));case 15:return d=new Promise(function(){var t=(0,r.Z)(A().mark(function t(n){var r,i;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=function t(r){r.topic===e&&(a.events.removeListener(Us,t),n(r.id))},a.events.on(Us,r),t.prev=2,t.next=5,Ye(new Promise(function(e,t){a.relayer.request(u).catch(function(e){a.logger.warn(e,null==e?void 0:e.message),t(e)}).then(e)}),a.initialSubscribeTimeout,"Subscribing to ".concat(e," failed, please try again"));case 5:i=t.sent,a.events.removeListener(Us,r),n(i),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(2);case 11:case"end":return t.stop()}},t,null,[[2,9]])}));return function(e){return t.apply(this,arguments)}}()),i.next=18,Ye(d,a.subscribeTimeout,"Subscribing to ".concat(e," failed, please try again"));case 18:if((p=i.sent)||!l){i.next=21;break}throw new Error("Subscribing to ".concat(e," failed, please try again"));case 21:return i.abrupt("return",p?c:null);case 24:if(i.prev=24,i.t1=i.catch(12),a.logger.debug("Outgoing Relay Subscribe Payload stalled"),a.relayer.events.emit("relayer_connection_stalled"),!l){i.next=28;break}throw i.t1;case 28:return i.abrupt("return",null);case 29:case"end":return i.stop()}},i,null,[[12,24]])}))()}},{key:"rpcBatchSubscribe",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.length){n.next=2;break}return n.abrupt("return");case 2:return r={method:wo(e[0].relay.protocol).batchSubscribe,params:{topics:e.map(function(e){return e.topic})}},t.logger.debug("Outgoing Relay Payload"),t.logger.trace({type:"payload",direction:"outgoing",request:r}),n.prev=4,n.next=7,Ye(new Promise(function(e){t.relayer.request(r).catch(function(e){return t.logger.warn(e)}).then(e)}),t.subscribeTimeout,"rpcBatchSubscribe failed, please try again");case 7:return n.next=9,n.sent;case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(4),t.relayer.events.emit("relayer_connection_stalled");case 14:case"end":return n.stop()}},n,null,[[4,11]])}))()}},{key:"rpcBatchFetchMessages",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,a;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.length){n.next=2;break}return n.abrupt("return");case 2:return r={method:wo(e[0].relay.protocol).batchFetchMessages,params:{topics:e.map(function(e){return e.topic})}},t.logger.debug("Outgoing Relay Payload"),t.logger.trace({type:"payload",direction:"outgoing",request:r}),n.prev=4,n.next=7,Ye(new Promise(function(e,n){t.relayer.request(r).catch(function(e){t.logger.warn(e),n(e)}).then(e)}),t.subscribeTimeout,"rpcBatchFetchMessages failed, please try again");case 7:return n.next=9,n.sent;case 9:a=n.sent,n.next=15;break;case 12:n.prev=12,n.t0=n.catch(4),t.relayer.events.emit("relayer_connection_stalled");case 15:return n.abrupt("return",a);case 16:case"end":return n.stop()}},n,null,[[4,12]])}))()}},{key:"rpcUnsubscribe",value:function(e,t,n){var r={method:wo(n.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r}),this.relayer.request(r)}},{key:"onSubscribe",value:function(e,t){this.setSubscription(e,Ku(Hu({},t),{id:e})),this.pending.delete(t.topic)}},{key:"onBatchSubscribe",value:function(e){var t=this;e.length&&e.forEach(function(e){t.setSubscription(e.id,Hu({},e)),t.pending.delete(e.topic)})}},{key:"onUnsubscribe",value:function(e,t,n){var a=this;return(0,r.Z)(A().mark(function r(){return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a.events.removeAllListeners(t),a.hasSubscription(t,e)&&a.deleteSubscription(t,n),r.next=4,a.relayer.messages.del(e);case 4:case"end":return r.stop()}},r)}))()}},{key:"setRelayerSubscriptions",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.relayer.core.storage.setItem(t.storageKey,e);case 2:case"end":return n.stop()}},n)}))()}},{key:"getRelayerSubscriptions",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.relayer.core.storage.getItem(e.storageKey);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}))()}},{key:"setSubscription",value:function(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}},{key:"addSubscription",value:function(e,t){this.subscriptions.set(e,Hu({},t)),this.topicMap.set(t.topic,e),this.events.emit(Us,t)}},{key:"getSubscription",value:function(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});var t=this.subscriptions.get(e);if(!t){var n=Yo("NO_MATCHING_KEY","".concat(this.name,": ").concat(e)).message;throw new Error(n)}return t}},{key:"deleteSubscription",value:function(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});var n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Ms,Ku(Hu({},n),{reason:t}))}},{key:"persist",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setRelayerSubscriptions(e.values);case 2:e.events.emit("subscription_sync");case 3:case"end":return t.stop()}},t)}))()}},{key:"onRestart",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n,r,a,i;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.cached.length){t.next=10;break}n=x(e.cached),r=Math.ceil(e.cached.length/e.batchSubscribeTopicsLimit),a=0;case 3:if(!(a<r)){t.next=10;break}return i=n.splice(0,e.batchSubscribeTopicsLimit),t.next=7,e.batchSubscribe(i);case 7:a++,t.next=3;break;case 10:e.events.emit("subscription_resubscribed");case 11:case"end":return t.stop()}},t)}))()}},{key:"restore",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n,r,a;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getRelayerSubscriptions();case 3:if(!(typeof(n=t.sent)>"u")&&n.length){t.next=6;break}return t.abrupt("return");case 6:if(!e.subscriptions.size||n.every(function(t){var n;return t.topic===(null==(n=e.subscriptions.get(t.id))?void 0:n.topic)})){t.next=9;break}throw r=Yo("RESTORE_WILL_OVERRIDE",e.name),a=r.message,e.logger.error(a),e.logger.error("".concat(e.name,": ").concat(JSON.stringify(e.values))),new Error(a);case 9:e.cached=n,e.logger.debug("Successfully Restored subscriptions for ".concat(e.name)),e.logger.trace({type:"method",method:"restore",subscriptions:e.values}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),e.logger.debug("Failed to Restore subscriptions for ".concat(e.name)),e.logger.error(t.t0);case 15:case"end":return t.stop()}},t,null,[[0,12]])}))()}},{key:"batchSubscribe",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=e.length,!n.t0){n.next=9;break}return n.next=4,t.rpcBatchSubscribe(e);case 4:return n.t1=t,n.next=7,Promise.all(e.map(function(){var e=(0,r.Z)(A().mark(function e(n){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ku,e.t1=Hu({},n),e.next=4,t.getSubscriptionId(n.topic);case 4:return e.t2=e.sent,e.t3={id:e.t2},e.abrupt("return",(0,e.t0)(e.t1,e.t3));case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 7:n.t2=n.sent,n.t1.onBatchSubscribe.call(n.t1,n.t2);case 9:case"end":return n.stop()}},n)}))()}},{key:"batchFetchMessages",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.length){n.next=2;break}return n.abrupt("return");case 2:return t.logger.trace("Fetching batch messages for ".concat(e.length," subscriptions")),n.next=5,t.rpcBatchFetchMessages(e);case 5:if(r=n.sent,n.t0=r&&r.messages,!n.t0){n.next=12;break}return n.next=10,function(e){return new Promise(function(t){return setTimeout(t,e)})}((0,W.toMiliseconds)(W.ONE_SECOND));case 10:return n.next=12,t.relayer.handleBatchMessageEvents(r.messages);case 12:case"end":return n.stop()}},n)}))()}},{key:"onConnect",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.restart();case 2:e.reset();case 3:case"end":return t.stop()}},t)}))()}},{key:"onDisconnect",value:function(){this.onDisable()}},{key:"isInitialized",value:function(){if(!this.initialized){var e=Yo("NOT_INITIALIZED",this.name).message;throw new Error(e)}}},{key:"restartToComplete",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=!t.relayer.connected&&!t.relayer.connecting,!n.t0){n.next=5;break}return t.cached.push(e),n.next=5,t.relayer.transportOpen();case 5:case"end":return n.stop()}},n)}))()}},{key:"getClientId",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.clientId,t.t0){t.next=5;break}return t.next=4,e.relayer.core.crypto.getClientId();case 4:e.clientId=t.sent;case 5:return t.abrupt("return",e.clientId);case 6:case"end":return t.stop()}},t)}))()}},{key:"getSubscriptionId",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=co,n.t1=e,n.next=4,t.getClientId();case 4:return n.t2=n.sent,n.t3=n.t1+n.t2,n.abrupt("return",(0,n.t0)(n.t3));case 7:case"end":return n.stop()}},n)}))()}}]),n}(P),Gu=Object.defineProperty,$u=Object.getOwnPropertySymbols,Ju=Object.prototype.hasOwnProperty,Yu=Object.prototype.propertyIsEnumerable,Xu=function(e,t,n){return t in e?Gu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Qu=function(e,t){for(var n in t||(t={}))Ju.call(t,n)&&Xu(e,n,t[n]);if($u){var r,a=M($u(t));try{for(a.s();!(r=a.n()).done;){n=r.value;Yu.call(t,n)&&Xu(e,n,t[n])}}catch(i){a.e(i)}finally{a.f()}}return e},el=function(e,t,n){return Xu(e,"symbol"!=typeof t?t+"":t,n)},tl=function(e){N(n,e);var t=I(n);function n(e){var a,i,o;return B(this,n),a=t.call(this,e),i=S(a),el(S(a),"protocol","wc"),el(S(a),"version",2),el(S(a),"core"),el(S(a),"logger"),el(S(a),"events",new u.EventEmitter),el(S(a),"provider"),el(S(a),"messages"),el(S(a),"subscriber"),el(S(a),"publisher"),el(S(a),"name","relayer"),el(S(a),"transportExplicitlyClosed",!1),el(S(a),"initialized",!1),el(S(a),"connectionAttemptInProgress",!1),el(S(a),"relayUrl"),el(S(a),"projectId"),el(S(a),"packageName"),el(S(a),"bundleId"),el(S(a),"hasExperiencedNetworkDisruption",!1),el(S(a),"pingTimeout"),el(S(a),"heartBeatTimeout",(0,W.toMiliseconds)(W.THIRTY_SECONDS+W.FIVE_SECONDS)),el(S(a),"reconnectTimeout"),el(S(a),"connectPromise"),el(S(a),"reconnectInProgress",!1),el(S(a),"requestsInFlight",[]),el(S(a),"connectTimeout",(0,W.toMiliseconds)(15*W.ONE_SECOND)),el(S(a),"request",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.logger.debug("Publishing Request Payload"),a=t.id||(0,Es.getBigIntRpcId)().toString(),e.next=4,i.toEstablishConnection();case 4:return e.prev=4,i.logger.trace({id:a,method:t.method,topic:null==(n=t.params)?void 0:n.topic},"relayer.request - publishing..."),o="".concat(a,":").concat((null==(r=t.params)?void 0:r.tag)||""),i.requestsInFlight.push(o),e.next=10,i.provider.request(t);case 10:return s=e.sent,e.abrupt("return",(i.requestsInFlight=i.requestsInFlight.filter(function(e){return e!==o}),s));case 14:throw e.prev=14,e.t0=e.catch(4),i.logger.debug("Failed to Publish Request: ".concat(a)),e.t0;case 17:case"end":return e.stop()}},e,null,[[4,14]])}));return function(t){return e.apply(this,arguments)}}()),el(S(a),"resetPingTimeout",function(){Fe()&&(clearTimeout(a.pingTimeout),a.pingTimeout=setTimeout(function(){var e,t,n,r;try{a.logger.debug({},"pingTimeout: Connection stalled, terminating..."),null==(r=null==(n=null==(t=null==(e=a.provider)?void 0:e.connection)?void 0:t.socket)?void 0:n.terminate)||r.call(n)}catch(i){a.logger.warn(i,null==i?void 0:i.message)}},a.heartBeatTimeout))}),el(S(a),"onPayloadHandler",function(e){a.onProviderPayload(e),a.resetPingTimeout()}),el(S(a),"onConnectHandler",function(){a.logger.warn({},"Relayer connected \ud83d\udedc"),a.startPingTimeout(),a.events.emit("relayer_connect")}),el(S(a),"onDisconnectHandler",function(){a.logger.warn({},"Relayer disconnected \ud83d\uded1"),a.requestsInFlight=[],a.onProviderDisconnect()}),el(S(a),"onProviderErrorHandler",function(e){a.logger.fatal("Fatal socket error: ".concat(e.message)),a.events.emit("relayer_error",e),a.logger.fatal("Fatal socket error received, closing transport"),a.transportClose()}),el(S(a),"registerProviderListeners",function(){a.provider.on("payload",a.onPayloadHandler),a.provider.on("connect",a.onConnectHandler),a.provider.on("disconnect",a.onDisconnectHandler),a.provider.on("error",a.onProviderErrorHandler)}),a.core=e.core,a.logger=bs({logger:null!=(o=e.logger)?o:"error",name:a.name}),a.messages=new ku(a.logger,e.core),a.subscriber=new zu(S(a),a.logger),a.publisher=new Pu(S(a),a.logger),a.projectId=null==e?void 0:e.projectId,a.relayUrl=(null==e?void 0:e.relayUrl)||_s,We()&&typeof global<"u"&&typeof(null==global?void 0:global.Platform)<"u"&&"android"===(null==global?void 0:global.Platform.OS)?a.packageName=He():We()&&typeof global<"u"&&typeof(null==global?void 0:global.Platform)<"u"&&"ios"===(null==global?void 0:global.Platform.OS)&&(a.bundleId=He()),a.provider={},a}return F(n,[{key:"init",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.logger.trace("Initialized"),e.registerEventListeners(),t.next=4,Promise.all([e.messages.init(),e.subscriber.init()]);case 4:e.initialized=!0,e.transportOpen().catch(function(t){return e.logger.warn(t,null==t?void 0:t.message)});case 6:case"end":return t.stop()}},t)}))()}},{key:"context",get:function(){return(0,p.Fd)(this.logger)}},{key:"connected",get:function(){var e,t,n;return 1===(null==(n=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:n.readyState)||!1}},{key:"connecting",get:function(){var e,t,n;return 0===(null==(n=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:n.readyState)||void 0!==this.connectPromise||!1}},{key:"publish",value:function(e,t,n){var a=this;return(0,r.Z)(A().mark(function r(){return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a.isInitialized(),r.next=3,a.publisher.publish(e,t,n);case 3:return r.next=5,a.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:Rs},"outbound");case 5:case"end":return r.stop()}},r)}))()}},{key:"publishCustom",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.isInitialized(),n.next=3,t.publisher.publishCustom(e);case 3:case"end":return n.stop()}},n)}))()}},{key:"subscribe",value:function(e,t){var n=this;return(0,r.Z)(A().mark(function a(){var i,o,s,c,u,l,d;return A().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n.isInitialized(),a.t0=null==t||!t.transportType||"relay"===(null==t?void 0:t.transportType),!a.t0){a.next=5;break}return a.next=5,n.toEstablishConnection();case 5:return c=typeof(null==(i=null==t?void 0:t.internal)?void 0:i.throwOnFailedPublish)>"u"||(null==(o=null==t?void 0:t.internal)?void 0:o.throwOnFailedPublish),l=(null==(s=n.subscriber.topicMap.get(e))?void 0:s[0])||"",d=function t(r){r.topic===e&&(n.subscriber.off(Us,t),u())},a.next=10,Promise.all([new Promise(function(e){u=e,n.subscriber.on(Us,d)}),new Promise(function(){var a=(0,r.Z)(A().mark(function r(a,i){return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.subscriber.subscribe(e,Qu({internal:{throwOnFailedPublish:c}},t)).catch(function(e){c&&i(e)});case 2:if(r.t0=r.sent,r.t0){r.next=5;break}r.t0=l;case 5:l=r.t0,a();case 7:case"end":return r.stop()}},r)}));return function(e,t){return a.apply(this,arguments)}}())]);case 10:return a.abrupt("return",l);case 11:case"end":return a.stop()}},a)}))()}},{key:"unsubscribe",value:function(e,t){var n=this;return(0,r.Z)(A().mark(function r(){return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n.isInitialized(),r.next=3,n.subscriber.unsubscribe(e,t);case 3:case"end":return r.stop()}},r)}))()}},{key:"on",value:function(e,t){this.events.on(e,t)}},{key:"once",value:function(e,t){this.events.once(e,t)}},{key:"off",value:function(e,t){this.events.off(e,t)}},{key:"removeListener",value:function(e,t){this.events.removeListener(e,t)}},{key:"transportDisconnect",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.provider.disconnect||!e.hasExperiencedNetworkDisruption&&!e.connected){t.next=5;break}return t.next=3,Ye(e.provider.disconnect(),2e3,"provider.disconnect()").catch(function(){return e.onProviderDisconnect()});case 3:t.next=6;break;case 5:e.onProviderDisconnect();case 6:case"end":return t.stop()}},t)}))()}},{key:"transportClose",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.transportExplicitlyClosed=!0,t.next=3,e.transportDisconnect();case 3:case"end":return t.stop()}},t)}))()}},{key:"transportOpen",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.subscriber.hasAnyTopics){n.next=15;break}if(!t.connectPromise){n.next=8;break}return t.logger.debug({},"Waiting for existing connection attempt to resolve..."),n.next=5,t.connectPromise;case 5:t.logger.debug({},"Existing connection attempt resolved"),n.next=11;break;case 8:return t.connectPromise=new Promise(function(){var n=(0,r.Z)(A().mark(function n(r,a){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.connect(e).then(r).catch(a).finally(function(){t.connectPromise=void 0});case 2:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()),n.next=11,t.connectPromise;case 11:if(t.connected){n.next=13;break}throw new Error("Couldn't establish socket connection to the relay server: ".concat(t.relayUrl));case 13:n.next=16;break;case 15:t.logger.info("Starting WS connection skipped because the client has no topics to work with.");case 16:case"end":return n.stop()}},n)}))()}},{key:"restartTransport",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.logger.debug({},"Restarting transport..."),n.t0=!t.connectionAttemptInProgress,!n.t0){n.next=10;break}return t.relayUrl=e||t.relayUrl,n.next=6,t.confirmOnlineStateOrThrow();case 6:return n.next=8,t.transportClose();case 8:return n.next=10,t.transportOpen();case 10:case"end":return n.stop()}},n)}))()}},{key:"confirmOnlineStateOrThrow",value:function(){return(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fs();case 2:if(e.sent){e.next=4;break}throw new Error("No internet connection detected. Please restart your network and try again.");case 4:case"end":return e.stop()}},e)}))()}},{key:"handleBatchMessageEvents",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,a,i,o;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==(null==e?void 0:e.length)){n.next=2;break}return n.abrupt("return",void t.logger.trace("Batch message events is empty. Ignoring..."));case 2:r=e.sort(function(e,t){return e.publishedAt-t.publishedAt}),t.logger.debug("Batch of ".concat(r.length," message events sorted")),a=M(r),n.prev=5,a.s();case 7:if((i=a.n()).done){n.next=19;break}return o=i.value,n.prev=9,n.next=12,t.onMessageEvent(o);case 12:n.next=17;break;case 14:n.prev=14,n.t0=n.catch(9),t.logger.warn(n.t0,"Error while processing batch message event: "+(null===n.t0||void 0===n.t0?void 0:n.t0.message));case 17:n.next=7;break;case 19:n.next=24;break;case 21:n.prev=21,n.t1=n.catch(5),a.e(n.t1);case 24:return n.prev=24,a.f(),n.finish(24);case 27:t.logger.trace("Batch of ".concat(r.length," message events processed"));case 28:case"end":return n.stop()}},n,null,[[5,21,24,27],[9,14]])}))()}},{key:"onLinkMessageEvent",value:function(e,t){var n=this;return(0,r.Z)(A().mark(function r(){var a,i;return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a=e.topic,t.sessionExists){r.next=5;break}return i={topic:a,expiry:et(W.FIVE_MINUTES),relay:{protocol:"irn"},active:!1},r.next=5,n.core.pairing.pairings.set(a,i);case 5:return n.events.emit("relayer_message",e),r.next=8,n.recordMessageEvent(e,"inbound");case 8:case"end":return r.stop()}},r)}))()}},{key:"connect",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var a;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.confirmOnlineStateOrThrow();case 2:if(n.t0=e&&e!==t.relayUrl,!n.t0){n.next=7;break}return t.relayUrl=e,n.next=7,t.transportDisconnect();case 7:t.connectionAttemptInProgress=!0,t.transportExplicitlyClosed=!1,a=1;case 10:if(!(a<6)){n.next=38;break}if(n.prev=11,!t.transportExplicitlyClosed){n.next=14;break}return n.abrupt("break",38);case 14:return t.logger.debug({},"Connecting to ".concat(t.relayUrl,", attempt: ").concat(a,"...")),n.next=17,t.createProvider();case 17:return n.next=19,new Promise(function(){var e=(0,r.Z)(A().mark(function e(n,a){var i;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){a(new Error("Connection interrupted while trying to connect"))},t.provider.once("disconnect",i),e.next=4,Ye(new Promise(function(e,n){t.provider.connect().then(e).catch(n)}),t.connectTimeout,"Socket stalled when trying to connect to ".concat(t.relayUrl)).catch(function(e){a(e)}).finally(function(){t.provider.off("disconnect",i),clearTimeout(t.reconnectTimeout)});case 4:return e.next=6,new Promise(function(){var e=(0,r.Z)(A().mark(function e(n,r){var i;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){a(new Error("Connection interrupted while trying to subscribe"))},t.provider.once("disconnect",i),e.next=4,t.subscriber.start().then(n).catch(r).finally(function(){t.provider.off("disconnect",i)});case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 6:t.hasExperiencedNetworkDisruption=!1,n();case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 19:n.next=27;break;case 21:return n.prev=21,n.t1=n.catch(11),n.next=25,t.subscriber.stop();case 25:t.logger.warn({},n.t1.message),t.hasExperiencedNetworkDisruption=!0;case 27:return n.prev=27,t.connectionAttemptInProgress=!1,n.finish(27);case 30:if(!t.connected){n.next=33;break}return t.logger.debug({},"Connected to ".concat(t.relayUrl," successfully on attempt: ").concat(a)),n.abrupt("break",38);case 33:return n.next=35,new Promise(function(e){return setTimeout(e,(0,W.toMiliseconds)(1*a))});case 35:a++;case 36:n.next=10;break;case 38:case"end":return n.stop()}},n,null,[[11,21,27,30]])}))()}},{key:"startPingTimeout",value:function(){var e,t,n,r,a,i=this;if(Fe())try{null!=(t=null==(e=this.provider)?void 0:e.connection)&&t.socket&&(null==(a=null==(r=null==(n=this.provider)?void 0:n.connection)?void 0:r.socket)||a.on("ping",function(){i.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,null==o?void 0:o.message)}}},{key:"createProvider",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.provider.connection&&e.unregisterProviderListeners(),t.next=3,e.core.crypto.signJWT(e.relayUrl);case 3:n=t.sent,e.provider=new ws.r(new ks.Z(function(e){var t=e.protocol,n=e.version,r=e.sdkVersion,a=e.auth,i=e.projectId,o=e.useOnCloseEvent,s=e.bundleId,c=e.packageName,u=e.relayUrl.split("?"),l=Ve(t,n,r),d=function(e,t){var n=new URLSearchParams(e);return Object.entries(t).sort(function(e,t){var n=C(e,1)[0],r=C(t,1)[0];return n.localeCompare(r)}).forEach(function(e){var t=C(e,2),r=t[0],a=t[1];null!=a&&n.set(r,String(a))}),n.toString()}(u[1]||"",{auth:a,ua:l,projectId:i,useOnCloseEvent:o||void 0,packageName:c||void 0,bundleId:s||void 0});return u[0]+"?"+d}({sdkVersion:Ts,protocol:e.protocol,version:e.version,relayUrl:e.relayUrl,projectId:e.projectId,auth:n,useOnCloseEvent:!0,bundleId:e.bundleId,packageName:e.packageName}))),e.registerProviderListeners();case 5:case"end":return t.stop()}},t)}))()}},{key:"recordMessageEvent",value:function(e,t){var n=this;return(0,r.Z)(A().mark(function r(){var a,i;return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=e.topic,i=e.message,r.next=3,n.messages.set(a,i,t);case 3:case"end":return r.stop()}},r)}))()}},{key:"shouldIgnoreMessageEvent",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,a,i;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.topic,(a=e.message)&&0!==a.length){n.next=3;break}return n.abrupt("return",(t.logger.warn("Ignoring invalid/empty message: ".concat(a)),!0));case 3:return n.next=5,t.subscriber.isKnownTopic(r);case 5:if(n.sent){n.next=7;break}return n.abrupt("return",(t.logger.warn("Ignoring message for unknown topic ".concat(r)),!0));case 7:return i=t.messages.has(r,a),n.abrupt("return",(i&&t.logger.warn("Ignoring duplicate message: ".concat(a)),i));case 9:case"end":return n.stop()}},n)}))()}},{key:"onProviderPayload",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,a,i,o,s,c,u;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.logger.debug("Incoming Relay Payload"),t.logger.trace({type:"payload",direction:"incoming",payload:e}),!(0,Es.isJsonRpcRequest)(e)){n.next=13;break}if(e.method.endsWith("_subscription")){n.next=3;break}return n.abrupt("return");case 3:return r=e.params,a=r.data,i=a.topic,o=a.message,s=a.publishedAt,c=a.attestation,u={topic:i,message:o,publishedAt:s,transportType:Rs,attestation:c},t.logger.debug("Emitting Relayer Payload"),t.logger.trace(Qu({type:"event",event:r.id},u)),t.events.emit(r.id,u),n.next=9,t.acknowledgePayload(e);case 9:return n.next=11,t.onMessageEvent(u);case 11:n.next=14;break;case 13:(0,Es.isJsonRpcResponse)(e)&&t.events.emit("relayer_message_ack",e);case 14:case"end":return n.stop()}},n)}))()}},{key:"onMessageEvent",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.shouldIgnoreMessageEvent(e);case 2:if(n.t0=n.sent,n.t0){n.next=7;break}return n.next=6,t.recordMessageEvent(e,"inbound");case 6:t.events.emit("relayer_message",e);case 7:case"end":return n.stop()}},n)}))()}},{key:"acknowledgePayload",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=(0,Es.formatJsonRpcResult)(e.id,!0),n.next=3,t.provider.connection.send(r);case 3:case"end":return n.stop()}},n)}))()}},{key:"unregisterProviderListeners",value:function(){this.provider.off("payload",this.onPayloadHandler),this.provider.off("connect",this.onConnectHandler),this.provider.off("disconnect",this.onDisconnectHandler),this.provider.off("error",this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}},{key:"registerEventListeners",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fs();case 2:n=t.sent,function(e){switch(Ze()){case"browser":!function(e){!We()&&qe()&&(window.addEventListener("online",function(){return e(!0)}),window.addEventListener("offline",function(){return e(!1)}))}(e);break;case"react-native":!function(e){var t;We()&&typeof global<"u"&&null!=global&&global.NetInfo&&(null===(t=global)||void 0===t||t.NetInfo.addEventListener(function(t){return e(null==t?void 0:t.isConnected)}))}(e)}}(function(){var t=(0,r.Z)(A().mark(function t(r){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n!==r,!t.t0){t.next=12;break}if(n=r,!r){t.next=8;break}return t.next=6,e.transportOpen().catch(function(t){return e.logger.error(t,null==t?void 0:t.message)});case 6:t.next=12;break;case 8:return e.hasExperiencedNetworkDisruption=!0,t.next=11,e.transportDisconnect();case 11:e.transportExplicitlyClosed=!1;case 12:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),e.core.heartbeat.on(l.Lx.pulse,(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.transportExplicitlyClosed||e.connected||!function(){var e;return!qe()||!(0,K.getDocument)()||"visible"===(null==(e=(0,K.getDocument)())?void 0:e.visibilityState)}()){t.next=11;break}return t.prev=1,t.next=4,e.confirmOnlineStateOrThrow();case 4:return t.next=6,e.transportOpen();case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.logger.warn(t.t0,null===t.t0||void 0===t.t0?void 0:t.t0.message);case 11:case"end":return t.stop()}},t,null,[[1,8]])})));case 4:case"end":return t.stop()}},t)}))()}},{key:"onProviderDisconnect",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(clearTimeout(e.pingTimeout),e.events.emit("relayer_disconnect"),e.connectionAttemptInProgress=!1,t.t0=!e.reconnectInProgress,!t.t0){t.next=9;break}return e.reconnectInProgress=!0,t.next=8,e.subscriber.stop();case 8:e.subscriber.hasAnyTopics&&(e.transportExplicitlyClosed||(e.reconnectTimeout=setTimeout((0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.transportOpen().catch(function(t){return e.logger.error(t,null==t?void 0:t.message)});case 2:e.reconnectTimeout=void 0,e.reconnectInProgress=!1;case 4:case"end":return t.stop()}},t)})),(0,W.toMiliseconds)(.1))));case 9:case"end":return t.stop()}},t)}))()}},{key:"isInitialized",value:function(){if(!this.initialized){var e=Yo("NOT_INITIALIZED",this.name).message;throw new Error(e)}}},{key:"toEstablishConnection",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.confirmOnlineStateOrThrow();case 2:if(e.connected){t.next=9;break}if(!e.connectPromise){t.next=7;break}return t.next=6,e.connectPromise;case 6:return t.abrupt("return",void t.sent);case 7:return t.next=9,e.connect();case 9:case"end":return t.stop()}},t)}))()}}]),n}(R);function nl(e){return Object.getOwnPropertySymbols(e).filter(function(t){return Object.prototype.propertyIsEnumerable.call(e,t)})}function rl(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}var al="[object Arguments]",il="[object Object]";function ol(){}function sl(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&"[object Object]"===Object.prototype.toString.call(e)}function cl(e,t,n,r,a,i,o){var s=o(e,t,n,r,a,i);if(void 0!==s)return s;if(typeof e==typeof t)switch(typeof e){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return e===t;case"number":return e===t||Object.is(e,t);case"object":return ul(e,t,i,o)}return ul(e,t,i,o)}function ul(e,t,n,r){var a;if(Object.is(e,t))return!0;var i=rl(e),o=rl(t);if(i===al&&(i=il),o===al&&(o=il),i!==o)return!1;switch(i){case"[object String]":return e.toString()===t.toString();case"[object Number]":return function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}(e.valueOf(),t.valueOf());case"[object Boolean]":case"[object Date]":case"[object Symbol]":return Object.is(e.valueOf(),t.valueOf());case"[object RegExp]":return e.source===t.source&&e.flags===t.flags;case"[object Function]":return e===t}var s=(n=null!==(a=n)&&void 0!==a?a:new Map).get(e),c=n.get(t);if(null!=s&&null!=c)return s===t;n.set(e,t),n.set(t,e);try{switch(i){case"[object Map]":if(e.size!==t.size)return!1;var u,l=M(e.entries());try{for(l.s();!(u=l.n()).done;){var d=C(u.value,2),p=d[0],f=d[1];if(!t.has(p)||!cl(f,t.get(p),p,e,t,n,r))return!1}}catch(I){l.e(I)}finally{l.f()}return!0;case"[object Set]":if(e.size!==t.size)return!1;for(var h=Array.from(e.values()),v=Array.from(t.values()),g=function(a){var i=h[a],o=v.findIndex(function(a){return cl(i,a,void 0,e,t,n,r)});if(-1===o)return{v:!1};v.splice(o,1)},m=0;m<h.length;m++){var y=g(m);if("object"==typeof y)return y.v}return!0;case"[object Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":case"[object BigUint64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object BigInt64Array]":case"[object Float32Array]":case"[object Float64Array]":if(typeof Buffer<"u"&&Buffer.isBuffer(e)!==Buffer.isBuffer(t)||e.length!==t.length)return!1;for(var b=0;b<e.length;b++)if(!cl(e[b],t[b],b,e,t,n,r))return!1;return!0;case"[object ArrayBuffer]":return e.byteLength===t.byteLength&&ul(new Uint8Array(e),new Uint8Array(t),n,r);case"[object DataView]":return e.byteLength===t.byteLength&&e.byteOffset===t.byteOffset&&ul(new Uint8Array(e),new Uint8Array(t),n,r);case"[object Error]":return e.name===t.name&&e.message===t.message;case il:if(!(ul(e.constructor,t.constructor,n,r)||sl(e)&&sl(t)))return!1;var w=[].concat(x(Object.keys(e)),x(nl(e))),E=[].concat(x(Object.keys(t)),x(nl(t)));if(w.length!==E.length)return!1;for(var k=0;k<w.length;k++){var A=w[k],N=e[A];if(!Object.hasOwn(t,A))return!1;if(!cl(N,t[A],A,e,t,n,r))return!1}return!0;default:return!1}}finally{n.delete(e),n.delete(t)}}var ll=Object.defineProperty,dl=Object.getOwnPropertySymbols,pl=Object.prototype.hasOwnProperty,fl=Object.prototype.propertyIsEnumerable,hl=function(e,t,n){return t in e?ll(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},vl=function(e,t){for(var n in t||(t={}))pl.call(t,n)&&hl(e,n,t[n]);if(dl){var r,a=M(dl(t));try{for(a.s();!(r=a.n()).done;){n=r.value;fl.call(t,n)&&hl(e,n,t[n])}}catch(i){a.e(i)}finally{a.f()}}return e},gl=function(e,t,n){return hl(e,"symbol"!=typeof t?t+"":t,n)},ml=function(e){N(n,e);var t=I(n);function n(e,a,i){var o,s,c,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xs,l=arguments.length>4?arguments[4]:void 0;return B(this,n),o=t.call(this,e,a,i,u),s=S(o),o.core=e,o.logger=a,o.name=i,gl(S(o),"map",new Map),gl(S(o),"version","0.3"),gl(S(o),"cached",[]),gl(S(o),"initialized",!1),gl(S(o),"getKey"),gl(S(o),"storagePrefix",xs),gl(S(o),"recentlyDeleted",[]),gl(S(o),"recentlyDeletedLimit",200),gl(S(o),"init",(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=s.initialized,e.t0){e.next=8;break}return s.logger.trace("Initialized"),e.next=5,s.restore();case 5:s.cached.forEach(function(e){s.getKey&&null!==e&&!ts(e)?s.map.set(s.getKey(e),e):function(e){var t;return null==(t=null==e?void 0:e.proposer)?void 0:t.publicKey}(e)?s.map.set(e.id,e):function(e){return null==e?void 0:e.topic}(e)&&s.map.set(e.topic,e)}),s.cached=[],s.initialized=!0;case 8:case"end":return e.stop()}},e)}))),gl(S(o),"set",(c=(0,r.Z)(A().mark(function e(t,n){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s.isInitialized(),!s.map.has(t)){e.next=6;break}return e.next=4,s.update(t,n);case 4:e.next=11;break;case 6:return s.logger.debug("Setting value"),s.logger.trace({type:"method",method:"set",key:t,value:n}),s.map.set(t,n),e.next=11,s.persist();case 11:case"end":return e.stop()}},e)})),function(e,t){return c.apply(this,arguments)})),gl(S(o),"get",function(e){return o.isInitialized(),o.logger.debug("Getting value"),o.logger.trace({type:"method",method:"get",key:e}),o.getData(e)}),gl(S(o),"getAll",function(e){return o.isInitialized(),e?o.values.filter(function(t){return Object.keys(e).every(function(n){return function(e,t){return function(e,t,n){return cl(e,t,void 0,void 0,void 0,void 0,n)}(e,t,ol)}(t[n],e[n])})}):o.values}),gl(S(o),"update",function(){var e=(0,r.Z)(A().mark(function e(t,n){var r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.isInitialized(),s.logger.debug("Updating value"),s.logger.trace({type:"method",method:"update",key:t,update:n}),r=vl(vl({},s.getData(t)),n),s.map.set(t,r),e.next=5,s.persist();case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),gl(S(o),"delete",function(){var e=(0,r.Z)(A().mark(function e(t,n){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s.isInitialized(),e.t0=s.map.has(t),!e.t0){e.next=9;break}return s.logger.debug("Deleting value"),s.logger.trace({type:"method",method:"delete",key:t,reason:n}),s.map.delete(t),s.addToRecentlyDeleted(t),e.next=9,s.persist();case 9:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),o.logger=(0,p.Ep)(a,o.name),o.storagePrefix=u,o.getKey=l,o}return F(n,[{key:"context",get:function(){return(0,p.Fd)(this.logger)}},{key:"storageKey",get:function(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}},{key:"length",get:function(){return this.map.size}},{key:"keys",get:function(){return Array.from(this.map.keys())}},{key:"values",get:function(){return Array.from(this.map.values())}},{key:"addToRecentlyDeleted",value:function(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}},{key:"setDataStore",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.core.storage.setItem(t.storageKey,e);case 2:case"end":return n.stop()}},n)}))()}},{key:"getDataStore",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.core.storage.getItem(e.storageKey);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}))()}},{key:"getData",value:function(e){var t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){var n=Yo("MISSING_OR_INVALID","Record was recently deleted - ".concat(this.name,": ").concat(e)).message;throw this.logger.error(n),new Error(n)}var r=Yo("NO_MATCHING_KEY","".concat(this.name,": ").concat(e)).message;throw this.logger.error(r),new Error(r)}return t}},{key:"persist",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setDataStore(e.values);case 2:case"end":return t.stop()}},t)}))()}},{key:"restore",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n,r,a;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getDataStore();case 3:if(!(typeof(n=t.sent)>"u")&&n.length){t.next=6;break}return t.abrupt("return");case 6:if(!e.map.size){t.next=9;break}throw r=Yo("RESTORE_WILL_OVERRIDE",e.name),a=r.message,e.logger.error(a),new Error(a);case 9:e.cached=n,e.logger.debug("Successfully Restored value for ".concat(e.name)),e.logger.trace({type:"method",method:"restore",value:e.values}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),e.logger.debug("Failed to Restore value for ".concat(e.name)),e.logger.error(t.t0);case 15:case"end":return t.stop()}},t,null,[[0,12]])}))()}},{key:"isInitialized",value:function(){if(!this.initialized){var e=Yo("NOT_INITIALIZED",this.name).message;throw new Error(e)}}}]),n}(function(){return F(function e(t,n,r,a){B(this,e),this.core=t,this.logger=n,this.name=r})}()),yl=Object.defineProperty,bl=function(e,t,n){return function(e,t,n){return t in e?yl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n)},wl=function(){function e(t,n){var a=this;B(this,e);var i=this;this.core=t,this.logger=n,bl(this,"name","pairing"),bl(this,"version","0.3"),bl(this,"events",new u),bl(this,"pairings"),bl(this,"initialized",!1),bl(this,"storagePrefix",xs),bl(this,"ignoredPayloadTypes",[1]),bl(this,"registeredMethods",[]),bl(this,"init",(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.initialized,e.t0){e.next=10;break}return e.next=4,i.pairings.init();case 4:return e.next=6,i.cleanup();case 6:i.registerRelayerEvents(),i.registerExpirerEvents(),i.initialized=!0,i.logger.trace("Initialized");case 10:case"end":return e.stop()}},e)}))),bl(this,"register",function(e){var t=e.methods;a.isInitialized(),a.registeredMethods=x(new Set([].concat(x(a.registeredMethods),x(t))))}),bl(this,"create",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.isInitialized(),n=oo(),e.next=4,i.core.crypto.setSymKey(n);case 4:return r=e.sent,a=et(W.FIVE_MINUTES),s={topic:r,expiry:a,relay:o={protocol:"irn"},active:!1,methods:null==t?void 0:t.methods},c=Ro({protocol:i.core.protocol,version:i.core.version,topic:r,symKey:n,relay:o,expiryTimestamp:a,methods:null==t?void 0:t.methods}),i.events.emit("pairing_create",s),i.core.expirer.set(r,a),e.next=13,i.pairings.set(r,s);case 13:return e.next=15,i.core.relayer.subscribe(r,{transportType:null==t?void 0:t.transportType,internal:null==t?void 0:t.internal});case 15:return e.abrupt("return",{topic:r,uri:c});case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),bl(this,"pair",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c,u,l,d,p;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.isInitialized(),n=i.core.eventClient.createEvent({properties:{topic:null==t?void 0:t.uri,trace:["pairing_started"]}}),i.isValidPair(t,n),r=To(t.uri),a=r.topic,o=r.symKey,s=r.relay,c=r.expiryTimestamp,u=r.methods,n.props.properties.topic=a,n.addTrace("pairing_uri_validation_success"),n.addTrace("pairing_uri_not_expired"),!i.pairings.keys.includes(a)){e.next=8;break}if(l=i.pairings.get(a),n.addTrace("existing_pairing"),!l.active){e.next=7;break}throw n.setError("active_pairing_already_exists"),new Error("Pairing already exists: ".concat(a,". Please try again with a new connection URI."));case 7:n.addTrace("pairing_not_expired");case 8:return d=c||et(W.FIVE_MINUTES),p={topic:a,relay:s,expiry:d,active:!1,methods:u},i.core.expirer.set(a,d),e.next=12,i.pairings.set(a,p);case 12:if(n.addTrace("store_new_pairing"),e.t0=t.activatePairing,!e.t0){e.next=17;break}return e.next=17,i.activate({topic:a});case 17:if(i.events.emit("pairing_create",p),n.addTrace("emit_inactive_pairing"),e.t1=i.core.crypto.keychain.has(a),e.t1){e.next=23;break}return e.next=23,i.core.crypto.setSymKey(o,a);case 23:return n.addTrace("subscribing_pairing_topic"),e.prev=24,e.next=27,i.core.relayer.confirmOnlineStateOrThrow();case 27:e.next=32;break;case 29:e.prev=29,e.t2=e.catch(24),n.setError("no_internet_connection");case 32:return e.prev=32,e.next=35,i.core.relayer.subscribe(a,{relay:s});case 35:e.next=40;break;case 37:throw e.prev=37,e.t3=e.catch(32),n.setError("subscribe_pairing_topic_failure"),e.t3;case 40:return e.abrupt("return",(n.addTrace("subscribe_pairing_topic_success"),p));case 41:case"end":return e.stop()}},e,null,[[24,29],[32,37]])}));return function(t){return e.apply(this,arguments)}}()),bl(this,"activate",function(){var e=(0,r.Z)(function(e){var t=e.topic;return A().mark(function e(){var n;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.isInitialized(),n=et(W.FIVE_MINUTES),i.core.expirer.set(t,n),e.next=5,i.pairings.update(t,{active:!0,expiry:n});case 5:case"end":return e.stop()}},e)})()});return function(t){return e.apply(this,arguments)}}()),bl(this,"ping",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.isInitialized(),e.next=3,i.isValidPing(t);case 3:if(i.logger.warn("ping() is deprecated and will be removed in the next major release."),n=t.topic,!i.pairings.keys.includes(n)){e.next=16;break}return e.next=8,i.sendRequest(n,"wc_pairingPing",{});case 8:return r=e.sent,a=Je(),o=a.done,s=a.resolve,c=a.reject,i.events.once(nt("pairing_ping",r),function(e){var t=e.error;t?c(t):s()}),e.next=16,o();case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),bl(this,"updateExpiry",function(){var e=(0,r.Z)(function(e){var t=e.topic,n=e.expiry;return A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.isInitialized(),e.next=3,i.pairings.update(t,{expiry:n});case 3:case"end":return e.stop()}},e)})()});return function(t){return e.apply(this,arguments)}}()),bl(this,"updateMetadata",function(){var e=(0,r.Z)(function(e){var t=e.topic,n=e.metadata;return A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.isInitialized(),e.next=3,i.pairings.update(t,{peerMetadata:n});case 3:case"end":return e.stop()}},e)})()});return function(t){return e.apply(this,arguments)}}()),bl(this,"getPairings",function(){return a.isInitialized(),a.pairings.values}),bl(this,"disconnect",function(){var e=(0,r.Z)(A().mark(function e(t){var n;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.isInitialized(),e.next=3,i.isValidDisconnect(t);case 3:if(n=t.topic,e.t0=i.pairings.keys.includes(n),!e.t0){e.next=10;break}return e.next=8,i.sendRequest(n,"wc_pairingDelete",Xo("USER_DISCONNECTED"));case 8:return e.next=10,i.deletePairing(n);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),bl(this,"formatUriFromPairing",function(e){a.isInitialized();var t=e.topic,n=e.relay,r=e.expiry,i=e.methods,o=a.core.crypto.keychain.get(t);return Ro({protocol:a.core.protocol,version:a.core.version,topic:t,symKey:o,relay:n,expiryTimestamp:r,methods:i})}),bl(this,"sendRequest",function(){var e=(0,r.Z)(A().mark(function e(t,n,r){var a,o,s;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,Es.formatJsonRpcRequest)(n,r),e.next=3,i.core.crypto.encode(t,a);case 3:return o=e.sent,s=Ds[n].req,e.abrupt("return",(i.core.history.set(t,a),i.core.relayer.publish(t,o,s),a.id));case 6:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()),bl(this,"sendResult",function(){var e=(0,r.Z)(A().mark(function e(t,n,r){var a,o,s,c;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,Es.formatJsonRpcResult)(t,r),e.next=3,i.core.crypto.encode(n,a);case 3:return o=e.sent,e.next=6,i.core.history.get(n,t);case 6:return s=e.sent.request.method,c=Ds[s].res,e.next=10,i.core.relayer.publish(n,o,c);case 10:return e.next=12,i.core.history.resolve(a);case 12:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()),bl(this,"sendError",function(){var e=(0,r.Z)(A().mark(function e(t,n,r){var a,o,s,c;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,Es.formatJsonRpcError)(t,r),e.next=3,i.core.crypto.encode(n,a);case 3:return o=e.sent,e.next=6,i.core.history.get(n,t);case 6:return s=e.sent.request.method,c=Ds[s]?Ds[s].res:Ds.unregistered_method.res,e.next=10,i.core.relayer.publish(n,o,c);case 10:return e.next=12,i.core.history.resolve(a);case 12:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()),bl(this,"deletePairing",function(){var e=(0,r.Z)(A().mark(function e(t,n){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.core.relayer.unsubscribe(t);case 2:return e.next=4,Promise.all([i.pairings.delete(t,Xo("USER_DISCONNECTED")),i.core.crypto.deleteSymKey(t),n?Promise.resolve():i.core.expirer.del(t)]);case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),bl(this,"cleanup",(0,r.Z)(A().mark(function e(){var t;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.pairings.getAll().filter(function(e){return tt(e.expiry)}),e.next=3,Promise.all(t.map(function(e){return i.deletePairing(e.topic)}));case 3:case"end":return e.stop()}},e)}))),bl(this,"onRelayEventRequest",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.topic,r=t.payload,e.t0=r.method,e.next="wc_pairingPing"===e.t0?4:"wc_pairingDelete"===e.t0?7:10;break;case 4:return e.next=6,i.onPairingPingRequest(n,r);case 6:case 9:case 12:return e.abrupt("return",e.sent);case 7:return e.next=9,i.onPairingDeleteRequest(n,r);case 10:return e.next=12,i.onUnknownRpcMethodRequest(n,r);case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),bl(this,"onRelayEventResponse",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.topic,r=t.payload,e.next=4,i.core.history.get(n,r.id);case 4:return a=e.sent.request.method,e.abrupt("return","wc_pairingPing"===a?i.onPairingPingResponse(n,r):i.onUnknownRpcMethodResponse(a));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),bl(this,"onPairingPingRequest",function(){var e=(0,r.Z)(A().mark(function e(t,n){var r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,e.prev=1,i.isValidPing({topic:t}),e.next=5,i.sendResult(r,t,!0);case 5:i.events.emit("pairing_ping",{id:r,topic:t}),e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(1),e.next=12,i.sendError(r,t,e.t0);case 12:i.logger.error(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t,n){return e.apply(this,arguments)}}()),bl(this,"onPairingPingResponse",function(e,t){var n=t.id;setTimeout(function(){(0,Es.isJsonRpcResult)(t)?a.events.emit(nt("pairing_ping",n),{}):(0,Es.isJsonRpcError)(t)&&a.events.emit(nt("pairing_ping",n),{error:t.error})},500)}),bl(this,"onPairingDeleteRequest",function(){var e=(0,r.Z)(A().mark(function e(t,n){var r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,e.prev=1,i.isValidDisconnect({topic:t}),e.next=5,i.deletePairing(t);case 5:i.events.emit("pairing_delete",{id:r,topic:t}),e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(1),e.next=12,i.sendError(r,t,e.t0);case 12:i.logger.error(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t,n){return e.apply(this,arguments)}}()),bl(this,"onUnknownRpcMethodRequest",function(){var e=(0,r.Z)(A().mark(function e(t,n){var r,a,o;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.id,a=n.method,e.prev=1,!i.registeredMethods.includes(a)){e.next=4;break}return e.abrupt("return");case 4:return o=Xo("WC_METHOD_UNSUPPORTED",a),e.next=7,i.sendError(r,t,o);case 7:i.logger.error(o),e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,i.sendError(r,t,e.t0);case 14:i.logger.error(e.t0);case 15:case"end":return e.stop()}},e,null,[[1,10]])}));return function(t,n){return e.apply(this,arguments)}}()),bl(this,"onUnknownRpcMethodResponse",function(e){a.registeredMethods.includes(e)||a.logger.error(Xo("WC_METHOD_UNSUPPORTED",e))}),bl(this,"isValidPair",function(e,t){var n;if(!us(e)){var r=Yo("MISSING_OR_INVALID","pair() params: ".concat(e)).message;throw t.setError("malformed_pairing_uri"),new Error(r)}if(!function(e){function t(e){try{return typeof new URL(e)<"u"}catch(t){return!1}}try{if(ns(e,!1))return!!t(e)||t(dt(e))}catch(n){}return!1}(e.uri)){var a=Yo("MISSING_OR_INVALID","pair() uri: ".concat(e.uri)).message;throw t.setError("malformed_pairing_uri"),new Error(a)}var i=To(null==e?void 0:e.uri);if(null==(n=null==i?void 0:i.relay)||!n.protocol){var o=Yo("MISSING_OR_INVALID","pair() uri#relay-protocol").message;throw t.setError("malformed_pairing_uri"),new Error(o)}if(null==i||!i.symKey){var s=Yo("MISSING_OR_INVALID","pair() uri#symKey").message;throw t.setError("malformed_pairing_uri"),new Error(s)}if(null!=i&&i.expiryTimestamp&&(0,W.toMiliseconds)(null==i?void 0:i.expiryTimestamp)<Date.now()){t.setError("pairing_expired");var c=Yo("EXPIRED","pair() URI has expired. Please try again with a new connection URI.").message;throw new Error(c)}}),bl(this,"isValidPing",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(us(t)){e.next=3;break}throw n=Yo("MISSING_OR_INVALID","ping() params: ".concat(t)),r=n.message,new Error(r);case 3:return a=t.topic,e.next=6,i.isValidPairingTopic(a);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),bl(this,"isValidDisconnect",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(us(t)){e.next=3;break}throw n=Yo("MISSING_OR_INVALID","disconnect() params: ".concat(t)),r=n.message,new Error(r);case 3:return a=t.topic,e.next=6,i.isValidPairingTopic(a);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),bl(this,"isValidPairingTopic",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ns(t,!1)){e.next=3;break}throw n=Yo("MISSING_OR_INVALID","pairing topic should be a string: ".concat(t)),r=n.message,new Error(r);case 3:if(i.pairings.keys.includes(t)){e.next=6;break}throw a=Yo("NO_MATCHING_KEY","pairing topic doesn't exist: ".concat(t)),o=a.message,new Error(o);case 6:if(!tt(i.pairings.get(t).expiry)){e.next=11;break}return e.next=9,i.deletePairing(t);case 9:throw s=Yo("EXPIRED","pairing topic: ".concat(t)),c=s.message,new Error(c);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),this.core=t,this.logger=(0,p.Ep)(n,this.name),this.pairings=new ml(this.core,this.logger,this.name,this.storagePrefix)}return F(e,[{key:"context",get:function(){return(0,p.Fd)(this.logger)}},{key:"isInitialized",value:function(){if(!this.initialized){var e=Yo("NOT_INITIALIZED",this.name).message;throw new Error(e)}}},{key:"registerRelayerEvents",value:function(){var e=this;this.core.relayer.on("relayer_message",function(){var t=(0,r.Z)(A().mark(function t(n){var r,a,i,o;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.topic,a=n.message,i=n.transportType,!e.pairings.keys.includes(r)||i===Os||e.ignoredPayloadTypes.includes(e.core.crypto.getPayloadType(a))){t.next=26;break}return t.prev=2,t.next=5,e.core.crypto.decode(r,a);case 5:if(o=t.sent,!(0,Es.isJsonRpcRequest)(o)){t.next=12;break}return e.core.history.set(r,o),t.next=10,e.onRelayEventRequest({topic:r,payload:o});case 10:t.next=19;break;case 12:if(t.t0=(0,Es.isJsonRpcResponse)(o),!t.t0){t.next=19;break}return t.next=16,e.core.history.resolve(o);case 16:return t.next=18,e.onRelayEventResponse({topic:r,payload:o});case 18:e.core.history.delete(r,o.id);case 19:return t.next=21,e.core.relayer.messages.ack(r,a);case 21:t.next=26;break;case 23:t.prev=23,t.t1=t.catch(2),e.logger.error(t.t1);case 26:case"end":return t.stop()}},t,null,[[2,23]])}));return function(e){return t.apply(this,arguments)}}())}},{key:"registerExpirerEvents",value:function(){var e=this;this.core.expirer.on(Ls,function(){var t=(0,r.Z)(A().mark(function t(n){var r,a;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Qe(n.target),a=r.topic,t.t0=a&&e.pairings.keys.includes(a),!t.t0){t.next=6;break}return t.next=5,e.deletePairing(a,!0);case 5:e.events.emit("pairing_expire",{topic:a});case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}}]),e}(),El=Object.defineProperty,kl=function(e,t,n){return function(e,t,n){return t in e?El(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n)},xl=function(e){N(n,e);var t=I(n);function n(e,a){var i,o;return B(this,n),i=t.call(this,e,a),o=S(i),i.core=e,i.logger=a,kl(S(i),"records",new Map),kl(S(i),"events",new u.EventEmitter),kl(S(i),"name","history"),kl(S(i),"version","0.3"),kl(S(i),"cached",[]),kl(S(i),"initialized",!1),kl(S(i),"storagePrefix",xs),kl(S(i),"init",(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=o.initialized,e.t0){e.next=9;break}return o.logger.trace("Initialized"),e.next=5,o.restore();case 5:o.cached.forEach(function(e){return o.records.set(e.id,e)}),o.cached=[],o.registerEventListeners(),o.initialized=!0;case 9:case"end":return e.stop()}},e)}))),kl(S(i),"set",function(e,t,n){if(i.isInitialized(),i.logger.debug("Setting JSON-RPC request history record"),i.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:n}),!i.records.has(t.id)){var r={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:n,expiry:et(W.THIRTY_DAYS)};i.records.set(r.id,r),i.persist(),i.events.emit("history_created",r)}}),kl(S(i),"resolve",function(){var e=(0,r.Z)(A().mark(function e(t){var n;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.isInitialized(),o.logger.debug("Updating JSON-RPC response history record"),o.logger.trace({type:"method",method:"update",response:t}),o.records.has(t.id)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,o.getRecord(t.id);case 4:typeof(n=e.sent).response>"u"&&(n.response=(0,Es.isJsonRpcError)(t)?{error:t.error}:{result:t.result},o.records.set(n.id,n),o.persist(),o.events.emit("history_updated",n));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),kl(S(i),"get",function(){var e=(0,r.Z)(A().mark(function e(t,n){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.isInitialized(),o.logger.debug("Getting record"),o.logger.trace({type:"method",method:"get",topic:t,id:n}),e.next=5,o.getRecord(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),kl(S(i),"delete",function(e,t){i.isInitialized(),i.logger.debug("Deleting record"),i.logger.trace({type:"method",method:"delete",id:t}),i.values.forEach(function(n){if(n.topic===e){if(typeof t<"u"&&n.id!==t)return;i.records.delete(n.id),i.events.emit("history_deleted",n)}}),i.persist()}),kl(S(i),"exists",function(){var e=(0,r.Z)(A().mark(function e(t,n){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.isInitialized(),e.t0=!!o.records.has(n),!e.t0){e.next=8;break}return e.next=5,o.getRecord(n);case 5:e.t1=e.sent.topic,e.t2=t,e.t0=e.t1===e.t2;case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),kl(S(i),"on",function(e,t){i.events.on(e,t)}),kl(S(i),"once",function(e,t){i.events.once(e,t)}),kl(S(i),"off",function(e,t){i.events.off(e,t)}),kl(S(i),"removeListener",function(e,t){i.events.removeListener(e,t)}),i.logger=(0,p.Ep)(a,i.name),i}return F(n,[{key:"context",get:function(){return(0,p.Fd)(this.logger)}},{key:"storageKey",get:function(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}},{key:"size",get:function(){return this.records.size}},{key:"keys",get:function(){return Array.from(this.records.keys())}},{key:"values",get:function(){return Array.from(this.records.values())}},{key:"pending",get:function(){var e=[];return this.values.forEach(function(t){if(!(typeof t.response<"u")){var n={topic:t.topic,request:(0,Es.formatJsonRpcRequest)(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(n)}}),e}},{key:"setJsonRpcRecords",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.core.storage.setItem(t.storageKey,e);case 2:case"end":return n.stop()}},n)}))()}},{key:"getJsonRpcRecords",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.core.storage.getItem(e.storageKey);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}))()}},{key:"getRecord",value:function(e){this.isInitialized();var t=this.records.get(e);if(!t){var n=Yo("NO_MATCHING_KEY","".concat(this.name,": ").concat(e)).message;throw new Error(n)}return t}},{key:"persist",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setJsonRpcRecords(e.values);case 2:e.events.emit("history_sync");case 3:case"end":return t.stop()}},t)}))()}},{key:"restore",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n,r,a;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getJsonRpcRecords();case 3:if(!(typeof(n=t.sent)>"u")&&n.length){t.next=6;break}return t.abrupt("return");case 6:if(!e.records.size){t.next=9;break}throw r=Yo("RESTORE_WILL_OVERRIDE",e.name),a=r.message,e.logger.error(a),new Error(a);case 9:e.cached=n,e.logger.debug("Successfully Restored records for ".concat(e.name)),e.logger.trace({type:"method",method:"restore",records:e.values}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),e.logger.debug("Failed to Restore records for ".concat(e.name)),e.logger.error(t.t0);case 15:case"end":return t.stop()}},t,null,[[0,12]])}))()}},{key:"registerEventListeners",value:function(){var e=this;this.events.on("history_created",function(t){var n="history_created";e.logger.info("Emitting ".concat(n)),e.logger.debug({type:"event",event:n,record:t})}),this.events.on("history_updated",function(t){var n="history_updated";e.logger.info("Emitting ".concat(n)),e.logger.debug({type:"event",event:n,record:t})}),this.events.on("history_deleted",function(t){var n="history_deleted";e.logger.info("Emitting ".concat(n)),e.logger.debug({type:"event",event:n,record:t})}),this.core.heartbeat.on(l.Lx.pulse,function(){e.cleanup()})}},{key:"cleanup",value:function(){var e=this;try{this.isInitialized();var t=!1;this.records.forEach(function(n){(0,W.toMiliseconds)(n.expiry||0)-Date.now()<=0&&(e.logger.info("Deleting expired history log: ".concat(n.id)),e.records.delete(n.id),e.events.emit("history_deleted",n,!1),t=!0)}),t&&this.persist()}catch(vn){this.logger.warn(vn)}}},{key:"isInitialized",value:function(){if(!this.initialized){var e=Yo("NOT_INITIALIZED",this.name).message;throw new Error(e)}}}]),n}(w),Cl=Object.defineProperty,Al=function(e,t,n){return function(e,t,n){return t in e?Cl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n)},Nl=function(e){N(n,e);var t=I(n);function n(e,a){var i,o;return B(this,n),i=t.call(this,e,a),o=S(i),i.core=e,i.logger=a,Al(S(i),"expirations",new Map),Al(S(i),"events",new u.EventEmitter),Al(S(i),"name","expirer"),Al(S(i),"version","0.3"),Al(S(i),"cached",[]),Al(S(i),"initialized",!1),Al(S(i),"storagePrefix",xs),Al(S(i),"init",(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=o.initialized,e.t0){e.next=9;break}return o.logger.trace("Initialized"),e.next=5,o.restore();case 5:o.cached.forEach(function(e){return o.expirations.set(e.target,e)}),o.cached=[],o.registerEventListeners(),o.initialized=!0;case 9:case"end":return e.stop()}},e)}))),Al(S(i),"has",function(e){try{var t=i.formatTarget(e);return typeof i.getExpiration(t)<"u"}catch(n){return!1}}),Al(S(i),"set",function(e,t){i.isInitialized();var n=i.formatTarget(e),r={target:n,expiry:t};i.expirations.set(n,r),i.checkExpiry(n,r),i.events.emit("expirer_created",{target:n,expiration:r})}),Al(S(i),"get",function(e){i.isInitialized();var t=i.formatTarget(e);return i.getExpiration(t)}),Al(S(i),"del",function(e){if(i.isInitialized(),i.has(e)){var t=i.formatTarget(e),n=i.getExpiration(t);i.expirations.delete(t),i.events.emit("expirer_deleted",{target:t,expiration:n})}}),Al(S(i),"on",function(e,t){i.events.on(e,t)}),Al(S(i),"once",function(e,t){i.events.once(e,t)}),Al(S(i),"off",function(e,t){i.events.off(e,t)}),Al(S(i),"removeListener",function(e,t){i.events.removeListener(e,t)}),i.logger=(0,p.Ep)(a,i.name),i}return F(n,[{key:"context",get:function(){return(0,p.Fd)(this.logger)}},{key:"storageKey",get:function(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}},{key:"length",get:function(){return this.expirations.size}},{key:"keys",get:function(){return Array.from(this.expirations.keys())}},{key:"values",get:function(){return Array.from(this.expirations.values())}},{key:"formatTarget",value:function(e){if("string"==typeof e)return function(e){return Xe("topic",e)}(e);if("number"==typeof e)return function(e){return Xe("id",e)}(e);var t=Yo("UNKNOWN_TYPE","Target type: "+typeof e).message;throw new Error(t)}},{key:"setExpirations",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.core.storage.setItem(t.storageKey,e);case 2:case"end":return n.stop()}},n)}))()}},{key:"getExpirations",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.core.storage.getItem(e.storageKey);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}))()}},{key:"persist",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setExpirations(e.values);case 2:e.events.emit("expirer_sync");case 3:case"end":return t.stop()}},t)}))()}},{key:"restore",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n,r,a;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getExpirations();case 3:if(!(typeof(n=t.sent)>"u")&&n.length){t.next=6;break}return t.abrupt("return");case 6:if(!e.expirations.size){t.next=9;break}throw r=Yo("RESTORE_WILL_OVERRIDE",e.name),a=r.message,e.logger.error(a),new Error(a);case 9:e.cached=n,e.logger.debug("Successfully Restored expirations for ".concat(e.name)),e.logger.trace({type:"method",method:"restore",expirations:e.values}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),e.logger.debug("Failed to Restore expirations for ".concat(e.name)),e.logger.error(t.t0);case 15:case"end":return t.stop()}},t,null,[[0,12]])}))()}},{key:"getExpiration",value:function(e){var t=this.expirations.get(e);if(!t){var n=Yo("NO_MATCHING_KEY","".concat(this.name,": ").concat(e)).message;throw this.logger.warn(n),new Error(n)}return t}},{key:"checkExpiry",value:function(e,t){var n=t.expiry;(0,W.toMiliseconds)(n)-Date.now()<=0&&this.expire(e,t)}},{key:"expire",value:function(e,t){this.expirations.delete(e),this.events.emit(Ls,{target:e,expiration:t})}},{key:"checkExpirations",value:function(){var e=this;this.core.relayer.connected&&this.expirations.forEach(function(t,n){return e.checkExpiry(n,t)})}},{key:"registerEventListeners",value:function(){var e=this;this.core.heartbeat.on(l.Lx.pulse,function(){return e.checkExpirations()}),this.events.on("expirer_created",function(t){var n="expirer_created";e.logger.info("Emitting ".concat(n)),e.logger.debug({type:"event",event:n,data:t}),e.persist()}),this.events.on(Ls,function(t){var n=Ls;e.logger.info("Emitting ".concat(n)),e.logger.debug({type:"event",event:n,data:t}),e.persist()}),this.events.on("expirer_deleted",function(t){var n="expirer_deleted";e.logger.info("Emitting ".concat(n)),e.logger.debug({type:"event",event:n,data:t}),e.persist()})}},{key:"isInitialized",value:function(){if(!this.initialized){var e=Yo("NOT_INITIALIZED",this.name).message;throw new Error(e)}}}]),n}(D),Il=Object.defineProperty,_l=function(e,t,n){return function(e,t,n){return t in e?Il(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n)},Sl=function(e){N(n,e);var t=I(n);function n(e,a,i){var o,s;return B(this,n),o=t.call(this,e,a,i),s=S(o),o.core=e,o.logger=a,o.store=i,_l(S(o),"name","verify-api"),_l(S(o),"abortController"),_l(S(o),"isDevEnv"),_l(S(o),"verifyUrlV3",Fs),_l(S(o),"storagePrefix",xs),_l(S(o),"version",2),_l(S(o),"publicKey"),_l(S(o),"fetchPromise"),_l(S(o),"init",(0,r.Z)(A().mark(function e(){var t;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=s.isDevEnv,e.t0){e.next=10;break}return e.next=4,s.store.getItem(s.storeKey);case 4:if(s.publicKey=e.sent,e.t1=s.publicKey&&(0,W.toMiliseconds)(null==(t=s.publicKey)?void 0:t.expiresAt)<Date.now(),!e.t1){e.next=10;break}return s.logger.debug("verify v2 public key expired"),e.next=10,s.removePublicKey();case 10:case"end":return e.stop()}},e)}))),_l(S(o),"register",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,i,o,c,u;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(qe()&&!s.isDevEnv){e.next=2;break}return e.abrupt("return");case 2:return n=window.location.origin,r=t.id,a=t.decryptedId,i="".concat(s.verifyUrlV3,"/attestation?projectId=").concat(s.core.projectId,"&origin=").concat(n,"&id=").concat(r,"&decryptedId=").concat(a),e.prev=3,o=(0,K.getDocument)(),c=s.startAbortTimer(5*W.ONE_SECOND),e.next=8,new Promise(function(e,t){var n=function(){window.removeEventListener("message",u),o.body.removeChild(a),t("attestation aborted")};s.abortController.signal.addEventListener("abort",n);var a=o.createElement("iframe");a.src=i,a.style.display="none",a.addEventListener("error",n,{signal:s.abortController.signal});var u=function t(i){if(i.data&&"string"==typeof i.data)try{var u=JSON.parse(i.data);if("verify_attestation"===u.type){if((0,Z.xp)(u.attestation).payload.id!==r)return;clearInterval(c),o.body.removeChild(a),s.abortController.signal.removeEventListener("abort",n),window.removeEventListener("message",t),e(null===u.attestation?"":u.attestation)}}catch(u){s.logger.warn(u)}};o.body.appendChild(a),window.addEventListener("message",u,{signal:s.abortController.signal})});case 8:return u=e.sent,e.abrupt("return",(s.logger.debug(u,"jwt attestation"),u));case 12:e.prev=12,e.t0=e.catch(3),s.logger.warn(e.t0);case 15:return e.abrupt("return","");case 16:case"end":return e.stop()}},e,null,[[3,12]])}));return function(t){return e.apply(this,arguments)}}()),_l(S(o),"resolve",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,i,o;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.isDevEnv){e.next=2;break}return e.abrupt("return","");case 2:if(n=t.attestationId,r=t.hash,a=t.encryptedId,""!==n){e.next=5;break}return e.abrupt("return",void s.logger.debug("resolve: attestationId is empty, skipping"));case 5:if(!n){e.next=13;break}if((0,Z.xp)(n).payload.id===a){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,s.isValidJwtAttestation(n);case 10:if(!(i=e.sent)){e.next=13;break}return e.abrupt("return",i.isVerified?i:void s.logger.warn("resolve: jwt attestation: origin url not verified"));case 13:if(r){e.next=15;break}return e.abrupt("return");case 15:return o=s.getVerifyUrl(null==t?void 0:t.verifyUrl),e.abrupt("return",s.fetchAttestation(r,o));case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),_l(S(o),"fetchAttestation",function(){var e=(0,r.Z)(A().mark(function e(t,n){var r,a;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.logger.debug("resolving attestation: ".concat(t," from url: ").concat(n)),r=s.startAbortTimer(5*W.ONE_SECOND),e.next=4,fetch("".concat(n,"/attestation/").concat(t,"?v2Supported=true"),{signal:s.abortController.signal});case 4:if(a=e.sent,clearTimeout(r),200!==a.status){e.next=12;break}return e.next=9,a.json();case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=void 0;case 13:return e.abrupt("return",e.t0);case 14:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),_l(S(o),"getVerifyUrl",function(e){var t=e||js;return Ws.includes(t)||(o.logger.info("verify url: ".concat(t,", not included in trusted list, assigning default: ").concat(js)),t=js),t}),_l(S(o),"fetchPublicKey",(0,r.Z)(A().mark(function e(){var t,n;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s.logger.debug("fetching public key from: ".concat(s.verifyUrlV3)),t=s.startAbortTimer(W.FIVE_SECONDS),e.next=5,fetch("".concat(s.verifyUrlV3,"/public-key"),{signal:s.abortController.signal});case 5:return n=e.sent,clearTimeout(t),e.next=9,n.json();case 9:return e.abrupt("return",e.sent);case 12:e.prev=12,e.t0=e.catch(0),s.logger.warn(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}))),_l(S(o),"persistPublicKey",function(){var e=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.logger.debug(t,"persisting public key to local storage"),e.next=3,s.store.setItem(s.storeKey,t);case 3:s.publicKey=t;case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),_l(S(o),"removePublicKey",(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.logger.debug("removing verify v2 public key from storage"),e.next=3,s.store.removeItem(s.storeKey);case 3:s.publicKey=void 0;case 4:case"end":return e.stop()}},e)}))),_l(S(o),"isValidJwtAttestation",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getPublicKey();case 2:if(n=e.sent,e.prev=3,!n){e.next=6;break}return e.abrupt("return",s.validateAttestation(t,n));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),s.logger.error(e.t0),s.logger.warn("error validating attestation");case 11:return e.next=13,s.fetchAndPersistPublicKey();case 13:if(r=e.sent,e.prev=14,!r){e.next=17;break}return e.abrupt("return",s.validateAttestation(t,r));case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),s.logger.error(e.t1),s.logger.warn("error validating attestation");case 22:case"end":return e.stop()}},e,null,[[3,8],[14,19]])}));return function(t){return e.apply(this,arguments)}}()),_l(S(o),"getPublicKey",(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.publicKey){e.next=4;break}e.t0=s.publicKey,e.next=7;break;case 4:return e.next=6,s.fetchAndPersistPublicKey();case 6:e.t0=e.sent;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}},e)}))),_l(S(o),"fetchAndPersistPublicKey",(0,r.Z)(A().mark(function e(){var t;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.fetchPromise){e.next=4;break}return e.next=3,s.fetchPromise;case 3:return e.abrupt("return",s.publicKey);case 4:return s.fetchPromise=new Promise(function(){var e=(0,r.Z)(A().mark(function e(t){var n;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.fetchPublicKey();case 2:if(n=e.sent,e.t0=n,!e.t0){e.next=8;break}return e.next=7,s.persistPublicKey(n);case 7:t(n);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=7,s.fetchPromise;case 7:return t=e.sent,e.abrupt("return",(s.fetchPromise=void 0,t));case 9:case"end":return e.stop()}},e)}))),_l(S(o),"validateAttestation",function(e,t){var n=function(e,t){var n=C(e.split("."),3),r=n[0],a=n[1],i=n[2],o=Buffer.from(fo(i),"base64");if(64!==o.length)throw new Error("Invalid signature length");var s=o.slice(0,32),c=o.slice(32,64),u=Ea("".concat(r,".").concat(a)),l=function(e){var t=Buffer.from(e.x,"base64"),n=Buffer.from(e.y,"base64");return(0,Ae.zo)([new Uint8Array([4]),t,n])}(t);if(!to.verify((0,Ae.zo)([s,c]),u,l))throw new Error("Invalid signature");return(0,Z.xp)(e).payload}(e,t.publicKey),r={hasExpired:(0,W.toMiliseconds)(n.exp)<Date.now(),payload:n};if(r.hasExpired)throw o.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:r.payload.origin,isScam:r.payload.isScam,isVerified:r.payload.isVerified}}),o.logger=(0,p.Ep)(a,o.name),o.abortController=new AbortController,o.isDevEnv=lt(),o.init(),o}return F(n,[{key:"storeKey",get:function(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}},{key:"context",get:function(){return(0,p.Fd)(this.logger)}},{key:"startAbortTimer",value:function(e){var t=this;return this.abortController=new AbortController,setTimeout(function(){return t.abortController.abort()},(0,W.toMiliseconds)(e))}}]),n}(function(){return F(function e(t,n,r){B(this,e),this.core=t,this.logger=n,this.store=r})}()),Tl=Object.defineProperty,Ol=function(e,t,n){return function(e,t,n){return t in e?Tl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n)},Rl=function(e){N(n,e);var t=I(n);function n(e,a){var i,o;return B(this,n),i=t.call(this,e,a),o=S(i),i.projectId=e,i.logger=a,Ol(S(i),"context","echo"),Ol(S(i),"registerDeviceToken",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,i,s,c;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.clientId,r=t.token,a=t.notificationType,i=t.enableEncrypted,s=void 0!==i&&i,c="https://echo.walletconnect.com/".concat(o.projectId,"/clients"),e.next=3,fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:n,type:a,token:r,always_raw:s})});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),i.logger=(0,p.Ep)(a,i.context),i}return F(n)}(function(){return F(function e(t,n){B(this,e),this.projectId=t,this.logger=n})}()),Pl=Object.defineProperty,Ul=Object.getOwnPropertySymbols,Ml=Object.prototype.hasOwnProperty,Dl=Object.prototype.propertyIsEnumerable,Ll=function(e,t,n){return t in e?Pl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Bl=function(e,t){for(var n in t||(t={}))Ml.call(t,n)&&Ll(e,n,t[n]);if(Ul){var r,a=M(Ul(t));try{for(a.s();!(r=a.n()).done;){n=r.value;Dl.call(t,n)&&Ll(e,n,t[n])}}catch(i){a.e(i)}finally{a.f()}}return e},jl=function(e,t,n){return Ll(e,"symbol"!=typeof t?t+"":t,n)},Fl=function(e){N(n,e);var t=I(n);function n(e,a){var i,o,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return B(this,n),i=t.call(this,e,a,s),o=S(i),i.core=e,i.logger=a,jl(S(i),"context","event-client"),jl(S(i),"storagePrefix",xs),jl(S(i),"storageVersion",.1),jl(S(i),"events",new Map),jl(S(i),"shouldPersist",!1),jl(S(i),"init",(0,r.Z)(A().mark(function e(){var t;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(lt()){e.next=19;break}return e.prev=1,e.t0=ut(),e.t1=Date.now(),e.t2=o.getAppDomain(),e.next=7,o.core.crypto.getClientId();case 7:return e.t3=e.sent,e.t4=Ve(o.core.relayer.protocol,o.core.relayer.version,Ts),e.t5={client_id:e.t3,user_agent:e.t4},e.t6={event:"INIT",type:"",properties:e.t5},t={eventId:e.t0,timestamp:e.t1,domain:e.t2,props:e.t6},e.next=14,o.sendEvent([t]);case 14:e.next=19;break;case 16:e.prev=16,e.t7=e.catch(1),o.logger.warn(e.t7);case 19:case"end":return e.stop()}},e,null,[[1,16]])}))),jl(S(i),"createEvent",function(e){var t=e.event,n=void 0===t?"ERROR":t,r=e.type,a=void 0===r?"":r,o=e.properties,s=o.topic,c=o.trace,u=ut(),l=i.core.projectId||"",d=Date.now(),p=Bl({eventId:u,timestamp:d,props:{event:n,type:a,properties:{topic:s,trace:c}},bundleId:l,domain:i.getAppDomain()},i.setMethods(u));return i.telemetryEnabled&&(i.events.set(u,p),i.shouldPersist=!0),p}),jl(S(i),"getEvent",function(e){var t=e.eventId,n=e.topic;if(t)return i.events.get(t);var r=Array.from(i.events.values()).find(function(e){return e.props.properties.topic===n});return r?Bl(Bl({},r),i.setMethods(r.eventId)):void 0}),jl(S(i),"deleteEvent",function(e){var t=e.eventId;i.events.delete(t),i.shouldPersist=!0}),jl(S(i),"setEventListeners",function(){i.core.heartbeat.on(l.Lx.pulse,(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=o.shouldPersist,!e.t0){e.next=4;break}return e.next=4,o.persist();case 4:o.events.forEach(function(e){(0,W.fromMiliseconds)(Date.now())-(0,W.fromMiliseconds)(e.timestamp)>86400&&(o.events.delete(e.eventId),o.shouldPersist=!0)});case 5:case"end":return e.stop()}},e)})))}),jl(S(i),"setMethods",function(e){return{addTrace:function(t){return i.addTrace(e,t)},setError:function(t){return i.setError(e,t)}}}),jl(S(i),"addTrace",function(e,t){var n=i.events.get(e);n&&(n.props.properties.trace.push(t),i.events.set(e,n),i.shouldPersist=!0)}),jl(S(i),"setError",function(e,t){var n=i.events.get(e);n&&(n.props.type=t,n.timestamp=Date.now(),i.events.set(e,n),i.shouldPersist=!0)}),jl(S(i),"persist",(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.core.storage.setItem(o.storageKey,Array.from(o.events.values()));case 2:o.shouldPersist=!1;case 3:case"end":return e.stop()}},e)}))),jl(S(i),"restore",(0,r.Z)(A().mark(function e(){var t;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.core.storage.getItem(o.storageKey);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:if((t=e.t0).length){e.next=9;break}return e.abrupt("return");case 9:t.forEach(function(e){o.events.set(e.eventId,Bl(Bl({},e),o.setMethods(e.eventId)))}),e.next=15;break;case 12:e.prev=12,e.t1=e.catch(0),o.logger.warn(e.t1);case 15:case"end":return e.stop()}},e,null,[[0,12]])}))),jl(S(i),"submit",(0,r.Z)(A().mark(function e(){var t,n,r,a,i,s,c,u;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.telemetryEnabled&&0!==o.events.size){e.next=2;break}return e.abrupt("return");case 2:t=[],n=M(o.events);try{for(n.s();!(r=n.n()).done;)a=C(r.value,2),a[0],(i=a[1]).props.type&&t.push(i)}catch(l){n.e(l)}finally{n.f()}if(0===t.length){e.next=17;break}return e.prev=6,e.next=9,o.sendEvent(t);case 9:if(!e.sent.ok){e.next=12;break}s=M(t);try{for(s.s();!(c=s.n()).done;)u=c.value,o.events.delete(u.eventId),o.shouldPersist=!0}catch(l){s.e(l)}finally{s.f()}case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),o.logger.warn(e.t0);case 17:case"end":return e.stop()}},e,null,[[6,14]])}))),jl(S(i),"sendEvent",function(){var e=(0,r.Z)(A().mark(function e(t){var n;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.getAppDomain()?"":"&sp=desktop",e.next=3,fetch("https://pulse.walletconnect.org/batch?projectId=".concat(o.core.projectId,"&st=events_sdk&sv=js-").concat(Ts).concat(n),{method:"POST",body:JSON.stringify(t)});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),jl(S(i),"getAppDomain",function(){return Ke().url}),i.logger=(0,p.Ep)(a,i.context),i.telemetryEnabled=s,s?i.restore().then((0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.submit();case 2:o.setEventListeners();case 3:case"end":return e.stop()}},e)}))):i.persist(),i}return F(n,[{key:"storageKey",get:function(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}]),n}(function(){return F(function e(t,n,r){B(this,e),this.core=t,this.logger=n,this.telemetryEnabled=r})}()),Wl=Object.defineProperty,ql=Object.getOwnPropertySymbols,Zl=Object.prototype.hasOwnProperty,Hl=Object.prototype.propertyIsEnumerable,Kl=function(e,t,n){return t in e?Wl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Vl=function(e,t){for(var n in t||(t={}))Zl.call(t,n)&&Kl(e,n,t[n]);if(ql){var r,a=M(ql(t));try{for(a.s();!(r=a.n()).done;){n=r.value;Hl.call(t,n)&&Kl(e,n,t[n])}}catch(i){a.e(i)}finally{a.f()}}return e},zl=function(e,t,n){return Kl(e,"symbol"!=typeof t?t+"":t,n)},Gl=function(e){N(n,e);var t=I(n);function n(e){var a,i,o;B(this,n),a=t.call(this,e),i=S(a),zl(S(a),"protocol","wc"),zl(S(a),"version",2),zl(S(a),"name","core"),zl(S(a),"relayUrl"),zl(S(a),"projectId"),zl(S(a),"customStoragePrefix"),zl(S(a),"events",new u.EventEmitter),zl(S(a),"logger"),zl(S(a),"heartbeat"),zl(S(a),"relayer"),zl(S(a),"crypto"),zl(S(a),"storage"),zl(S(a),"history"),zl(S(a),"expirer"),zl(S(a),"pairing"),zl(S(a),"verify"),zl(S(a),"echoClient"),zl(S(a),"linkModeSupportedApps"),zl(S(a),"eventClient"),zl(S(a),"initialized",!1),zl(S(a),"logChunkController"),zl(S(a),"on",function(e,t){return a.events.on(e,t)}),zl(S(a),"once",function(e,t){return a.events.once(e,t)}),zl(S(a),"off",function(e,t){return a.events.off(e,t)}),zl(S(a),"removeListener",function(e,t){return a.events.removeListener(e,t)}),zl(S(a),"dispatchEnvelope",function(e){var t=e.topic,n=e.message,r=e.sessionExists;if(t&&n){var i={topic:t,message:n,publishedAt:Date.now(),transportType:Os};a.relayer.onLinkMessageEvent(i,{sessionExists:r})}});var s=a.getGlobalCore(null==e?void 0:e.customStoragePrefix);if(s)try{return _(a,(a.customStoragePrefix=s.customStoragePrefix,a.logger=s.logger,a.heartbeat=s.heartbeat,a.crypto=s.crypto,a.history=s.history,a.expirer=s.expirer,a.storage=s.storage,a.relayer=s.relayer,a.pairing=s.pairing,a.verify=s.verify,a.echoClient=s.echoClient,a.linkModeSupportedApps=s.linkModeSupportedApps,a.eventClient=s.eventClient,a.initialized=s.initialized,a.logChunkController=s.logChunkController,s))}catch(g){console.warn("Failed to copy global core",g)}a.projectId=null==e?void 0:e.projectId,a.relayUrl=(null==e?void 0:e.relayUrl)||_s,a.customStoragePrefix=null!=e&&e.customStoragePrefix?":".concat(e.customStoragePrefix):"";var c=(0,p.jI)({level:"string"==typeof(null==e?void 0:e.logger)&&e.logger?e.logger:"error",name:"core"}),f=(0,p.Rt)({opts:c,maxSizeInBytes:null==e?void 0:e.maxLogBlobSizeInBytes,loggerOverride:null==e?void 0:e.logger}),h=f.logger,v=f.chunkLoggerController;return a.logChunkController=v,null!=(o=a.logChunkController)&&o.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=(0,r.Z)(A().mark(function e(){var t,n;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null!=(t=i.logChunkController)&&t.downloadLogsBlobInBrowser,!e.t0){e.next=10;break}if(e.t1=null==(n=i.logChunkController),e.t1){e.next=10;break}return e.t2=n,e.next=7,i.crypto.getClientId();case 7:e.t3=e.sent,e.t4={clientId:e.t3},e.t2.downloadLogsBlobInBrowser.call(e.t2,e.t4);case 10:case"end":return e.stop()}},e)}))),a.logger=(0,p.Ep)(h,a.name),a.heartbeat=new l.C$,a.crypto=new fu(S(a),a.logger,null==e?void 0:e.keychain),a.history=new xl(S(a),a.logger),a.expirer=new Nl(S(a),a.logger),a.storage=null!=e&&e.storage?e.storage:new d.Z(Vl(Vl({},Cs),null==e?void 0:e.storageOptions)),a.relayer=new tl({core:S(a),logger:a.logger,relayUrl:a.relayUrl,projectId:a.projectId}),a.pairing=new wl(S(a),a.logger),a.verify=new Sl(S(a),a.logger,a.storage),a.echoClient=new Rl(a.projectId||"",a.logger),a.linkModeSupportedApps=[],a.eventClient=new Fl(S(a),a.logger,null==e?void 0:e.telemetryEnabled),a.setGlobalCore(S(a)),a}return F(n,[{key:"context",get:function(){return(0,p.Fd)(this.logger)}},{key:"start",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.initialized,t.t0){t.next=4;break}return t.next=4,e.initialize();case 4:case"end":return t.stop()}},t)}))()}},{key:"getLogsBlob",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(n=e.logChunkController)){t.next=4;break}t.t0=void 0,t.next=10;break;case 4:return t.t1=n,t.next=7,e.crypto.getClientId();case 7:t.t2=t.sent,t.t3={clientId:t.t2},t.t0=t.t1.logsToBlob.call(t.t1,t.t3);case 10:return t.abrupt("return",t.t0);case 11:case"end":return t.stop()}},t)}))()}},{key:"addLinkModeSupportedApp",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=t.linkModeSupportedApps.includes(e),n.t0){n.next=5;break}return t.linkModeSupportedApps.push(e),n.next=5,t.storage.setItem(Ps,t.linkModeSupportedApps);case 5:case"end":return n.stop()}},n)}))()}},{key:"initialize",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.logger.trace("Initialized"),t.prev=1,t.next=4,e.crypto.init();case 4:return t.next=6,e.history.init();case 6:return t.next=8,e.expirer.init();case 8:return t.next=10,e.relayer.init();case 10:return t.next=12,e.heartbeat.init();case 12:return t.next=14,e.pairing.init();case 14:return t.next=16,e.storage.getItem(Ps);case 16:if(t.t0=t.sent,t.t0){t.next=19;break}t.t0=[];case 19:e.linkModeSupportedApps=t.t0,e.initialized=!0,e.logger.info("Core Initialization Success"),t.next=27;break;case 24:throw t.prev=24,t.t1=t.catch(1),e.logger.warn(t.t1,"Core Initialization Failure at epoch ".concat(Date.now())),e.logger.error(t.t1.message),t.t1;case 27:case"end":return t.stop()}},t,null,[[1,24]])}))()}},{key:"getGlobalCore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{if(this.isGlobalCoreDisabled())return;var t="_walletConnectCore_".concat(e),n="".concat(t,"_count");return globalThis[n]=(globalThis[n]||0)+1,globalThis[n]>1&&console.warn("WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ".concat(globalThis[n]," times.")),globalThis[t]}catch(t){return void console.warn("Failed to get global WalletConnect core",t)}}},{key:"setGlobalCore",value:function(e){var t;try{if(this.isGlobalCoreDisabled())return;var n="_walletConnectCore_".concat((null==(t=e.opts)?void 0:t.customStoragePrefix)||"");globalThis[n]=e}catch(mn){console.warn("Failed to set global WalletConnect core",mn)}}},{key:"isGlobalCoreDisabled",value:function(){try{return typeof process<"u"&&"true"===process.env.DISABLE_GLOBAL_CORE}catch(e){return!0}}}],[{key:"init",value:function(e){return(0,r.Z)(A().mark(function t(){var r,a;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=new n(e),t.next=3,r.initialize();case 3:return t.next=5,r.crypto.getClientId();case 5:return a=t.sent,t.next=8,r.storage.setItem("WALLETCONNECT_CLIENT_ID",a);case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}},t)}))()}}]),n}(y),$l=Gl,Jl="wc@2:client:",Yl="WALLETCONNECT_DEEPLINK_CHOICE",Xl="Proposal expired",Ql=W.SEVEN_DAYS,ed={wc_sessionPropose:{req:{ttl:W.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:W.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:W.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:W.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:W.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:W.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:W.ONE_DAY,prompt:!1,tag:1104},res:{ttl:W.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:W.ONE_DAY,prompt:!1,tag:1106},res:{ttl:W.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:W.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:W.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:W.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:W.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:W.ONE_DAY,prompt:!1,tag:1112},res:{ttl:W.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:W.ONE_DAY,prompt:!1,tag:1114},res:{ttl:W.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:W.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:W.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:W.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:W.FIVE_MINUTES,prompt:!1,tag:1119}}},td={min:W.FIVE_MINUTES,max:W.SEVEN_DAYS},nd={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},rd=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],ad="wc@1.5:auth:",id="".concat(ad,":PUB_KEY"),od=Object.defineProperty,sd=Object.defineProperties,cd=Object.getOwnPropertyDescriptors,ud=Object.getOwnPropertySymbols,ld=Object.prototype.hasOwnProperty,dd=Object.prototype.propertyIsEnumerable,pd=function(e,t,n){return t in e?od(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},fd=function(e,t){for(var n in t||(t={}))ld.call(t,n)&&pd(e,n,t[n]);if(ud){var r,a=M(ud(t));try{for(a.s();!(r=a.n()).done;){n=r.value;dd.call(t,n)&&pd(e,n,t[n])}}catch(i){a.e(i)}finally{a.f()}}return e},hd=function(e,t){return sd(e,cd(t))},vd=function(e,t,n){return pd(e,"symbol"!=typeof t?t+"":t,n)},gd=function(e){N(n,e);var t=I(n);function n(e){var a,i;return B(this,n),a=t.call(this,e),i=S(a),vd(S(a),"name","engine"),vd(S(a),"events",new u),vd(S(a),"initialized",!1),vd(S(a),"requestQueue",{state:"IDLE",queue:[]}),vd(S(a),"sessionRequestQueue",{state:"IDLE",queue:[]}),vd(S(a),"emittedSessionRequests",new pt({limit:500})),vd(S(a),"requestQueueDelay",W.ONE_SECOND),vd(S(a),"expectedPairingMethodMap",new Map),vd(S(a),"recentlyDeletedMap",new Map),vd(S(a),"recentlyDeletedLimit",200),vd(S(a),"relayMessageCache",[]),vd(S(a),"pendingSessions",new Map),vd(S(a),"init",(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.initialized,e.t0){e.next=12;break}return e.next=4,i.cleanup();case 4:return i.registerRelayerEvents(),i.registerExpirerEvents(),i.registerPairingEvents(),e.next=9,i.registerLinkModeListeners();case 9:i.client.core.pairing.register({methods:Object.keys(ed)}),i.initialized=!0,setTimeout((0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.processPendingMessageEvents();case 2:i.sessionRequestQueue.queue=i.getPendingSessionRequests(),i.processSessionRequestQueue();case 4:case"end":return e.stop()}},e)})),(0,W.toMiliseconds)(i.requestQueueDelay));case 12:case"end":return e.stop()}},e)}))),vd(S(a),"connect",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c,u,l,d,p,f,h,v,g,m,y,b,w,E,k,x,C,N,I,_,S,T,O,R;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.isInitialized(),e.next=3,i.confirmOnlineStateOrThrow();case 3:return r=hd(fd({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}}),e.next=6,i.isValidConnect(r);case 6:r.optionalNamespaces=function(e,t){var n,r,a,i,o,s,c,u=zo(e),l=zo(t),d={},p=M(Object.keys(u).concat(Object.keys(l)));try{for(p.s();!(c=p.n()).done;){var f=c.value;d[f]={chains:rt(null==(n=u[f])?void 0:n.chains,null==(r=l[f])?void 0:r.chains),methods:rt(null==(a=u[f])?void 0:a.methods,null==(i=l[f])?void 0:i.methods),events:rt(null==(o=u[f])?void 0:o.events,null==(s=l[f])?void 0:s.events)}}}catch(h){p.e(h)}finally{p.f()}return d}(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={},a=r.pairingTopic,o=r.requiredNamespaces,s=r.optionalNamespaces,c=r.sessionProperties,u=r.scopedProperties,l=r.relays,d=r.authentication,p=r.walletPay,f=(null==(n=null==d?void 0:d[0])?void 0:n.ttl)||ed.wc_sessionPropose.req.ttl||W.FIVE_MINUTES,i.validateRequestExpiry(f),v=a,g=!1,e.prev=11,v&&(m=i.client.core.pairing.pairings.get(v),i.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),g=m.active),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(11),i.client.logger.error("connect() -> pairing.get(".concat(v,") failed")),e.t0;case 18:if(v&&g){e.next=25;break}return e.next=21,i.client.core.pairing.create({internal:{skipSubscribe:!0}});case 21:y=e.sent,b=y.topic,w=y.uri,v=b,h=w;case 25:if(v){e.next=28;break}throw E=Yo("NO_MATCHING_KEY","connect() pairing topic: ".concat(v)),k=E.message,new Error(k);case 28:return e.next=30,i.client.core.crypto.generateKeyPair();case 30:return x=e.sent,C=et(f),N=fd(hd(fd(fd({requiredNamespaces:o,optionalNamespaces:s,relays:null!=l?l:[{protocol:"irn"}],proposer:{publicKey:x,metadata:i.client.metadata},expiryTimestamp:C,pairingTopic:v},c&&{sessionProperties:c}),u&&{scopedProperties:u}),{id:(0,Es.payloadId)()}),(d||p)&&{requests:{authentication:null==d?void 0:d.map(function(e){var t=e.domain,n=e.chains,r=e.nonce,a=e.uri,i=e.exp,o=e.nbf,s=e.type,c=e.statement,u=e.requestId,l=e.resources,d=e.signatureTypes;return{domain:t,chains:n,nonce:r,type:null!=s?s:"caip122",aud:a,version:"1",iat:(new Date).toISOString(),exp:i,nbf:o,statement:c,requestId:u,resources:l,signatureTypes:d}}),walletPay:p}}),I=nt("session_connect",N.id),_=Je(f,Xl),S=_.reject,T=_.resolve,O=_.done,R=function e(t){t.id===N.id&&(i.client.events.off("proposal_expire",e),i.pendingSessions.delete(N.id),i.events.emit(I,{error:{message:Xl,code:0}}))},i.client.events.on("proposal_expire",R),i.events.once(I,function(e){var t=e.error,n=e.session;i.client.events.off("proposal_expire",R),t?S(t):n&&T(n)}),e.next=43,i.setProposal(N.id,N);case 43:return e.next=45,i.sendProposeSession({proposal:N,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:N.id}}}).catch(function(e){throw i.deleteProposal(N.id),e});case 45:return e.abrupt("return",{uri:h,approval:O});case 46:case"end":return e.stop()}},e,null,[[11,15]])}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"pair",function(){var e=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.isInitialized(),e.next=3,i.confirmOnlineStateOrThrow();case 3:return e.prev=3,e.next=6,i.client.core.pairing.pair(t);case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(3),i.client.logger.error("pair() failed"),e.t0;case 12:case"end":return e.stop()}},e,null,[[3,9]])}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"approve",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c,u,l,d,p,f,h,v,g,m,y,b,w,E,k,x,C,N;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.client.core.eventClient.createEvent({properties:{topic:null==(n=null==t?void 0:t.id)?void 0:n.toString(),trace:["session_approve_started"]}}),e.prev=1,i.isInitialized(),e.next=5,i.confirmOnlineStateOrThrow();case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),o.setError("no_internet_connection"),e.t0;case 10:return e.prev=10,e.next=13,i.isValidProposalId(null==t?void 0:t.id);case 13:e.next=18;break;case 15:throw e.prev=15,e.t1=e.catch(10),i.client.logger.error("approve() -> proposal.get(".concat(null==t?void 0:t.id,") failed")),o.setError("proposal_not_found"),e.t1;case 18:return e.prev=18,e.next=21,i.isValidApprove(t);case 21:e.next=26;break;case 23:throw e.prev=23,e.t2=e.catch(18),i.client.logger.error("approve() -> isValidApprove() failed"),o.setError("session_approve_namespace_validation_failure"),e.t2;case 26:return s=t.id,c=t.relayProtocol,u=t.namespaces,l=t.sessionProperties,d=t.scopedProperties,p=t.sessionConfig,f=t.proposalRequestsResponses,h=i.client.proposal.get(s),i.client.core.eventClient.deleteEvent({eventId:o.eventId}),v=h.pairingTopic,g=h.proposer,m=h.requiredNamespaces,y=h.optionalNamespaces,(b=null==(r=i.client.core.eventClient)?void 0:r.getEvent({topic:v}))||(b=null==(a=i.client.core.eventClient)?void 0:a.createEvent({type:"session_approve_started",properties:{topic:v,trace:["session_approve_started","session_namespaces_validation_success"]}})),e.next=33,i.client.core.crypto.generateKeyPair();case 33:return w=e.sent,E=g.publicKey,e.next=37,i.client.core.crypto.generateSharedKey(w,E);case 37:return k=e.sent,x=hd(fd(fd(fd({relay:{protocol:null!=c?c:"irn"},namespaces:u,controller:{publicKey:w,metadata:i.client.metadata},expiry:et(Ql)},l&&{sessionProperties:l}),d&&{scopedProperties:d}),p&&{sessionConfig:p}),{proposalRequestsResponses:f}),C=Rs,b.addTrace("subscribing_session_topic"),e.prev=41,e.next=44,i.client.core.relayer.subscribe(k,{transportType:C,internal:{skipSubscribe:!0}});case 44:e.next=49;break;case 46:throw e.prev=46,e.t3=e.catch(41),b.setError("subscribe_session_topic_failure"),e.t3;case 49:return b.addTrace("subscribe_session_topic_success"),N=hd(fd({},x),{topic:k,requiredNamespaces:m,optionalNamespaces:y,pairingTopic:v,acknowledged:!1,self:x.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:w,transportType:Rs,authentication:null==f?void 0:f.authentication,walletPayResult:null==f?void 0:f.walletPay}),e.next=53,i.client.session.set(k,N);case 53:return b.addTrace("store_session"),e.prev=54,e.next=57,i.sendApproveSession({sessionTopic:k,proposal:h,pairingProposalResponse:{relay:{protocol:null!=c?c:"irn"},responderPublicKey:w},sessionSettleRequest:x,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:fd({correlationId:s},i.getTVFApproveParams(N))}});case 57:b.addTrace("session_approve_publish_success"),e.next=67;break;case 60:return e.prev=60,e.t4=e.catch(54),i.client.logger.error(e.t4),i.client.session.delete(k,Xo("USER_DISCONNECTED")),e.next=66,i.client.core.relayer.unsubscribe(k);case 66:throw e.t4;case 67:return i.client.core.eventClient.deleteEvent({eventId:b.eventId}),e.next=70,i.client.core.pairing.updateMetadata({topic:v,metadata:g.metadata});case 70:return e.next=72,i.deleteProposal(s);case 72:return e.next=74,i.client.core.pairing.activate({topic:v});case 74:return e.next=76,i.setExpiry(k,et(Ql));case 76:return e.abrupt("return",{topic:k,acknowledged:function(){return Promise.resolve(i.client.session.get(k))}});case 77:case"end":return e.stop()}},e,null,[[1,7],[10,15],[18,23],[41,46],[54,60]])}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"reject",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.isInitialized(),e.next=3,i.confirmOnlineStateOrThrow();case 3:return e.prev=3,e.next=6,i.isValidReject(t);case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(3),i.client.logger.error("reject() -> isValidReject() failed"),e.t0;case 11:n=t.id,r=t.reason,e.prev=12,a=i.client.proposal.get(n).pairingTopic,e.next=19;break;case 16:throw e.prev=16,e.t1=e.catch(12),i.client.logger.error("reject() -> proposal.get(".concat(n,") failed")),e.t1;case 19:if(e.t2=a,!e.t2){e.next=23;break}return e.next=23,i.sendError({id:n,topic:a,error:r,rpcOpts:ed.wc_sessionPropose.reject});case 23:return e.next=25,i.deleteProposal(n);case 25:case"end":return e.stop()}},e,null,[[3,8],[12,16]])}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"update",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c,u,l,d;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.isInitialized(),e.next=3,i.confirmOnlineStateOrThrow();case 3:return e.prev=3,e.next=6,i.isValidUpdate(t);case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(3),i.client.logger.error("update() -> isValidUpdate() failed"),e.t0;case 11:return n=t.topic,r=t.namespaces,a=Je(W.FIVE_MINUTES,"Session update request expired without receiving any acknowledgement"),o=a.done,s=a.resolve,c=a.reject,u=(0,Es.payloadId)(),l=(0,Es.getBigIntRpcId)().toString(),d=i.client.session.get(n).namespaces,i.events.once(nt("session_update",u),function(e){var t=e.error;t?c(t):s()}),e.next=15,i.client.session.update(n,{namespaces:r});case 15:return e.next=17,i.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:r},throwOnFailedPublish:!0,clientRpcId:u,relayRpcId:l}).catch(function(e){i.client.logger.error(e),i.client.session.update(n,{namespaces:d}),c(e)});case 17:return e.abrupt("return",{acknowledged:o});case 18:case"end":return e.stop()}},e,null,[[3,8]])}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"extend",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.isInitialized(),e.next=3,i.confirmOnlineStateOrThrow();case 3:return e.prev=3,e.next=6,i.isValidExtend(t);case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(3),i.client.logger.error("extend() -> isValidExtend() failed"),e.t0;case 11:return n=t.topic,r=(0,Es.payloadId)(),a=Je(W.FIVE_MINUTES,"Session extend request expired without receiving any acknowledgement"),o=a.done,s=a.resolve,c=a.reject,i.events.once(nt("session_extend",r),function(e){var t=e.error;t?c(t):s()}),e.next=15,i.setExpiry(n,et(Ql));case 15:return i.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:r,throwOnFailedPublish:!0}).catch(function(e){c(e)}),e.abrupt("return",{acknowledged:o});case 17:case"end":return e.stop()}},e,null,[[3,8]])}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"request",function(){var e=(0,r.Z)(A().mark(function e(t){var n,a,o,s,c,u,l,d,p,f,h,v,g,m,y;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.isInitialized(),e.prev=1,e.next=4,i.isValidRequest(t);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),i.client.logger.error("request() -> isValidRequest() failed"),e.t0;case 9:if(n=t.chainId,a=t.request,o=t.topic,s=t.expiry,c=void 0===s?ed.wc_sessionRequest.req.ttl:s,u=i.client.session.get(o),e.t1=(null==u?void 0:u.transportType)===Rs,!e.t1){e.next=14;break}return e.next=14,i.confirmOnlineStateOrThrow();case 14:if(l=(0,Es.payloadId)(),d=(0,Es.getBigIntRpcId)().toString(),p=Je(c,"Request expired. Please try again."),f=p.done,h=p.resolve,v=p.reject,i.events.once(nt("session_request",l),function(e){var t=e.error,n=e.result;t?v(t):h(n)}),g="wc_sessionRequest",!(m=i.getAppLinkIfEnabled(u.peer.metadata,u.transportType))){e.next=24;break}return e.next=20,i.sendRequest({clientRpcId:l,relayRpcId:d,topic:o,method:g,params:{request:hd(fd({},a),{expiryTimestamp:et(c)}),chainId:n},expiry:c,throwOnFailedPublish:!0,appLink:m}).catch(function(e){return v(e)});case 20:return i.client.events.emit("session_request_sent",{topic:o,request:a,chainId:n,id:l}),e.next=23,f();case 23:case 27:return e.abrupt("return",e.sent);case 24:return y={request:hd(fd({},a),{expiryTimestamp:et(c)}),chainId:n},e.next=27,Promise.all([new Promise(function(){var e=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.sendRequest({clientRpcId:l,relayRpcId:d,topic:o,method:g,params:y,expiry:c,throwOnFailedPublish:!0,tvf:i.getTVFParams(l,y)}).catch(function(e){return v(e)});case 2:i.client.events.emit("session_request_sent",{topic:o,request:a,chainId:n,id:l}),t();case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),new Promise(function(){var e=(0,r.Z)(A().mark(function e(t){var n,r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(n=u.sessionConfig)&&n.disableDeepLink){e.next=6;break}return e.next=3,function(e,t){return st.apply(this,arguments)}(i.client.core.storage,Yl);case 3:return r=e.sent,e.next=6,function(e){return at.apply(this,arguments)}({id:l,topic:o,wcDeepLink:r});case 6:t();case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),f()]).then(function(e){return e[2]});case 28:case"end":return e.stop()}},e,null,[[1,6]])}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"respond",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c,u,l;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.isInitialized(),a=i.client.core.eventClient.createEvent({properties:{topic:(null==t?void 0:t.topic)||(null==(r=null==(n=null==t?void 0:t.response)?void 0:n.id)?void 0:r.toString()),trace:["session_request_response_started"]}}),e.prev=2,e.next=5,i.isValidRespond(t);case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(2),a.addTrace(null===e.t0||void 0===e.t0?void 0:e.t0.message),a.setError("session_request_response_validation_failure"),e.t0;case 10:if(a.addTrace("session_request_response_validation_success"),o=t.topic,s=t.response,c=s.id,u=i.client.session.get(o),e.t1=u.transportType===Rs,!e.t1){e.next=16;break}return e.next=16,i.confirmOnlineStateOrThrow();case 16:if(l=i.getAppLinkIfEnabled(u.peer.metadata,u.transportType),e.prev=17,a.addTrace("session_request_response_publish_started"),!(0,Es.isJsonRpcResult)(s)){e.next=24;break}return e.next=22,i.sendResult({id:c,topic:o,result:s.result,throwOnFailedPublish:!0,appLink:l});case 22:e.next=28;break;case 24:if(e.t2=(0,Es.isJsonRpcError)(s),!e.t2){e.next=28;break}return e.next=28,i.sendError({id:c,topic:o,error:s.error,appLink:l});case 28:i.cleanupAfterResponse(t),e.next=34;break;case 31:throw e.prev=31,e.t3=e.catch(17),a.addTrace(null===e.t3||void 0===e.t3?void 0:e.t3.message),a.setError("session_request_response_publish_failure"),e.t3;case 34:case"end":return e.stop()}},e,null,[[2,7],[17,31]])}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"ping",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c,u;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.isInitialized(),e.next=3,i.confirmOnlineStateOrThrow();case 3:return e.prev=3,e.next=6,i.isValidPing(t);case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(3),i.client.logger.error("ping() -> isValidPing() failed"),e.t0;case 11:if(n=t.topic,!i.client.session.keys.includes(n)){e.next=19;break}return r=(0,Es.payloadId)(),a=(0,Es.getBigIntRpcId)().toString(),o=Je(W.FIVE_MINUTES,"Ping request expired without receiving any acknowledgement"),s=o.done,c=o.resolve,u=o.reject,i.events.once(nt("session_ping",r),function(e){var t=e.error;t?u(t):c()}),e.next=17,Promise.all([i.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:r,relayRpcId:a}),s()]);case 17:e.next=24;break;case 19:if(e.t1=i.client.core.pairing.pairings.keys.includes(n),!e.t1){e.next=24;break}return i.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),e.next=24,i.client.core.pairing.ping({topic:n});case 24:case"end":return e.stop()}},e,null,[[3,8]])}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"emit",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.isInitialized(),e.next=3,i.confirmOnlineStateOrThrow();case 3:return e.next=5,i.isValidEmit(t);case 5:return n=t.topic,r=t.event,a=t.chainId,o=(0,Es.getBigIntRpcId)().toString(),s=(0,Es.payloadId)(),e.next=8,i.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:r,chainId:a},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:s});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"disconnect",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.isInitialized(),e.next=3,i.confirmOnlineStateOrThrow();case 3:return e.next=5,i.isValidDisconnect(t);case 5:if(n=t.topic,!i.client.session.keys.includes(n)){e.next=13;break}return e.next=9,i.sendRequest({topic:n,method:"wc_sessionDelete",params:Xo("USER_DISCONNECTED"),throwOnFailedPublish:!0});case 9:return e.next=11,i.deleteSession({topic:n,emitEvent:!1});case 11:e.next=18;break;case 13:if(i.client.core.pairing.pairings.keys.includes(n)){e.next=16;break}throw r=Yo("MISMATCHED_TOPIC","Session or pairing topic not found: ".concat(n)),a=r.message,new Error(a);case 16:return e.next=18,i.client.core.pairing.disconnect({topic:n});case 18:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"find",function(e){return a.isInitialized(),a.client.session.getAll().filter(function(t){return function(e,t){var n=t.requiredNamespaces,r=Object.keys(e.namespaces),a=Object.keys(n),i=!0;return!!ze(a,r)&&(r.forEach(function(t){var r=e.namespaces[t],a=r.accounts,o=r.methods,s=r.events,c=Zo(a),u=n[t];ze(Se(t,u),c)&&ze(u.methods,o)&&ze(u.events,s)||(i=!1)}),i)}(t,e)})}),vd(S(a),"getPendingSessionRequests",function(){return a.client.pendingRequest.getAll()}),vd(S(a),"authenticate",function(){var e=(0,r.Z)(A().mark(function e(t,n){var a,o,s,c,u,l,d,p,f,h,v,g,m,y,b,w,E,C,N,I,_,S,T,O,R,P,U,D,L,B,j,F,W,q,Z,H,K,V,z;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.isInitialized(),i.isValidAuthenticate(t),s=n&&i.client.core.linkModeSupportedApps.includes(n)&&(null==(o=i.client.metadata.redirect)?void 0:o.linkMode),c=s?Os:Rs,e.t0=c===Rs,!e.t0){e.next=6;break}return e.next=6,i.confirmOnlineStateOrThrow();case 6:return u=t.chains,l=t.statement,d=void 0===l?"":l,p=t.uri,f=t.domain,h=t.nonce,v=t.type,g=t.exp,m=t.nbf,y=t.methods,b=void 0===y?[]:y,w=t.expiry,E=x(t.resources||[]),e.next=21,i.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:c});case 21:return C=e.sent,N=C.topic,I=C.uri,i.client.logger.info({message:"Generated new pairing",pairing:{topic:N,uri:I}}),e.next=27,i.client.core.crypto.generateKeyPair();case 27:return _=e.sent,S=so(_),e.next=31,Promise.all([i.client.auth.authKeys.set(id,{responseTopic:S,publicKey:_}),i.client.auth.pairingTopics.set(S,{topic:S,pairingTopic:N})]);case 31:return e.next=33,i.client.core.relayer.subscribe(S,{transportType:c});case 33:if(i.client.logger.info("sending request to new pairing topic: ".concat(N)),!(b.length>0)){e.next=38;break}T=_e(u[0]),O=T.namespace,R=function(e,t,n){var r=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return null!=n&&n.sort(function(e,t){return e.localeCompare(t)}),{att:k({},e,Ur(t,n,r))}}(e,"request",n);return Mr(r)}(O,0,b),Fr(E)&&(R=Lr(R,E.pop())),E.push(R);case 38:if(P=w&&w>ed.wc_sessionAuthenticate.req.ttl?w:ed.wc_sessionAuthenticate.req.ttl,U={authPayload:{type:null!=v?v:"caip122",chains:u,statement:d,aud:p,domain:f,version:"1",nonce:h,iat:(new Date).toISOString(),exp:g,nbf:m,resources:E},requester:{publicKey:_,metadata:i.client.metadata},expiryTimestamp:et(P)},D={requiredNamespaces:{},optionalNamespaces:{eip155:{chains:u,methods:x(new Set(["personal_sign"].concat(x(b)))),events:["chainChanged","accountsChanged"]}},relays:[{protocol:"irn"}],pairingTopic:N,proposer:{publicKey:_,metadata:i.client.metadata},expiryTimestamp:et(ed.wc_sessionPropose.req.ttl),id:(0,Es.payloadId)()},L=Je(P,"Request expired"),B=L.done,j=L.resolve,F=L.reject,W=(0,Es.payloadId)(),q=nt("session_connect",D.id),Z=nt("session_request",W),H=function(){var e=(0,r.Z)(function(e){var t=e.error,n=e.session;return A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i.events.off(Z,K),t?F(t):n&&j({session:n});case 1:case"end":return e.stop()}},e)})()});return function(t){return e.apply(this,arguments)}}(),K=function(){var e=(0,r.Z)(A().mark(function e(t){var r,a,o,s,u,l,d,p,f,h,v,g,m,y,b,w,E,k,C,I,S,T;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.deletePendingAuthRequest(W,{message:"fulfilled",code:0});case 2:if(!t.error){e.next=5;break}return s=Xo("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate"),e.abrupt("return",t.error.code===s.code?void 0:(i.events.off(q,H),F(t.error.message)));case 5:return e.next=7,i.deleteProposal(D.id);case 7:i.events.off(q,H),u=t.result,l=u.cacaos,d=u.responder,p=[],f=[],h=M(l),e.prev=10,h.s();case 12:if((v=h.n()).done){e.next=24;break}return s=v.value,e.next=16,Tr({cacao:s,projectId:i.client.core.projectId});case 16:if(e.t0=e.sent,e.t0){e.next=19;break}i.client.logger.error(s,"Signature verification failed"),F(Xo("SESSION_SETTLEMENT_FAILED","Signature verification failed"));case 19:for(g=s.p,m=Fr(g.resources),y=[_r(g.iss)],b=Sr(g.iss),m&&(w=Br(m),E=jr(m),p.push.apply(p,x(w)),y.push.apply(y,x(E))),k=0,C=y;k<C.length;k++)I=C[k],f.push("".concat(I,":").concat(b));case 22:e.next=12;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(10),h.e(e.t1);case 29:return e.prev=29,h.f(),e.finish(29);case 32:return e.next=34,i.client.core.crypto.generateSharedKey(_,d.publicKey);case 34:if(S=e.sent,e.t2=p.length>0,!e.t2){e.next=47;break}return T={topic:S,acknowledged:!0,self:{publicKey:_,metadata:i.client.metadata},peer:d,controller:d.publicKey,expiry:et(Ql),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:N,namespaces:Go(x(new Set(p)),x(new Set(f))),transportType:c},e.next=40,i.client.core.relayer.subscribe(S,{transportType:c});case 40:return e.next=42,i.client.session.set(S,T);case 42:if(e.t3=N,!e.t3){e.next=46;break}return e.next=46,i.client.core.pairing.updateMetadata({topic:N,metadata:d.metadata});case 46:T=i.client.session.get(S);case 47:null!=(r=i.client.metadata.redirect)&&r.linkMode&&null!=(a=d.metadata.redirect)&&a.linkMode&&null!=(o=d.metadata.redirect)&&o.universal&&n&&(i.client.core.addLinkModeSupportedApp(d.metadata.redirect.universal),i.client.session.update(S,{transportType:Os})),j({auths:l,session:T});case 49:case"end":return e.stop()}},e,null,[[10,26,29,32]])}));return function(t){return e.apply(this,arguments)}}(),i.events.once(q,H),i.events.once(Z,K),e.prev=40,!s){e.next=50;break}return z=(0,Es.formatJsonRpcRequest)("wc_sessionAuthenticate",U,W),i.client.core.history.set(N,z),e.next=46,i.client.core.crypto.encode("",z,{type:2,encoding:ao});case 46:R=e.sent,V=Po(n,N,R),e.next=52;break;case 50:return e.next=52,Promise.all([i.sendRequest({topic:N,method:"wc_sessionAuthenticate",params:U,expiry:t.expiry,throwOnFailedPublish:!0,clientRpcId:W}),i.sendRequest({topic:N,method:"wc_sessionPropose",params:D,expiry:ed.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:D.id})]);case 52:e.next=57;break;case 54:throw e.prev=54,e.t1=e.catch(40),i.events.off(q,H),i.events.off(Z,K),e.t1;case 57:return e.next=59,i.setProposal(D.id,D);case 59:return e.next=61,i.setAuthRequest(W,{request:hd(fd({},U),{verifyContext:{}}),pairingTopic:N,transportType:c});case 61:return e.abrupt("return",{uri:null!==(a=V)&&void 0!==a?a:I,response:B});case 62:case"end":return e.stop()}},e,null,[[40,54]])}));return function(t,n){return e.apply(this,arguments)}}()),vd(S(a),"approveSessionAuthenticate",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c,u,l,d,p,f,h,v,g,m,y,b,w,E,k,C,N,I,_,S,T;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.id,r=t.auths,a=i.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:["authenticated_session_approve_started"]}}),e.prev=1,i.isInitialized(),e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(1),a.setError("no_internet_connection"),e.t0;case 8:if(o=i.getPendingAuthRequest(n)){e.next=11;break}throw a.setError("authenticated_session_pending_request_not_found"),new Error("Could not find pending auth request with id ".concat(n));case 11:if(s=o.transportType||Rs,e.t1=s===Rs,!e.t1){e.next=16;break}return e.next=16,i.confirmOnlineStateOrThrow();case 16:return c=o.requester.publicKey,e.next=19,i.client.core.crypto.generateKeyPair();case 19:u=e.sent,l=so(c),d={type:1,receiverPublicKey:c,senderPublicKey:u},p=[],f=[],h=M(r),e.prev=25,h.s();case 27:if((v=h.n()).done){e.next=43;break}return g=v.value,e.next=31,Tr({cacao:g,projectId:i.client.core.projectId});case 31:if(e.sent){e.next=37;break}return a.setError("invalid_cacao"),m=Xo("SESSION_SETTLEMENT_FAILED","Signature verification failed"),e.next=36,i.sendError({id:n,topic:l,error:m,encodeOpts:d});case 36:throw new Error(m.message);case 37:for(a.addTrace("cacaos_verified"),y=g.p,b=Fr(y.resources),w=[_r(y.iss)],E=Sr(y.iss),b&&(k=Br(b),C=jr(b),p.push.apply(p,x(k)),w.push.apply(w,x(C))),N=0,I=w;N<I.length;N++)_=I[N],f.push("".concat(_,":").concat(E));case 41:e.next=27;break;case 43:e.next=48;break;case 45:e.prev=45,e.t2=e.catch(25),h.e(e.t2);case 48:return e.prev=48,h.f(),e.finish(48);case 51:return e.next=53,i.client.core.crypto.generateSharedKey(u,c);case 53:if(S=e.sent,a.addTrace("create_authenticated_session_topic"),!((null==p?void 0:p.length)>0)){e.next=70;break}return T={topic:S,acknowledged:!0,self:{publicKey:u,metadata:i.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:et(Ql),authentication:r,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:Go(x(new Set(p)),x(new Set(f))),transportType:s},a.addTrace("subscribing_authenticated_session_topic"),e.prev=56,e.next=59,i.client.core.relayer.subscribe(S,{transportType:s});case 59:e.next=64;break;case 61:throw e.prev=61,e.t3=e.catch(56),a.setError("subscribe_authenticated_session_topic_failure"),e.t3;case 64:return a.addTrace("subscribe_authenticated_session_topic_success"),e.next=67,i.client.session.set(S,T);case 67:return a.addTrace("store_authenticated_session"),e.next=70,i.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata});case 70:return a.addTrace("publishing_authenticated_session_approve"),e.prev=71,e.next=74,i.sendResult({topic:l,id:n,result:{cacaos:r,responder:{publicKey:u,metadata:i.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:i.getAppLinkIfEnabled(o.requester.metadata,s)});case 74:e.next=79;break;case 76:throw e.prev=76,e.t4=e.catch(71),a.setError("authenticated_session_approve_publish_failure"),e.t4;case 79:return e.next=81,i.client.auth.requests.delete(n,{message:"fulfilled",code:0});case 81:return e.next=83,i.client.core.pairing.activate({topic:o.pairingTopic});case 83:return i.client.core.eventClient.deleteEvent({eventId:a.eventId}),e.abrupt("return",{session:T});case 85:case"end":return e.stop()}},e,null,[[1,5],[25,45,48,51],[56,61],[71,76]])}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"rejectSessionAuthenticate",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c,u;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.isInitialized(),n=t.id,r=t.reason,a=i.getPendingAuthRequest(n)){e.next=4;break}throw new Error("Could not find pending auth request with id ".concat(n));case 4:if(e.t0=a.transportType===Rs,!e.t0){e.next=8;break}return e.next=8,i.confirmOnlineStateOrThrow();case 8:return o=a.requester.publicKey,e.next=11,i.client.core.crypto.generateKeyPair();case 11:return s=e.sent,c=so(o),u={type:1,receiverPublicKey:o,senderPublicKey:s},e.next=16,i.sendError({id:n,topic:c,error:r,encodeOpts:u,rpcOpts:ed.wc_sessionAuthenticate.reject,appLink:i.getAppLinkIfEnabled(a.requester.metadata,a.transportType)});case 16:return e.next=18,i.client.auth.requests.delete(n,{message:"rejected",code:0});case 18:return e.next=20,i.deleteProposal(n);case 20:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"formatAuthMessage",function(e){a.isInitialized();var t=e.request,n=e.iss;return Rr(t,n)}),vd(S(a),"processRelayMessageCache",function(){setTimeout((0,r.Z)(A().mark(function e(){var t;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===i.relayMessageCache.length){e.next=15;break}case 1:if(!(i.relayMessageCache.length>0)){e.next=15;break}if(e.prev=2,t=i.relayMessageCache.shift(),e.t0=t,!e.t0){e.next=8;break}return e.next=8,i.onRelayMessage(t);case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(2),i.client.logger.error(e.t1);case 13:e.next=1;break;case 15:case"end":return e.stop()}},e,null,[[2,10]])})),50)}),vd(S(a),"cleanupDuplicatePairings",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.pairingTopic){e.next=14;break}if(e.prev=1,n=i.client.core.pairing.pairings.get(t.pairingTopic),0!==(r=i.client.core.pairing.pairings.getAll().filter(function(e){var r,a;return(null==(r=e.peerMetadata)?void 0:r.url)&&(null==(a=e.peerMetadata)?void 0:a.url)===t.peer.metadata.url&&e.topic&&e.topic!==n.topic})).length){e.next=5;break}return e.abrupt("return");case 5:return i.client.logger.info("Cleaning up ".concat(r.length," duplicate pairing(s)")),e.next=8,Promise.all(r.map(function(e){return i.client.core.pairing.disconnect({topic:e.topic})}));case 8:i.client.logger.info("Duplicate pairings clean up finished"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),i.client.logger.error(e.t0);case 14:case"end":return e.stop()}},e,null,[[1,11]])}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"deleteSession",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c,u,l,d,p;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.topic,a=t.expirerHasDeleted,o=void 0!==a&&a,s=t.emitEvent,c=void 0===s||s,u=t.id,l=void 0===u?0:u,d=i.client.session.get(r),p=d.self,e.next=3,i.client.core.relayer.unsubscribe(r);case 3:return e.next=5,i.client.session.delete(r,Xo("USER_DISCONNECTED"));case 5:if(i.addToRecentlyDeleted(r,"session"),e.t0=i.client.core.crypto.keychain.has(p.publicKey),!e.t0){e.next=10;break}return e.next=10,i.client.core.crypto.deleteKeyPair(p.publicKey);case 10:if(e.t1=i.client.core.crypto.keychain.has(r),!e.t1){e.next=14;break}return e.next=14,i.client.core.crypto.deleteSymKey(r);case 14:return o||i.client.core.expirer.del(r),i.client.core.storage.removeItem(Yl).catch(function(e){return i.client.logger.warn(e)}),r===(null==(n=i.sessionRequestQueue.queue[0])?void 0:n.topic)&&(i.sessionRequestQueue.state="IDLE"),e.next=19,Promise.all(i.getPendingSessionRequests().filter(function(e){return e.topic===r}).map(function(e){return i.deletePendingSessionRequest(e.id,Xo("USER_DISCONNECTED"))}));case 19:c&&i.client.events.emit("session_delete",{id:l,topic:r});case 20:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"deleteProposal",function(){var e=(0,r.Z)(A().mark(function e(t,n){var r,a;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n)try{a=i.client.proposal.get(t),null===(r=i.client.core.eventClient.getEvent({topic:a.pairingTopic}))||void 0===r||r.setError("proposal_expired")}catch(o){}return e.next=3,Promise.all([i.client.proposal.delete(t,Xo("USER_DISCONNECTED")),n?Promise.resolve():i.client.core.expirer.del(t)]);case 3:i.addToRecentlyDeleted(t,"proposal");case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),vd(S(a),"deletePendingSessionRequest",function(){var e=(0,r.Z)(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return A().mark(function r(){return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.all([i.client.pendingRequest.delete(e,t),n?Promise.resolve():i.client.core.expirer.del(e)]);case 2:i.addToRecentlyDeleted(e,"request"),i.sessionRequestQueue.queue=i.sessionRequestQueue.queue.filter(function(t){return t.id!==e}),n&&(i.sessionRequestQueue.state="IDLE",i.client.events.emit("session_request_expire",{id:e}));case 5:case"end":return r.stop()}},r)})()});return function(t,n){return e.apply(this,arguments)}}()),vd(S(a),"deletePendingAuthRequest",function(){var e=(0,r.Z)(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return A().mark(function r(){return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.all([i.client.auth.requests.delete(e,t),n?Promise.resolve():i.client.core.expirer.del(e)]);case 2:case"end":return r.stop()}},r)})()});return function(t,n){return e.apply(this,arguments)}}()),vd(S(a),"setExpiry",function(){var e=(0,r.Z)(A().mark(function e(t,n){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.client.session.keys.includes(t),!e.t0){e.next=5;break}return i.client.core.expirer.set(t,n),e.next=5,i.client.session.update(t,{expiry:n});case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),vd(S(a),"setProposal",function(){var e=(0,r.Z)(A().mark(function e(t,n){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.client.core.expirer.set(t,et(ed.wc_sessionPropose.req.ttl)),e.next=3,i.client.proposal.set(t,n);case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),vd(S(a),"setAuthRequest",function(){var e=(0,r.Z)(A().mark(function e(t,n){var r,a,o,s;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.request,a=n.pairingTopic,o=n.transportType,s=void 0===o?Rs:o,i.client.core.expirer.set(t,r.expiryTimestamp),e.next=4,i.client.auth.requests.set(t,{authPayload:r.authPayload,requester:r.requester,expiryTimestamp:r.expiryTimestamp,id:t,pairingTopic:a,verifyContext:r.verifyContext,transportType:s});case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),vd(S(a),"setPendingSessionRequest",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.topic,a=t.params,o=t.verifyContext,s=a.request.expiryTimestamp||et(ed.wc_sessionRequest.req.ttl),i.client.core.expirer.set(n,s),e.next=4,i.client.pendingRequest.set(n,{id:n,topic:r,params:a,verifyContext:o});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"sendRequest",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c,u,l,d,p,f,h,v,g,m,y,b,w,E,k;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.topic,r=t.method,a=t.params,o=t.expiry,s=t.relayRpcId,c=t.clientRpcId,u=t.throwOnFailedPublish,l=t.appLink,d=t.tvf,p=t.publishOpts,f=void 0===p?{}:p,h=(0,Es.formatJsonRpcRequest)(r,a,c),g=!!l,e.prev=2,m=g?ao:ro,e.next=6,i.client.core.crypto.encode(n,h,{encoding:m});case 6:v=e.sent,e.next=15;break;case 9:return e.prev=9,e.t0=e.catch(2),e.next=13,i.cleanup();case 13:throw i.client.logger.error("sendRequest() -> core.crypto.encode() for topic ".concat(n," failed")),e.t0;case 15:if(!rd.includes(r)){e.next=20;break}return b=co(JSON.stringify(h)),w=co(v),e.next=19,i.client.core.verify.register({id:w,decryptedId:b});case 19:y=e.sent;case 20:if((E=fd(fd({},ed[r].req),f)).attestation=y,o&&(E.ttl=o),s&&(E.id=s),i.client.core.history.set(n,h),!g){e.next=27;break}return k=Po(l,n,v),e.next=25,global.Linking.openURL(k,i.client.name);case 25:e.next=35;break;case 27:if(E.tvf=hd(fd({},d),{correlationId:h.id}),!u){e.next=34;break}return E.internal=hd(fd({},E.internal),{throwOnFailedPublish:!0}),e.next=32,i.client.core.relayer.publish(n,v,E);case 32:e.next=35;break;case 34:i.client.core.relayer.publish(n,v,E).catch(function(e){return i.client.logger.error(e)});case 35:return e.abrupt("return",h.id);case 36:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"sendProposeSession",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c,u;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.proposal,r=t.publishOpts,a=(0,Es.formatJsonRpcRequest)("wc_sessionPropose",n,n.id),i.client.core.history.set(n.pairingTopic,a),e.next=4,i.client.core.crypto.encode(n.pairingTopic,a,{encoding:ro});case 4:return o=e.sent,s=co(JSON.stringify(a)),c=co(o),e.next=9,i.client.core.verify.register({id:c,decryptedId:s});case 9:return u=e.sent,e.next=12,i.client.core.relayer.publishCustom({payload:{pairingTopic:n.pairingTopic,sessionProposal:o},opts:hd(fd({},r),{publishMethod:"wc_proposeSession",attestation:u})});case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"sendApproveSession",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c,u,l,d;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.sessionTopic,r=t.pairingProposalResponse,a=t.proposal,o=t.sessionSettleRequest,s=t.publishOpts,c=(0,Es.formatJsonRpcResult)(a.id,r),e.next=8,i.client.core.crypto.encode(a.pairingTopic,c,{encoding:ro});case 8:return u=e.sent,l=(0,Es.formatJsonRpcRequest)("wc_sessionSettle",o,null==s?void 0:s.id),e.next=12,i.client.core.crypto.encode(n,l,{encoding:ro});case 12:return d=e.sent,i.client.core.history.set(n,l),e.next=16,i.client.core.relayer.publishCustom({payload:{sessionTopic:n,pairingTopic:a.pairingTopic,sessionProposalResponse:u,sessionSettlementRequest:d},opts:hd(fd({},s),{publishMethod:"wc_approveSession"})});case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"sendResult",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c,u,l,d,p,f,h,v,g,m;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.topic,a=t.result,o=t.throwOnFailedPublish,s=t.encodeOpts,c=t.appLink,u=(0,Es.formatJsonRpcResult)(n,a),d=c&&typeof(null==global?void 0:global.Linking)<"u",e.prev=2,p=d?ao:ro,e.next=6,i.client.core.crypto.encode(r,u,hd(fd({},s||{}),{encoding:p}));case 6:l=e.sent,e.next=15;break;case 9:return e.prev=9,e.t0=e.catch(2),e.next=13,i.cleanup();case 13:throw i.client.logger.error("sendResult() -> core.crypto.encode() for topic ".concat(r," failed")),e.t0;case 15:return e.prev=15,e.next=18,i.client.core.history.get(r,n);case 18:f=e.sent,v=f.request;try{h=i.getTVFParams(n,v.params,a)}catch(y){i.client.logger.warn("sendResult() -> getTVFParams() failed: ".concat(null==y?void 0:y.message))}e.next=26;break;case 23:throw e.prev=23,e.t1=e.catch(15),i.client.logger.error("sendResult() -> history.get(".concat(r,", ").concat(n,") failed")),e.t1;case 26:if(!d){e.next=32;break}return g=Po(c,r,l),e.next=30,global.Linking.openURL(g,i.client.name);case 30:e.next=41;break;case 32:if((m=ed[f.request.method].res).tvf=hd(fd({},h),{correlationId:n}),!o){e.next=40;break}return m.internal=hd(fd({},m.internal),{throwOnFailedPublish:!0}),e.next=38,i.client.core.relayer.publish(r,l,m);case 38:e.next=41;break;case 40:i.client.core.relayer.publish(r,l,m).catch(function(e){return i.client.logger.error(e)});case 41:return e.next=43,i.client.core.history.resolve(u);case 43:case"end":return e.stop()}},e,null,[[2,9],[15,23]])}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"sendError",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c,u,l,d,p,f,h,v;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.topic,a=t.error,o=t.encodeOpts,s=t.rpcOpts,c=t.appLink,u=(0,Es.formatJsonRpcError)(n,a),d=c&&typeof(null==global?void 0:global.Linking)<"u",e.prev=2,p=d?ao:ro,e.next=6,i.client.core.crypto.encode(r,u,hd(fd({},o||{}),{encoding:p}));case 6:l=e.sent,e.next=15;break;case 9:return e.prev=9,e.t0=e.catch(2),e.next=13,i.cleanup();case 13:throw i.client.logger.error("sendError() -> core.crypto.encode() for topic ".concat(r," failed")),e.t0;case 15:return e.prev=15,e.next=18,i.client.core.history.get(r,n);case 18:f=e.sent,e.next=24;break;case 21:throw e.prev=21,e.t1=e.catch(15),i.client.logger.error("sendError() -> history.get(".concat(r,", ").concat(n,") failed")),e.t1;case 24:if(!d){e.next=30;break}return h=Po(c,r,l),e.next=28,global.Linking.openURL(h,i.client.name);case 28:e.next=32;break;case 30:v=f.request.method,i.client.core.relayer.publish(r,l,s||ed[v].res);case 32:return e.next=34,i.client.core.history.resolve(u);case 34:case"end":return e.stop()}},e,null,[[2,9],[15,21]])}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"cleanup",(0,r.Z)(A().mark(function e(){var t,n;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],i.client.session.getAll().forEach(function(e){var n=!1;tt(e.expiry)&&(n=!0),i.client.core.crypto.keychain.has(e.topic)||(n=!0),n&&t.push(e.topic)}),i.client.proposal.getAll().forEach(function(e){tt(e.expiryTimestamp)&&n.push(e.id)}),e.next=5,Promise.all([].concat(x(t.map(function(e){return i.deleteSession({topic:e})})),x(n.map(function(e){return i.deleteProposal(e)}))));case 5:case"end":return e.stop()}},e)}))),vd(S(a),"onProviderMessageEvent",function(){var e=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.initialized&&!(i.relayMessageCache.length>0)){e.next=4;break}i.relayMessageCache.push(t),e.next=6;break;case 4:return e.next=6,i.onRelayMessage(t);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"onRelayEventRequest",function(){var e=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.requestQueue.queue.push(t),e.next=3,i.processRequestsQueue();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"processRequestsQueue",(0,r.Z)(A().mark(function e(){var t;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("ACTIVE"===i.requestQueue.state){e.next=19;break}i.client.logger.info("Request queue starting with ".concat(i.requestQueue.queue.length," requests"));case 2:if(!(i.requestQueue.queue.length>0)){e.next=16;break}if(i.requestQueue.state="ACTIVE",!(t=i.requestQueue.queue.shift())){e.next=14;break}return e.prev=6,e.next=9,i.processRequest(t);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),i.client.logger.warn(e.t0);case 14:e.next=2;break;case 16:i.requestQueue.state="IDLE",e.next=20;break;case 19:i.client.logger.info("Request queue already active, skipping...");case 20:case"end":return e.stop()}},e,null,[[6,11]])}))),vd(S(a),"processRequest",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.topic,r=t.payload,a=t.attestation,o=t.transportType,s=t.encryptedId,c=r.method,i.shouldIgnorePairingRequest({topic:n,requestMethod:c})){e.next=33;break}e.t0=c,e.next="wc_sessionPropose"===e.t0?5:"wc_sessionSettle"===e.t0?8:"wc_sessionUpdate"===e.t0?11:"wc_sessionExtend"===e.t0?14:"wc_sessionPing"===e.t0?17:"wc_sessionDelete"===e.t0?20:"wc_sessionRequest"===e.t0?23:"wc_sessionEvent"===e.t0?26:"wc_sessionAuthenticate"===e.t0?29:32;break;case 5:return e.next=7,i.onSessionProposeRequest({topic:n,payload:r,attestation:a,encryptedId:s});case 7:case 10:case 13:case 16:case 19:case 22:case 25:case 28:case 31:return e.abrupt("return",e.sent);case 8:return e.next=10,i.onSessionSettleRequest(n,r);case 11:return e.next=13,i.onSessionUpdateRequest(n,r);case 14:return e.next=16,i.onSessionExtendRequest(n,r);case 17:return e.next=19,i.onSessionPingRequest(n,r);case 20:return e.next=22,i.onSessionDeleteRequest(n,r);case 23:return e.next=25,i.onSessionRequest({topic:n,payload:r,attestation:a,encryptedId:s,transportType:o});case 26:return e.next=28,i.onSessionEventRequest(n,r);case 29:return e.next=31,i.onSessionAuthenticateRequest({topic:n,payload:r,attestation:a,encryptedId:s,transportType:o});case 32:return e.abrupt("return",i.client.logger.info("Unsupported request method ".concat(c)));case 33:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"onRelayEventResponse",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.topic,r=t.payload,a=t.transportType,e.next=5,i.client.core.history.get(n,r.id);case 5:o=e.sent.request.method,e.t0=o,e.next="wc_sessionPropose"===e.t0?9:"wc_sessionSettle"===e.t0?10:"wc_sessionUpdate"===e.t0?11:"wc_sessionExtend"===e.t0?12:"wc_sessionPing"===e.t0?13:"wc_sessionRequest"===e.t0?14:"wc_sessionAuthenticate"===e.t0?15:16;break;case 9:return e.abrupt("return",i.onSessionProposeResponse(n,r,a));case 10:return e.abrupt("return",i.onSessionSettleResponse(n,r));case 11:return e.abrupt("return",i.onSessionUpdateResponse(n,r));case 12:return e.abrupt("return",i.onSessionExtendResponse(n,r));case 13:return e.abrupt("return",i.onSessionPingResponse(n,r));case 14:return e.abrupt("return",i.onSessionRequestResponse(n,r));case 15:return e.abrupt("return",i.onSessionAuthenticateResponse(n,r));case 16:return e.abrupt("return",i.client.logger.info("Unsupported response method ".concat(o)));case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"onRelayEventUnknownPayload",function(e){var t=e.topic,n=Yo("MISSING_OR_INVALID","Decoded payload on topic ".concat(t," is not identifiable as a JSON-RPC request or a response.")).message;throw new Error(n)}),vd(S(a),"shouldIgnorePairingRequest",function(e){var t=e.topic,n=e.requestMethod,r=a.expectedPairingMethodMap.get(t);return!(!r||r.includes(n)||!(r.includes("wc_sessionAuthenticate")&&a.client.events.listenerCount("session_authenticate")>0))}),vd(S(a),"onSessionProposeRequest",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c,u,l,d,p;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.topic,r=t.payload,a=t.attestation,o=t.encryptedId,s=r.params,c=r.id,e.prev=1,u=i.client.core.eventClient.getEvent({topic:n}),0===i.client.events.listenerCount("session_proposal")&&(console.warn("No listener for session_proposal event"),null!=u&&u.setError("proposal_listener_not_found")),i.isValidConnect(fd({},r.params)),l=s.expiryTimestamp||et(ed.wc_sessionPropose.req.ttl),d=fd({id:c,pairingTopic:n,expiryTimestamp:l,attestation:a,encryptedId:o},s),e.next=7,i.setProposal(c,d);case 7:return e.next=9,i.getVerifyContext({attestationId:a,hash:co(JSON.stringify(r)),encryptedId:o,metadata:d.proposer.metadata});case 9:p=e.sent,null!=u&&u.addTrace("emit_session_proposal"),i.client.events.emit("session_proposal",{id:c,params:d,verifyContext:p}),e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(1),e.next=17,i.sendError({id:c,topic:n,error:e.t0,rpcOpts:ed.wc_sessionPropose.autoReject});case 17:i.client.logger.error(e.t0);case 18:case"end":return e.stop()}},e,null,[[1,13]])}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"onSessionProposeResponse",function(){var e=(0,r.Z)(A().mark(function e(t,n,r){var a,o,s,c,u,l,d,p;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.id,!(0,Es.isJsonRpcResult)(n)){e.next=22;break}return o=n.result,i.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o}),s=i.client.proposal.get(a),i.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:s}),c=s.proposer.publicKey,i.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c}),u=o.responderPublicKey,i.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:u}),e.next=12,i.client.core.crypto.generateSharedKey(c,u);case 12:return l=e.sent,i.pendingSessions.set(a,{sessionTopic:l,pairingTopic:t,proposalId:a,publicKey:c}),e.next=16,i.client.core.relayer.subscribe(l,{transportType:r});case 16:return d=e.sent,i.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),e.next=20,i.client.core.pairing.activate({topic:t});case 20:e.next=29;break;case 22:if(!(0,Es.isJsonRpcError)(n)){e.next=29;break}return e.next=25,i.deleteProposal(a);case 25:if(p=nt("session_connect",a),0!==i.events.listenerCount(p)){e.next=28;break}throw new Error("emitting ".concat(p," without any listeners, 954"));case 28:i.events.emit(p,{error:n.error});case 29:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()),vd(S(a),"onSessionSettleRequest",function(){var e=(0,r.Z)(A().mark(function e(t,n){var r,a,o,s,c,u,l,d,p,f,h,v,g,m;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.id,a=n.params,e.prev=1,i.isValidSessionSettleRequest(a),o=n.params,s=o.relay,c=o.controller,u=o.expiry,l=o.namespaces,d=o.sessionProperties,p=o.scopedProperties,f=o.sessionConfig,h=o.proposalRequestsResponses,v=x(i.pendingSessions.values()).find(function(e){return e.sessionTopic===t})){e.next=6;break}return e.abrupt("return",i.client.logger.error("Pending session not found for topic ".concat(t)));case 6:return g=i.client.proposal.get(v.proposalId),m=hd(fd(fd(fd({topic:t,relay:s,expiry:u,namespaces:l,acknowledged:!0,pairingTopic:v.pairingTopic,requiredNamespaces:g.requiredNamespaces,optionalNamespaces:g.optionalNamespaces,controller:c.publicKey,self:{publicKey:v.publicKey,metadata:i.client.metadata},peer:{publicKey:c.publicKey,metadata:c.metadata}},d&&{sessionProperties:d}),p&&{scopedProperties:p}),f&&{sessionConfig:f}),{transportType:Rs,authentication:null==h?void 0:h.authentication,walletPayResult:null==h?void 0:h.walletPay}),e.next=9,i.client.session.set(m.topic,m);case 9:return e.next=11,i.setExpiry(m.topic,m.expiry);case 11:return e.next=13,i.client.core.pairing.updateMetadata({topic:v.pairingTopic,metadata:m.peer.metadata});case 13:return i.pendingSessions.delete(v.proposalId),i.deleteProposal(v.proposalId,!1),i.cleanupDuplicatePairings(m),e.next=18,i.sendResult({id:n.id,topic:t,throwOnFailedPublish:!0,result:!0});case 18:i.client.events.emit("session_connect",{session:m}),i.events.emit(nt("session_connect",v.proposalId),{session:m}),e.next=27;break;case 22:return e.prev=22,e.t0=e.catch(1),e.next=26,i.sendError({id:r,topic:t,error:e.t0});case 26:i.client.logger.error(e.t0);case 27:case"end":return e.stop()}},e,null,[[1,22]])}));return function(t,n){return e.apply(this,arguments)}}()),vd(S(a),"onSessionSettleResponse",function(){var e=(0,r.Z)(A().mark(function e(t,n){var r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.id,!(0,Es.isJsonRpcResult)(n)){e.next=7;break}return e.next=4,i.client.session.update(t,{acknowledged:!0});case 4:i.events.emit(nt("session_approve",r),{}),e.next=12;break;case 7:if(e.t0=(0,Es.isJsonRpcError)(n),!e.t0){e.next=12;break}return e.next=11,i.client.session.delete(t,Xo("USER_DISCONNECTED"));case 11:i.events.emit(nt("session_approve",r),{error:n.error});case 12:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),vd(S(a),"onSessionUpdateRequest",function(){var e=(0,r.Z)(A().mark(function e(t,n){var r,a,o,s;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.params,a=n.id,e.prev=1,o="".concat(t,"_session_update"),!(s=gs.get(o))||!i.isRequestOutOfSync(s,a)){e.next=5;break}return e.abrupt("return",(i.client.logger.warn("Discarding out of sync request - ".concat(a)),void i.sendError({id:a,topic:t,error:Xo("INVALID_UPDATE_REQUEST")})));case 5:return i.isValidUpdate(fd({topic:t},r)),e.prev=6,gs.set(o,a),e.next=10,i.client.session.update(t,{namespaces:r.namespaces});case 10:return e.next=12,i.sendResult({id:a,topic:t,result:!0});case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(6),gs.delete(o),e.t0;case 17:i.client.events.emit("session_update",{id:a,topic:t,params:r}),e.next=25;break;case 20:return e.prev=20,e.t1=e.catch(1),e.next=24,i.sendError({id:a,topic:t,error:e.t1});case 24:i.client.logger.error(e.t1);case 25:case"end":return e.stop()}},e,null,[[1,20],[6,14]])}));return function(t,n){return e.apply(this,arguments)}}()),vd(S(a),"isRequestOutOfSync",function(e,t){return t.toString().slice(0,-3)<e.toString().slice(0,-3)}),vd(S(a),"onSessionUpdateResponse",function(e,t){var n=t.id,r=nt("session_update",n);if(0===a.events.listenerCount(r))throw new Error("emitting ".concat(r," without any listeners"));(0,Es.isJsonRpcResult)(t)?a.events.emit(nt("session_update",n),{}):(0,Es.isJsonRpcError)(t)&&a.events.emit(nt("session_update",n),{error:t.error})}),vd(S(a),"onSessionExtendRequest",function(){var e=(0,r.Z)(A().mark(function e(t,n){var r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,e.prev=1,i.isValidExtend({topic:t}),e.next=5,i.setExpiry(t,et(Ql));case 5:return e.next=7,i.sendResult({id:r,topic:t,result:!0});case 7:i.client.events.emit("session_extend",{id:r,topic:t}),e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,i.sendError({id:r,topic:t,error:e.t0});case 14:i.client.logger.error(e.t0);case 15:case"end":return e.stop()}},e,null,[[1,10]])}));return function(t,n){return e.apply(this,arguments)}}()),vd(S(a),"onSessionExtendResponse",function(e,t){var n=t.id,r=nt("session_extend",n);if(0===a.events.listenerCount(r))throw new Error("emitting ".concat(r," without any listeners"));(0,Es.isJsonRpcResult)(t)?a.events.emit(nt("session_extend",n),{}):(0,Es.isJsonRpcError)(t)&&a.events.emit(nt("session_extend",n),{error:t.error})}),vd(S(a),"onSessionPingRequest",function(){var e=(0,r.Z)(A().mark(function e(t,n){var r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,e.prev=1,i.isValidPing({topic:t}),e.next=5,i.sendResult({id:r,topic:t,result:!0,throwOnFailedPublish:!0});case 5:i.client.events.emit("session_ping",{id:r,topic:t}),e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(1),e.next=12,i.sendError({id:r,topic:t,error:e.t0});case 12:i.client.logger.error(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t,n){return e.apply(this,arguments)}}()),vd(S(a),"onSessionPingResponse",function(e,t){var n=t.id,r=nt("session_ping",n);setTimeout(function(){if(0===a.events.listenerCount(r))throw new Error("emitting ".concat(r," without any listeners 2176"));(0,Es.isJsonRpcResult)(t)?a.events.emit(nt("session_ping",n),{}):(0,Es.isJsonRpcError)(t)&&a.events.emit(nt("session_ping",n),{error:t.error})},500)}),vd(S(a),"onSessionDeleteRequest",function(){var e=(0,r.Z)(A().mark(function e(t,n){var r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,e.prev=1,e.next=4,i.isValidDisconnect({topic:t,reason:n.params});case 4:return i.cleanupPendingSentRequestsForTopic({topic:t,error:Xo("USER_DISCONNECTED")}),e.next=7,i.deleteSession({topic:t,id:r});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),i.client.logger.error(e.t0);case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t,n){return e.apply(this,arguments)}}()),vd(S(a),"onSessionRequest",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c,u,l,d,p,f,h;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.topic,s=t.payload,c=t.attestation,u=t.encryptedId,l=t.transportType,d=s.id,p=s.params,e.prev=1,e.next=4,i.isValidRequest(fd({topic:o},p));case 4:return f=i.client.session.get(o),e.t0=d,e.t1=o,e.t2=p,e.next=10,i.getVerifyContext({attestationId:c,hash:co(JSON.stringify((0,Es.formatJsonRpcRequest)("wc_sessionRequest",p,d))),encryptedId:u,metadata:f.peer.metadata,transportType:l});case 10:return e.t3=e.sent,h={id:e.t0,topic:e.t1,params:e.t2,verifyContext:e.t3},e.next=14,i.setPendingSessionRequest(h);case 14:l===Os&&null!=(n=f.peer.metadata.redirect)&&n.universal&&i.client.core.addLinkModeSupportedApp(null==(r=f.peer.metadata.redirect)?void 0:r.universal),null!=(a=i.client.signConfig)&&a.disableRequestQueue?i.emitSessionRequest(h):(i.addSessionRequestToSessionRequestQueue(h),i.processSessionRequestQueue()),e.next=23;break;case 18:return e.prev=18,e.t4=e.catch(1),e.next=22,i.sendError({id:d,topic:o,error:e.t4});case 22:i.client.logger.error(e.t4);case 23:case"end":return e.stop()}},e,null,[[1,18]])}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"onSessionRequestResponse",function(e,t){var n=t.id,r=nt("session_request",n);if(0===a.events.listenerCount(r))throw new Error("emitting ".concat(r," without any listeners"));(0,Es.isJsonRpcResult)(t)?a.events.emit(nt("session_request",n),{result:t.result}):(0,Es.isJsonRpcError)(t)&&a.events.emit(nt("session_request",n),{error:t.error})}),vd(S(a),"onSessionEventRequest",function(){var e=(0,r.Z)(A().mark(function e(t,n){var r,a,o,s;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.id,a=n.params,e.prev=1,o="".concat(t,"_session_event_").concat(a.event.name),!(s=gs.get(o))||!i.isRequestOutOfSync(s,r)){e.next=5;break}return e.abrupt("return",void i.client.logger.info("Discarding out of sync request - ".concat(r)));case 5:i.isValidEmit(fd({topic:t},a)),i.client.events.emit("session_event",{id:r,topic:t,params:a}),gs.set(o,r),e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(1),e.next=12,i.sendError({id:r,topic:t,error:e.t0});case 12:i.client.logger.error(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t,n){return e.apply(this,arguments)}}()),vd(S(a),"onSessionAuthenticateResponse",function(e,t){var n=t.id;a.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:e,payload:t}),(0,Es.isJsonRpcResult)(t)?a.events.emit(nt("session_request",n),{result:t.result}):(0,Es.isJsonRpcError)(t)&&a.events.emit(nt("session_request",n),{error:t.error})}),vd(S(a),"onSessionAuthenticateRequest",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c,u,l,d,p,f,h,v,g,m,y;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.topic,a=t.payload,o=t.attestation,s=t.encryptedId,c=t.transportType,e.prev=1,u=a.params,l=u.requester,d=u.authPayload,p=u.expiryTimestamp,e.next=8,i.getVerifyContext({attestationId:o,hash:co(JSON.stringify(a)),encryptedId:s,metadata:l.metadata,transportType:c});case 8:return f=e.sent,h={requester:l,pairingTopic:r,id:a.id,authPayload:d,verifyContext:f,expiryTimestamp:p},e.next=12,i.setAuthRequest(a.id,{request:h,pairingTopic:r,transportType:c});case 12:c===Os&&null!=(n=l.metadata.redirect)&&n.universal&&i.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),i.client.events.emit("session_authenticate",{topic:r,params:a.params,id:a.id,verifyContext:f}),e.next=27;break;case 16:return e.prev=16,e.t0=e.catch(1),i.client.logger.error(e.t0),v=a.params.requester.publicKey,e.next=22,i.client.core.crypto.generateKeyPair();case 22:return g=e.sent,m=i.getAppLinkIfEnabled(a.params.requester.metadata,c),y={type:1,receiverPublicKey:v,senderPublicKey:g},e.next=27,i.sendError({id:a.id,topic:r,error:e.t0,encodeOpts:y,rpcOpts:ed.wc_sessionAuthenticate.autoReject,appLink:m});case 27:case"end":return e.stop()}},e,null,[[1,16]])}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"addSessionRequestToSessionRequestQueue",function(e){a.sessionRequestQueue.queue.push(e)}),vd(S(a),"cleanupAfterResponse",function(e){a.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout(function(){a.sessionRequestQueue.state="IDLE",a.processSessionRequestQueue()},(0,W.toMiliseconds)(a.requestQueueDelay))}),vd(S(a),"cleanupPendingSentRequestsForTopic",function(e){var t=e.topic,n=e.error,r=a.client.core.history.pending;r.length>0&&r.filter(function(e){return e.topic===t&&"wc_sessionRequest"===e.request.method}).forEach(function(e){a.events.emit(nt("session_request",e.request.id),{error:n})})}),vd(S(a),"processSessionRequestQueue",function(){if("ACTIVE"!==a.sessionRequestQueue.state){var e=a.sessionRequestQueue.queue[0];if(e)try{a.emitSessionRequest(e)}catch(bn){a.client.logger.error(bn)}else a.client.logger.info("session request queue is empty.")}else a.client.logger.info("session request queue is already active.")}),vd(S(a),"emitSessionRequest",function(e){a.emittedSessionRequests.has(e.id)?a.client.logger.warn({id:e.id},"Skipping emitting `session_request` event for duplicate request. id: ".concat(e.id)):(a.sessionRequestQueue.state="ACTIVE",a.emittedSessionRequests.add(e.id),a.client.events.emit("session_request",e))}),vd(S(a),"onPairingCreated",function(e){if(e.methods&&a.expectedPairingMethodMap.set(e.topic,e.methods),!e.active){var t=a.client.proposal.getAll().find(function(t){return t.pairingTopic===e.topic});t&&a.onSessionProposeRequest({topic:e.topic,payload:(0,Es.formatJsonRpcRequest)("wc_sessionPropose",hd(fd({},t),{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties,scopedProperties:t.scopedProperties}),t.id),attestation:t.attestation,encryptedId:t.encryptedId})}}),vd(S(a),"isValidConnect",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c,u,l,d,p,f,h;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(us(t)){e.next=3;break}throw n=Yo("MISSING_OR_INVALID","connect() params: ".concat(JSON.stringify(t))),r=n.message,new Error(r);case 3:if(a=t.pairingTopic,o=t.requiredNamespaces,s=t.optionalNamespaces,c=t.sessionProperties,u=t.scopedProperties,l=t.relays,e.t0=ts(a),e.t0){e.next=8;break}return e.next=8,i.isValidPairingTopic(a);case 8:if(function(e,t){var n=!1;return e?e&&Qo(e)&&e.length&&e.forEach(function(e){n=cs(e)}):n=!0,n}(l)){e.next=11;break}throw d=Yo("MISSING_OR_INVALID","connect() relays: ".concat(l)),p=d.message,new Error(p);case 11:if(o&&!ts(o)&&0!==es(o)&&(f="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces",["fatal","error","silent"].includes(i.client.logger.level)?console.warn(f):i.client.logger.warn(f),i.validateNamespaces(o,"requiredNamespaces")),s&&!ts(s)&&0!==es(s)&&i.validateNamespaces(s,"optionalNamespaces"),c&&!ts(c)&&i.validateSessionProps(c,"sessionProperties"),!u||ts(u)){e.next=17;break}if(i.validateSessionProps(u,"scopedProperties"),h=Object.keys(o||{}).concat(Object.keys(s||{})),Object.keys(u).every(function(e){return h.includes(e.split(":")[0])})){e.next=17;break}throw new Error("Scoped properties must be a subset of required/optional namespaces, received: ".concat(JSON.stringify(u),", required/optional namespaces: ").concat(JSON.stringify(h)));case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"validateNamespaces",function(e,t){var n=function(e,t,n){var r=null;if(e&&es(e)){var a=os(e,t);a&&(r=a);var i=function(e,t,n){var r=null;return Object.entries(e).forEach(function(e){var t=C(e,2),a=t[0],i=t[1];if(!r){var o=function(e,t,n){var r=null;return Qo(t)&&t.length?t.forEach(function(e){r||as(e)||(r=Xo("UNSUPPORTED_CHAINS","".concat(n,", chain ").concat(e,' should be a string and conform to "namespace:chainId" format')))}):as(e)||(r=Xo("UNSUPPORTED_CHAINS","".concat(n,', chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }'))),r}(a,Se(a,i),"".concat("connect()"," ").concat(n));o&&(r=o)}}),r}(e,0,n);i&&(r=i)}else r=Yo("MISSING_OR_INVALID","".concat(t,", ").concat(n," should be an object with data"));return r}(e,"connect()",t);if(n)throw new Error(n.message)}),vd(S(a),"isValidApprove",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c,u,l,d,p,f;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(us(t)){e.next=2;break}throw new Error(Yo("MISSING_OR_INVALID","approve() params: ".concat(t)).message);case 2:return n=t.id,r=t.namespaces,a=t.relayProtocol,o=t.sessionProperties,s=t.scopedProperties,i.checkRecentlyDeleted(n),e.next=6,i.isValidProposalId(n);case 6:if(c=i.client.proposal.get(n),!(u=ss(r,"approve()"))){e.next=9;break}throw new Error(u.message);case 9:if(!(l=ds(c.requiredNamespaces,r,"approve()"))){e.next=12;break}throw new Error(l.message);case 12:if(ns(a,!0)){e.next=15;break}throw d=Yo("MISSING_OR_INVALID","approve() relayProtocol: ".concat(a)),p=d.message,new Error(p);case 15:if(o&&!ts(o)&&i.validateSessionProps(o,"sessionProperties"),!s||ts(s)){e.next=20;break}if(i.validateSessionProps(s,"scopedProperties"),f=new Set(Object.keys(r)),Object.keys(s).every(function(e){return f.has(e.split(":")[0])})){e.next=20;break}throw new Error("Scoped properties must be a subset of approved namespaces, received: ".concat(JSON.stringify(s),", approved namespaces: ").concat(Array.from(f).join(", ")));case 20:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"isValidReject",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(us(t)){e.next=3;break}throw n=Yo("MISSING_OR_INVALID","reject() params: ".concat(t)),r=n.message,new Error(r);case 3:return a=t.id,o=t.reason,i.checkRecentlyDeleted(a),e.next=7,i.isValidProposalId(a);case 7:if(function(e){return!!(e&&"object"==typeof e&&e.code&&rs(e.code,!1)&&e.message&&ns(e.message,!1))}(o)){e.next=10;break}throw s=Yo("MISSING_OR_INVALID","reject() reason: ".concat(JSON.stringify(o))),c=s.message,new Error(c);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"isValidSessionSettleRequest",function(e){if(!us(e)){var t=Yo("MISSING_OR_INVALID","onSessionSettleRequest() params: ".concat(e)).message;throw new Error(t)}var n=e.relay,r=e.controller,a=e.namespaces,i=e.expiry;if(!cs(n)){var o=Yo("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string").message;throw new Error(o)}var s=function(e,t){var n=null;return ns(null==e?void 0:e.publicKey,!1)||(n=Yo("MISSING_OR_INVALID","onSessionSettleRequest() controller public key should be a string")),n}(r);if(s)throw new Error(s.message);var c=ss(a,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(tt(i)){var u=Yo("EXPIRED","onSessionSettleRequest()").message;throw new Error(u)}}),vd(S(a),"isValidUpdate",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c,u;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(us(t)){e.next=3;break}throw n=Yo("MISSING_OR_INVALID","update() params: ".concat(t)),r=n.message,new Error(r);case 3:return a=t.topic,o=t.namespaces,i.checkRecentlyDeleted(a),e.next=7,i.isValidSessionTopic(a);case 7:if(s=i.client.session.get(a),!(c=ss(o,"update()"))){e.next=10;break}throw new Error(c.message);case 10:if(!(u=ds(s.requiredNamespaces,o,"update()"))){e.next=13;break}throw new Error(u.message);case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"isValidExtend",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(us(t)){e.next=3;break}throw n=Yo("MISSING_OR_INVALID","extend() params: ".concat(t)),r=n.message,new Error(r);case 3:return a=t.topic,i.checkRecentlyDeleted(a),e.next=7,i.isValidSessionTopic(a);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"isValidRequest",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c,u,l,d,p,f,h,v,g;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(us(t)){e.next=3;break}throw n=Yo("MISSING_OR_INVALID","request() params: ".concat(t)),r=n.message,new Error(r);case 3:return a=t.topic,o=t.request,s=t.chainId,c=t.expiry,i.checkRecentlyDeleted(a),e.next=7,i.isValidSessionTopic(a);case 7:if(u=i.client.session.get(a),ls(l=u.namespaces,s)){e.next=11;break}throw d=Yo("MISSING_OR_INVALID","request() chainId: ".concat(s)),p=d.message,new Error(p);case 11:if(function(e){return!(ts(e)||!ns(e.method,!1))}(o)){e.next=14;break}throw f=Yo("MISSING_OR_INVALID","request() ".concat(JSON.stringify(o))),h=f.message,new Error(h);case 14:if(function(e,t,n){return!!ns(n,!1)&&function(e,t){var n=[];return Object.values(e).forEach(function(e){Zo(e.accounts).includes(t)&&n.push.apply(n,x(e.methods))}),n}(e,t).includes(n)}(l,s,o.method)){e.next=17;break}throw v=Yo("MISSING_OR_INVALID","request() method: ".concat(o.method)),g=v.message,new Error(g);case 17:i.validateRequestExpiry(c);case 18:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"isValidRespond",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c,u,l,d,p;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(us(t)){e.next=3;break}throw r=Yo("MISSING_OR_INVALID","respond() params: ".concat(t)),a=r.message,new Error(a);case 3:return o=t.topic,s=t.response,e.prev=4,e.next=7,i.isValidSessionTopic(o);case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(4),null!=(n=null==t?void 0:t.response)&&n.id&&i.cleanupAfterResponse(t),e.t0;case 12:if(function(e){return!(ts(e)||ts(e.result)&&ts(e.error)||!rs(e.id,!1)||!ns(e.jsonrpc,!1))}(s)){e.next=15;break}throw c=Yo("MISSING_OR_INVALID","respond() response: ".concat(JSON.stringify(s))),u=c.message,new Error(u);case 15:if((l=i.client.pendingRequest.get(s.id)).topic===o){e.next=19;break}throw d=Yo("MISMATCHED_TOPIC","Request response topic mismatch. reqId: ".concat(s.id,", expected topic: ").concat(l.topic,", received topic: ").concat(o)),p=d.message,new Error(p);case 19:case"end":return e.stop()}},e,null,[[4,9]])}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"isValidPing",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(us(t)){e.next=3;break}throw n=Yo("MISSING_OR_INVALID","ping() params: ".concat(t)),r=n.message,new Error(r);case 3:return a=t.topic,e.next=6,i.isValidSessionOrPairingTopic(a);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"isValidEmit",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c,u,l,d,p,f,h,v;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(us(t)){e.next=3;break}throw n=Yo("MISSING_OR_INVALID","emit() params: ".concat(t)),r=n.message,new Error(r);case 3:return a=t.topic,o=t.event,s=t.chainId,e.next=6,i.isValidSessionTopic(a);case 6:if(c=i.client.session.get(a),ls(u=c.namespaces,s)){e.next=10;break}throw l=Yo("MISSING_OR_INVALID","emit() chainId: ".concat(s)),d=l.message,new Error(d);case 10:if(function(e){return!(ts(e)||!ns(e.name,!1))}(o)){e.next=13;break}throw p=Yo("MISSING_OR_INVALID","emit() event: ".concat(JSON.stringify(o))),f=p.message,new Error(f);case 13:if(function(e,t,n){return!!ns(n,!1)&&function(e,t){var n=[];return Object.values(e).forEach(function(e){Zo(e.accounts).includes(t)&&n.push.apply(n,x(e.events))}),n}(e,t).includes(n)}(u,s,o.name)){e.next=16;break}throw h=Yo("MISSING_OR_INVALID","emit() event: ".concat(JSON.stringify(o))),v=h.message,new Error(v);case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"isValidDisconnect",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(us(t)){e.next=3;break}throw n=Yo("MISSING_OR_INVALID","disconnect() params: ".concat(t)),r=n.message,new Error(r);case 3:return a=t.topic,e.next=6,i.isValidSessionOrPairingTopic(a);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"isValidAuthenticate",function(e){var t=e.chains,n=e.uri,r=e.domain,a=e.nonce;if(!Array.isArray(t)||0===t.length)throw new Error("chains is required and must be a non-empty array");if(!ns(n,!1))throw new Error("uri is required parameter");if(!ns(r,!1))throw new Error("domain is required parameter");if(!ns(a,!1))throw new Error("nonce is required parameter");if(x(new Set(t.map(function(e){return _e(e).namespace}))).length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");if("eip155"!==_e(t[0]).namespace)throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),vd(S(a),"getVerifyContext",function(){var e=(0,r.Z)(A().mark(function e(t){var n,r,a,o,s,c,u,l;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.attestationId,r=t.hash,a=t.encryptedId,o=t.metadata,s=t.transportType,c={verified:{verifyUrl:o.verifyUrl||js,validation:"UNKNOWN",origin:o.url||""}},e.prev=1,s!==Os){e.next=5;break}return u=i.getAppLinkIfEnabled(o,s),e.abrupt("return",(c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c));case 5:return e.next=7,i.client.core.verify.resolve({attestationId:n,hash:r,encryptedId:a,verifyUrl:o.verifyUrl});case 7:(l=e.sent)&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),i.client.logger.warn(e.t0);case 14:return e.abrupt("return",(i.client.logger.debug("Verify context: ".concat(JSON.stringify(c))),c));case 15:case"end":return e.stop()}},e,null,[[1,11]])}));return function(t){return e.apply(this,arguments)}}()),vd(S(a),"validateSessionProps",function(e,t){Object.values(e).forEach(function(n,r){if(null==n){var a=Yo("MISSING_OR_INVALID","".concat(t," must contain an existing value for each key. Received: ").concat(n," for key ").concat(Object.keys(e)[r])).message;throw new Error(a)}})}),vd(S(a),"getPendingAuthRequest",function(e){var t=a.client.auth.requests.get(e);return"object"==typeof t?t:void 0}),vd(S(a),"addToRecentlyDeleted",function(e,t){if(a.recentlyDeletedMap.set(e,t),a.recentlyDeletedMap.size>=a.recentlyDeletedLimit){var n,r=0,i=a.recentlyDeletedLimit/2,o=M(a.recentlyDeletedMap.keys());try{for(o.s();!(n=o.n()).done;){var s=n.value;if(r++>=i)break;a.recentlyDeletedMap.delete(s)}}catch(c){o.e(c)}finally{o.f()}}}),vd(S(a),"checkRecentlyDeleted",function(e){var t=a.recentlyDeletedMap.get(e);if(t){var n=Yo("MISSING_OR_INVALID","Record was recently deleted - ".concat(t,": ").concat(e)).message;throw new Error(n)}}),vd(S(a),"isLinkModeEnabled",function(e,t){var n,r,i,o,s,c,u,l,d;return!(!e||t!==Os)&&!0===(null==(r=null==(n=a.client.metadata)?void 0:n.redirect)?void 0:r.linkMode)&&void 0!==(null==(o=null==(i=a.client.metadata)?void 0:i.redirect)?void 0:o.universal)&&""!==(null==(c=null==(s=a.client.metadata)?void 0:s.redirect)?void 0:c.universal)&&void 0!==(null==(u=null==e?void 0:e.redirect)?void 0:u.universal)&&""!==(null==(l=null==e?void 0:e.redirect)?void 0:l.universal)&&!0===(null==(d=null==e?void 0:e.redirect)?void 0:d.linkMode)&&a.client.core.linkModeSupportedApps.includes(e.redirect.universal)&&typeof(null==global?void 0:global.Linking)<"u"}),vd(S(a),"getAppLinkIfEnabled",function(e,t){var n;return a.isLinkModeEnabled(e,t)?null==(n=null==e?void 0:e.redirect)?void 0:n.universal:void 0}),vd(S(a),"handleLinkModeMessage",function(e){var t=e.url;if(t&&t.includes("wc_ev")&&t.includes("topic")){var n=ct(t,"topic")||"",r=decodeURIComponent(ct(t,"wc_ev")||""),i=a.client.session.keys.includes(n);i&&a.client.session.update(n,{transportType:Os}),a.client.core.dispatchEnvelope({topic:n,message:r,sessionExists:i})}}),vd(S(a),"registerLinkModeListeners",(0,r.Z)(A().mark(function e(){var t,n,r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(lt()||We()&&null!=(t=i.client.metadata.redirect)&&t.linkMode)){e.next=8;break}if(!(typeof(n=null==global?void 0:global.Linking)<"u")){e.next=8;break}return n.addEventListener("url",i.handleLinkModeMessage,i.client.name),e.next=6,n.getInitialURL();case 6:(r=e.sent)&&setTimeout(function(){i.handleLinkModeMessage({url:r})},50);case 8:case"end":return e.stop()}},e)}))),vd(S(a),"getTVFApproveParams",function(e){try{var t=Ho(e.namespaces),n=function(e){var t=[];return Object.values(e).forEach(function(e){t.push.apply(t,x(e.methods))}),x(new Set(t))}(e.namespaces),r=function(e){var t=[];return Object.values(e).forEach(function(e){t.push.apply(t,x(e.events))}),x(new Set(t))}(e.namespaces);return{approvedChains:t,approvedMethods:n,approvedEvents:r,sessionProperties:e.sessionProperties,scopedProperties:e.scopedProperties}}catch(t){return a.client.logger.warn(t,"Error getting TVF approve params"),{}}}),vd(S(a),"getTVFParams",function(e,t,n){var r,i,o;if(null==(r=t.request)||!r.method)return{};var s={correlationId:e,rpcMethods:[t.request.method],chainId:t.chainId};try{var c=a.extractTxHashesFromResult(t.request,n);s.txHashes=c,s.contractAddresses=a.isValidContractData(t.request.params)?[null==(o=null==(i=t.request.params)?void 0:i[0])?void 0:o.to]:[]}catch(u){a.client.logger.warn(u,"Error getting TVF params")}return s}),vd(S(a),"isValidContractData",function(e){var t;if(!e)return!1;try{var n=(null==e?void 0:e.data)||(null==(t=null==e?void 0:e[0])?void 0:t.data);if(!n.startsWith("0x"))return!1;var r=n.slice(2);return!!/^[0-9a-fA-F]*$/.test(r)&&r.length%2==0}catch(a){}return!1}),vd(S(a),"extractTxHashesFromResult",function(e,t){var n;try{if(!t)return[];var r=e.method,i=nd[r];if("sui_signTransaction"===r)return[fr(t.transactionBytes)];if("near_signTransaction"===r)return[hr(t)];if("near_signTransactions"===r)return t.map(function(e){return hr(e)});if("xrpl_signTransactionFor"===r||"xrpl_signTransaction"===r)return[null==(n=t.tx_json)?void 0:n.hash];if("polkadot_signTransaction"===r)return[ys({transaction:e.params.transactionPayload,signature:t.signature})];if("algo_signTxn"===r)return Qo(t)?t.map(function(e){return vr(e)}):[vr(t)];if("cosmos_signDirect"===r)return[mr(t)];if("wallet_sendCalls"===r)return function(e){var n,r,a=[];try{if("string"==typeof e)return a.push(e),a;if("object"!=typeof e)return a;null!=e&&e.id&&a.push(e.id);var i=null==(r=null==(n=null==e?void 0:e.capabilities)?void 0:n.caip345)?void 0:r.transactionHashes;i&&a.push.apply(a,x(i))}catch(t){console.warn("getWalletSendCallsHashes failed: ",t)}return a}(t);if("string"==typeof t)return[t];var o=t[i.key];if(Qo(o))return"solana_signAllTransactions"===r?o.map(function(e){return function(e){for(var t=atob(e),n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);var a=n[0];if(0===a)throw new Error("No signatures found");if(n.length<1+64*a)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");var i=Buffer.from(e,"base64").slice(1,65);return $.encode(i)}(e)}):o;if("string"==typeof o)return[o]}catch(r){a.client.logger.warn(r,"Error extracting tx hashes from result")}return[]}),a}return F(n,[{key:"processPendingMessageEvents",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n,r,a,i,o,s,c,u,l;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,n=e.client.core.relayer.messages.getWithoutAck(e.client.session.keys),r=0,a=Object.entries(n);case 3:if(!(r<a.length)){t.next=31;break}i=C(a[r],2),o=i[0],s=i[1],c=M(s),t.prev=6,c.s();case 8:if((u=c.n()).done){t.next=20;break}return l=u.value,t.prev=10,t.next=13,e.onProviderMessageEvent({topic:o,message:l,publishedAt:Date.now()});case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(10),e.client.logger.warn("Error processing pending message event for topic: ".concat(o,", message: ").concat(l));case 18:t.next=8;break;case 20:t.next=25;break;case 22:t.prev=22,t.t1=t.catch(6),c.e(t.t1);case 25:return t.prev=25,c.f(),t.finish(25);case 28:r++,t.next=3;break;case 31:t.next=36;break;case 33:t.prev=33,t.t2=t.catch(0),e.client.logger.warn(t.t2,"processPendingMessageEvents failed");case 36:case"end":return t.stop()}},t,null,[[0,33],[6,22,25,28],[10,15]])}))()}},{key:"isInitialized",value:function(){if(!this.initialized){var e=Yo("NOT_INITIALIZED",this.name).message;throw new Error(e)}}},{key:"confirmOnlineStateOrThrow",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.client.core.relayer.confirmOnlineStateOrThrow();case 2:case"end":return t.stop()}},t)}))()}},{key:"registerRelayerEvents",value:function(){var e=this;this.client.core.relayer.on("relayer_message",function(t){e.onProviderMessageEvent(t)})}},{key:"onRelayMessage",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,a,i,o,s,c,u;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.topic,a=e.message,i=e.attestation,o=e.transportType,s=t.client.auth.authKeys.keys.includes(id)?t.client.auth.authKeys.get(id):{responseTopic:void 0,publicKey:void 0},c=s.publicKey,n.prev=1,n.next=4,t.client.core.crypto.decode(r,a,{receiverPublicKey:c,encoding:o===Os?ao:ro});case 4:if(u=n.sent,!(0,Es.isJsonRpcRequest)(u)){n.next=11;break}return t.client.core.history.set(r,u),n.next=9,t.onRelayEventRequest({topic:r,payload:u,attestation:i,transportType:o,encryptedId:co(a)});case 9:n.next=22;break;case 11:if(!(0,Es.isJsonRpcResponse)(u)){n.next=19;break}return n.next=14,t.client.core.history.resolve(u);case 14:return n.next=16,t.onRelayEventResponse({topic:r,payload:u,transportType:o});case 16:t.client.core.history.delete(r,u.id),n.next=22;break;case 19:return t.client.logger.error("onRelayMessage() -> unknown payload: ".concat(JSON.stringify(u))),n.next=22,t.onRelayEventUnknownPayload({topic:r,payload:u,transportType:o});case 22:return n.next=24,t.client.core.relayer.messages.ack(r,a);case 24:n.next=29;break;case 26:n.prev=26,n.t0=n.catch(1),t.client.logger.error("onRelayMessage() -> failed to process an inbound message: ".concat(a)),t.client.logger.error(n.t0);case 29:case"end":return n.stop()}},n,null,[[1,26]])}))()}},{key:"registerExpirerEvents",value:function(){var e=this;this.client.core.expirer.on(Ls,function(){var t=(0,r.Z)(A().mark(function t(n){var r,a,i;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Qe(n.target),a=r.topic,!(i=r.id)||!e.client.pendingRequest.keys.includes(i)){t.next=7;break}return t.next=4,e.deletePendingSessionRequest(i,Yo("EXPIRED"),!0);case 4:t.t0=t.sent,t.next=30;break;case 7:if(!i||!e.client.auth.requests.keys.includes(i)){t.next=13;break}return t.next=10,e.deletePendingAuthRequest(i,Yo("EXPIRED"),!0);case 10:t.t1=t.sent,t.next=29;break;case 13:if(!a){t.next=22;break}if(t.t3=e.client.session.keys.includes(a),!t.t3){t.next=19;break}return t.next=18,e.deleteSession({topic:a,expirerHasDeleted:!0});case 18:t.t3=e.client.events.emit("session_expire",{topic:a});case 19:t.t2=t.t3,t.next=28;break;case 22:if(t.t4=i,!t.t4){t.next=27;break}return t.next=26,e.deleteProposal(i,!0);case 26:t.t4=e.client.events.emit("proposal_expire",{id:i});case 27:t.t2=t.t4;case 28:t.t1=void t.t2;case 29:t.t0=t.t1;case 30:return t.abrupt("return",t.t0);case 31:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"registerPairingEvents",value:function(){var e=this;this.client.core.pairing.events.on("pairing_create",function(t){return e.onPairingCreated(t)}),this.client.core.pairing.events.on("pairing_delete",function(t){e.addToRecentlyDeleted(t.topic,"pairing")})}},{key:"isValidPairingTopic",value:function(e){if(!ns(e,!1)){var t=Yo("MISSING_OR_INVALID","pairing topic should be a string: ".concat(e)).message;throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){var n=Yo("NO_MATCHING_KEY","pairing topic doesn't exist: ".concat(e)).message;throw new Error(n)}if(tt(this.client.core.pairing.pairings.get(e).expiry)){var r=Yo("EXPIRED","pairing topic: ".concat(e)).message;throw new Error(r)}}},{key:"isValidSessionTopic",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,a,i,o,s,c,u,l;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(ns(e,!1)){n.next=3;break}throw r=Yo("MISSING_OR_INVALID","session topic should be a string: ".concat(e)),a=r.message,new Error(a);case 3:if(t.checkRecentlyDeleted(e),t.client.session.keys.includes(e)){n.next=6;break}throw i=Yo("NO_MATCHING_KEY","session topic doesn't exist: ".concat(e)),o=i.message,new Error(o);case 6:if(!tt(t.client.session.get(e).expiry)){n.next=11;break}return n.next=9,t.deleteSession({topic:e});case 9:throw s=Yo("EXPIRED","session topic: ".concat(e)),c=s.message,new Error(c);case 11:if(t.client.core.crypto.keychain.has(e)){n.next=16;break}return u=Yo("MISSING_OR_INVALID","session topic does not exist in keychain: ".concat(e)),l=u.message,n.next=15,t.deleteSession({topic:e});case 15:throw new Error(l);case 16:case"end":return n.stop()}},n)}))()}},{key:"isValidSessionOrPairingTopic",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,a,i,o;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.checkRecentlyDeleted(e),!t.client.session.keys.includes(e)){n.next=5;break}return n.next=3,t.isValidSessionTopic(e);case 3:n.next=12;break;case 5:if(t.client.core.pairing.pairings.keys.includes(e)){n.next=11;break}if(!ns(e,!1)){n.next=9;break}throw r=Yo("NO_MATCHING_KEY","session or pairing topic doesn't exist: ".concat(e)),a=r.message,new Error(a);case 9:throw i=Yo("MISSING_OR_INVALID","session or pairing topic should be a string: ".concat(e)),o=i.message,new Error(o);case 11:t.isValidPairingTopic(e);case 12:case"end":return n.stop()}},n)}))()}},{key:"isValidProposalId",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,a,i,o,s,c;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(function(e){return"number"==typeof e}(e)){n.next=3;break}throw r=Yo("MISSING_OR_INVALID","proposal id should be a number: ".concat(e)),a=r.message,new Error(a);case 3:if(t.client.proposal.keys.includes(e)){n.next=6;break}throw i=Yo("NO_MATCHING_KEY","proposal id doesn't exist: ".concat(e)),o=i.message,new Error(o);case 6:if(!tt(t.client.proposal.get(e).expiryTimestamp)){n.next=11;break}return n.next=9,t.deleteProposal(e);case 9:throw s=Yo("EXPIRED","proposal id: ".concat(e)),c=s.message,new Error(c);case 11:case"end":return n.stop()}},n)}))()}},{key:"validateRequestExpiry",value:function(e){if(e&&!function(e,t){return rs(e,!1)&&e<=t.max&&e>=t.min}(e,td)){var t=Yo("MISSING_OR_INVALID","request() expiry: ".concat(e,". Expiry must be a number (in seconds) between ").concat(td.min," and ").concat(td.max)).message;throw new Error(t)}}}]),n}(function(){return F(function e(t){B(this,e),this.client=t})}()),md=function(e){N(n,e);var t=I(n);function n(e,r){var a;return B(this,n),(a=t.call(this,e,r,"proposal",Jl)).core=e,a.logger=r,a}return F(n)}(ml),yd=function(e){N(n,e);var t=I(n);function n(e,r){var a;return B(this,n),(a=t.call(this,e,r,"session",Jl)).core=e,a.logger=r,a}return F(n)}(ml),bd=function(e){N(n,e);var t=I(n);function n(e,r){var a;return B(this,n),a=t.call(this,e,r,"request",Jl,function(e){return e.id}),a.core=e,a.logger=r,a}return F(n)}(ml),wd=function(e){N(n,e);var t=I(n);function n(e,r){var a;return B(this,n),(a=t.call(this,e,r,"authKeys",ad,function(){return id})).core=e,a.logger=r,a}return F(n)}(ml),Ed=function(e){N(n,e);var t=I(n);function n(e,r){var a;return B(this,n),(a=t.call(this,e,r,"pairingTopics",ad)).core=e,a.logger=r,a}return F(n)}(ml),kd=function(e){N(n,e);var t=I(n);function n(e,r){var a;return B(this,n),a=t.call(this,e,r,"requests",ad,function(e){return e.id}),a.core=e,a.logger=r,a}return F(n)}(ml),xd=Object.defineProperty,Cd=function(e,t,n){return function(e,t,n){return t in e?xd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n)},Ad=function(){function e(t,n){B(this,e),this.core=t,this.logger=n,Cd(this,"authKeys"),Cd(this,"pairingTopics"),Cd(this,"requests"),this.authKeys=new wd(this.core,this.logger),this.pairingTopics=new Ed(this.core,this.logger),this.requests=new kd(this.core,this.logger)}return F(e,[{key:"init",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.authKeys.init();case 2:return t.next=4,e.pairingTopics.init();case 4:return t.next=6,e.requests.init();case 6:case"end":return t.stop()}},t)}))()}}]),e}(),Nd=Object.defineProperty,Id=function(e,t,n){return function(e,t,n){return t in e?Nd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n)},_d=function(e){N(n,e);var t=I(n);function n(e){var a,i;B(this,n),a=t.call(this,e),i=S(a),Id(S(a),"protocol","wc"),Id(S(a),"version",2),Id(S(a),"name","client"),Id(S(a),"metadata"),Id(S(a),"core"),Id(S(a),"logger"),Id(S(a),"events",new u.EventEmitter),Id(S(a),"engine"),Id(S(a),"session"),Id(S(a),"proposal"),Id(S(a),"pendingRequest"),Id(S(a),"auth"),Id(S(a),"signConfig"),Id(S(a),"on",function(e,t){return a.events.on(e,t)}),Id(S(a),"once",function(e,t){return a.events.once(e,t)}),Id(S(a),"off",function(e,t){return a.events.off(e,t)}),Id(S(a),"removeListener",function(e,t){return a.events.removeListener(e,t)}),Id(S(a),"removeAllListeners",function(e){return a.events.removeAllListeners(e)}),Id(S(a),"connect",function(){var e=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.engine.connect(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),i.logger.error(e.t0.message),e.t0;case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()),Id(S(a),"pair",function(){var e=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.engine.pair(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),i.logger.error(e.t0.message),e.t0;case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()),Id(S(a),"approve",function(){var e=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.engine.approve(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),i.logger.error(e.t0.message),e.t0;case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()),Id(S(a),"reject",function(){var e=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.engine.reject(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),i.logger.error(e.t0.message),e.t0;case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()),Id(S(a),"update",function(){var e=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.engine.update(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),i.logger.error(e.t0.message),e.t0;case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()),Id(S(a),"extend",function(){var e=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.engine.extend(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),i.logger.error(e.t0.message),e.t0;case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()),Id(S(a),"request",function(){var e=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.engine.request(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),i.logger.error(e.t0.message),e.t0;case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()),Id(S(a),"respond",function(){var e=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.engine.respond(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),i.logger.error(e.t0.message),e.t0;case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()),Id(S(a),"ping",function(){var e=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.engine.ping(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),i.logger.error(e.t0.message),e.t0;case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()),Id(S(a),"emit",function(){var e=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.engine.emit(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),i.logger.error(e.t0.message),e.t0;case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()),Id(S(a),"disconnect",function(){var e=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.engine.disconnect(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),i.logger.error(e.t0.message),e.t0;case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()),Id(S(a),"find",function(e){try{return a.engine.find(e)}catch(wn){throw a.logger.error(wn.message),wn}}),Id(S(a),"getPendingSessionRequests",function(){try{return a.engine.getPendingSessionRequests()}catch(bn){throw a.logger.error(bn.message),bn}}),Id(S(a),"authenticate",function(){var e=(0,r.Z)(A().mark(function e(t,n){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.engine.authenticate(t,n);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),i.logger.error(e.t0.message),e.t0;case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t,n){return e.apply(this,arguments)}}()),Id(S(a),"formatAuthMessage",function(e){try{return a.engine.formatAuthMessage(e)}catch(wn){throw a.logger.error(wn.message),wn}}),Id(S(a),"approveSessionAuthenticate",function(){var e=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.engine.approveSessionAuthenticate(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),i.logger.error(e.t0.message),e.t0;case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()),Id(S(a),"rejectSessionAuthenticate",function(){var e=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.engine.rejectSessionAuthenticate(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),i.logger.error(e.t0.message),e.t0;case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()),a.name=(null==e?void 0:e.name)||"client",a.metadata=function(e){var t,n,r=Ke();try{return null!=e&&e.url&&r.url&&new URL(e.url).host!==new URL(r.url).host&&(console.warn("The configured WalletConnect 'metadata.url':".concat(e.url," differs from the actual page url:").concat(r.url,". This is probably unintended and can lead to issues.")),e.url=r.url),null!=(t=null==e?void 0:e.icons)&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter(function(e){return""!==e})),function(e,t){return Oe(e,Re(t))}(Le(Le({},r),e),{url:(null==e?void 0:e.url)||r.url,name:(null==e?void 0:e.name)||r.name,description:(null==e?void 0:e.description)||r.description,icons:null!=(n=null==e?void 0:e.icons)&&n.length&&e.icons.length>0?e.icons:r.icons})}catch(bn){return console.warn("Error populating app metadata",bn),e||r}}(null==e?void 0:e.metadata),a.signConfig=null==e?void 0:e.signConfig;var o=bs({logger:(null==e?void 0:e.logger)||"error",name:a.name});return a.logger=o,a.core=(null==e?void 0:e.core)||new $l(e),a.session=new yd(a.core,a.logger),a.proposal=new md(a.core,a.logger),a.pendingRequest=new bd(a.core,a.logger),a.engine=new gd(S(a)),a.auth=new Ad(a.core,a.logger),a}return F(n,[{key:"context",get:function(){return(0,p.Fd)(this.logger)}},{key:"pairing",get:function(){return this.core.pairing.pairings}},{key:"initialize",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.logger.trace("Initialized"),t.prev=1,t.next=4,e.core.start();case 4:return t.next=6,e.session.init();case 6:return t.next=8,e.proposal.init();case 8:return t.next=10,e.pendingRequest.init();case 10:return t.next=12,e.auth.init();case 12:return t.next=14,e.engine.init();case 14:e.logger.info("SignClient Initialization Success"),t.next=20;break;case 17:throw t.prev=17,t.t0=t.catch(1),e.logger.info("SignClient Initialization Failure"),e.logger.error(t.t0.message),t.t0;case 20:case"end":return t.stop()}},t,null,[[1,17]])}))()}}],[{key:"init",value:function(e){return(0,r.Z)(A().mark(function t(){var r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=new n(e),t.next=3,r.initialize();case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}},t)}))()}}]),n}(function(){return F(function e(t){B(this,e),this.opts=t,j(this,"protocol","wc"),j(this,"version",2)})}()),Sd=_d,Td=n(39330);function Od(e){return null==e||"object"!=typeof e&&"function"!=typeof e}function Rd(e){return Object.getOwnPropertySymbols(e).filter(function(t){return Object.prototype.propertyIsEnumerable.call(e,t)})}function Pd(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}var Ud="[object String]",Md="[object Number]",Dd="[object Boolean]",Ld="[object Arguments]";function Bd(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function jd(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map,a=arguments.length>4?arguments[4]:void 0,i=null==a?void 0:a(e,t,n,r);if(null!=i)return i;if(Od(e))return e;if(r.has(e))return r.get(e);if(Array.isArray(e)){var o=new Array(e.length);r.set(e,o);for(var s=0;s<e.length;s++)o[s]=jd(e[s],s,n,r,a);return Object.hasOwn(e,"index")&&(o.index=e.index),Object.hasOwn(e,"input")&&(o.input=e.input),o}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){var c=new RegExp(e.source,e.flags);return c.lastIndex=e.lastIndex,c}if(e instanceof Map){var u=new Map;r.set(e,u);var l,d=M(e);try{for(d.s();!(l=d.n()).done;){var p=C(l.value,2),f=p[0],h=p[1];u.set(f,jd(h,f,n,r,a))}}catch(I){d.e(I)}finally{d.f()}return u}if(e instanceof Set){var v=new Set;r.set(e,v);var g,m=M(e);try{for(m.s();!(g=m.n()).done;){var y=g.value;v.add(jd(y,void 0,n,r,a))}}catch(I){m.e(I)}finally{m.f()}return v}if(typeof Buffer<"u"&&Buffer.isBuffer(e))return e.subarray();if(Bd(e)){var b=new(Object.getPrototypeOf(e).constructor)(e.length);r.set(e,b);for(var w=0;w<e.length;w++)b[w]=jd(e[w],w,n,r,a);return b}if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){var E=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return r.set(e,E),Fd(E,e,n,r,a),E}if(typeof File<"u"&&e instanceof File){var k=new File([e],e.name,{type:e.type});return r.set(e,k),Fd(k,e,n,r,a),k}if(e instanceof Blob){var x=new Blob([e],{type:e.type});return r.set(e,x),Fd(x,e,n,r,a),x}if(e instanceof Error){var A=new e.constructor;return r.set(e,A),A.message=e.message,A.name=e.name,A.stack=e.stack,A.cause=e.cause,Fd(A,e,n,r,a),A}if("object"==typeof e&&function(e){switch(Pd(e)){case Ld:case"[object Array]":case"[object ArrayBuffer]":case"[object DataView]":case Dd:case"[object Date]":case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Map]":case Md:case"[object Object]":case"[object RegExp]":case"[object Set]":case Ud:case"[object Symbol]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return!0;default:return!1}}(e)){var N=Object.create(Object.getPrototypeOf(e));return r.set(e,N),Fd(N,e,n,r,a),N}return e}function Fd(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=[].concat(x(Object.keys(t)),x(Rd(t))),o=0;o<i.length;o++){var s=i[o],c=Object.getOwnPropertyDescriptor(e,s);(null==c||c.writable)&&(e[s]=jd(t[s],s,n,r,a))}}function Wd(e){return function(e,t){return function(e,t){return jd(e,void 0,e,new Map,t)}(e,function(t,n,r,a){if("object"==typeof e)switch(Object.prototype.toString.call(e)){case Md:case Ud:case Dd:var i=new e.constructor(null==e?void 0:e.valueOf());return Fd(i,e),i;case Ld:var o={};return Fd(o,e),o.length=e.length,o[Symbol.iterator]=e[Symbol.iterator],o;default:return}})}(e)}function qd(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===Pd(e)}function Zd(e){return"object"==typeof e&&null!==e}function Hd(){}function Kd(e){return Bd(e)}function Vd(e){if("object"!=typeof e||null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){var t,n=e[Symbol.toStringTag];return!(null==n||null===(t=Object.getOwnPropertyDescriptor(e,Symbol.toStringTag))||void 0===t||!t.writable)&&e.toString()==="[object ".concat(n,"]")}for(var r=e;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}function zd(e,t,n,r){if(Od(e)&&(e=Object(e)),null==t||"object"!=typeof t)return e;if(r.has(t))return function(e){if(Od(e))return e;if(Array.isArray(e)||Bd(e)||e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);var t=Object.getPrototypeOf(e),n=t.constructor;if(e instanceof Date||e instanceof Map||e instanceof Set)return new n(e);if(e instanceof RegExp){var r=new n(e);return r.lastIndex=e.lastIndex,r}if(e instanceof DataView)return new n(e.buffer.slice(0));if(e instanceof Error){var a=new n(e.message);return a.stack=e.stack,a.name=e.name,a.cause=e.cause,a}if(typeof File<"u"&&e instanceof File)return new n([e],e.name,{type:e.type,lastModified:e.lastModified});if("object"==typeof e){var i=Object.create(t);return Object.assign(i,e)}return e}(r.get(t));if(r.set(t,e),Array.isArray(t)){t=t.slice();for(var a=0;a<t.length;a++){var i;t[a]=null!==(i=t[a])&&void 0!==i?i:void 0}}for(var o=[].concat(x(Object.keys(t)),x(Rd(t))),s=0;s<o.length;s++){var c=o[s],u=t[c],l=e[c];if(qd(u)&&(u=E({},u)),qd(l)&&(l=E({},l)),typeof Buffer<"u"&&Buffer.isBuffer(u)&&(u=Wd(u)),Array.isArray(u))if("object"==typeof l&&null!=l){for(var d=[],p=Reflect.ownKeys(l),f=0;f<p.length;f++){var h=p[f];d[h]=l[h]}l=d}else l=[];var v=n(l,u,c,e,t,r);null!=v?e[c]=v:Array.isArray(u)||Zd(l)&&Zd(u)?e[c]=zd(l,u,n,r):null==l&&Vd(u)?e[c]=zd({},u,n,r):null==l&&Kd(u)?e[c]=Wd(u):(void 0===l||void 0!==u)&&(e[c]=u)}return e}var Gd="universal_provider",$d="wc@2:".concat(Gd,":"),Jd="https://rpc.walletconnect.org/v1/",Yd="generic",Xd="".concat(Jd,"bundler"),Qd="call_status",ep=Object.defineProperty,tp=Object.defineProperties,np=Object.getOwnPropertyDescriptors,rp=Object.getOwnPropertySymbols,ap=Object.prototype.hasOwnProperty,ip=Object.prototype.propertyIsEnumerable,op=function(e,t,n){return t in e?ep(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},sp=function(e,t){for(var n in t||(t={}))ap.call(t,n)&&op(e,n,t[n]);if(rp){var r,a=M(rp(t));try{for(a.s();!(r=a.n()).done;){n=r.value;ip.call(t,n)&&op(e,n,t[n])}}catch(i){a.e(i)}finally{a.f()}}return e},cp=function(e,t){return tp(e,np(t))};function up(e,t,n){var r,a=_e(e);return(null==(r=t.rpcMap)?void 0:r[a.reference])||"".concat(Jd,"?chainId=").concat(a.namespace,":").concat(a.reference,"&projectId=").concat(n)}function lp(e){return e.map(function(e){return"".concat(e.split(":")[0],":").concat(e.split(":")[1])})}function dp(e){return Object.fromEntries(Object.entries(e).filter(function(e){var t,n,r=C(e,2),a=(r[0],r[1]);return(null==(t=null==a?void 0:a.chains)?void 0:t.length)&&(null==(n=null==a?void 0:a.chains)?void 0:n.length)>0}))}function pp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=n.slice(0,-1),i=n[n.length-1],o=e,s=0;s<a.length;s++)o=zd(o,a[s],i,new Map);return o}).apply(void 0,[e].concat(n,[Hd]))}(dp(fp(e)),dp(fp(t)))}function fp(e){var t,n,r,a,i,o={};if(!es(e))return o;for(var s=0,c=Object.entries(e);s<c.length;s++){var u=C(c[s],2),l=u[0],d=u[1],p=Ko(l)?[l]:d.chains,f=d.methods||[],h=d.events||[],v=d.rpcMap||{},g=Vo(l);o[g]=cp(sp(sp({},o[g]),d),{chains:rt(p,null==(t=o[g])?void 0:t.chains),methods:rt(f,null==(n=o[g])?void 0:n.methods),events:rt(h,null==(r=o[g])?void 0:r.events)}),(es(v)||es((null==(a=o[g])?void 0:a.rpcMap)||{}))&&(o[g].rpcMap=sp(sp({},v),null==(i=o[g])?void 0:i.rpcMap))}return o}function hp(e){return e.includes(":")?e.split(":")[2]:e}function vp(e){for(var t={},n=0,r=Object.entries(e);n<r.length;n++){var a=C(r[n],2),i=a[0],o=a[1],s=o.methods||[],c=o.events||[],u=o.accounts||[],l=Ko(i)?[i]:o.chains?o.chains:lp(o.accounts);t[i]={chains:l,methods:s,events:c,accounts:u}}return t}function gp(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):(e=e.includes(":")?e.split(":")[1]:e,isNaN(Number(e))?e:Number(e))}var mp,yp={},bp=function(e){return yp[e]},wp=function(e,t){yp[e]=t},Ep=Object.defineProperty,kp=Object.getOwnPropertySymbols,xp=Object.prototype.hasOwnProperty,Cp=Object.prototype.propertyIsEnumerable,Ap=function(e,t,n){return t in e?Ep(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Np=function(e,t){for(var n in t||(t={}))xp.call(t,n)&&Ap(e,n,t[n]);if(kp){var r,a=M(kp(t));try{for(a.s();!(r=a.n()).done;){n=r.value;Cp.call(t,n)&&Ap(e,n,t[n])}}catch(i){a.e(i)}finally{a.f()}}return e},Ip=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],_p=function(e){return e&&e.startsWith("0x")?BigInt(e).toString(10):e},Sp=function(e){return e&&e.startsWith("0x")?e:"0x".concat(BigInt(e).toString(16))},Tp=function(e){return Object.keys(e).filter(function(e){return Ip.includes(e)}).reduce(function(t,n){return t[n]=Op(e[n]),t},{})},Op=function(e){return"string"==typeof e&&function(e){try{var t=JSON.parse(e);return"object"==typeof t&&null!==t&&!Array.isArray(t)}catch(n){return!1}}(e)?JSON.parse(e):e},Rp=Object.defineProperty,Pp=function(){function e(t){B(this,e),function(e,t,n){!function(e,t,n){t in e?Rp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,t+"",void 0)}(this,"storage"),this.storage=t}return F(e,[{key:"getItem",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.storage.getItem(e);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},n)}))()}},{key:"setItem",value:function(e,t){var n=this;return(0,r.Z)(A().mark(function r(){return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.storage.setItem(e,t);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},r)}))()}},{key:"removeItem",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.storage.removeItem(e);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},n)}))()}}],[{key:"getStorage",value:function(t){return mp||(mp=new e(t)),mp}}]),e}(),Up=Object.defineProperty,Mp=Object.defineProperties,Dp=Object.getOwnPropertyDescriptors,Lp=Object.getOwnPropertySymbols,Bp=Object.prototype.hasOwnProperty,jp=Object.prototype.propertyIsEnumerable,Fp=function(e,t,n){return t in e?Up(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Wp=function(e,t){for(var n in t||(t={}))Bp.call(t,n)&&Fp(e,n,t[n]);if(Lp){var r,a=M(Lp(t));try{for(a.s();!(r=a.n()).done;){n=r.value;jp.call(t,n)&&Fp(e,n,t[n])}}catch(i){a.e(i)}finally{a.f()}}return e},qp=function(e,t){return Mp(e,Dp(t))};function Zp(){return Zp=(0,r.Z)(A().mark(function e(t,n){var r,a,i,o,s,c,u,l,d;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=_e(t.result.capabilities.caip345.caip2),a=t.result.capabilities.caip345.transactionHashes,e.next=4,Promise.allSettled(a.map(function(e){return Hp(r.reference,e,n)}));case 4:return i=e.sent,o=i.filter(function(e){return"fulfilled"===e.status}).map(function(e){return e.value}).filter(function(e){return e}),i.filter(function(e){return"rejected"===e.status}).forEach(function(e){return console.warn("Failed to fetch transaction receipt:",e.reason)}),s=!o.length||o.some(function(e){return!e}),c=o.every(function(e){return"0x1"===(null==e?void 0:e.status)}),u=o.every(function(e){return"0x0"===(null==e?void 0:e.status)}),l=o.some(function(e){return"0x0"===(null==e?void 0:e.status)}),e.abrupt("return",(s?d=100:c?d=200:u?d=500:l&&(d=600),{id:t.result.id,version:t.request.version,atomic:t.request.atomicRequired,chainId:t.request.chainId,capabilities:t.result.capabilities,receipts:o,status:d}));case 9:case"end":return e.stop()}},e)})),Zp.apply(this,arguments)}function Hp(e,t,n){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,r.Z)(A().mark(function e(t,n,r){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(parseInt(t)).request((0,Es.formatJsonRpcRequest)("eth_getTransactionReceipt",[n]));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),Kp.apply(this,arguments)}function Vp(){return Vp=(0,r.Z)(function(e){var t=e.sendCalls,n=e.storage;return A().mark(function e(){var r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getItem(Qd);case 2:return r=e.sent,e.next=5,n.setItem(Qd,qp(Wp({},r),k({},t.result.id,{request:t.request,result:t.result,expiry:et(86400)})));case 5:case"end":return e.stop()}},e)})()}),Vp.apply(this,arguments)}function zp(e){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,r.Z)(function(e){var t=e.resultId,n=e.storage;return A().mark(function e(){var r,a;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getItem(Qd);case 2:if(!(r=e.sent)){e.next=10;break}return delete r[t],e.next=7,n.setItem(Qd,r);case 7:for(a in r)tt(r[a].expiry)&&delete r[a];return e.next=10,n.setItem(Qd,r);case 10:case"end":return e.stop()}},e)})()}),Gp.apply(this,arguments)}function $p(){return $p=(0,r.Z)(function(e){var t=e.resultId,n=e.storage;return A().mark(function e(){var r,a;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getItem(Qd);case 2:if(e.t1=r=e.sent,e.t0=null===e.t1,e.t0){e.next=6;break}e.t0=void 0===r;case 6:if(!e.t0){e.next=10;break}e.t2=void 0,e.next=11;break;case 10:e.t2=r[t];case 11:if(!(a=e.t2)||tt(a.expiry)){e.next=14;break}return e.abrupt("return",a);case 14:return e.next=16,zp({resultId:t,storage:n});case 16:case"end":return e.stop()}},e)})()}),$p.apply(this,arguments)}var Jp=Object.defineProperty,Yp=Object.defineProperties,Xp=Object.getOwnPropertyDescriptors,Qp=Object.getOwnPropertySymbols,ef=Object.prototype.hasOwnProperty,tf=Object.prototype.propertyIsEnumerable,nf=function(e,t,n){return t in e?Jp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},rf=function(e,t){for(var n in t||(t={}))ef.call(t,n)&&nf(e,n,t[n]);if(Qp){var r,a=M(Qp(t));try{for(a.s();!(r=a.n()).done;){n=r.value;tf.call(t,n)&&nf(e,n,t[n])}}catch(i){a.e(i)}finally{a.f()}}return e},af=function(e,t){return Yp(e,Xp(t))},of=function(e,t,n){return nf(e,"symbol"!=typeof t?t+"":t,n)},sf=function(){function e(t){B(this,e),of(this,"name","eip155"),of(this,"client"),of(this,"chainId"),of(this,"namespace"),of(this,"httpProviders"),of(this,"events"),of(this,"storage"),this.namespace=t.namespace,this.events=bp("events"),this.client=bp("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain()),this.storage=Pp.getStorage(this.client.core.storage)}return F(e,[{key:"request",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=e.request.method,n.next="eth_requestAccounts"===n.t0||"eth_accounts"===n.t0?3:"wallet_switchEthereumChain"===n.t0?4:"eth_chainId"===n.t0?7:"wallet_getCapabilities"===n.t0?8:"wallet_getCallsStatus"===n.t0?11:"wallet_sendCalls"===n.t0?14:17;break;case 3:return n.abrupt("return",t.getAccounts());case 4:return n.next=6,t.handleSwitchChain(e);case 6:return n.abrupt("return",n.sent);case 7:return n.abrupt("return",parseInt(t.getDefaultChain()));case 8:return n.next=10,t.getCapabilities(e);case 10:return n.abrupt("return",n.sent);case 11:return n.next=13,t.getCallStatus(e);case 13:return n.abrupt("return",n.sent);case 14:return n.next=16,t.sendCalls(e);case 16:return n.abrupt("return",n.sent);case 17:if(!t.namespace.methods.includes(e.request.method)){n.next=23;break}return n.next=20,t.client.request(e);case 20:n.t1=n.sent,n.next=24;break;case 23:n.t1=t.getHttpProvider().request(e.request);case 24:return n.abrupt("return",n.t1);case 25:case"end":return n.stop()}},n)}))()}},{key:"updateNamespace",value:function(e){this.namespace=Object.assign(this.namespace,e)}},{key:"setDefaultChain",value:function(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t);var n=this.chainId;this.chainId=parseInt(e),this.events.emit("default_chain_changed",{currentCaipChainId:"".concat(this.name,":").concat(e),previousCaipChainId:"".concat(this.name,":").concat(n)})}},{key:"requestAccounts",value:function(){return this.getAccounts()}},{key:"getDefaultChain",value:function(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;var e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}},{key:"createHttpProvider",value:function(e,t){var n=t||up("".concat(this.name,":").concat(e),this.namespace,this.client.core.projectId);if(!n)throw new Error("No RPC url provided for chainId: ".concat(e));return new ws.r(new Td.k(n,bp("disableProviderPing")))}},{key:"setHttpProvider",value:function(e,t){var n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}},{key:"createHttpProviders",value:function(){var e=this,t={};return this.namespace.chains.forEach(function(n){var r,a=parseInt(function(e){return e.includes(":")?e.split(":")[1]:e}(n));t[a]=e.createHttpProvider(a,null==(r=e.namespace.rpcMap)?void 0:r[n])}),t}},{key:"getAccounts",value:function(){var e=this,t=this.namespace.accounts;return t?x(new Set(t.filter(function(t){return t.split(":")[1]===e.chainId.toString()}).map(function(e){return e.split(":")[2]}))):[]}},{key:"getHttpProvider",value:function(e){var t=e||this.chainId;return this.httpProviders[t]||(this.httpProviders=af(rf({},this.httpProviders),k({},t,this.createHttpProvider(t))),this.httpProviders[t])}},{key:"handleSwitchChain",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,a,i,o;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=(i=e.request.params?null==(r=e.request.params[0])?void 0:r.chainId:"0x0").startsWith("0x")?i:"0x".concat(i),o=parseInt(i,16),!t.isChainApproved(o)){n.next=7;break}t.setDefaultChain("".concat(o)),n.next=12;break;case 7:if(t.namespace.methods.includes("wallet_switchEthereumChain")){n.next=9;break}throw new Error("Failed to switch to chain 'eip155:".concat(o,"'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method."));case 9:return n.next=11,t.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:null==(a=t.namespace.chains)?void 0:a[0]});case 11:t.setDefaultChain("".concat(o));case 12:return n.abrupt("return",null);case 13:case"end":return n.stop()}},n)}))()}},{key:"isChainApproved",value:function(e){return this.namespace.chains.includes("".concat(this.name,":").concat(e))}},{key:"getCapabilities",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,a,i,o,s,c,u,l,d,p,f,h,v;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(c=null==(a=null==(r=e.request)?void 0:r.params)?void 0:a[0],u=(null==(o=null==(i=e.request)?void 0:i.params)?void 0:o[1])||[],c){n.next=3;break}throw new Error("Missing address parameter in `wallet_getCapabilities` request");case 3:if(l=t.client.session.get(e.topic),d=(null==(s=null==l?void 0:l.sessionProperties)?void 0:s.capabilities)||{},p="".concat(c).concat(u.length>0?u.join(","):"0x".concat(t.chainId.toString(16))),!(f=null==d?void 0:d[p])){n.next=6;break}return n.abrupt("return",f);case 6:try{h=function(e,t,n){var r=e.sessionProperties,a=void 0===r?{}:r,i=e.scopedProperties,o=void 0===i?{}:i,s={};if(es(o)||es(a)){var c,u=Tp(a),l=M(n);try{for(l.s();!(c=l.n()).done;){var d=c.value,p=_p(d);if(p){s[Sp(p)]=u;var f=null==o?void 0:o["eip155:".concat(p)];if(f){var h=null==f?void 0:f["eip155:".concat(p,":").concat(t)];s[Sp(p)]=Np(Np({},s[Sp(p)]),Tp(h||f))}}}}catch(w){l.e(w)}finally{l.f()}for(var v=0,g=Object.entries(s);v<g.length;v++){var m=C(g[v],2),y=m[0],b=m[1];0===Object.keys(b).length&&delete s[y]}return Object.keys(s).length>0?s:void 0}}(l,c,u)}catch(g){console.warn("Failed to extract capabilities from session",g)}if(!h){n.next=9;break}return n.abrupt("return",h);case 9:return n.next=11,t.client.request(e);case 11:return v=n.sent,n.prev=12,n.next=15,t.client.session.update(e.topic,{sessionProperties:af(rf({},l.sessionProperties||{}),{capabilities:af(rf({},d||{}),k({},p,v))})});case 15:n.next=20;break;case 17:n.prev=17,n.t0=n.catch(12),console.warn("Failed to update session with capabilities",n.t0);case 20:return n.abrupt("return",v);case 21:case"end":return n.stop()}},n,null,[[12,17]])}))()}},{key:"getCallStatus",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,a,i,o,s,c,u,l;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.client.session.get(e.topic),!(s=null==(r=o.sessionProperties)?void 0:r.bundler_name)){n.next=12;break}return c=t.getBundlerUrl(e.chainId,s),n.prev=3,n.next=6,t.getUserOperationReceipt(c,e);case 6:return n.abrupt("return",n.sent);case 9:n.prev=9,n.t0=n.catch(3),console.warn("Failed to fetch call status from bundler",n.t0,c);case 12:if(!(u=null==(a=o.sessionProperties)?void 0:a.bundler_url)){n.next=23;break}return n.prev=14,n.next=17,t.getUserOperationReceipt(u,e);case 17:return n.abrupt("return",n.sent);case 20:n.prev=20,n.t1=n.catch(14),console.warn("Failed to fetch call status from custom bundler",n.t1,u);case 23:return n.next=25,function(e){return $p.apply(this,arguments)}({resultId:null==(i=e.request.params)?void 0:i[0],storage:t.storage});case 25:if(!(l=n.sent)){n.next=36;break}return n.prev=27,n.next=30,function(e,t){return Zp.apply(this,arguments)}(l,t.getHttpProvider.bind(t));case 30:return n.abrupt("return",n.sent);case 33:n.prev=33,n.t2=n.catch(27),console.warn("Failed to fetch call status from stored send calls",n.t2,l);case 36:if(!t.namespace.methods.includes(e.request.method)){n.next=40;break}return n.next=39,t.client.request(e);case 39:return n.abrupt("return",n.sent);case 40:throw new Error("Fetching call status not approved by the wallet.");case 41:case"end":return n.stop()}},n,null,[[3,9],[14,20],[27,33]])}))()}},{key:"getUserOperationReceipt",value:function(e,t){return(0,r.Z)(A().mark(function n(){var r,a,i;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=new URL(e),n.next=3,fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,Es.formatJsonRpcRequest)("eth_getUserOperationReceipt",[null==(r=t.request.params)?void 0:r[0]]))});case 3:if((i=n.sent).ok){n.next=6;break}throw new Error("Failed to fetch user operation receipt - ".concat(i.status));case 6:return n.next=8,i.json();case 8:return n.abrupt("return",n.sent);case 9:case"end":return n.stop()}},n)}))()}},{key:"getBundlerUrl",value:function(e,t){return"".concat(Xd,"?projectId=").concat(this.client.core.projectId,"&chainId=").concat(e,"&bundler=").concat(t)}},{key:"sendCalls",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,a,i,o,s,c,u,l,d;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.client.request(e);case 2:if(o=n.sent,s=null==(r=e.request.params)?void 0:r[0],c=null==o?void 0:o.id,u=(null==o?void 0:o.capabilities)||{},l=null==(a=null==u?void 0:u.caip345)?void 0:a.caip2,d=null==(i=null==u?void 0:u.caip345)?void 0:i.transactionHashes,n.t0=!c||!l||!(null!=d&&d.length),n.t0){n.next=12;break}return n.next=12,function(e){return Vp.apply(this,arguments)}({sendCalls:{request:s,result:o},storage:t.storage});case 12:return n.abrupt("return",o);case 13:case"end":return n.stop()}},n)}))()}}]),e}(),cf=Object.defineProperty,uf=function(e,t,n){return function(e,t,n){return t in e?cf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=typeof t?t+"":t,n)},lf=function(){function e(t){B(this,e),uf(this,"name",Yd),uf(this,"client"),uf(this,"httpProviders"),uf(this,"events"),uf(this,"namespace"),uf(this,"chainId"),this.namespace=t.namespace,this.events=bp("events"),this.client=bp("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}return F(e,[{key:"updateNamespace",value:function(e){this.namespace.chains=x(new Set((this.namespace.chains||[]).concat(e.chains||[]))),this.namespace.accounts=x(new Set((this.namespace.accounts||[]).concat(e.accounts||[]))),this.namespace.methods=x(new Set((this.namespace.methods||[]).concat(e.methods||[]))),this.namespace.events=x(new Set((this.namespace.events||[]).concat(e.events||[]))),this.httpProviders=this.createHttpProviders()}},{key:"requestAccounts",value:function(){return this.getAccounts()}},{key:"request",value:function(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}},{key:"setDefaultChain",value:function(e,t){this.httpProviders[e]||this.setHttpProvider(e,t);var n=this.chainId;this.chainId=e,this.events.emit("default_chain_changed",{currentCaipChainId:"".concat(this.name,":").concat(e),previousCaipChainId:"".concat(this.name,":").concat(n)})}},{key:"getDefaultChain",value:function(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;var e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}},{key:"getNamespaceName",value:function(){var e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return _e(e).namespace}},{key:"getAccounts",value:function(){var e=this,t=this.namespace.accounts;return t?x(new Set(t.filter(function(t){return t.split(":")[1]===e.chainId.toString()}).map(function(e){return e.split(":")[2]}))):[]}},{key:"createHttpProviders",value:function(){var e,t,n=this,r={};return null==(t=null==(e=this.namespace)?void 0:e.accounts)||t.forEach(function(e){var t,a,i=_e(e),o=null==(a=null==(t=n.namespace)?void 0:t.rpcMap)?void 0:a["".concat(i.namespace,":").concat(i.reference)];r[i.reference]=n.createHttpProvider(e,o)}),r}},{key:"getHttpProvider",value:function(e){var t=_e(e).reference,n=this.httpProviders[t];if(typeof n>"u")throw new Error("JSON-RPC provider for ".concat(e," not found"));return n}},{key:"setHttpProvider",value:function(e,t){var n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}},{key:"createHttpProvider",value:function(e,t){var n=t||up(e,this.namespace,this.client.core.projectId);if(!n)throw new Error("No RPC url provided for chainId: ".concat(e));return new ws.r(new Td.Z(n,bp("disableProviderPing")))}}]),e}(),df=Object.defineProperty,pf=Object.defineProperties,ff=Object.getOwnPropertyDescriptors,hf=Object.getOwnPropertySymbols,vf=Object.prototype.hasOwnProperty,gf=Object.prototype.propertyIsEnumerable,mf=function(e,t,n){return t in e?df(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},yf=function(e,t){for(var n in t||(t={}))vf.call(t,n)&&mf(e,n,t[n]);if(hf){var r,a=M(hf(t));try{for(a.s();!(r=a.n()).done;){n=r.value;gf.call(t,n)&&mf(e,n,t[n])}}catch(i){a.e(i)}finally{a.f()}}return e},bf=function(e,t){return pf(e,ff(t))},wf=function(e,t,n){return mf(e,"symbol"!=typeof t?t+"":t,n)},Ef=function(){function e(t){var n,r;B(this,e),wf(this,"client"),wf(this,"namespaces"),wf(this,"optionalNamespaces"),wf(this,"sessionProperties"),wf(this,"scopedProperties"),wf(this,"events",new u),wf(this,"rpcProviders",{}),wf(this,"session"),wf(this,"providerOpts"),wf(this,"logger"),wf(this,"uri"),wf(this,"disableProviderPing",!1),wf(this,"connectParams"),this.providerOpts=t,this.logger=bs({logger:null!=(n=t.logger)?n:"error",name:null!=(r=this.providerOpts.name)?r:Gd}),this.disableProviderPing=(null==t?void 0:t.disableProviderPing)||!1}return F(e,[{key:"request",value:function(e,t,n){var a=this;return(0,r.Z)(A().mark(function r(){var i,o,s,c;return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(i=a.validateChain(t),o=C(i,2),s=o[0],c=o[1],a.session){r.next=3;break}throw new Error("Please call connect() before request()");case 3:return r.next=5,a.getProvider(s).request({request:yf({},e),chainId:"".concat(s,":").concat(c),topic:a.session.topic,expiry:n});case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}},r)}))()}},{key:"sendAsync",value:function(e,t,n,r){var a=(new Date).getTime();this.request(e,n,r).then(function(e){return t(null,(0,Es.formatJsonRpcResult)(a,e))}).catch(function(e){return t(e,void 0)})}},{key:"enable",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.client){t.next=2;break}throw new Error("Sign Client not initialized");case 2:if(t.t0=e.session,t.t0){t.next=6;break}return t.next=6,e.connect({namespaces:e.namespaces,optionalNamespaces:e.optionalNamespaces,sessionProperties:e.sessionProperties,scopedProperties:e.scopedProperties});case 6:return t.next=8,e.requestAccounts();case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}},t)}))()}},{key:"disconnect",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.session){t.next=2;break}throw new Error("Please call connect() before enable()");case 2:return t.next=4,e.client.disconnect({topic:null==(n=e.session)?void 0:n.topic,reason:Xo("USER_DISCONNECTED")});case 4:return t.next=6,e.cleanup();case 6:case"end":return t.stop()}},t)}))()}},{key:"connect",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.client){n.next=2;break}throw new Error("Sign Client not initialized");case 2:if(t.connectParams=e,t.setNamespaces(e),t.cleanupPendingPairings(),e.skipPairing){n.next=6;break}return n.next=5,t.pair(e.pairingTopic);case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}},n)}))()}},{key:"authenticate",value:function(e,t){var n=this;return(0,r.Z)(A().mark(function r(){var a,i,o,s,c;return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n.client){r.next=2;break}throw new Error("Sign Client not initialized");case 2:return n.setNamespaces(e),r.next=5,n.cleanupPendingPairings();case 5:return r.next=7,n.client.authenticate(e,t);case 7:return a=r.sent,i=a.uri,o=a.response,i&&(n.uri=i,n.events.emit("display_uri",i)),r.next=13,o();case 13:if(s=r.sent,n.session=s.session,!n.session){r.next=20;break}return c=vp(n.session.namespaces),n.namespaces=pp(n.namespaces,c),r.next=19,n.persist("namespaces",n.namespaces);case 19:n.onConnect();case 20:return r.abrupt("return",s);case 21:case"end":return r.stop()}},r)}))()}},{key:"on",value:function(e,t){this.events.on(e,t)}},{key:"once",value:function(e,t){this.events.once(e,t)}},{key:"removeListener",value:function(e,t){this.events.removeListener(e,t)}},{key:"off",value:function(e,t){this.events.off(e,t)}},{key:"isWalletConnect",get:function(){return!0}},{key:"pair",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,a,i,o,s,c,u;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.client.connect({pairingTopic:e,requiredNamespaces:t.namespaces,optionalNamespaces:t.optionalNamespaces,sessionProperties:t.sessionProperties,scopedProperties:t.scopedProperties,authentication:null==(r=t.connectParams)?void 0:r.authentication,walletPay:null==(a=t.connectParams)?void 0:a.walletPay});case 2:return i=n.sent,o=i.uri,s=i.approval,o&&(t.uri=o,t.events.emit("display_uri",o)),n.next=8,s();case 8:return c=n.sent,t.session=c,u=vp(c.namespaces),t.namespaces=pp(t.namespaces,u),n.next=14,t.persist("namespaces",t.namespaces);case 14:return n.next=16,t.persist("optionalNamespaces",t.optionalNamespaces);case 16:return t.onConnect(),n.abrupt("return",t.session);case 18:case"end":return n.stop()}},n)}))()}},{key:"setDefaultChain",value:function(e,t){try{if(!this.session)return;var n=C(this.validateChain(e),2),r=n[0],a=n[1];this.getProvider(r).setDefaultChain(a,t)}catch(r){if(!/Please call connect/.test(r.message))throw r}}},{key:"cleanupPendingPairings",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;return(0,r.Z)(A().mark(function n(){var r,a,i,o;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t.logger.info("Cleaning up inactive pairings..."),Qo(r=t.client.pairing.getAll())){n.next=5;break}return n.abrupt("return");case 5:a=M(r),n.prev=6,a.s();case 8:if((i=a.n()).done){n.next=18;break}if(o=i.value,!e.deletePairings){n.next=14;break}t.client.core.expirer.set(o.topic,0),n.next=16;break;case 14:return n.next=16,t.client.core.relayer.subscriber.unsubscribe(o.topic);case 16:n.next=8;break;case 18:n.next=23;break;case 20:n.prev=20,n.t0=n.catch(6),a.e(n.t0);case 23:return n.prev=23,a.f(),n.finish(23);case 26:t.logger.info("Inactive pairings cleared: ".concat(r.length)),n.next=32;break;case 29:n.prev=29,n.t1=n.catch(0),t.logger.warn(n.t1,"Failed to cleanup pending pairings");case 32:case"end":return n.stop()}},n,null,[[0,29],[6,20,23,26]])}))()}},{key:"abortPairingAttempt",value:function(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}},{key:"checkStorage",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getFromStore("namespaces");case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={};case 5:return e.namespaces=t.t0,t.next=8,e.getFromStore("optionalNamespaces");case 8:if(t.t1=t.sent,t.t1){t.next=11;break}t.t1={};case 11:e.optionalNamespaces=t.t1,e.session&&e.createProviders();case 13:case"end":return t.stop()}},t)}))()}},{key:"initialize",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.logger.trace("Initialized"),t.next=3,e.createClient();case 3:return t.next=5,e.checkStorage();case 5:e.registerEventListeners();case 6:case"end":return t.stop()}},t)}))()}},{key:"createClient",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n,r,a;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.providerOpts.client,t.t0){t.next=5;break}return t.next=4,Sd.init({core:e.providerOpts.core,logger:e.providerOpts.logger||"error",relayUrl:e.providerOpts.relayUrl||"wss://relay.walletconnect.org",projectId:e.providerOpts.projectId,metadata:e.providerOpts.metadata,storageOptions:e.providerOpts.storageOptions,storage:e.providerOpts.storage,name:e.providerOpts.name,customStoragePrefix:e.providerOpts.customStoragePrefix,telemetryEnabled:e.providerOpts.telemetryEnabled});case 4:t.t0=t.sent;case 5:if(e.client=t.t0,!e.providerOpts.session){t.next=16;break}t.prev=7,e.session=e.client.session.get(e.providerOpts.session.topic),t.next=14;break;case 11:throw t.prev=11,t.t1=t.catch(7),e.logger.error(t.t1,"Failed to get session"),new Error("The provided session: ".concat(null==(r=null==(n=e.providerOpts)?void 0:n.session)?void 0:r.topic," doesn't exist in the Sign client"));case 14:t.next=18;break;case 16:a=e.client.session.getAll(),e.session=a[0];case 18:e.logger.trace("SignClient Initialized");case 19:case"end":return t.stop()}},t,null,[[7,11]])}))()}},{key:"createProviders",value:function(){var e=this;if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");var t=x(new Set(Object.keys(this.session.namespaces).map(function(e){return Vo(e)})));wp("client",this.client),wp("events",this.events),wp("disableProviderPing",this.disableProviderPing),t.forEach(function(t){if(e.session){var n=function(e,t){var n=Object.keys(t.namespaces).filter(function(t){return t.includes(e)});if(!n.length)return[];var r=[];return n.forEach(function(e){r.push.apply(r,x(t.namespaces[e].accounts))}),r}(t,e.session);if(0!==(null==n?void 0:n.length)){var r=lp(n),a=pp(e.namespaces,e.optionalNamespaces),i=bf(yf({},a[t]),{accounts:n,chains:r});e.rpcProviders[t]="eip155"===t?new sf({namespace:i}):new lf({namespace:i})}}})}},{key:"registerEventListeners",value:function(){var e=this,t=this;if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",function(t){var n;t.topic===(null==(n=e.session)?void 0:n.topic)&&e.events.emit("session_ping",t)}),this.client.on("session_event",function(t){var n,r=t.params;if(t.topic===(null==(n=e.session)?void 0:n.topic)){var a=r.event;if("accountsChanged"===a.name){var i=a.data;i&&Qo(i)&&e.events.emit("accountsChanged",i.map(hp))}else if("chainChanged"===a.name){var o=r.chainId,s=r.event.data,c=Vo(o),u=gp(o)!==gp(s)?"".concat(c,":").concat(gp(s)):o;e.onChainChanged({currentCaipChainId:u})}else e.events.emit(a.name,a.data);e.events.emit("session_event",t)}}),this.client.on("session_update",function(t){var n,r,a=t.topic,i=t.params;if(a===(null==(n=e.session)?void 0:n.topic)){var o=i.namespaces,s=null==(r=e.client)?void 0:r.session.get(a);e.session=bf(yf({},s),{namespaces:o}),e.onSessionUpdate(),e.events.emit("session_update",{topic:a,params:i})}}),this.client.on("session_delete",function(){var e=(0,r.Z)(A().mark(function e(n){var r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n.topic===(null==(r=t.session)?void 0:r.topic),!e.t0){e.next=6;break}return e.next=4,t.cleanup();case 4:t.events.emit("session_delete",n),t.events.emit("disconnect",bf(yf({},Xo("USER_DISCONNECTED")),{data:n.topic}));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),this.on("default_chain_changed",function(t){e.onChainChanged(bf(yf({},t),{internal:!0}))})}},{key:"getProvider",value:function(e){return this.rpcProviders[e]||this.rpcProviders[Yd]}},{key:"onSessionUpdate",value:function(){var e=this;Object.keys(this.rpcProviders).forEach(function(t){var n;e.getProvider(t).updateNamespace(null==(n=e.session)?void 0:n.namespaces[t])})}},{key:"setNamespaces",value:function(e){var t=e.namespaces,n=void 0===t?{}:t,r=e.optionalNamespaces,a=void 0===r?{}:r,i=e.sessionProperties,o=e.scopedProperties;this.optionalNamespaces=pp(n,a),this.sessionProperties=i,this.scopedProperties=o}},{key:"validateChain",value:function(e){var t=C((null==e?void 0:e.split(":"))||["",""],2),n=t[0],r=t[1];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(function(e){return Vo(e)}).includes(n))throw new Error("Namespace '".concat(n,"' is not configured. Please call connect() first with namespace config."));if(n&&r)return[n,r];var a=Vo(Object.keys(this.namespaces)[0]);return[a,this.rpcProviders[a].getDefaultChain()]}},{key:"requestAccounts",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n,r,a;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.validateChain(),r=C(n,1),a=r[0],t.next=3,e.getProvider(a).requestAccounts();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t)}))()}},{key:"onChainChanged",value:function(e){var t=e.currentCaipChainId,n=e.previousCaipChainId,a=e.internal,i=void 0!==a&&a,o=this;return(0,r.Z)(A().mark(function e(){var r,a,s,c;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.namespaces){e.next=2;break}return e.abrupt("return");case 2:if(r=o.validateChain(t),a=C(r,2),s=a[0],c=a[1],e.t0=c,!e.t0){e.next=9;break}return o.updateNamespaceChain(s,c),i?(o.events.emit("chainChanged",c),o.emitAccountsChangedOnChainChange({namespace:s,currentCaipChainId:t,previousCaipChainId:n})):o.getProvider(s).setDefaultChain(c),e.next=9,o.persist("namespaces",o.namespaces);case 9:case"end":return e.stop()}},e)}))()}},{key:"emitAccountsChangedOnChainChange",value:function(e){var t,n,r=e.namespace,a=e.currentCaipChainId,i=e.previousCaipChainId;try{if(i===a)return;var o=null==(n=null==(t=this.session)?void 0:t.namespaces[r])?void 0:n.accounts;if(!o)return;var s=o.filter(function(e){return e.includes("".concat(a,":"))}).map(hp);if(!Qo(s))return;this.events.emit("accountsChanged",s)}catch(o){this.logger.warn(o,"Failed to emit accountsChanged on chain change")}}},{key:"updateNamespaceChain",value:function(e,t){if(this.namespaces){var n=this.namespaces[e]?e:"".concat(e,":").concat(t),r={chains:[],methods:[],events:[],defaultChain:t};this.namespaces[n]?this.namespaces[n]&&(this.namespaces[n].defaultChain=t):this.namespaces[n]=r}}},{key:"onConnect",value:function(){this.createProviders(),this.events.emit("connect",{session:this.session})}},{key:"cleanup",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.connectParams=void 0,e.namespaces=void 0,e.optionalNamespaces=void 0,e.sessionProperties=void 0,t.next=6,e.deleteFromStore("namespaces");case 6:return t.next=8,e.deleteFromStore("optionalNamespaces");case 8:return t.next=10,e.deleteFromStore("sessionProperties");case 10:return e.session=void 0,e.cleanupPendingPairings({deletePairings:!0}),t.next=14,e.cleanupStorage();case 14:case"end":return t.stop()}},t)}))()}},{key:"persist",value:function(e,t){var n=this;return(0,r.Z)(A().mark(function r(){var a,i;return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i=(null==(a=n.session)?void 0:a.topic)||"",r.next=3,n.client.core.storage.setItem("".concat($d,"/").concat(e).concat(i),t);case 3:case"end":return r.stop()}},r)}))()}},{key:"getFromStore",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,a;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=(null==(r=t.session)?void 0:r.topic)||"",n.next=3,t.client.core.storage.getItem("".concat($d,"/").concat(e).concat(a));case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},n)}))()}},{key:"deleteFromStore",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,a;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=(null==(r=t.session)?void 0:r.topic)||"",n.next=3,t.client.core.storage.removeItem("".concat($d,"/").concat(e).concat(a));case 3:case"end":return n.stop()}},n)}))()}},{key:"cleanupStorage",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n,r,a,i,o;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!((null==(n=e.client)?void 0:n.session.length)>0)){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.client.core.storage.getKeys();case 5:r=t.sent,a=M(r),t.prev=7,a.s();case 9:if((i=a.n()).done){t.next=17;break}if(o=i.value,t.t0=o.startsWith($d),!t.t0){t.next=15;break}return t.next=15,e.client.core.storage.removeItem(o);case 15:t.next=9;break;case 17:t.next=22;break;case 19:t.prev=19,t.t1=t.catch(7),a.e(t.t1);case 22:return t.prev=22,a.f(),t.finish(22);case 25:t.next=30;break;case 27:t.prev=27,t.t2=t.catch(0),e.logger.warn(t.t2,"Failed to cleanup storage");case 30:case"end":return t.stop()}},t,null,[[0,27],[7,19,22,25]])}))()}}],[{key:"init",value:function(t){return(0,r.Z)(A().mark(function n(){var r;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=new e(t),n.next=3,r.initialize();case 3:return n.abrupt("return",r);case 4:case"end":return n.stop()}},n)}))()}}]),e}(),kf=n(72290),xf=n(32750),Cf=n(19579),Af=n(71848),Nf=n(65023),If=n(71166),_f=n(42916),Sf=n(23250),Tf=n(31254),Of=2147483648,Rf=function(e){if(e>=Of)throw new Error("Invalid chainId");return(Of|e)>>>0},Pf=n(79781),Uf=n(40378),Mf=(0,Sf.sj)({suggestions:[],loading:!1}),Df={state:Mf,subscribe:function(e){return(0,Sf.Ld)(Mf,function(){return e(Mf)})},subscribeKey:function(e,t){return(0,Tf.VW)(Mf,e,t)},resolveName:function(e){return(0,r.Z)(A().mark(function t(){var n,r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Af.L.lookupEnsName(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),new Error((null===t.t0||void 0===t.t0||null===(n=t.t0.reasons)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.description)||"Error resolving name");case 9:case"end":return t.stop()}},t,null,[[0,6]])}))()},isNameRegistered:function(e){return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Af.L.lookupEnsName(e);case 3:return t.abrupt("return",!0);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",!1);case 9:case"end":return t.stop()}},t,null,[[0,6]])}))()},getSuggestions:function(e){return(0,r.Z)(A().mark(function t(){var n,r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Mf.loading=!0,Mf.suggestions=[],t.next=4,Af.L.getEnsNameSuggestions(e);case 4:return n=t.sent,t.abrupt("return",(Mf.suggestions=n.suggestions||[],Mf.suggestions));case 8:throw t.prev=8,t.t0=t.catch(0),r=Lf.parseEnsApiError(t.t0,"Error fetching name suggestions"),new Error(r);case 12:return t.prev=12,Mf.loading=!1,t.finish(12);case 15:case"end":return t.stop()}},t,null,[[0,8,12,15]])}))()},getNamesForAddress:function(e){return(0,r.Z)(A().mark(function t(){var n,r,a;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i.R.state.activeCaipNetwork){t.next=3;break}return t.abrupt("return",[]);case 3:if(!(n=_f.M.getEnsFromCacheForAddress(e))){t.next=6;break}return t.abrupt("return",n);case 6:return t.next=8,Af.L.reverseLookupEnsName({address:e});case 8:return r=t.sent,t.abrupt("return",(_f.M.updateEnsCache({address:e,ens:r,timestamp:Date.now()}),r));case 12:throw t.prev=12,t.t0=t.catch(0),a=Lf.parseEnsApiError(t.t0,"Error fetching names for address"),new Error(a);case 16:case"end":return t.stop()}},t,null,[[0,12]])}))()},registerName:function(e){return(0,r.Z)(A().mark(function t(){var n,r,s,c,u,l,d,p,f;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=i.R.state.activeCaipNetwork,s=null===(n=i.R.getAccountData(null==r?void 0:r.chainNamespace))||void 0===n?void 0:n.address,c=a.A.getAuthConnector(),r){t.next=3;break}throw new Error("Network not found");case 3:if(s&&c){t.next=5;break}throw new Error("Address or auth connector not found");case 5:return Mf.loading=!0,t.prev=6,u=JSON.stringify({name:e,attributes:{},timestamp:Math.floor(Date.now()/1e3)}),Uf.P.pushTransactionStack({onCancel:function(){Uf.P.replace("RegisterAccountName")}}),t.next=11,o.l.signMessage(u);case 11:if(l=t.sent,Mf.loading=!1,d=r.id){t.next=16;break}throw new Error("Network not found");case 16:return p=Rf(Number(d)),t.next=19,Af.L.registerEnsName({coinType:p,address:s,signature:l,message:u});case 19:i.R.setAccountProp("profileName",e,r.chainNamespace),_f.M.updateEnsCache({address:s,ens:[{name:e,registered_at:(new Date).toISOString(),updated_at:void 0,addresses:{},attributes:[]}],timestamp:Date.now()}),Uf.P.replace("RegisterAccountNameSuccess"),t.next=28;break;case 24:throw t.prev=24,t.t0=t.catch(6),f=Lf.parseEnsApiError(t.t0,"Error registering name ".concat(e)),Uf.P.replace("RegisterAccountName"),new Error(f);case 28:return t.prev=28,Mf.loading=!1,t.finish(28);case 31:case"end":return t.stop()}},t,null,[[6,24,28,31]])}))()},validateName:function(e){return/^[\x2D0-9A-Za-z]{4,}$/.test(e)},parseEnsApiError:function(e,t){var n,r;return(null==e||null===(n=e.reasons)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.description)||t}},Lf=(0,Pf.P)(Df),Bf=n(14568),jf=n(9483),Ff=n(15563),Wf=n(38720),qf=n(91951),Zf=n(28153),Hf={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},Kf={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},Vf=(0,Sf.sj)({providers:Zf.gy,selectedProvider:null,error:null,purchaseCurrency:Hf,paymentCurrency:Kf,purchaseCurrencies:[Hf],paymentCurrencies:[],quotesLoading:!1}),zf={state:Vf,subscribe:function(e){return(0,Sf.Ld)(Vf,function(){return e(Vf)})},subscribeKey:function(e,t){return(0,Tf.VW)(Vf,e,t)},setSelectedProvider:function(e){if(e&&"meld"===e.name){var t,n,r,a=i.R.state.activeChain,o=a===kf.b.CHAIN.SOLANA?"SOL":"USDC",s=a&&null!==(t=null===(n=i.R.state.chains.get(a))||void 0===n||null===(r=n.accountState)||void 0===r?void 0:r.address)&&void 0!==t?t:"",u=new URL(e.url);u.searchParams.append("publicKey",Zf.a$),u.searchParams.append("destinationCurrencyCode",o),u.searchParams.append("walletAddress",s),u.searchParams.append("externalCustomerId",c.h.state.projectId),Vf.selectedProvider=E(E({},e),{},{url:u.toString()})}else Vf.selectedProvider=e},setOnrampProviders:function(e){if(Array.isArray(e)&&e.every(function(e){return"string"==typeof e})){var t=e,n=Zf.gy.filter(function(e){return t.includes(e.name)});Vf.providers=n}else Vf.providers=[]},setPurchaseCurrency:function(e){Vf.purchaseCurrency=e},setPaymentCurrency:function(e){Vf.paymentCurrency=e},setPurchaseAmount:function(e){Gf.state.purchaseAmount=e},setPaymentAmount:function(e){Gf.state.paymentAmount=e},getAvailableCurrencies:function(){return(0,r.Z)(A().mark(function e(){var t;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Af.L.getOnrampOptions();case 2:return t=e.sent,Vf.purchaseCurrencies=t.purchaseCurrencies,Vf.paymentCurrencies=t.paymentCurrencies,Vf.paymentCurrency=t.paymentCurrencies[0]||Kf,Vf.purchaseCurrency=t.purchaseCurrencies[0]||Hf,e.next=9,qf.Q.fetchCurrencyImages(t.paymentCurrencies.map(function(e){return e.id}));case 9:return e.next=11,qf.Q.fetchTokenImages(t.purchaseCurrencies.map(function(e){return e.symbol}));case 11:case"end":return e.stop()}},e)}))()},getQuote:function(){return(0,r.Z)(A().mark(function e(){var t,n,r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Vf.quotesLoading=!0,e.prev=1,e.next=4,Af.L.getOnrampQuote({purchaseCurrency:Vf.purchaseCurrency,paymentCurrency:Vf.paymentCurrency,amount:(null===(t=Vf.paymentAmount)||void 0===t?void 0:t.toString())||"0",network:null===(n=Vf.purchaseCurrency)||void 0===n?void 0:n.symbol});case 4:return r=e.sent,e.abrupt("return",(Vf.quotesLoading=!1,Vf.purchaseAmount=Number(null==r?void 0:r.purchaseAmount.amount),r));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",(Vf.error=e.t0.message,Vf.quotesLoading=!1,null));case 11:return e.prev=11,Vf.quotesLoading=!1,e.finish(11);case 14:case"end":return e.stop()}},e,null,[[1,8,11,14]])}))()},resetState:function(){Vf.selectedProvider=null,Vf.error=null,Vf.purchaseCurrency=Hf,Vf.paymentCurrency=Kf,Vf.purchaseCurrencies=[Hf],Vf.paymentCurrencies=[],Vf.paymentAmount=void 0,Vf.purchaseAmount=void 0,Vf.quotesLoading=!1}},Gf=(0,Pf.P)(zf),$f=n(22167),Jf=n(26131);function Yf(e){try{return new URL(e)}catch(t){return null}}function Xf(e,t){if(t.includes("://"))return!!(o=Yf(t))&&o.origin===e;var n=function(e){var t=e.split("/"),n=t.length>0&&void 0!==t[0]?t[0]:"",r=n.lastIndexOf(":");return-1===r?{host:n}:{host:n.slice(0,r),port:n.slice(r+1)}}(t),r=n.host,a=n.port,i=e.indexOf("://");if(-1!==i){var o=i+3,s=e.indexOf("/",o);-1===s&&(s=e.length);var c=e.slice(o,s);return void 0!==a?"".concat(r,":").concat(a)===c:r===c.split(":")[0]}var u=Yf(e);return!!u&&(void 0!==a?r===u.hostname&&a===(u.port||void 0):r===u.hostname)}function Qf(e,t,n){var r,a=n,i=a.indexOf("://");-1!==i&&(r=a.slice(0,i),a=a.slice(i+3));var o=a.indexOf("/");-1!==o&&(a=a.slice(0,o));var s,c=a,u=c.lastIndexOf(":");-1!==u&&(s=c.slice(u+1),c=c.slice(0,u));var l,d=c.split("."),p=M(d);try{for(p.s();!(l=p.n()).done;){var f=l.value;if(f.includes("*")&&"*"!==f)return!1}}catch(w){p.e(w)}finally{p.f()}var h=e.protocol.replace(/:$/,"");if(r&&r!==h||void 0!==s&&"*"!==s&&s!==e.port)return!1;var v=function(e){var t=e.indexOf("://");if(-1===t)return null;var n=e.slice(0,t),r=t+3,a=e.indexOf("/",r);-1===a&&(a=e.length);var i=e.slice(r,a),o=i.lastIndexOf(":");return-1===o?{scheme:n,host:i}:{scheme:n,host:i.slice(0,o),port:i.slice(o+1)}}(t),g=(v?v.host:e.hostname).split(".");if(d.length!==g.length)return!1;for(var m=d.length-1;m>=0;m-=1){var y=d[m],b=g[m];if("*"!==y&&y!==b)return!1}return!0}var eh={ton:["ton_sendMessage","ton_signData"],solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},th={RPC_ERROR_CODE:{USER_REJECTED:5e3,USER_REJECTED_METHODS:5002},getMethodsByChainNamespace:function(e){return eh[e]||[]},createDefaultNamespace:function(e){return{methods:this.getMethodsByChainNamespace(e),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides:function(e,t){var n=this;if(!t)return E({},e);var r=E({},e),a=new Set;if(t.methods&&Object.keys(t.methods).forEach(function(e){return a.add(e)}),t.chains&&Object.keys(t.chains).forEach(function(e){return a.add(e)}),t.events&&Object.keys(t.events).forEach(function(e){return a.add(e)}),t.rpcMap&&Object.keys(t.rpcMap).forEach(function(e){var t=C(e.split(":"),1)[0];t&&a.add(t)}),a.forEach(function(e){r[e]||(r[e]=n.createDefaultNamespace(e))}),t.methods&&Object.entries(t.methods).forEach(function(e){var t=C(e,2),n=t[0],a=t[1];r[n]&&(r[n].methods=a)}),t.chains&&Object.entries(t.chains).forEach(function(e){var t=C(e,2),n=t[0],a=t[1];r[n]&&(r[n].chains=a)}),t.events&&Object.entries(t.events).forEach(function(e){var t=C(e,2),n=t[0],a=t[1];r[n]&&(r[n].events=a)}),t.rpcMap){var i=new Set;Object.entries(t.rpcMap).forEach(function(e){var t=C(e,2),n=t[0],a=t[1],o=C(n.split(":"),2),s=o[0],c=o[1];!s||!c||!r[s]||(r[s].rpcMap||(r[s].rpcMap={}),i.has(s)||(r[s].rpcMap={},i.add(s)),r[s].rpcMap[c]=a)})}return r},createNamespaces:function(e,t){var n=this,r=e.reduce(function(e,t){var r=t.id,a=t.chainNamespace,i=t.rpcUrls.default.http[0];e[a]||(e[a]=n.createDefaultNamespace(a));var o="".concat(a,":").concat(r),s=e[a];switch(s.chains.push(o),o){case"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":s.chains.push("solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ");break;case"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1":s.chains.push("solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K")}return null!=s&&s.rpcMap&&i&&(s.rpcMap[r]=i),e},{});return this.applyNamespaceOverrides(r,t)},resolveReownName:function(){var e=(0,r.Z)(A().mark(function e(t){var n,r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lf.resolveName(t);case 2:return r=e.sent,e.abrupt("return",(null===(n=(null!=r&&r.addresses?Object.values(r.addresses):[])[0])||void 0===n?void 0:n.address)||!1);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),getChainsFromNamespaces:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.values(e).flatMap(function(e){var t=e.chains||[],n=e.accounts.map(function(e){var t=C(e.split(":"),2),n=t[0],r=t[1];return"".concat(n,":").concat(r)});return Array.from(new Set([].concat(x(t),x(n))))})},isSessionEventData:function(e){return"object"==typeof e&&null!==e&&"id"in e&&"topic"in e&&"params"in e&&"object"==typeof e.params&&null!==e.params&&"chainId"in e.params&&"event"in e.params&&"object"==typeof e.params.event&&null!==e.params.event},isUserRejectedRequestError:function(e){try{if("object"==typeof e&&null!==e){var t=e,n="number"==typeof t.code,r=n&&t.code===th.RPC_ERROR_CODE.USER_REJECTED;return n&&t.code===th.RPC_ERROR_CODE.USER_REJECTED_METHODS||r}return!1}catch(a){return!1}},isOriginAllowed:function(e,t,n){var r=[].concat(x(t),x(n));if(0===t.length)return!0;var a=Yf(e);if(!a)return r.some(function(t){return!t.includes("*")&&t===e});if("localhost"===a.hostname||"127.0.0.1"===a.hostname)return!0;var i,o=M(r);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(s.includes("*")){if(Qf(a,e,s))return!0}else if(Xf(e,s))return!0}}catch(c){o.e(c)}finally{o.f()}return!1},listenWcProvider:function(e){var t=e.universalProvider,n=e.namespace,r=e.onConnect,a=e.onDisconnect,i=e.onAccountsChanged,o=e.onChainChanged,s=e.onDisplayUri;r&&t.on("connect",function(){var e=th.getWalletConnectAccounts(t,n);r(e)}),a&&t.on("disconnect",function(){a()}),i&&t.on("accountsChanged",function(e){try{var r,a,o,s,c,u=(null===(r=t.session)||void 0===r||null===(a=r.namespaces)||void 0===a||null===(o=a[n])||void 0===o?void 0:o.accounts)||[],l=null===(s=t.rpcProviders)||void 0===s||null===(c=s[n])||void 0===c?void 0:c.getDefaultChain(),d=e.map(function(e){var t=u.find(function(t){return t.includes("".concat(n,":").concat(l,":").concat(e))});if(t){var r=xf.u.parseCaipAddress(t),a=r.chainId,i=r.chainNamespace;return{address:e,chainId:a,chainNamespace:i}}}).filter(function(e){return void 0!==e});d.length>0&&i(d)}catch(u){console.warn("Failed to parse accounts for namespace on accountsChanged event",n,e,u)}}),o&&t.on("chainChanged",function(e){o(e)}),s&&t.on("display_uri",function(e){s(e)})},getWalletConnectAccounts:function(e,t){var n,r,a,i,o=new Set,s=null==e||null===(n=e.session)||void 0===n||null===(r=n.namespaces)||void 0===r||null===(a=r[t])||void 0===a||null===(i=a.accounts)||void 0===i?void 0:i.map(function(e){return xf.u.parseCaipAddress(e)}).filter(function(e){var t=e.address;return!o.has(t.toLowerCase())&&(o.add(t.toLowerCase()),!0)});return s&&s.length>0?s:[]}},nh=n(68886),rh=n(13618),ah=n(50039),ih=n(69419),oh=n(65298),sh=n(56152),ch=n(97088),uh=n(86499);Error;var lh={TOKEN_ADDRESSES_BY_SYMBOL:{USDC:{8453:"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",84532:"0x036CbD53842c5426634e7929541eC2318f3dCF7e"}},getTokenSymbolByAddress:function(e){var t;if(e){var n=null!==(t=Object.entries(lh.TOKEN_ADDRESSES_BY_SYMBOL).find(function(t){var n=C(t,2),r=(n[0],n[1]);return Object.values(r).includes(e)}))&&void 0!==t?t:[];return C(n,1)[0]}}},dh=n(86462),ph={EmbeddedWalletAbortController:new AbortController,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"ORIGIN_NOT_ALLOWED"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{code:"APKT001",displayMessage:"Network Not Found",debugMessage:"The specified network is not recognized. Please ensure it is included in the `networks` array of your `createAppKit` configuration."},ORIGIN_NOT_ALLOWED:{code:"APKT002",displayMessage:"Invalid App Configuration",debugMessage:function(){return"The origin ".concat((0,dh.$U)()?window.origin:"unknown"," is not in your allow list. Please update your allowed domains at https://dashboard.reown.com. [PID: ").concat(c.h.state.projectId,"]")}},IFRAME_LOAD_FAILED:{code:"APKT003",displayMessage:"Network Error: Wallet Load Failed",debugMessage:function(){return"Failed to load the embedded wallet. This may be due to network issues or server downtime. Please check your network connection and try again shortly. Contact support if the issue persists."}},IFRAME_REQUEST_TIMEOUT:{code:"APKT004",displayMessage:"Wallet Request Timeout",debugMessage:function(){return"The request to the embedded wallet timed out. Please check your network connection and try again shortly. Contact support if the issue persists."}},UNVERIFIED_DOMAIN:{code:"APKT005",displayMessage:"Unverified Domain",debugMessage:function(){return"Embedded wallet load failed. Ensure your domain is verified in https://dashboard.reown.com."}},JWT_TOKEN_NOT_VALID:{code:"APKT006",displayMessage:"Session Expired",debugMessage:"Your session is invalid or expired. Please check your system\u2019s date and time settings, then reconnect."},INVALID_PROJECT_ID:{code:"APKT007",displayMessage:"Invalid Project ID",debugMessage:"The specified project ID is invalid. Please visit https://dashboard.reown.com to obtain a valid project ID."},PROJECT_ID_NOT_CONFIGURED:{code:"APKT008",displayMessage:"Project ID Missing",debugMessage:"No project ID is configured. You can create and configure a project ID at https://dashboard.reown.com."},SERVER_ERROR_APP_CONFIGURATION:{code:"APKT009",displayMessage:"Server Error",debugMessage:function(e){return"Unable to fetch App Configuration. ".concat(e,". Please check your network connection and try again shortly. Contact support if the issue persists.")}},RATE_LIMITED_APP_CONFIGURATION:{code:"APKT010",displayMessage:"Rate Limited",debugMessage:"You have been rate limited while retrieving App Configuration. Please wait a few minutes and try again. Contact support if the issue persists."}},ALERT_WARNINGS:{LOCAL_CONFIGURATION_IGNORED:{debugMessage:function(e){return"[Reown Config Notice] ".concat(e)}},INACTIVE_NAMESPACE_NOT_CONNECTED:{code:"APKTW001",displayMessage:"Inactive Namespace Not Connected",debugMessage:function(e,t){return"An error occurred while connecting an inactive namespace ".concat(e,': "').concat(t,'"')}},INVALID_EMAIL:{code:"APKTW002",displayMessage:"Invalid Email Address",debugMessage:"Please enter a valid email address"}}},fh=n(87002),hh=n(52991),vh=n(33726),gh=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",n=(0,p.jI)({level:t}),r=(0,p.Rt)({opts:n}),a=r.logger;return a.error=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];if(o instanceof Error)return void e.apply(void 0,[o].concat(n))}e.apply(void 0,[void 0].concat(n))},a},mh=n(74654),yh=(n(15863),n(5546)),bh=[kf.b.CONNECTOR_ID.AUTH,kf.b.CONNECTOR_ID.WALLET_CONNECT],wh=function(){function e(t){var n=t.provider,r=t.namespace;B(this,e),this.id=kf.b.CONNECTOR_ID.WALLET_CONNECT,this.name="WalletConnect",this.type="WALLET_CONNECT",this.imageId="ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",this.getCaipNetworks=i.R.getCaipNetworks.bind(i.R),this.caipNetworks=this.getCaipNetworks(),this.provider=n,this.chain=r}return F(e,[{key:"chains",get:function(){return this.getCaipNetworks()}},{key:"connectWalletConnect",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n,r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.authenticate();case 2:if(t.sent){t.next=6;break}return n=e.getCaipNetworks(),r=th.createNamespaces(n,c.h.state.universalProviderConfigOverride),t.next=6,e.provider.connect({optionalNamespaces:r});case 6:return t.next=8,e.provider.client.core.crypto.getClientId();case 8:return t.t0=t.sent,t.t1=e.provider.session,t.abrupt("return",{clientId:t.t0,session:t.t1});case 11:case"end":return t.stop()}},t)}))()}},{key:"disconnect",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.provider.disconnect();case 2:case"end":return t.stop()}},t)}))()}},{key:"authenticate",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.chains.map(function(e){return e.caipNetworkId}),t.abrupt("return",ih.w.universalProviderAuthenticate({universalProvider:e.provider,chains:n,methods:Eh}));case 2:case"end":return t.stop()}},t)}))()}}]),e}(),Eh=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],kh=function(e){N(n,e);var t=I(n);function n(){return B(this,n),t.apply(this,arguments)}return F(n,[{key:"setUniversalProvider",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.namespace){n.next=2;break}throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");case 2:return n.abrupt("return",(t.addConnector(new wh({provider:e,caipNetworks:t.getCaipNetworks(),namespace:t.namespace})),Promise.resolve()));case 3:case"end":return n.stop()}},n)}))()}},{key:"connect",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:t.provider,address:""}));case 1:case"end":return n.stop()}},n)}))()}},{key:"disconnect",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getWalletConnectConnector().disconnect();case 3:e.emit("disconnect"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.warn("UniversalAdapter:disconnect - error",t.t0);case 9:return t.abrupt("return",{connections:[]});case 10:case"end":return t.stop()}},t,null,[[0,6]])}))()}},{key:"syncConnections",value:function(){return Promise.resolve()}},{key:"writeSolanaTransaction",value:function(){return(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve({hash:""}));case 1:case"end":return e.stop()}},e)}))()}},{key:"getAccounts",value:function(e){var t=e.namespace,n=this;return(0,r.Z)(A().mark(function e(){var r,a,i,o,c,u;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=(null===(r=n.provider)||void 0===r||null===(a=r.session)||void 0===a||null===(i=a.namespaces)||void 0===i||null===(o=i[t])||void 0===o||null===(c=o.accounts)||void 0===c?void 0:c.map(function(e){return C(e.split(":"),3)[2]}).filter(function(e,t,n){return n.indexOf(e)===t}))||[],e.abrupt("return",Promise.resolve({accounts:u.map(function(e){return s.j.createAccount(t,e,"bip122"===t?"payment":"eoa")})}));case 2:case"end":return e.stop()}},e)}))()}},{key:"syncConnectors",value:function(){return(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}},e)}))()}},{key:"getBalance",value:function(e){return(0,r.Z)(A().mark(function t(){var n,r,a,o,s,c;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.caipNetwork&&Zf.bq.BALANCE_SUPPORTED_CHAINS.includes(null===(n=e.caipNetwork)||void 0===n?void 0:n.chainNamespace)&&(null===(r=e.caipNetwork)||void 0===r||!r.testnet)){t.next=2;break}return t.abrupt("return",{balance:"0.00",symbol:(null===(a=e.caipNetwork)||void 0===a?void 0:a.nativeCurrency.symbol)||""});case 2:if(null==(s=i.R.getAccountData())||!s.balanceLoading||e.chainId!==i.R.state.activeCaipNetwork.id){t.next=5;break}return t.abrupt("return",{balance:(null==s?void 0:s.balance)||"0.00",symbol:(null==s?void 0:s.balanceSymbol)||""});case 5:return t.next=7,i.R.fetchTokenBalance();case 7:return c=t.sent.find(function(t){var n,r;return t.chainId==="".concat(null===(n=e.caipNetwork)||void 0===n?void 0:n.chainNamespace,":").concat(e.chainId)&&t.symbol===(null===(r=e.caipNetwork)||void 0===r?void 0:r.nativeCurrency.symbol)}),t.abrupt("return",{balance:(null==c?void 0:c.quantity.numeric)||"0.00",symbol:(null==c?void 0:c.symbol)||(null===(o=e.caipNetwork)||void 0===o?void 0:o.nativeCurrency.symbol)||""});case 9:case"end":return t.stop()}},t)}))()}},{key:"signMessage",value:function(e){return(0,r.Z)(A().mark(function t(){var n,r,a,o;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.provider,r=e.message,a=e.address,n){t.next=3;break}throw new Error("UniversalAdapter:signMessage - provider is undefined");case 3:if(o="",i.R.state.activeCaipNetwork.chainNamespace!==kf.b.CHAIN.SOLANA){t.next=10;break}return t.next=7,n.request({method:"solana_signMessage",params:{message:$.encode((new TextEncoder).encode(r)),pubkey:a}},i.R.state.activeCaipNetwork.caipNetworkId);case 7:t.t0=t.sent.signature,t.next=13;break;case 10:return t.next=12,n.request({method:"personal_sign",params:[r,a]},i.R.state.activeCaipNetwork.caipNetworkId);case 12:t.t0=t.sent;case 13:return o=t.t0,t.abrupt("return",{signature:o});case 15:case"end":return t.stop()}},t)}))()}},{key:"estimateGas",value:function(){return(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve({gas:BigInt(0)}));case 1:case"end":return e.stop()}},e)}))()}},{key:"sendTransaction",value:function(){return(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve({hash:""}));case 1:case"end":return e.stop()}},e)}))()}},{key:"walletGetAssets",value:function(e){return Promise.resolve({})}},{key:"writeContract",value:function(){return(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve({hash:""}));case 1:case"end":return e.stop()}},e)}))()}},{key:"emitFirstAvailableConnection",value:function(){}},{key:"parseUnits",value:function(){return 0n}},{key:"formatUnits",value:function(){return"0"}},{key:"getCapabilities",value:function(){return(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve({}));case 1:case"end":return e.stop()}},e)}))()}},{key:"grantPermissions",value:function(){return(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve({}));case 1:case"end":return e.stop()}},e)}))()}},{key:"revokePermissions",value:function(){return(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve("0x"));case 1:case"end":return e.stop()}},e)}))()}},{key:"syncConnection",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:e.provider,address:""}));case 1:case"end":return t.stop()}},t)}))()}},{key:"switchNetwork",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,a,i,o,s,c,u,l;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.caipNetwork,a=t.getWalletConnectConnector(),r.chainNamespace!==kf.b.CHAIN.EVM){n.next=18;break}return n.prev=2,n.next=5,null===(i=a.provider)||void 0===i?void 0:i.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,mh.NC)(r.id)}]});case 5:n.next=18;break;case 7:if(n.prev=7,n.t0=n.catch(2),4902!==n.t0.code&&32603!==n.t0.code&&5e3!==n.t0.code&&4902!==(null===n.t0||void 0===n.t0||null===(o=n.t0.data)||void 0===o||null===(s=o.originalError)||void 0===s?void 0:s.code)){n.next=18;break}return n.prev=10,n.next=13,null===(c=a.provider)||void 0===c?void 0:c.request({method:"wallet_addEthereumChain",params:[{chainId:(0,mh.NC)(r.id),rpcUrls:[null==r||null===(u=r.rpcUrls.chainDefault)||void 0===u?void 0:u.http],chainName:r.name,nativeCurrency:r.nativeCurrency,blockExplorerUrls:[null===(l=r.blockExplorers)||void 0===l?void 0:l.default.url]}]});case 13:n.next=18;break;case 15:throw n.prev=15,n.t1=n.catch(10),new Error("Chain is not supported");case 18:a.provider.setDefaultChain(r.caipNetworkId);case 19:case"end":return n.stop()}},n,null,[[2,7],[10,15]])}))()}},{key:"getWalletConnectProvider",value:function(){var e;return null===(e=this.connectors.find(function(e){return"WALLET_CONNECT"===e.type}))||void 0===e?void 0:e.provider}}]),n}(function(){function e(t){B(this,e),this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=function(e){return i.R.getCaipNetworks(e)},this.getConnectorId=function(e){return a.A.getConnectorId(e)},t&&this.construct(t)}return F(e,[{key:"construct",value:function(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}},{key:"connectors",get:function(){return this.availableConnectors}},{key:"connections",get:function(){return this.availableConnections}},{key:"networks",get:function(){return this.getCaipNetworks(this.namespace)}},{key:"onAuthConnected",value:function(e){var t=this,n=e.accounts,r=e.chainId,a=this.getCaipNetworks().filter(function(e){return e.chainNamespace===t.namespace}).find(function(e){return e.id.toString()===(null==r?void 0:r.toString())});n&&a&&this.addConnection({connectorId:kf.b.CONNECTOR_ID.AUTH,accounts:n,caipNetwork:a})}},{key:"setAuthProvider",value:function(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:kf.b.CONNECTOR_ID.AUTH,type:"AUTH",name:kf.b.CONNECTOR_NAMES.AUTH,provider:e,imageId:void 0,chain:this.namespace,chains:[]})}},{key:"addConnector",value:function(){for(var e=new Set,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.availableConnectors=[].concat(n,x(this.availableConnectors)).filter(function(t){return!e.has(t.id)&&(e.add(t.id),!0)}),this.emit("connectors",this.availableConnectors)}},{key:"addConnection",value:function(){for(var e=new Set,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.availableConnections=[].concat(n,x(this.availableConnections)).filter(function(t){return!e.has(t.connectorId.toLowerCase())&&(e.add(t.connectorId.toLowerCase()),!0)}),this.emit("connections",this.availableConnections)}},{key:"deleteConnection",value:function(e){this.availableConnections=this.availableConnections.filter(function(t){return t.connectorId.toLowerCase()!==e.toLowerCase()}),this.emit("connections",this.availableConnections)}},{key:"clearConnections",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}},{key:"setStatus",value:function(e,t){i.R.setAccountProp("status",e,t)}},{key:"on",value:function(e,t){var n;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),null===(n=this.eventListeners.get(e))||void 0===n||n.add(t)}},{key:"off",value:function(e,t){var n=this.eventListeners.get(e);n&&n.delete(t)}},{key:"removeAllEventListeners",value:function(){this.eventListeners.forEach(function(e){e.clear()})}},{key:"emit",value:function(e,t){var n=this.eventListeners.get(e);n&&n.forEach(function(e){return e(t)})}},{key:"connectWalletConnect",value:function(e){var t=this;return(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getWalletConnectConnector().connectWalletConnect();case 3:return e.t0=e.sent.clientId,e.abrupt("return",{clientId:e.t0});case 7:throw e.prev=7,e.t1=e.catch(0),th.isUserRejectedRequestError(e.t1)?new yh.ab(e.t1):e.t1;case 10:case"end":return e.stop()}},e,null,[[0,7]])}))()}},{key:"switchNetwork",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,i,o,s,c,u,l;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.caipNetwork,i=Nf.O.getProviderId(r.chainNamespace),o=Nf.O.getProvider(r.chainNamespace)){n.next=3;break}throw new Error("Provider not found");case 3:if("WALLET_CONNECT"===i){n.next=17;break}if("AUTH"!==i){n.next=15;break}if(c=null===(s=a.A.getAuthConnector())||void 0===s?void 0:s.provider){n.next=8;break}throw new Error("Auth provider not found");case 8:return u=(0,If.r9)(r.chainNamespace),n.next=11,c.switchNetwork({chainId:r.caipNetworkId});case 11:return n.next=13,c.getUser({chainId:r.caipNetworkId,preferredAccountType:u});case 13:l=n.sent,t.emit("switchNetwork",l);case 15:n.next=18;break;case 17:o.setDefaultChain(r.caipNetworkId);case 18:case"end":return n.stop()}},n)}))()}},{key:"getWalletConnectConnector",value:function(){var e=this.connectors.find(function(e){return"walletConnect"===e.id});if(!e)throw new Error("WalletConnectConnector not found");return e}},{key:"onConnect",value:function(e,t){var n=this;if(e.length>0){var r=s.j.getAccount(e[0]),a=r.address,i=r.chainId,o=this.getCaipNetworks().filter(function(e){return e.chainNamespace===n.namespace}).find(function(e){return e.id.toString()===(null==i?void 0:i.toString())}),c=this.connectors.find(function(e){return e.id===t});a&&(this.emit("accountChanged",{address:a,chainId:i,connector:c}),this.addConnection({connectorId:t,accounts:e.map(function(e){return{address:s.j.getAccount(e).address}}),caipNetwork:o}))}}},{key:"onAccountsChanged",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e.length>0){var r,a,i=s.j.getAccount(e[0]),o=i.address,c=this.getConnection({connectorId:t,connections:this.connections,connectors:this.connectors});o&&(null===(r=this.getConnectorId(kf.b.CHAIN.EVM))||void 0===r?void 0:r.toLowerCase())===t.toLowerCase()&&this.emit("accountChanged",{address:o,chainId:null==c||null===(a=c.caipNetwork)||void 0===a?void 0:a.id,connector:null==c?void 0:c.connector}),this.addConnection({connectorId:t,accounts:e.map(function(e){return{address:s.j.getAccount(e).address}}),caipNetwork:null==c?void 0:c.caipNetwork})}else n&&this.onDisconnect(t)}},{key:"onDisconnect",value:function(e){var t;this.removeProviderListeners(e),this.deleteConnection(e),(null===(t=this.getConnectorId(kf.b.CHAIN.EVM))||void 0===t?void 0:t.toLowerCase())===e.toLowerCase()&&this.emitFirstAvailableConnection(),0===this.connections.length&&this.emit("disconnect")}},{key:"onChainChanged",value:function(e,t){var n,r=this,a="string"==typeof e&&e.startsWith("0x")?parseInt(e,16).toString():e.toString(),i=this.getConnection({connectorId:t,connections:this.connections,connectors:this.connectors}),o=this.getCaipNetworks().filter(function(e){return e.chainNamespace===r.namespace}).find(function(e){return e.id.toString()===a});i&&this.addConnection({connectorId:t,accounts:i.accounts,caipNetwork:o}),(null===(n=this.getConnectorId(kf.b.CHAIN.EVM))||void 0===n?void 0:n.toLowerCase())===t.toLowerCase()&&this.emit("switchNetwork",{chainId:a})}},{key:"listenProviderEvents",value:function(e,t){var n=this;if(!bh.includes(e)){var r=function(t){return n.onAccountsChanged(t,e)},a=function(t){return n.onChainChanged(t,e)},i=function(){return n.onDisconnect(e)};this.providerHandlers[e]||(t.on("disconnect",i),t.on("accountsChanged",r),t.on("chainChanged",a),this.providerHandlers[e]={provider:t,disconnect:i,accountsChanged:r,chainChanged:a})}}},{key:"removeProviderListeners",value:function(e){if(this.providerHandlers[e]){var t=this.providerHandlers[e],n=t.provider,r=t.disconnect,a=t.accountsChanged,i=t.chainChanged;n.removeListener("disconnect",r),n.removeListener("accountsChanged",a),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}},{key:"emitFirstAvailableConnection",value:function(){var e=this.getConnection({connections:this.connections,connectors:this.connectors});if(e){var t,n=C(e.accounts,1)[0];this.emit("accountChanged",{address:null==n?void 0:n.address,chainId:null===(t=e.caipNetwork)||void 0===t?void 0:t.id,connector:e.connector})}}},{key:"getConnection",value:function(e){var t=e.address,n=e.connectorId,r=e.connections,a=e.connectors;if(n){var i=r.find(function(e){return e.connectorId.toLowerCase()===n.toLowerCase()});if(!i)return null;var o=a.find(function(e){return e.id.toLowerCase()===i.connectorId.toLowerCase()}),s=t?i.accounts.find(function(e){return e.address.toLowerCase()===t.toLowerCase()}):i.accounts[0];return E(E({},i),{},{account:s,connector:o})}var c=r.find(function(e){return e.accounts.length>0&&a.some(function(t){return t.id.toLowerCase()===e.connectorId.toLowerCase()})});if(c){var u=C(c.accounts,1)[0],l=a.find(function(e){return e.id.toLowerCase()===c.connectorId.toLowerCase()});return E(E({},c),{},{account:u,connector:l})}return null}}]),e}()),xh=["email","socials","swaps","onramp","activity","reownBranding","multiWallet","emailCapture","payWithExchange","payments","reownAuthentication","headless"],Ch={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:function(e){if(null==e||!e.config)return!1;var t=e.config;return Boolean(e.isEnabled)&&t.includes("email")},processFallback:function(e){return void 0===e?Zf.bq.DEFAULT_REMOTE_FEATURES.email:Boolean(e)}},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:function(e){if(null==e||!e.config)return!1;var t=e.config;return!!(Boolean(e.isEnabled)&&t.length>0)&&t.filter(function(e){return"email"!==e})},processFallback:function(e){return void 0===e?Zf.bq.DEFAULT_REMOTE_FEATURES.socials:"boolean"==typeof e?!!e&&Zf.bq.DEFAULT_REMOTE_FEATURES.socials:e}},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:function(e){if(null==e||!e.config)return!1;var t=e.config;return!!(Boolean(e.isEnabled)&&t.length>0)&&t},processFallback:function(e){return void 0===e?Zf.bq.DEFAULT_REMOTE_FEATURES.swaps:"boolean"==typeof e?!!e&&Zf.bq.DEFAULT_REMOTE_FEATURES.swaps:e}},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:function(e){if(null==e||!e.config)return!1;var t=e.config;return!!(Boolean(e.isEnabled)&&t.length>0)&&t},processFallback:function(e){return void 0===e?Zf.bq.DEFAULT_REMOTE_FEATURES.onramp:"boolean"==typeof e?!!e&&Zf.bq.DEFAULT_REMOTE_FEATURES.onramp:e}},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:function(e){return Boolean(e.isEnabled)},processFallback:function(e){return void 0===e?Zf.bq.DEFAULT_REMOTE_FEATURES.activity:Boolean(e)}},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:function(e){return Boolean(e.isEnabled)},processFallback:function(e){return void 0===e?Zf.bq.DEFAULT_REMOTE_FEATURES.reownBranding:Boolean(e)}},emailCapture:{apiFeatureName:"email_capture",localFeatureName:"emailCapture",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:function(e){var t;return e.isEnabled&&(null!==(t=e.config)&&void 0!==t?t:[])},processFallback:function(e){return!1}},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:function(e){return Boolean(e.isEnabled)},processFallback:function(){return Zf.bq.DEFAULT_REMOTE_FEATURES.multiWallet}},payWithExchange:{apiFeatureName:"fund_from_exchange",localFeatureName:"payWithExchange",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:function(e){return Boolean(e.isEnabled)},processFallback:function(){return Zf.bq.DEFAULT_REMOTE_FEATURES.payWithExchange}},payments:{apiFeatureName:"payments",localFeatureName:"payments",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:function(e){return Boolean(e.isEnabled)},processFallback:function(){return Zf.bq.DEFAULT_REMOTE_FEATURES.payments}},reownAuthentication:{apiFeatureName:"reown_authentication",localFeatureName:"reownAuthentication",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:function(e){return Boolean(e.isEnabled)},processFallback:function(e){return void 0===e?Zf.bq.DEFAULT_REMOTE_FEATURES.reownAuthentication:Boolean(e)}},headless:{apiFeatureName:"headless",localFeatureName:"headless",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:function(e){return Boolean(e.isEnabled)},processFallback:function(){return Zf.bq.DEFAULT_REMOTE_FEATURES.headless}}},Ah={localSettingsOverridden:new Set,getApiConfig:function(e,t){return null==t?void 0:t.find(function(t){return t.id===e})},addWarning:function(e,t){if(void 0!==e){var n=Ch[t];this.localSettingsOverridden.add(n.isLegacy?'"features.'.concat(n.localFeatureName,'" (now "').concat(t,'")'):'"features.'.concat(t,'"'))}},processFeature:function(e,t,n,r,a){var i=Ch[e],o=t[i.localFeatureName];if(a&&!i.isAvailableOnBasic)return!1;if(r){var s=this.getApiConfig(i.apiFeatureName,n);return null===(null==s?void 0:s.config)?this.processFallbackFeature(e,o):!(null==s||!s.config)&&(void 0!==o&&this.addWarning(o,e),this.processApiFeature(e,s))}return this.processFallbackFeature(e,o)},processApiFeature:function(e,t){return Ch[e].processApi(t)},processFallbackFeature:function(e,t){return Ch[e].processFallback(t)},fetchRemoteFeatures:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,a,i,o,s,c,u,l,d,p,f;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=null!==(r=e.basic)&&void 0!==r&&r,i=e.features||{},t.localSettingsOverridden.clear(),o=null,s=!1,n.prev=3,n.next=6,qf.Q.fetchProjectConfig();case 6:o=n.sent,s=null!=o,n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",n.t0);case 13:c=s&&!a?Zf.bq.DEFAULT_REMOTE_FEATURES:Zf.bq.DEFAULT_REMOTE_FEATURES_DISABLED,n.prev=14,u=M(xh);try{for(u.s();!(l=u.n()).done;)d=l.value,p=t.processFeature(d,i,o,s,a),Object.assign(c,k({},d,p))}catch(h){u.e(h)}finally{u.f()}n.next=22;break;case 19:return n.prev=19,n.t1=n.catch(14),n.abrupt("return",(console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",n.t1),Zf.bq.DEFAULT_REMOTE_FEATURES));case 22:return s&&t.localSettingsOverridden.size>0&&(f="Your local configuration for ".concat(Array.from(t.localSettingsOverridden).join(", ")," was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com."),jf.B.open({debugMessage:ph.ALERT_WARNINGS.LOCAL_CONFIGURATION_IGNORED.debugMessage(f)},"warning")),n.abrupt("return",c);case 24:case"end":return n.stop()}},n,null,[[3,10],[14,19]])}))()}},Nh=!1,Ih=function(e){N(u,e);var t=I(u);function u(){return B(this,u),t.apply(this,arguments)}return F(u,[{key:"open",value:function(e){var t=this,n=this;return(0,r.Z)(A().mark(function r(){return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=a.A.isConnected(),r.t0){r.next=4;break}return r.next=4,v(U(u.prototype),"open",t).call(n,e);case 4:case"end":return r.stop()}},r)}))()}},{key:"close",value:function(){var e=this,t=this;return(0,r.Z)(A().mark(function n(){var r,a;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v(U(u.prototype),"close",e).call(t);case 2:if(!t.options.manualWCControl){n.next=5;break}a=null===(r=i.R.getAccountData(t.activeChainNamespace))||void 0===r?void 0:r.address,o.l.finalizeWcConnection(a);case 5:case"end":return n.stop()}},n)}))()}},{key:"syncIdentity",value:function(e){return(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}},e)}))()}},{key:"syncBalance",value:function(e){return(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}},e)}))()}},{key:"injectModalUi",value:function(){return(0,r.Z)(A().mark(function e(){var t;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Nh||!s.j.isClient()){e.next=9;break}return e.next=3,Promise.all([n.e(4998),n.e(8961)]).then(n.bind(n,98961));case 3:return e.next=5,Promise.all([n.e(4998),n.e(6597)]).then(n.bind(n,26597));case 5:if(document.querySelector("w3m-modal")){e.next=8;break}t=document.createElement("w3m-modal"),!c.h.state.disableAppend&&!c.h.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",t);case 8:Nh=!0;case 9:case"end":return e.stop()}},e)}))()}}]),u}(function(){function e(t){var n=this;B(this,e);var u=this;this.chainNamespaces=[],this.features={},this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=function(e,t){if(e){var r,a,o,s=null===(r=i.R.getCaipNetworks(e))||void 0===r?void 0:r.find(function(e){return e.id===t});return s||((null===(a=i.R.getNetworkData(e))||void 0===a?void 0:a.caipNetwork)||(null===(o=i.R.getRequestedCaipNetworks(e).filter(function(t){return t.chainNamespace===e}))||void 0===o?void 0:o[0]))}return i.R.state.activeCaipNetwork||n.defaultCaipNetwork},this.getCaipNetworkId=function(){var e=n.getCaipNetwork();if(e)return e.id},this.getCaipNetworks=function(e){return i.R.getCaipNetworks(e)},this.getActiveChainNamespace=function(){return i.R.state.activeChain},this.setRequestedCaipNetworks=function(e,t){i.R.setRequestedCaipNetworks(e,t)},this.getApprovedCaipNetworkIds=function(){return i.R.getAllApprovedCaipNetworkIds()},this.getCaipAddress=function(e){var t,n;return i.R.state.activeChain!==e&&e?null===(t=i.R.state.chains.get(e))||void 0===t||null===(n=t.accountState)||void 0===n?void 0:n.caipAddress:i.R.state.activeCaipAddress},this.setClientId=function(e){Af.L.setClientId(e)},this.getProvider=function(e){return Nf.O.getProvider(e)},this.getProviderType=function(e){return Nf.O.getProviderId(e)},this.getPreferredAccountType=function(e){return(0,If.r9)(e)},this.setCaipAddress=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i.R.setAccountProp("caipAddress",e,t,n),i.R.setAccountProp("address",s.j.getPlainAddress(e),t,n)},this.setBalance=function(e,t,n){i.R.setAccountProp("balance",e,n),i.R.setAccountProp("balanceSymbol",t,n)},this.setProfileName=function(e,t){i.R.setAccountProp("profileName",e,t)},this.setProfileImage=function(e,t){i.R.setAccountProp("profileImage",e,t)},this.setUser=function(e,t){i.R.setAccountProp("user",e,t)},this.resetAccount=function(e){i.R.resetAccount(e)},this.setCaipNetwork=function(e){i.R.setActiveCaipNetwork(e)},this.setCaipNetworkOfNamespace=function(e,t){i.R.setChainNetworkData(t,{caipNetwork:e})},this.setStatus=function(e,t){i.R.setAccountProp("status",e,t),a.A.isConnected()?_f.M.setConnectionStatus("connected"):_f.M.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=function(e){var t;return null===(t=i.R.getAccountData(e))||void 0===t?void 0:t.address},this.setConnectors=function(e){var t=[].concat(x(a.A.state.allConnectors),x(e));a.A.setConnectors(t)},this.setConnections=function(e,t){_f.M.setConnections(e,t),o.l.setConnections(e,t)},this.fetchIdentity=function(e){return Af.L.fetchIdentity(e)},this.getReownName=function(e){return Lf.getNamesForAddress(e)},this.getConnectors=function(){return a.A.getConnectors()},this.getConnectorImage=function(e){return Bf.f.getConnectorImage(e)},this.getConnections=function(e){return n.remoteFeatures.multiWallet?Ff.f.getConnectionsData(e).connections:(jf.B.open(kf.b.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[])},this.getRecentConnections=function(e){return n.remoteFeatures.multiWallet?Ff.f.getConnectionsData(e).recentConnections:(jf.B.open(kf.b.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[])},this.switchConnection=function(){var e=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.remoteFeatures.multiWallet){e.next=5;break}return e.next=3,o.l.switchConnection(t);case 3:e.next=6;break;case 5:jf.B.open(kf.b.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.deleteConnection=function(e){n.remoteFeatures.multiWallet?(_f.M.deleteAddressFromConnection(e),o.l.syncStorageConnections()):jf.B.open(kf.b.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info")},this.setConnectedWalletInfo=function(e,t){var n=Nf.O.getProviderId(t),r=e?E(E({},e),{},{type:n}):void 0;i.R.setAccountProp("connectedWalletInfo",r,t)},this.getIsConnectedState=function(){return Boolean(i.R.state.activeCaipAddress)},this.addAddressLabel=function(e,t,n){var r,a=(null===(r=i.R.getAccountData(n))||void 0===r?void 0:r.addressLabels)||{};i.R.setAccountProp("addressLabels",E(E({},a),{},k({},e,t)),n)},this.removeAddressLabel=function(e,t){var n,r=(null===(n=i.R.getAccountData(t))||void 0===n?void 0:n.addressLabels)||{};i.R.setAccountProp("addressLabels",E(E({},r),{},k({},e,void 0)),t)},this.getAddress=function(e){var t;return null===(t=i.R.getAccountData(e||i.R.state.activeChain))||void 0===t?void 0:t.address},this.resetNetwork=function(e){i.R.resetNetwork(e)},this.addConnector=function(e){a.A.addConnector(e)},this.resetWcConnection=function(){o.l.resetWcConnection()},this.setAddressExplorerUrl=function(e,t){i.R.setAccountProp("addressExplorerUrl",e,t)},this.setSmartAccountDeployed=function(e,t){i.R.setAccountProp("smartAccountDeployed",e,t)},this.setPreferredAccountType=function(e,t){i.R.setAccountProp("preferredAccountType",e,t)},this.setEIP6963Enabled=function(e){c.h.setEIP6963Enabled(e)},this.handleUnsafeRPCRequest=function(){if(n.isOpen()){if(n.isTransactionStackEmpty())return;n.redirect("ApproveTransaction")}else n.open({view:"ApproveTransaction"})},this.options=t,this.version=t.sdkVersion,this.caipNetworks=this.extendCaipNetworks(t),this.chainNamespaces=this.getChainNamespacesSet(t.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(t),this.chainAdapters=this.createAdapters(t.adapters),this.readyPromise=this.initialize(t)}return F(e,[{key:"getChainNamespacesSet",value:function(e,t){var n=null==e?void 0:e.map(function(e){return e.namespace}).filter(function(e){return Boolean(e)});if(null!=n&&n.length)return x(new Set(n));var r=null==t?void 0:t.map(function(e){return e.chainNamespace});return x(new Set(r))}},{key:"initialize",value:function(e){var t=this;return(0,r.Z)(A().mark(function r(){var a,i,o,s;return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.initializeProjectSettings(e),t.initControllers(e),r.next=4,t.initChainAdapters();case 4:if(t.sendInitializeEvent(e),null!==(a=e.features)&&void 0!==a&&a.headless&&!Wf.C.hasInjectedConnectors()&&qf.Q.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1,fetchWalletRanks:!1,fetchRecommendedWallets:!0}),!c.h.state.enableReconnect){r.next=13;break}return r.next=9,t.syncExistingConnection();case 9:return r.next=11,t.syncAdapterConnections();case 11:r.next=15;break;case 13:return r.next=15,t.unSyncExistingConnection();case 15:if(r.t0=!e.basic&&!e.manualWCControl,!r.t0){r.next=20;break}return r.next=19,Ah.fetchRemoteFeatures(e);case 19:t.remoteFeatures=r.sent;case 20:return r.next=22,qf.Q.fetchUsage();case 22:if(c.h.setRemoteFeatures(t.remoteFeatures),t.remoteFeatures.onramp&&Gf.setOnrampProviders(t.remoteFeatures.onramp),r.t1=c.h.state.remoteFeatures.email||Array.isArray(c.h.state.remoteFeatures.socials)&&c.h.state.remoteFeatures.socials.length>0,!r.t1){r.next=28;break}return r.next=28,t.checkAllowedOrigins();case 28:if(!c.h.state.features.reownAuthentication&&!c.h.state.remoteFeatures.reownAuthentication){r.next=35;break}return r.next=31,n.e(1949).then(n.bind(n,81949));case 31:i=r.sent,o=i.ReownAuthentication,(s=c.h.state.siwx)instanceof o||(s&&console.warn("ReownAuthentication option is enabled, SIWX configuration will be overridden."),c.h.setSIWX(new o));case 35:case"end":return r.stop()}},r)}))()}},{key:"openSend",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,a,o,s,c,u;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a=e.namespace||i.R.state.activeChain,o=t.getCaipAddress(a),s=null===(r=t.getCaipNetwork(a))||void 0===r?void 0:r.id,o){n.next=3;break}throw new Error("openSend: caipAddress not found");case 3:if((null==s?void 0:s.toString())===e.chainId.toString()){n.next=9;break}if(c=i.R.getCaipNetworkById(e.chainId,a)){n.next=7;break}throw new Error("openSend: caipNetwork with chainId ".concat(e.chainId," not found"));case 7:return n.next=9,t.switchNetwork(c,{throwOnFailure:!0});case 9:if(n.prev=9,u=lh.getTokenSymbolByAddress(e.assetAddress),n.t0=u,!n.t0){n.next=15;break}return n.next=15,qf.Q.fetchTokenImages([u]);case 15:n.next=19;break;case 17:n.prev=17,n.t1=n.catch(9);case 19:return n.next=21,$f.I.open({view:"WalletSend",data:{send:e}});case 21:return n.abrupt("return",new Promise(function(e,n){var r=Jf.S.subscribeKey("hash",function(t){t&&(i(),e({hash:t}))}),a=$f.I.subscribe(function(e){e.open||(i(),n(new Error("Modal closed")))}),i=t.createCleanupHandler([r,a])}));case 22:case"end":return n.stop()}},n,null,[[9,17]])}))()}},{key:"toModalOptions",value:function(){return{isSwap:function(e){return"Swap"===(null==e?void 0:e.view)},isSend:function(e){return"WalletSend"===(null==e?void 0:e.view)}}}},{key:"checkAllowedOrigins",value:function(){return(0,r.Z)(A().mark(function e(){var t,n,r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qf.Q.fetchAllowedOrigins();case 3:if(t=e.sent,s.j.isClient()){e.next=6;break}return e.abrupt("return");case 6:n=window.location.origin,th.isOriginAllowed(n,t,kf.b.DEFAULT_ALLOWED_ANCESTORS)||jf.B.open(ph.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error"),e.next=22;break;case 10:if(e.prev=10,e.t0=e.catch(0),e.t0 instanceof Error){e.next=14;break}return e.abrupt("return");case 14:e.t1=e.t0.message,e.next="RATE_LIMITED"===e.t1?17:"SERVER_ERROR"===e.t1?19:22;break;case 17:return jf.B.open(ph.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error"),e.abrupt("break",22);case 19:return r=e.t0.cause instanceof Error?e.t0.cause:e.t0,jf.B.open({displayMessage:ph.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.displayMessage,debugMessage:ph.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.debugMessage(r.message)},"error"),e.abrupt("break",22);case 22:case"end":return e.stop()}},e,null,[[0,10]])}))()}},{key:"createCleanupHandler",value:function(e){return function(){e.forEach(function(e){try{e()}catch(t){}})}}},{key:"sendInitializeEvent",value:function(e){var t,n=h({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));delete n.adapters,delete n.universalProvider,nh.X.sendEvent({type:"track",event:"INITIALIZE",properties:E(E({},n),{},{networks:e.networks.map(function(e){return e.id}),siweConfig:{options:(null===(t=e.siweConfig)||void 0===t?void 0:t.options)||{}}})})}},{key:"initControllers",value:function(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}},{key:"initAdapterController",value:function(){rh.j.initialize(this.chainAdapters)}},{key:"initializeThemeController",value:function(e){e.themeMode&&ah.u.setThemeMode(e.themeMode),e.themeVariables&&ah.u.setThemeVariables(e.themeVariables)}},{key:"initializeChainController",value:function(e){var t;if(!this.connectionControllerClient)throw new Error("ConnectionControllerClient must be set");i.R.initialize(null!==(t=e.adapters)&&void 0!==t?t:[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient});var n=this.getDefaultNetwork();n&&i.R.setActiveCaipNetwork(n)}},{key:"initializeConnectionController",value:function(e){var t,n;o.l.initialize(null!==(t=e.adapters)&&void 0!==t?t:[]),o.l.setWcBasic(null!==(n=e.basic)&&void 0!==n&&n)}},{key:"initializeConnectorController",value:function(){a.A.initialize(this.chainNamespaces)}},{key:"initializeProjectSettings",value:function(e){c.h.setProjectId(e.projectId),c.h.setSdkVersion(e.sdkVersion)}},{key:"initializeOptionsController",value:function(e){var t;c.h.setDebug(!1!==e.debug),c.h.setEnableWalletGuide(!1!==e.enableWalletGuide),c.h.setEnableWallets(!1!==e.enableWallets),c.h.setEIP6963Enabled(!1!==e.enableEIP6963),c.h.setEnableNetworkSwitch(!1!==e.enableNetworkSwitch),c.h.setEnableReconnect(!1!==e.enableReconnect),c.h.setEnableMobileFullScreen(!0===e.enableMobileFullScreen),c.h.setCoinbasePreference(e.coinbasePreference),c.h.setEnableAuthLogger(!1!==e.enableAuthLogger),c.h.setCustomRpcUrls(e.customRpcUrls),c.h.setEnableEmbedded(e.enableEmbedded),c.h.setAllWallets(e.allWallets),c.h.setIncludeWalletIds(e.includeWalletIds),c.h.setExcludeWalletIds(e.excludeWalletIds),c.h.setFeaturedWalletIds(e.featuredWalletIds),c.h.setTokens(e.tokens),c.h.setTermsConditionsUrl(e.termsConditionsUrl),c.h.setPrivacyPolicyUrl(e.privacyPolicyUrl),c.h.setCustomWallets(e.customWallets),c.h.setFeatures(e.features),c.h.setAllowUnsupportedChain(e.allowUnsupportedChain),c.h.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),c.h.setPreferUniversalLinks(e.experimental_preferUniversalLinks),c.h.setDefaultAccountTypes(e.defaultAccountTypes);var n,r=this.getDefaultMetaData();if(!e.metadata&&r&&(e.metadata=r),c.h.setMetadata(e.metadata),c.h.setDisableAppend(e.disableAppend),c.h.setEnableEmbedded(e.enableEmbedded),c.h.setSIWX(e.siwx),this.features=null!==(t=c.h.state.features)&&void 0!==t?t:{},e.projectId){if(null!==(n=e.adapters)&&void 0!==n&&n.find(function(e){return e.namespace===kf.b.CHAIN.EVM})&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");c.h.setSIWX(e.siweConfig.mapToSIWX())}}else jf.B.open(ph.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}},{key:"getDefaultMetaData",value:function(){var e,t,n,r;return s.j.isClient()?{name:(null===(e=document.getElementsByTagName("title"))||void 0===e||null===(t=e[0])||void 0===t?void 0:t.textContent)||"",description:(null===(n=document.querySelector('meta[property="og:description"]'))||void 0===n?void 0:n.content)||"",url:window.location.origin,icons:[(null===(r=document.querySelector('link[rel~="icon"]'))||void 0===r?void 0:r.href)||""]}:null}},{key:"setUnsupportedNetwork",value:function(e){var t=this.getActiveChainNamespace();if(t){var n=fh.f.getUnsupportedNetwork("".concat(t,":").concat(e));i.R.setActiveCaipNetwork(n)}}},{key:"getDefaultNetwork",value:function(){return fh.f.getCaipNetworkFromStorage(this.defaultCaipNetwork)}},{key:"extendCaipNetwork",value:function(e,t){return fh.f.extendCaipNetwork(e,{customNetworkImageUrls:t.chainImages,projectId:t.projectId})}},{key:"extendCaipNetworks",value:function(e){return fh.f.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}},{key:"extendDefaultCaipNetwork",value:function(e){var t=e.networks.find(function(t){var n;return t.id===(null===(n=e.defaultNetwork)||void 0===n?void 0:n.id)});return t?fh.f.extendCaipNetwork(t,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}},{key:"disconnectConnector",value:function(e,t){var n=this;return(0,r.Z)(A().mark(function r(){var a,o,s,u;return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,n.setLoading(!0,e),s={connections:[]},u=n.getAdapter(e),r.t0=(null!==(a=i.R.state.chains.get(e))&&void 0!==a&&null!==(o=a.accountState)&&void 0!==o&&o.caipAddress||!c.h.state.enableReconnect)&&null!=u&&u.disconnect,!r.t0){r.next=9;break}return r.next=8,u.disconnect({id:t});case 8:s=r.sent;case 9:return n.setLoading(!1,e),r.abrupt("return",s);case 13:throw r.prev=13,r.t1=r.catch(0),n.setLoading(!1,e),new Error("Failed to disconnect chains: ".concat(r.t1.message));case 16:case"end":return r.stop()}},r,null,[[0,13]])}))()}},{key:"createClients",value:function(){var e=this,t=this;this.connectionControllerClient={connectWalletConnect:function(){var e=(0,r.Z)(A().mark(function e(){var n,r,a,s,c,u,l,d;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.R.state.activeChain,a=t.getAdapter(r),s=null===(n=t.getCaipNetwork(r))||void 0===n?void 0:n.id,c=o.l.getConnections(r),u=t.remoteFeatures.multiWallet,l=c.length>0,a){e.next=3;break}throw new Error("Adapter not found");case 3:return e.next=5,a.connectWalletConnect(s);case 5:return d=e.sent,(!l||!u)&&t.close(),t.setClientId((null==d?void 0:d.clientId)||null),_f.M.setConnectedNamespaces(x(i.R.state.chains.keys())),e.next=11,t.syncWalletConnectAccount();case 11:return e.next=13,ih.w.initializeIfEnabled();case 13:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),connectExternal:function(){var e=(0,r.Z)(A().mark(function e(n){var r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.onConnectExternal(n);case 2:return r=e.sent,e.next=5,t.connectInactiveNamespaces(n,r);case 5:return e.abrupt("return",r?{address:r.address}:void 0);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),reconnectExternal:function(){var e=(0,r.Z)(function(e){var n=e.id,r=e.info,a=e.type,o=e.provider;return A().mark(function e(){var s,c,u;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=i.R.state.activeChain,u=t.getAdapter(c),c){e.next=3;break}throw new Error("reconnectExternal: namespace not found");case 3:if(u){e.next=5;break}throw new Error("reconnectExternal: adapter not found");case 5:if(e.t0=null==u?void 0:u.reconnect,!e.t0){e.next=11;break}return e.next=9,null==u?void 0:u.reconnect({id:n,info:r,type:a,provider:o,chainId:null===(s=t.getCaipNetwork())||void 0===s?void 0:s.id});case 9:_f.M.addConnectedNamespace(c),t.syncConnectedWalletInfo(c);case 11:case"end":return e.stop()}},e)})()});return function(t){return e.apply(this,arguments)}}(),disconnectConnector:function(){var e=(0,r.Z)(A().mark(function e(n){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.disconnectConnector(n.namespace,n.id);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),disconnect:function(){var e=(0,r.Z)(A().mark(function e(n){var s,c,u,l,d,p,f,h,v,g,m,y,b;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=(s=n||{}).id,u=s.chainNamespace,l=s.initialDisconnect,d=a.A.getConnectorId(u||i.R.state.activeChain),p=c===kf.b.CONNECTOR_ID.AUTH||d===kf.b.CONNECTOR_ID.AUTH,f=c===kf.b.CONNECTOR_ID.WALLET_CONNECT||d===kf.b.CONNECTOR_ID.WALLET_CONNECT,e.prev=1,v=Array.from(i.R.state.chains.keys()),g=u?[u]:v,(f||p)&&(g=v),m=g.map(function(){var e=(0,r.Z)(A().mark(function e(n){var r,i,o;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.A.getConnectorId(n),i=c||r,e.next=4,t.disconnectConnector(n,i);case 4:(o=e.sent)&&(p&&_f.M.deleteConnectedSocialProvider(),o.connections.forEach(function(e){_f.M.addDisconnectedConnectorId(e.connectorId,n)})),l&&t.onDisconnectNamespace({chainNamespace:n,closeModal:!1});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=8,Promise.allSettled(m);case 8:if(y=e.sent,Jf.S.resetSend(),o.l.resetWcConnection(),e.t0=null!==(h=ih.w.getSIWX())&&void 0!==h&&h.signOutOnDisconnect,!e.t0){e.next=15;break}return e.next=15,ih.w.clearSessions();case 15:if(a.A.setFilterByNamespace(void 0),o.l.syncStorageConnections(),!((b=y.filter(function(e){return"rejected"===e.status})).length>0)){e.next=20;break}throw new Error(b.map(function(e){return e.reason.message}).join(", "));case 20:nh.X.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:u||"all"}}),e.next=26;break;case 23:throw e.prev=23,e.t1=e.catch(1),new Error("Failed to disconnect chains: ".concat(e.t1.message));case 26:case"end":return e.stop()}},e,null,[[1,23]])}));return function(t){return e.apply(this,arguments)}}(),checkInstalled:function(e){return e?e.some(function(e){var t;return Boolean(null===(t=window.ethereum)||void 0===t?void 0:t[String(e)])}):Boolean(window.ethereum)},signMessage:function(){var e=(0,r.Z)(A().mark(function e(n){var r,a,o,s;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.R.state.activeChain,o=t.getAdapter(i.R.state.activeChain),a){e.next=3;break}throw new Error("signMessage: namespace not found");case 3:if(o){e.next=5;break}throw new Error("signMessage: adapter not found");case 5:if(s=t.getAddress(a)){e.next=8;break}throw new Error("signMessage: address not found");case 8:return e.next=10,null==o?void 0:o.signMessage({message:n,address:s,provider:Nf.O.getProvider(a)});case 10:if(e.t2=r=e.sent,e.t1=null===e.t2,e.t1){e.next=14;break}e.t1=void 0===r;case 14:if(!e.t1){e.next=18;break}e.t3=void 0,e.next=19;break;case 18:e.t3=r.signature;case 19:if(e.t0=e.t3,e.t0){e.next=22;break}e.t0="";case 22:return e.abrupt("return",e.t0);case 23:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),sendTransaction:function(){var e=(0,r.Z)(A().mark(function e(n){var r,a,i,o;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.chainNamespace){e.next=3;break}throw new Error("sendTransaction: namespace not found");case 3:if(!Zf.bq.SEND_SUPPORTED_NAMESPACES.includes(r)){e.next=23;break}if(i=t.getAdapter(r)){e.next=7;break}throw new Error("sendTransaction: adapter not found");case 7:return o=Nf.O.getProvider(r),e.next=10,null==i?void 0:i.sendTransaction(E(E({},n),{},{caipNetwork:t.getCaipNetwork(),provider:o}));case 10:if(e.t2=a=e.sent,e.t1=null===e.t2,e.t1){e.next=14;break}e.t1=void 0===a;case 14:if(!e.t1){e.next=18;break}e.t3=void 0,e.next=19;break;case 18:e.t3=a.hash;case 19:if(e.t0=e.t3,e.t0){e.next=22;break}e.t0="";case 22:return e.abrupt("return",e.t0);case 23:return e.abrupt("return","");case 24:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),estimateGas:function(){var e=(0,r.Z)(A().mark(function e(n){var r,a,i,o,s;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=n.chainNamespace)!==kf.b.CHAIN.EVM){e.next=23;break}if(i=t.getAdapter(r)){e.next=5;break}throw new Error("estimateGas: adapter is required but got undefined");case 5:if(o=Nf.O.getProvider(r),s=t.getCaipNetwork()){e.next=8;break}throw new Error("estimateGas: caipNetwork is required but got undefined");case 8:return e.next=10,null==i?void 0:i.estimateGas(E(E({},n),{},{provider:o,caipNetwork:s}));case 10:if(e.t2=a=e.sent,e.t1=null===e.t2,e.t1){e.next=14;break}e.t1=void 0===a;case 14:if(!e.t1){e.next=18;break}e.t3=void 0,e.next=19;break;case 18:e.t3=a.gas;case 19:if(e.t0=e.t3,e.t0){e.next=22;break}e.t0=0n;case 22:return e.abrupt("return",e.t0);case 23:return e.abrupt("return",0n);case 24:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),getEnsAvatar:function(){var e=(0,r.Z)(A().mark(function e(){var n,r,a,o;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.R.state.activeChain){e.next=3;break}throw new Error("getEnsAvatar: namespace is required but got undefined");case 3:if(o=t.getAddress(a)){e.next=6;break}throw new Error("getEnsAvatar: address not found");case 6:return e.next=8,t.syncIdentity({address:o,chainId:Number(null===(n=t.getCaipNetwork())||void 0===n?void 0:n.id),chainNamespace:a});case 8:return e.abrupt("return",(null===(r=i.R.getAccountData())||void 0===r?void 0:r.profileImage)||!1);case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),getEnsAddress:function(){var e=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,th.resolveReownName(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),writeContract:function(){var e=(0,r.Z)(A().mark(function e(n){var r,a,o,s,c,u;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.R.state.activeChain,o=t.getAdapter(a),a){e.next=3;break}throw new Error("writeContract: namespace is required but got undefined");case 3:if(o){e.next=5;break}throw new Error("writeContract: adapter is required but got undefined");case 5:if(s=t.getCaipNetwork(),c=t.getCaipAddress(),u=Nf.O.getProvider(a),s&&c){e.next=8;break}throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");case 8:return e.next=10,null==o?void 0:o.writeContract(E(E({},n),{},{caipNetwork:s,provider:u,caipAddress:c}));case 10:if(e.t1=r=e.sent,e.t0=null===e.t1,e.t0){e.next=14;break}e.t0=void 0===r;case 14:if(!e.t0){e.next=18;break}e.t2=void 0,e.next=19;break;case 18:e.t2=r.hash;case 19:return e.abrupt("return",e.t2);case 20:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),writeSolanaTransaction:function(){var e=(0,r.Z)(A().mark(function e(n){var r,a,o,s,c,u;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.R.state.activeChain,o=t.getAdapter(a),a){e.next=3;break}throw new Error("writeContract: namespace is required but got undefined");case 3:if(o){e.next=5;break}throw new Error("writeContract: adapter is required but got undefined");case 5:if(s=t.getCaipNetwork(),c=t.getCaipAddress(),u=Nf.O.getProvider(a),s&&c){e.next=8;break}throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");case 8:return e.next=10,null==o?void 0:o.writeSolanaTransaction(E(E({},n),{},{caipNetwork:s,provider:u,caipAddress:c}));case 10:if(e.t1=r=e.sent,e.t0=null===e.t1,e.t0){e.next=14;break}e.t0=void 0===r;case 14:if(!e.t0){e.next=18;break}e.t2=void 0,e.next=19;break;case 18:e.t2=r.hash;case 19:return e.abrupt("return",e.t2);case 20:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),parseUnits:function(t,n){var r,a=e.getAdapter(i.R.state.activeChain);if(!a)throw new Error("parseUnits: adapter is required but got undefined");return null!==(r=null==a?void 0:a.parseUnits({value:t,decimals:n}))&&void 0!==r?r:0n},formatUnits:function(t,n){var r,a=e.getAdapter(i.R.state.activeChain);if(!a)throw new Error("formatUnits: adapter is required but got undefined");return null!==(r=null==a?void 0:a.formatUnits({value:t,decimals:n}))&&void 0!==r?r:"0"},getCapabilities:function(){var e=(0,r.Z)(A().mark(function e(n){var r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getAdapter(i.R.state.activeChain)){e.next=3;break}throw new Error("getCapabilities: adapter is required but got undefined");case 3:return e.next=5,null==r?void 0:r.getCapabilities(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),grantPermissions:function(){var e=(0,r.Z)(A().mark(function e(n){var r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getAdapter(i.R.state.activeChain)){e.next=3;break}throw new Error("grantPermissions: adapter is required but got undefined");case 3:return e.next=5,null==r?void 0:r.grantPermissions(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),revokePermissions:function(){var e=(0,r.Z)(A().mark(function e(n){var r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getAdapter(i.R.state.activeChain)){e.next=3;break}throw new Error("revokePermissions: adapter is required but got undefined");case 3:if(null==r||!r.revokePermissions){e.next=9;break}return e.next=6,r.revokePermissions(n);case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0="0x";case 10:return e.abrupt("return",e.t0);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),walletGetAssets:function(){var e=(0,r.Z)(A().mark(function e(n){var r,a;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getAdapter(i.R.state.activeChain)){e.next=3;break}throw new Error("walletGetAssets: adapter is required but got undefined");case 3:return e.next=5,null==a?void 0:a.walletGetAssets(n);case 5:if(e.t1=r=e.sent,e.t0=null!==e.t1,!e.t0){e.next=9;break}e.t0=void 0!==r;case 9:if(!e.t0){e.next=13;break}e.t2=r,e.next=14;break;case 13:e.t2={};case 14:return e.abrupt("return",e.t2);case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),updateBalance:function(t){var n=e.getAddress(t),r=e.getCaipNetwork(t);!r||!n||e.updateNativeBalance(n,null==r?void 0:r.id,t)}},o.l.setClient(this.connectionControllerClient)}},{key:"onConnectExternal",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,o,s,c,u,l,d,p,f,h,v,g,m,y,b,w;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(f=i.R.state.activeChain,h=e.chain||f,v=t.getAdapter(h),g=!0,e.type===hh.b.CONNECTOR_TYPE_AUTH&&kf.b.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(function(e){return a.A.getConnectorId(e)===kf.b.CONNECTOR_ID.AUTH})&&e.chain!==f&&(g=!1),e.chain&&e.chain!==f&&!e.caipNetwork&&(m=t.getCaipNetworks().find(function(t){return t.chainNamespace===e.chain}))&&g&&t.setCaipNetwork(m),h){n.next=5;break}throw new Error("connectExternal: namespace not found");case 5:if(v){n.next=7;break}throw new Error("connectExternal: adapter not found");case 7:return y=t.getCaipNetwork(h),b=e.caipNetwork||y,n.next=11,v.connect({id:e.id,address:e.address,info:e.info,type:e.type,provider:e.provider,socialUri:e.socialUri,chainId:(null===(r=e.caipNetwork)||void 0===r?void 0:r.id)||(null==y?void 0:y.id),rpcUrl:(null===(o=e.caipNetwork)||void 0===o||null===(s=o.rpcUrls)||void 0===s||null===(c=s.default)||void 0===c||null===(u=c.http)||void 0===u?void 0:u[0])||(null==y||null===(l=y.rpcUrls)||void 0===l||null===(d=l.default)||void 0===d||null===(p=d.http)||void 0===p?void 0:p[0])});case 11:if(!(w=n.sent)){n.next=14;break}return n.abrupt("return",(_f.M.addConnectedNamespace(h),t.syncProvider(E(E({},w),{},{chainNamespace:h})),t.setStatus("connected",h),t.syncConnectedWalletInfo(h),_f.M.removeDisconnectedConnectorId(e.id,h),{address:w.address,connectedCaipNetwork:b}));case 14:case"end":return n.stop()}},n)}))()}},{key:"connectInactiveNamespaces",value:function(e,t){var n=this;return(0,r.Z)(A().mark(function a(){var o,s,c,u,l;return A().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(s=e.type===hh.b.CONNECTOR_TYPE_AUTH,c=vh.g.getOtherAuthNamespaces(null==t||null===(o=t.connectedCaipNetwork)||void 0===o?void 0:o.chainNamespace),u=i.R.state.activeCaipNetwork,l=n.getAdapter(null==u?void 0:u.chainNamespace),a.t0=s,!a.t0){a.next=9;break}return a.next=5,Promise.all(c.map(function(){var t=(0,r.Z)(A().mark(function t(r){var a,i,o,s,c,u;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c=Nf.O.getProvider(r),u=n.getCaipNetwork(r),t.next=4,null===(a=n.getAdapter(r))||void 0===a?void 0:a.connect(E(E({},e),{},{provider:c,socialUri:void 0,chainId:null==u?void 0:u.id,rpcUrl:null==u||null===(i=u.rpcUrls)||void 0===i||null===(o=i.default)||void 0===o||null===(s=o.http)||void 0===s?void 0:s[0]}));case 4:if(t.t0=t.sent,!t.t0){t.next=7;break}_f.M.addConnectedNamespace(r),_f.M.removeDisconnectedConnectorId(e.id,r),n.setStatus("connected",r),n.syncConnectedWalletInfo(r);case 7:t.next=12;break;case 9:t.prev=9,t.t1=t.catch(0),jf.B.warn(ph.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.displayMessage,ph.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.debugMessage(r,t.t1 instanceof Error?t.t1.message:void 0),ph.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.code);case 12:case"end":return t.stop()}},t,null,[[0,9]])}));return function(e){return t.apply(this,arguments)}}()));case 5:if(a.t1=u,!a.t1){a.next=9;break}return a.next=9,null==l?void 0:l.switchNetwork({caipNetwork:u});case 9:case"end":return a.stop()}},a)}))()}},{key:"getApprovedCaipNetworksData",value:function(){if(Nf.O.getProviderId(i.R.state.activeChain)===hh.b.CONNECTOR_TYPE_WALLET_CONNECT){var e,t,n,r,a,o=null===(e=this.universalProvider)||void 0===e||null===(t=e.session)||void 0===t?void 0:t.namespaces;return{supportsAllNetworks:"MetaMask Wallet"===(null===(n=this.universalProvider)||void 0===n||null===(r=n.session)||void 0===r||null===(a=r.peer)||void 0===a?void 0:a.metadata.name),approvedCaipNetworkIds:this.getChainsFromNamespaces(o)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}},{key:"switchCaipNetwork",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,a,o,s;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.chainNamespace,!t.getAddressByChainNamespace(e.chainNamespace)){n.next=11;break}if(o=Nf.O.getProviderId(r),e.chainNamespace!==i.R.state.activeChain){n.next=8;break}return n.next=6,null===(a=t.getAdapter(r))||void 0===a?void 0:a.switchNetwork({caipNetwork:e});case 6:n.next=9;break;case 8:t.setCaipNetwork(e),o===hh.b.CONNECTOR_TYPE_WALLET_CONNECT?t.syncWalletConnectAccount():(s=t.getAddressByChainNamespace(r))&&t.syncAccount({address:s,chainId:e.id,chainNamespace:r});case 9:n.next=12;break;case 11:t.setCaipNetwork(e);case 12:case"end":return n.stop()}},n)}))()}},{key:"getChainsFromNamespaces",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.values(e).flatMap(function(e){var t=e.chains||[],n=e.accounts.map(function(e){var t=xf.u.parseCaipAddress(e),n=t.chainId,r=t.chainNamespace;return"".concat(r,":").concat(n)});return Array.from(new Set([].concat(x(t),x(n))))})}},{key:"createAdapters",value:function(e){var t=this;return this.createClients(),this.chainNamespaces.reduce(function(n,r){var a,i,o=null==e?void 0:e.find(function(e){return e.namespace===r});return o?(o.construct({namespace:r,projectId:null===(a=t.options)||void 0===a?void 0:a.projectId,networks:null===(i=t.caipNetworks)||void 0===i?void 0:i.filter(function(e){return e.chainNamespace===r})}),n[r]=o):n[r]=new kh({namespace:r,networks:t.getCaipNetworks()}),n},{})}},{key:"initChainAdapter",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.onConnectors(e),t.listenAdapter(e),r=t.getAdapter(e)){n.next=4;break}throw new Error("adapter not found");case 4:return n.next=6,r.syncConnectors();case 6:return n.next=8,t.createUniversalProviderForAdapter(e);case 8:case"end":return n.stop()}},n)}))()}},{key:"initChainAdapters",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.chainNamespaces.map(function(){var t=(0,r.Z)(A().mark(function t(n){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initChainAdapter(n);case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 2:e.initAdapterController();case 3:case"end":return t.stop()}},t)}))()}},{key:"onConnectors",value:function(e){var t;null===(t=this.getAdapter(e))||void 0===t||t.on("connectors",this.setConnectors.bind(this))}},{key:"listenAdapter",value:function(e){var t=this,n=this.getAdapter(e);if(n){var r=_f.M.getConnectionStatus();!1===c.h.state.enableReconnect?this.setStatus("disconnected",e):"connected"===r?this.setStatus("connecting",e):"disconnected"===r?(_f.M.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",function(n){var r,a,o=n.address,s=n.chainId,c=t.getCaipNetworks().find(function(e){return e.id.toString()===s.toString()||e.caipNetworkId.toString()===s.toString()}),u=i.R.state.activeChain===e,l=null===(r=i.R.state.chains.get(e))||void 0===r||null===(a=r.accountState)||void 0===a?void 0:a.address;if(c){var d=u&&o?o:l;d&&t.syncAccount({address:d,chainId:c.id,chainNamespace:e})}else t.setUnsupportedNetwork(s)}),n.on("disconnect",function(){var n=t.remoteFeatures.multiWallet,r=Array.from(o.l.state.connections.values()).flat();t.onDisconnectNamespace({chainNamespace:e,closeModal:!n||0===r.length})}),n.on("connections",function(n){t.setConnections(n,e)}),n.on("pendingTransactions",function(){var n=t.getAddress(e),r=i.R.state.activeCaipNetwork;!n||null==r||!r.id||t.updateNativeBalance(n,r.id,r.chainNamespace)}),n.on("accountChanged",function(n){var r,a,o=n.address,s=n.chainId,c=n.connector;t.handlePreviousConnectorConnection(c);var u=i.R.state.activeChain===e;(null==c?void 0:c.provider)&&(t.syncProvider({id:c.id,type:c.type,provider:null==c?void 0:c.provider,chainNamespace:e}),t.syncConnectedWalletInfo(e));var l=null===(r=i.R.getNetworkData(e))||void 0===r||null===(a=r.caipNetwork)||void 0===a?void 0:a.id,d=s||l;u&&d?t.syncAccount({address:o,chainId:d,chainNamespace:e}):!u&&d?(t.syncAccountInfo(o,d,e),t.syncBalance({address:o,chainId:d,chainNamespace:e})):t.syncAccountInfo(o,s,e),_f.M.addConnectedNamespace(e)})}}},{key:"handlePreviousConnectorConnection",value:function(e){return(0,r.Z)(A().mark(function t(){var n,r,i,s;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null==e?void 0:e.chain,r=null==e?void 0:e.id,i=a.A.getConnectorId(n),s=n&&r&&i&&i!==r&&!c.h.state.remoteFeatures.multiWallet,t.prev=1,t.t0=s,!t.t0){t.next=6;break}return t.next=6,o.l.disconnect({id:i,namespace:n});case 6:t.next=11;break;case 8:t.prev=8,t.t1=t.catch(1),console.warn("Error disconnecting previous connector",t.t1);case 11:case"end":return t.stop()}},t,null,[[1,8]])}))()}},{key:"createUniversalProviderForAdapter",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,a,i;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getUniversalProvider();case 2:if(n.t0=t.universalProvider,!n.t0){n.next=6;break}return n.next=6,null===(r=t.chainAdapters)||void 0===r||null===(a=r[e])||void 0===a||null===(i=a.setUniversalProvider)||void 0===i?void 0:i.call(a,t.universalProvider);case 6:case"end":return n.stop()}},n)}))()}},{key:"syncExistingConnection",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.allSettled(e.chainNamespaces.map(function(t){return e.syncNamespaceConnection(t)}));case 2:case"end":return t.stop()}},t)}))()}},{key:"unSyncExistingConnection",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.allSettled(e.chainNamespaces.map(function(e){return o.l.disconnect({namespace:e,initialDisconnect:!0})}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.error("Error disconnecting existing connections:",t.t0);case 8:case"end":return t.stop()}},t,null,[[0,5]])}))()}},{key:"reconnectWalletConnect",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n,r;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.syncWalletConnectAccount();case 2:n=e.getAddress(),e.getCaipAddress()||_f.M.deleteRecentWallet(),r=_f.M.getRecentWallet(),nh.X.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:n,properties:{method:s.j.isMobile()?"mobile":"qrcode",name:(null==r?void 0:r.name)||"Unknown",reconnect:!0,view:Uf.P.state.view,walletRank:null==r?void 0:r.order}});case 6:case"end":return t.stop()}},t)}))()}},{key:"syncNamespaceConnection",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0,e===kf.b.CHAIN.EVM&&s.j.isSafeApp()&&a.A.setConnectorId(kf.b.CONNECTOR_ID.SAFE,e),r=a.A.getConnectorId(e),n.t0=(t.setStatus("connecting",e),r),n.next=n.t0===kf.b.CONNECTOR_ID.WALLET_CONNECT?6:n.t0===kf.b.CONNECTOR_ID.AUTH?9:10;break;case 6:return n.next=8,t.reconnectWalletConnect();case 8:case 9:return n.abrupt("break",12);case 10:return n.next=12,t.syncAdapterConnection(e);case 12:n.next=17;break;case 14:n.prev=14,n.t1=n.catch(0),console.warn("AppKit couldn't sync existing connection",n.t1),t.setStatus("disconnected",e);case 17:case"end":return n.stop()}},n,null,[[0,14]])}))()}},{key:"onDisconnectNamespace",value:function(e){var t=e||{},n=t.chainNamespace,r=t.closeModal;i.R.resetAccount(n),i.R.resetNetwork(n),_f.M.removeConnectedNamespace(n);var o=Array.from(i.R.state.chains.keys());(n?[n]:o).forEach(function(e){return _f.M.addDisconnectedConnectorId(a.A.getConnectorId(e)||"",e)}),a.A.removeConnectorId(n),Nf.O.resetChain(n),this.setUser(null,n),this.setStatus("disconnected",n),this.setConnectedWalletInfo(null,n),!1!==r&&$f.I.close()}},{key:"syncAdapterConnections",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.allSettled(e.chainNamespaces.map(function(t){var n=e.getAdapter(t),r=e.getCaipAddress(t),a=e.getCaipNetwork(t);return null==n?void 0:n.syncConnections({connectToFirstConnector:!r,caipNetwork:a})}));case 2:case"end":return t.stop()}},t)}))()}},{key:"syncAdapterConnection",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,i,o,s,c,u,l,d,p,f;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.getAdapter(e),i=t.getCaipNetwork(e),o=a.A.getConnectorId(e),s=a.A.getConnectors(e).find(function(e){return e.id===o}),n.prev=1,r&&s){n.next=4;break}throw new Error("Adapter or connector not found for namespace ".concat(e));case 4:if(null!=i&&i.id){n.next=6;break}throw new Error("CaipNetwork not found");case 6:return n.next=8,null==r?void 0:r.syncConnection({namespace:e,id:s.id,chainId:i.id,rpcUrl:null==i||null===(c=i.rpcUrls)||void 0===c||null===(u=c.default)||void 0===u||null===(l=u.http)||void 0===l?void 0:l[0]});case 8:if(!(f=n.sent)){n.next=17;break}return t.syncProvider(E(E({},f),{},{chainNamespace:e})),n.next=13,t.syncAccount(E(E({},f),{},{chainNamespace:e}));case 13:t.setStatus("connected",e),nh.X.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:f.address,properties:{method:"browser",name:(null===(d=s.info)||void 0===d?void 0:d.name)||s.name||"Unknown",reconnect:!0,view:Uf.P.state.view,walletRank:null==s||null===(p=s.explorerWallet)||void 0===p?void 0:p.order}}),n.next=18;break;case 17:t.setStatus("disconnected",e);case 18:n.next=23;break;case 20:n.prev=20,n.t0=n.catch(1),t.onDisconnectNamespace({chainNamespace:e,closeModal:!1});case 23:case"end":return n.stop()}},n,null,[[1,20]])}))()}},{key:"syncWalletConnectAccount",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n,o,s,c;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=Object.keys((null===(n=e.universalProvider)||void 0===n||null===(o=n.session)||void 0===o?void 0:o.namespaces)||{}),c=e.chainNamespaces.map(function(){var t=(0,r.Z)(A().mark(function t(n){var r,o,c,u,l,d,p,f,h,v,g,m,y,b;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(l=e.getAdapter(n)){t.next=3;break}return t.abrupt("return");case 3:if(d=(null===(r=e.universalProvider)||void 0===r||null===(o=r.session)||void 0===o||null===(c=o.namespaces)||void 0===c||null===(u=c[n])||void 0===u?void 0:u.accounts)||[],p=i.R.state.activeCaipNetwork.id,f=d.find(function(e){return xf.u.parseCaipAddress(e).chainId===(null==p?void 0:p.toString())})||d[0],!f){t.next=13;break}return h=xf.u.validateCaipAddress(f),v=xf.u.parseCaipAddress(h),g=v.chainId,m=v.address,Nf.O.setProviderId(n,hh.b.CONNECTOR_TYPE_WALLET_CONNECT),e.caipNetworks&&i.R.state.activeCaipNetwork&&l.namespace!==kf.b.CHAIN.EVM?(y=l.getWalletConnectProvider({caipNetworks:e.getCaipNetworks(),provider:e.universalProvider,activeCaipNetwork:i.R.state.activeCaipNetwork}),Nf.O.setProvider(n,y)):Nf.O.setProvider(n,e.universalProvider),a.A.setConnectorId(kf.b.CONNECTOR_ID.WALLET_CONNECT,n),_f.M.addConnectedNamespace(n),t.next=11,e.syncAccount({address:m,chainId:g,chainNamespace:n});case 11:t.next=14;break;case 13:s.includes(n)&&e.setStatus("disconnected",n);case 14:b=e.getApprovedCaipNetworksData(),e.syncConnectedWalletInfo(n),i.R.setApprovedCaipNetworksData(n,{approvedCaipNetworkIds:b.approvedCaipNetworkIds,supportsAllNetworks:b.supportsAllNetworks});case 16:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),t.next=3,Promise.all(c);case 3:case"end":return t.stop()}},t)}))()}},{key:"syncProvider",value:function(e){var t=e.type,n=e.provider,r=e.id,i=e.chainNamespace;Nf.O.setProviderId(i,t),Nf.O.setProvider(i,n),a.A.setConnectorId(r,i)}},{key:"syncAccount",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,a,o,s,u,l,d,p,f,h,v,g,m,y,b,w,E;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.chainNamespace===i.R.state.activeChain,a=i.R.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),o=e.address,s=e.chainId,u=e.chainNamespace,l=_f.M.getActiveNetworkProps(),d=l.chainId,p=(null==a?void 0:a.id)||d,f=i.R.state.activeCaipNetwork.name===kf.b.UNSUPPORTED_NETWORK_NAME,h=i.R.getNetworkProp("supportsAllNetworks",u),t.setStatus("connected",u),f&&!h||!p){n.next=16;break}if(v=t.getCaipNetworks().find(function(e){return e.id.toString()===p.toString()}),g=t.getCaipNetworks().find(function(e){return e.chainNamespace===u}),h||v||g||(m=t.getApprovedCaipNetworkIds()||[],y=m.find(function(e){var t;return(null===(t=xf.u.parseCaipNetworkId(e))||void 0===t?void 0:t.chainId)===p.toString()}),b=m.find(function(e){var t;return(null===(t=xf.u.parseCaipNetworkId(e))||void 0===t?void 0:t.chainNamespace)===u}),v=t.getCaipNetworks().find(function(e){return e.caipNetworkId===y}),g=t.getCaipNetworks().find(function(e){return e.caipNetworkId===b||"deprecatedCaipNetworkId"in e&&e.deprecatedCaipNetworkId===b})),(null==(w=v||g)?void 0:w.chainNamespace)===i.R.state.activeChain?c.h.state.enableNetworkSwitch&&!c.h.state.allowUnsupportedChain&&i.R.state.activeCaipNetwork.name===kf.b.UNSUPPORTED_NETWORK_NAME?i.R.showUnsupportedChainUI():t.setCaipNetwork(w):r||a&&t.setCaipNetworkOfNamespace(a,u),t.syncConnectedWalletInfo(u),E=t.getAddress(u),vh.g.isLowerCaseMatch(o,E)||t.syncAccountInfo(o,null==w?void 0:w.id,u),!r){n.next=13;break}return n.next=11,t.syncBalance({address:o,chainId:null==w?void 0:w.id,chainNamespace:u});case 11:n.next=15;break;case 13:return n.next=15,t.syncBalance({address:o,chainId:null==a?void 0:a.id,chainNamespace:u});case 15:t.syncIdentity({address:o,chainId:s,chainNamespace:u});case 16:case"end":return n.stop()}},n)}))()}},{key:"syncAccountInfo",value:function(e,t,n){var a=this;return(0,r.Z)(A().mark(function r(){var i,o;return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(i=a.getCaipAddress(n),o=t||(null==i?void 0:i.split(":")[1]),r.t0=o,!r.t0){r.next=6;break}return a.setCaipAddress("".concat(n,":").concat(o,":").concat(e),n,!0),r.next=6,a.syncIdentity({address:e,chainId:o,chainNamespace:n});case 6:case"end":return r.stop()}},r)}))()}},{key:"syncReownName",value:function(e,t){var n=this;return(0,r.Z)(A().mark(function r(){var a;return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n.getReownName(e);case 3:a=r.sent,n.setProfileName(a[0]?a[0].name:null,t),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),n.setProfileName(null,t);case 10:case"end":return r.stop()}},r,null,[[0,7]])}))()}},{key:"syncConnectedWalletInfo",value:function(e){var t=a.A.getConnectorId(e),n=Nf.O.getProviderId(e);if(n===hh.b.CONNECTOR_TYPE_ANNOUNCED||n===hh.b.CONNECTOR_TYPE_INJECTED){if(t){var r=this.getConnectors().find(function(e){var n,r,a=e.id===t,i=(null===(n=e.info)||void 0===n?void 0:n.rdns)===t,o=null===(r=e.connectors)||void 0===r?void 0:r.some(function(e){var n;return e.id===t||(null===(n=e.info)||void 0===n?void 0:n.rdns)===t});return a||i||Boolean(o)});if(r){var i=r.info,o=r.name,s=r.imageUrl||this.getConnectorImage(r);this.setConnectedWalletInfo(E({name:o,icon:s},i),e)}}}else if(n===hh.b.CONNECTOR_TYPE_WALLET_CONNECT){var c,u=Nf.O.getProvider(e);(null==u?void 0:u.session)&&this.setConnectedWalletInfo(E(E({},u.session.peer.metadata),{},{name:u.session.peer.metadata.name,icon:null===(c=u.session.peer.metadata.icons)||void 0===c?void 0:c[0]}),e)}else if(t&&(t===kf.b.CONNECTOR_ID.COINBASE_SDK||t===kf.b.CONNECTOR_ID.COINBASE)){var l=this.getConnectors().find(function(e){return e.id===t}),d=(null==l?void 0:l.name)||"Coinbase Wallet",p=(null==l?void 0:l.imageUrl)||this.getConnectorImage(l),f=null==l?void 0:l.info;this.setConnectedWalletInfo(E(E({},f),{},{name:d,icon:p}),e)}}},{key:"syncBalance",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=!Cf.p.getNetworksByNamespace(t.getCaipNetworks(),e.chainNamespace).find(function(t){var n;return t.id.toString()===(null===(n=e.chainId)||void 0===n?void 0:n.toString())})||!e.chainId,n.t0){n.next=4;break}return n.next=4,t.updateNativeBalance(e.address,e.chainId,e.chainNamespace);case 4:case"end":return n.stop()}},n)}))()}},{key:"ready",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.readyPromise;case 2:case"end":return t.stop()}},t)}))()}},{key:"updateNativeBalance",value:function(e,t,n){var a=this;return(0,r.Z)(A().mark(function r(){var o,s,c;return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(o=a.getAdapter(n),s=i.R.getCaipNetworkByNamespace(n,t),!o){r.next=6;break}return r.next=4,o.getBalance({address:e,chainId:t,caipNetwork:s,tokens:a.options.tokens});case 4:return c=r.sent,r.abrupt("return",(a.setBalance(c.balance,c.symbol,n),c));case 6:case"end":return r.stop()}},r)}))()}},{key:"initializeUniversalAdapter",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){var n,a,i,o,s,u,l,d,p,f,h,v,g,m;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(v=gh(function(t){for(var n,r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];t&&e.handleAlertError(t),(n=console).error.apply(n,a)}),g={projectId:null===(n=e.options)||void 0===n?void 0:n.projectId,metadata:{name:null!==(a=e.options)&&void 0!==a&&a.metadata?null===(i=e.options)||void 0===i?void 0:i.metadata.name:"",description:null!==(o=e.options)&&void 0!==o&&o.metadata?null===(s=e.options)||void 0===s?void 0:s.metadata.description:"",url:null!==(u=e.options)&&void 0!==u&&u.metadata?null===(l=e.options)||void 0===l?void 0:l.metadata.url:"",icons:null!==(d=e.options)&&void 0!==d&&d.metadata?null===(p=e.options)||void 0===p?void 0:p.metadata.icons:[""]},logger:v},c.h.setManualWCControl(Boolean(null===(f=e.options)||void 0===f?void 0:f.manualWCControl)),null===(h=e.options.universalProvider)||void 0===h){t.next=6;break}t.t0=h,t.next=9;break;case 6:return t.next=8,Ef.init(g);case 8:t.t0=t.sent;case 9:if(e.universalProvider=t.t0,m=e.universalProvider.disconnect.bind(e.universalProvider),e.universalProvider.disconnect=(0,r.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m();case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!(e.t0 instanceof Error&&e.t0.message.includes("Missing or invalid. Record was recently deleted"))){e.next=10;break}return e.abrupt("return");case 10:throw e.t0;case 11:case"end":return e.stop()}},e,null,[[0,6]])})),t.t1=!1===c.h.state.enableReconnect&&e.universalProvider.session,!t.t1){t.next=16;break}return t.next=16,e.universalProvider.disconnect();case 16:e.listenWalletConnect();case 17:case"end":return t.stop()}},t)}))()}},{key:"listenWalletConnect",value:function(){var e=this;this.universalProvider&&this.chainNamespaces.forEach(function(t){th.listenWcProvider({universalProvider:e.universalProvider,namespace:t,onDisplayUri:function(e){o.l.setUri(e)},onConnect:function(t){var n,r=s.j.getAccount(t[0]).address,a=M(e.chainNamespaces);try{for(a.s();!(n=a.n()).done;){var i=n.value;_f.M.removeDisconnectedConnectorId(kf.b.CONNECTOR_ID.WALLET_CONNECT,i)}}catch(c){a.e(c)}finally{a.f()}o.l.finalizeWcConnection(r)},onDisconnect:function(){i.R.state.noAdapters&&e.resetAccount(t),o.l.resetWcConnection()},onChainChanged:function(n){var r=i.R.state.activeChain;if(r===t&&(i.R.state.noAdapters||r&&a.A.state.activeConnectorIds[r]===kf.b.CONNECTOR_ID.WALLET_CONNECT)){var o=e.getCaipNetworks().find(function(e){return e.id.toString()===n.toString()||e.caipNetworkId.toString()===n.toString()}),s=e.getCaipNetwork();if(!o)return void e.setUnsupportedNetwork(n);(null==s?void 0:s.id.toString())!==(null==o?void 0:o.id.toString())&&(null==s?void 0:s.chainNamespace)===(null==o?void 0:o.chainNamespace)&&e.setCaipNetwork(o)}},onAccountsChanged:function(n){var r=i.R.state.activeChain;if(r===t&&(i.R.state.noAdapters||r&&a.A.state.activeConnectorIds[r]===kf.b.CONNECTOR_ID.WALLET_CONNECT)){var o=null==n?void 0:n[0];o&&e.syncAccount({address:o.address,chainId:o.chainId,chainNamespace:o.chainNamespace})}}})})}},{key:"createUniversalProvider",value:function(){var e;return!this.universalProviderInitPromise&&s.j.isClient()&&null!==(e=this.options)&&void 0!==e&&e.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}},{key:"getUniversalProvider",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.universalProvider){t.next=9;break}return t.prev=1,t.next=4,e.createUniversalProvider();case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),nh.X.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:t.t0 instanceof Error?t.t0.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",t.t0);case 9:return t.abrupt("return",e.universalProvider);case 10:case"end":return t.stop()}},t,null,[[1,6]])}))()}},{key:"getDisabledCaipNetworks",value:function(){var e=i.R.getAllApprovedCaipNetworkIds(),t=i.R.getAllRequestedCaipNetworks();return s.j.sortRequestedNetworks(e,t).filter(function(e){return i.R.isCaipNetworkDisabled(e)})}},{key:"handleAlertError",value:function(e){var t=Object.entries(ph.UniversalProviderErrors).find(function(t){var n=C(t,2)[1].message;return e.message.includes(n)}),n=C(null!=t?t:[],2),r=n[0],a=n[1],i=null!=a?a:{},o=i.message,s=i.alertErrorKey;if(r&&o&&!this.reportedAlertErrors[r]){var c=ph.ALERT_ERRORS[s];c&&(jf.B.open(c,"error"),this.reportedAlertErrors[r]=!0)}}},{key:"getAdapter",value:function(e){var t;if(e)return null===(t=this.chainAdapters)||void 0===t?void 0:t[e]}},{key:"createAdapter",value:function(e){var t,n;if(e){var r=e.namespace;if(r){this.createClients();var a=e;a.namespace=r,a.construct({namespace:r,projectId:null===(t=this.options)||void 0===t?void 0:t.projectId,networks:null===(n=this.caipNetworks)||void 0===n?void 0:n.filter(function(e){return e.chainNamespace===r})}),this.chainNamespaces.includes(r)||this.chainNamespaces.push(r),this.chainAdapters&&(this.chainAdapters[r]=a)}}}},{key:"open",value:function(e){var t=this;return(0,r.Z)(A().mark(function n(){var r,a,i;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.injectModalUi();case 2:return(null==e?void 0:e.uri)&&o.l.setUri(e.uri),r=t.toModalOptions(),a=r.isSwap,i=r.isSend,n.abrupt("return",a(e)?$f.I.open(E(E({},e),{},{data:{swap:e.arguments}})):i(e)&&e.arguments?t.openSend(e.arguments):$f.I.open(e));case 5:case"end":return n.stop()}},n)}))()}},{key:"close",value:function(){var e=this;return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.injectModalUi();case 2:$f.I.close();case 3:case"end":return t.stop()}},t)}))()}},{key:"setLoading",value:function(e,t){$f.I.setLoading(e,t)}},{key:"disconnect",value:function(e){return(0,r.Z)(A().mark(function t(){return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.l.disconnect({namespace:e});case 2:case"end":return t.stop()}},t)}))()}},{key:"getSIWX",value:function(){return c.h.state.siwx}},{key:"getError",value:function(){return""}},{key:"getChainId",value:function(){return i.R.state.activeCaipNetwork.id}},{key:"switchNetwork",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.throwOnFailure,a=void 0!==n&&n,o=this;return(0,r.Z)(A().mark(function t(){var n;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=o.getCaipNetworks().find(function(t){return t.id===e.id}),!n){t.next=6;break}return t.next=4,i.R.switchActiveNetwork(n,{throwOnFailure:a});case 4:t.next=7;break;case 6:jf.B.open(ph.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");case 7:case"end":return t.stop()}},t)}))()}},{key:"getWalletProvider",value:function(){return i.R.state.activeChain?Nf.O.state.providers[i.R.state.activeChain]:null}},{key:"getWalletProviderType",value:function(){return Nf.O.getProviderId(i.R.state.activeChain)}},{key:"subscribeProviders",value:function(e){return Nf.O.subscribeProviders(e)}},{key:"getThemeMode",value:function(){return ah.u.state.themeMode}},{key:"getThemeVariables",value:function(){return ah.u.state.themeVariables}},{key:"setThemeMode",value:function(e){ah.u.setThemeMode(e),(0,uh.Hs)(ah.u.state.themeMode)}},{key:"setTermsConditionsUrl",value:function(e){c.h.setTermsConditionsUrl(e)}},{key:"setPrivacyPolicyUrl",value:function(e){c.h.setPrivacyPolicyUrl(e)}},{key:"setThemeVariables",value:function(e){ah.u.setThemeVariables(e),(0,uh.R)(ah.u.state.themeVariables)}},{key:"subscribeTheme",value:function(e){return ah.u.subscribe(e)}},{key:"subscribeConnections",value:function(e){return this.remoteFeatures.multiWallet?o.l.subscribe(e):(jf.B.open(kf.b.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),function(){})}},{key:"getWalletInfo",value:function(e){var t,n,r;return e?null===(t=i.R.state.chains.get(e))||void 0===t||null===(n=t.accountState)||void 0===n?void 0:n.connectedWalletInfo:null===(r=i.R.getAccountData())||void 0===r?void 0:r.connectedWalletInfo}},{key:"getAccount",value:function(e){var t=e||i.R.state.activeChain,n=a.A.getAuthConnector(t),r=i.R.getAccountData(t),c=_f.M.getConnectedConnectorId(i.R.state.activeChain),u=o.l.getConnections(t);if(!t)throw new Error("AppKit:getAccount - namespace is required");var l=u.flatMap(function(e){return e.accounts.map(function(e){var n=e.address,r=e.type,a=e.publicKey;return s.j.createAccount(t,n,r||"eoa",a)})});if(r)return{allAccounts:l,caipAddress:r.caipAddress,address:s.j.getPlainAddress(r.caipAddress),isConnected:Boolean(r.caipAddress),status:r.status,embeddedWalletInfo:n&&c===kf.b.CONNECTOR_ID.AUTH?{user:r.user?E(E({},r.user),{},{username:_f.M.getConnectedSocialUsername()}):void 0,authProvider:r.socialProvider||"email",accountType:(0,If.r9)(t),isSmartAccountDeployed:Boolean(r.smartAccountDeployed)}:void 0}}},{key:"subscribeAccount",value:function(e,t){var n=this,r=[],o=function(){var r=n.getAccount(t);!r||e(r)};if(t){var s=i.R.subscribeChainProp("accountState",o,t);r.push(s)}else{var c=i.R.subscribe(o);r.push(c)}var u=a.A.subscribe(o);return r.push(u),function(){r.forEach(function(e){return e()})}}},{key:"subscribeNetwork",value:function(e){return i.R.subscribe(function(t){var n=t.activeCaipNetwork;e({caipNetwork:n,chainId:null==n?void 0:n.id,caipNetworkId:null==n?void 0:n.caipNetworkId})})}},{key:"subscribeWalletInfo",value:function(e,t){return t?i.R.subscribeChainProp("accountState",function(t){return e(null==t?void 0:t.connectedWalletInfo)},t):i.R.subscribeChainProp("accountState",function(t){return e(null==t?void 0:t.connectedWalletInfo)})}},{key:"subscribeShouldUpdateToAddress",value:function(e){return i.R.subscribeChainProp("accountState",function(t){return e(null==t?void 0:t.shouldUpdateToAddress)})}},{key:"subscribeCaipNetworkChange",value:function(e){return i.R.subscribeKey("activeCaipNetwork",e)}},{key:"getState",value:function(){return oh.I.state}},{key:"getRemoteFeatures",value:function(){return c.h.state.remoteFeatures}},{key:"subscribeState",value:function(e){return oh.I.subscribe(e)}},{key:"subscribeRemoteFeatures",value:function(e){return c.h.subscribeKey("remoteFeatures",e)}},{key:"showErrorMessage",value:function(e){sh.K.showError(e)}},{key:"showSuccessMessage",value:function(e){sh.K.showSuccess(e)}},{key:"getEvent",value:function(){return E({},nh.X.state)}},{key:"subscribeEvents",value:function(e){return nh.X.subscribe(e)}},{key:"replace",value:function(e){Uf.P.replace(e)}},{key:"redirect",value:function(e){Uf.P.push(e)}},{key:"popTransactionStack",value:function(e){Uf.P.popTransactionStack(e)}},{key:"isOpen",value:function(){return $f.I.state.open}},{key:"isTransactionStackEmpty",value:function(){return 0===Uf.P.state.transactionStack.length}},{key:"updateFeatures",value:function(e){c.h.setFeatures(e)}},{key:"updateRemoteFeatures",value:function(e){c.h.setRemoteFeatures(e)}},{key:"updateOptions",value:function(e){var t=E(E({},c.h.state||{}),e);c.h.setOptions(t)}},{key:"setConnectMethodsOrder",value:function(e){c.h.setConnectMethodsOrder(e)}},{key:"setWalletFeaturesOrder",value:function(e){c.h.setWalletFeaturesOrder(e)}},{key:"setCollapseWallets",value:function(e){c.h.setCollapseWallets(e)}},{key:"setSocialsOrder",value:function(e){c.h.setSocialsOrder(e)}},{key:"getConnectMethodsOrder",value:function(){return ch.J.getConnectOrderMethod(c.h.state.features,a.A.getConnectors())}},{key:"addNetwork",value:function(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error("Adapter for namespace ".concat(e," doesn't exist"));var n=this.extendCaipNetwork(t,this.options);this.getCaipNetworks().find(function(e){return e.id===n.id})||i.R.addNetwork(n)}},{key:"removeNetwork",value:function(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error("Adapter for namespace ".concat(e," doesn't exist"));!this.getCaipNetworks().find(function(e){return e.id===t})||i.R.removeNetwork(e,t)}}],[{key:"getInstance",value:function(){return this.instance}}]),e}());function _h(e){return new Ih(E(E({},e),{},{basic:!0,sdkVersion:"html-core-1.8.17-wc-circular-dependencies-fix.0"}))}},27458:function(e,t,n){"use strict";var r,a;n.d(t,{Al:function(){return Y},dy:function(){return T},cV:function(){return R},Jb:function(){return P},Ld:function(){return U},sY:function(){return X},YP:function(){return O}});var i=globalThis,o=i.trustedTypes,s=o?o.createPolicy("lit-html",{createHTML:function(e){return e}}):void 0,c="$lit$",u="lit$".concat(Math.random().toFixed(9).slice(2),"$"),l="?"+u,d="<".concat(l,">"),p=document,f=function(){return p.createComment("")},h=function(e){return null===e||"object"!=typeof e&&"function"!=typeof e},v=Array.isArray,g=function(e){return v(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator])},m="[ \t\n\f\r]",y=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,b=/-->/g,w=/>/g,E=RegExp(">|".concat(m,"(?:([^\\s\"'>=/]+)(").concat(m,"*=").concat(m,"*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)"),"g"),k=/'/g,A=/"/g,_=/^(?:script|style|textarea|title)$/i,S=function(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return{_$litType$:e,strings:t,values:r}}},T=S(1),O=S(2),R=S(3),P=Symbol.for("lit-noChange"),U=Symbol.for("lit-nothing"),D=new WeakMap,L=p.createTreeWalker(p,129);function j(e,t){if(!v(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==s?s.createHTML(t):t}var W=function(e,t){for(var n,r=e.length-1,a=[],i=2===t?"<svg>":3===t?"<math>":"",o=y,s=0;s<r;s++){for(var l=e[s],p=void 0,f=void 0,h=-1,v=0;v<l.length&&(o.lastIndex=v,null!==(f=o.exec(l)));){var g;v=o.lastIndex,o===y?"!--"===f[1]?o=b:void 0!==f[1]?o=w:void 0!==f[2]?(_.test(f[2])&&(n=RegExp("</"+f[2],"g")),o=E):void 0!==f[3]&&(o=E):o===E?">"===f[0]?(o=null!==(g=n)&&void 0!==g?g:y,h=-1):void 0===f[1]?h=-2:(h=o.lastIndex-f[2].length,p=f[1],o=void 0===f[3]?E:'"'===f[3]?A:k):o===A||o===k?o=E:o===b||o===w?o=y:(o=E,n=void 0)}var m=o===E&&e[s+1].startsWith("/>")?" ":"";i+=o===y?l+d:h>=0?(a.push(p),l.slice(0,h)+c+l.slice(h)+u+m):l+u+(-2===h?s:m)}return[j(e,i+(e[r]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),a]},q=function(){function e(t,n){var r,a=t.strings,i=t._$litType$;B(this,e),this.parts=[];var s=0,d=0,p=a.length-1,h=this.parts,v=C(W(a,i),2),g=v[0],m=v[1];if(this.el=e.createElement(g,n),L.currentNode=this.el.content,2===i||3===i){var y=this.el.content.firstChild;y.replaceWith.apply(y,x(y.childNodes))}for(;null!==(r=L.nextNode())&&h.length<p;){if(1===r.nodeType){if(r.hasAttributes()){var b,w=M(r.getAttributeNames());try{for(w.s();!(b=w.n()).done;){var E=b.value;if(E.endsWith(c)){var k=m[d++],A=r.getAttribute(E).split(u),N=/([.?@])?(.*)/.exec(k);h.push({type:1,index:s,name:N[2],strings:A,ctor:"."===N[1]?z:"?"===N[1]?G:"@"===N[1]?$:V}),r.removeAttribute(E)}else E.startsWith(u)&&(h.push({type:6,index:s}),r.removeAttribute(E))}}catch(R){w.e(R)}finally{w.f()}}if(_.test(r.tagName)){var I=r.textContent.split(u),S=I.length-1;if(S>0){r.textContent=o?o.emptyScript:"";for(var T=0;T<S;T++)r.append(I[T],f()),L.nextNode(),h.push({type:2,index:++s});r.append(I[S],f())}}}else if(8===r.nodeType)if(r.data===l)h.push({type:2,index:s});else for(var O=-1;-1!==(O=r.data.indexOf(u,O+1));)h.push({type:7,index:s}),O+=u.length-1;s++}}return F(e,null,[{key:"createElement",value:function(e,t){var n=p.createElement("template");return n.innerHTML=e,n}}]),e}();function Z(e,t){var n,r,a,i,o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,c=arguments.length>3?arguments[3]:void 0;if(t===P)return t;var u=void 0!==c?null===(n=s._$Co)||void 0===n?void 0:n[c]:s._$Cl,l=h(t)?void 0:t._$litDirective$;return(null===(r=u)||void 0===r?void 0:r.constructor)!==l&&(null!==(a=u)&&void 0!==a&&null!==(i=a._$AO)&&void 0!==i&&i.call(a,!1),void 0===l?u=void 0:(u=new l(e))._$AT(e,s,c),void 0!==c?(null!==(o=s._$Co)&&void 0!==o?o:s._$Co=[])[c]=u:s._$Cl=u),void 0!==u&&(t=Z(e,u._$AS(e,t.values),u,c)),t}var H=function(){function e(t,n){B(this,e),this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=n}return F(e,[{key:"parentNode",get:function(){return this._$AM.parentNode}},{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"u",value:function(e){var t,n=this._$AD,r=n.el.content,a=n.parts,i=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:p).importNode(r,!0);L.currentNode=i;for(var o=L.nextNode(),s=0,c=0,u=a[0];void 0!==u;){var l;if(s===u.index){var d=void 0;2===u.type?d=new K(o,o.nextSibling,this,e):1===u.type?d=new u.ctor(o,u.name,u.strings,this,e):6===u.type&&(d=new J(o,this,e)),this._$AV.push(d),u=a[++c]}s!==(null===(l=u)||void 0===l?void 0:l.index)&&(o=L.nextNode(),s++)}return L.currentNode=p,i}},{key:"p",value:function(e){var t,n=0,r=M(this._$AV);try{for(r.s();!(t=r.n()).done;){var a=t.value;void 0!==a&&(void 0!==a.strings?(a._$AI(e,a,n),n+=a.strings.length-2):a._$AI(e[n])),n++}}catch(i){r.e(i)}finally{r.f()}}}]),e}(),K=function(){function e(t,n,r,a){var i;B(this,e),this.type=2,this._$AH=U,this._$AN=void 0,this._$AA=t,this._$AB=n,this._$AM=r,this.options=a,this._$Cv=null===(i=null==a?void 0:a.isConnected)||void 0===i||i}return F(e,[{key:"_$AU",get:function(){var e,t;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cv}},{key:"parentNode",get:function(){var e,t=this._$AA.parentNode,n=this._$AM;return void 0!==n&&11===(null===(e=t)||void 0===e?void 0:e.nodeType)&&(t=n.parentNode),t}},{key:"startNode",get:function(){return this._$AA}},{key:"endNode",get:function(){return this._$AB}},{key:"_$AI",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;e=Z(this,e,t),h(e)?e===U||null==e||""===e?(this._$AH!==U&&this._$AR(),this._$AH=U):e!==this._$AH&&e!==P&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):g(e)?this.k(e):this._(e)}},{key:"O",value:function(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}},{key:"T",value:function(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}},{key:"_",value:function(e){this._$AH!==U&&h(this._$AH)?this._$AA.nextSibling.data=e:this.T(p.createTextNode(e)),this._$AH=e}},{key:"$",value:function(e){var t,n=e.values,r=e._$litType$,a="number"==typeof r?this._$AC(e):(void 0===r.el&&(r.el=q.createElement(j(r.h,r.h[0]),this.options)),r);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===a)this._$AH.p(n);else{var i=new H(a,this),o=i.u(this.options);i.p(n),this.T(o),this._$AH=i}}},{key:"_$AC",value:function(e){var t=D.get(e.strings);return void 0===t&&D.set(e.strings,t=new q(e)),t}},{key:"k",value:function(t){v(this._$AH)||(this._$AH=[],this._$AR());var n,r,a=this._$AH,i=0,o=M(t);try{for(o.s();!(r=o.n()).done;){var s=r.value;i===a.length?a.push(n=new e(this.O(f()),this.O(f()),this,this.options)):n=a[i],n._$AI(s),i++}}catch(c){o.e(c)}finally{o.f()}i<a.length&&(this._$AR(n&&n._$AB.nextSibling,i),a.length=i)}},{key:"_$AR",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._$AA.nextSibling,t=arguments.length>1?arguments[1]:void 0;for(null===(n=this._$AP)||void 0===n||n.call(this,!1,!0,t);e!==this._$AB;){var n,r=e.nextSibling;e.remove(),e=r}}},{key:"setConnected",value:function(e){var t;void 0===this._$AM&&(this._$Cv=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}]),e}(),V=function(){function e(t,n,r,a,i){B(this,e),this.type=1,this._$AH=U,this._$AN=void 0,this.element=t,this.name=n,this._$AM=a,this.options=i,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=U}return F(e,[{key:"tagName",get:function(){return this.element.tagName}},{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AI",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=this.strings,i=!1;if(void 0===a)e=Z(this,e,t,0),(i=!h(e)||e!==this._$AH&&e!==P)&&(this._$AH=e);else{var o,s,c=e;for(e=a[0],o=0;o<a.length-1;o++){var u;(s=Z(this,c[n+o],t,o))===P&&(s=this._$AH[o]),i||(i=!h(s)||s!==this._$AH[o]),s===U?e=U:e!==U&&(e+=(null!==(u=s)&&void 0!==u?u:"")+a[o+1]),this._$AH[o]=s}}i&&!r&&this.j(e)}},{key:"j",value:function(e){e===U?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}]),e}(),z=function(e){N(n,e);var t=I(n);function n(){var e;return B(this,n),(e=t.apply(this,arguments)).type=3,e}return F(n,[{key:"j",value:function(e){this.element[this.name]=e===U?void 0:e}}]),n}(V),G=function(e){N(n,e);var t=I(n);function n(){var e;return B(this,n),(e=t.apply(this,arguments)).type=4,e}return F(n,[{key:"j",value:function(e){this.element.toggleAttribute(this.name,!!e&&e!==U)}}]),n}(V),$=function(e){N(n,e);var t=I(n);function n(e,r,a,i,o){var s;return B(this,n),(s=t.call(this,e,r,a,i,o)).type=5,s}return F(n,[{key:"_$AI",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;if((e=null!==(t=Z(this,e,n,0))&&void 0!==t?t:U)!==P){var r=this._$AH,a=e===U&&r!==U||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==U&&(r===U||a);a&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}}},{key:"handleEvent",value:function(e){var t,n;"function"==typeof this._$AH?this._$AH.call(null!==(t=null===(n=this.options)||void 0===n?void 0:n.host)&&void 0!==t?t:this.element,e):this._$AH.handleEvent(e)}}]),n}(V),J=function(){function e(t,n,r){B(this,e),this.element=t,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}return F(e,[{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AI",value:function(e){Z(this,e)}}]),e}(),Y={M:c,P:u,A:l,C:1,L:W,R:H,D:g,V:Z,I:K,H:V,N:G,U:$,B:z,F:J};null!==(r=i.litHtmlPolyfillSupport)&&void 0!==r&&r.call(i,q,K),(null!==(a=i.litHtmlVersions)&&void 0!==a?a:i.litHtmlVersions=[]).push("3.3.2");var X=function(e,t,n){var r,a=null!==(r=null==n?void 0:n.renderBefore)&&void 0!==r?r:t,i=a._$litPart$;if(void 0===i){var o,s=null!==(o=null==n?void 0:n.renderBefore)&&void 0!==o?o:null;a._$litPart$=i=new K(t.insertBefore(f(),s),s,void 0,null!=n?n:{})}return i._$AI(e),i}},14350:function(e,t,n){"use strict";var r,a,i;n.d(t,{oi:function(){return u},iv:function(){return o.iv},dy:function(){return s.dy},YP:function(){return s.YP},$m:function(){return o.$m}});var o=n(3239),s=n(27458),c=globalThis,u=function(e){N(n,e);var t=I(n);function n(){var e;return B(this,n),(e=t.apply(this,arguments)).renderOptions={host:S(e)},e._$Do=void 0,e}return F(n,[{key:"createRenderRoot",value:function(){var e,t,r=v(U(n.prototype),"createRenderRoot",this).call(this);return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=r.firstChild),r}},{key:"update",value:function(e){var t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),v(U(n.prototype),"update",this).call(this,e),this._$Do=(0,s.sY)(t,this.renderRoot,this.renderOptions)}},{key:"connectedCallback",value:function(){var e;v(U(n.prototype),"connectedCallback",this).call(this),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}},{key:"disconnectedCallback",value:function(){var e;v(U(n.prototype),"disconnectedCallback",this).call(this),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}},{key:"render",value:function(){return s.Jb}}]),n}(o.fl);u._$litElement$=!0,u.finalized=!0,null!==(r=c.litElementHydrateSupport)&&void 0!==r&&r.call(c,{LitElement:u}),null!==(a=c.litElementPolyfillSupport)&&void 0!==a&&a.call(c,{LitElement:u}),(null!==(i=c.litElementVersions)&&void 0!==i?i:c.litElementVersions=[]).push("4.2.2")},47188:function(e,t,n){"use strict";n.d(t,{q:function(){return f}});var r=n(8239),a=n(99226),i=n(66422),o=n(51757),s=n(74654),c=new(n(96885).k)(8192),u=n(89929),l=n(90734);function d(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=(0,r.Z)(function(t){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return A().mark(function p(){var f,h,v,g,m,y,b,w,k,x,C;return A().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(h=E(E({},n),d),v=h.dedupe,g=void 0!==v&&v,m=h.methods,y=h.retryDelay,b=void 0===y?150:y,w=h.retryCount,k=void 0===w?3:w,x=h.uid,C=t.method,null==m||null===(f=m.exclude)||void 0===f||!f.includes(C)){p.next=3;break}throw new o.gS(new Error("method not supported"),{method:C});case 3:if(null==m||!m.include||m.include.includes(C)){p.next=5;break}throw new o.gS(new Error("method not supported"),{method:C});case 5:return p.abrupt("return",function(e,t){var n=t.enabled,r=t.id;if(void 0!==n&&!n||!r)return e();if(c.get(r))return c.get(r);var a=e().finally(function(){return c.delete(r)});return c.set(r,a),a}(function(){return(0,u.J)((0,r.Z)(A().mark(function n(){var r;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e(t);case 3:return n.abrupt("return",n.sent);case 6:n.prev=6,n.t0=n.catch(0),r=n.t0,n.t1=r.code,n.next=n.t1===o.s7.code?12:n.t1===o.B.code?13:n.t1===o.LX.code?14:n.t1===o.nY.code?15:n.t1===o.XS.code?16:n.t1===o.yR.code?17:n.t1===o.Og.code?18:n.t1===o.pT.code?19:n.t1===o.KB.code?20:n.t1===o.gS.code?21:n.t1===o.Pv.code?22:n.t1===o.GD.code?23:n.t1===o.ab.code?24:n.t1===o.PE.code?25:n.t1===o.Ts.code?26:n.t1===o.u5.code?27:n.t1===o.I0.code?28:n.t1===o.x3.code?29:n.t1===o.vl.code?30:n.t1===o.Uu.code?31:n.t1===o.Nt.code?32:n.t1===o.EJ.code?33:n.t1===o.fl.code?34:n.t1===o.NO.code?35:n.t1===o.r0.code?36:5e3===n.t1?37:n.t1===o.UF.code?38:39;break;case 12:throw new o.s7(r);case 13:throw new o.B(r);case 14:throw new o.LX(r,{method:t.method});case 15:throw new o.nY(r);case 16:throw new o.XS(r);case 17:throw new o.yR(r);case 18:throw new o.Og(r);case 19:throw new o.pT(r);case 20:throw new o.KB(r);case 21:throw new o.gS(r,{method:t.method});case 22:throw new o.Pv(r);case 23:throw new o.GD(r);case 24:case 37:throw new o.ab(r);case 25:throw new o.PE(r);case 26:throw new o.Ts(r);case 27:throw new o.u5(r);case 28:throw new o.I0(r);case 29:throw new o.x3(r);case 30:throw new o.vl(r);case 31:throw new o.Uu(r);case 32:throw new o.Nt(r);case 33:throw new o.EJ(r);case 34:throw new o.fl(r);case 35:throw new o.NO(r);case 36:throw new o.r0(r);case 38:throw new o.UF(r);case 39:throw n.t0 instanceof a.G?n.t0:new o.ir(r);case 40:case"end":return n.stop()}},n,null,[[0,6]])})),{delay:function(e){var t=e.count,n=e.error;if(n&&n instanceof i.Gg){var r,a=null==n||null===(r=n.headers)||void 0===r?void 0:r.get("Retry-After");if(null!=a&&a.match(/\d/))return 1e3*Number.parseInt(a,10)}return~~(1<<t)*b},retryCount:k,shouldRetry:function(e){return function(e){return"code"in e&&"number"==typeof e.code?-1===e.code||e.code===o.Pv.code||e.code===o.XS.code:!(e instanceof i.Gg&&e.status)||403===e.status||408===e.status||413===e.status||429===e.status||500===e.status||502===e.status||503===e.status||504===e.status}(e.error)}})},{enabled:g,id:g?(0,s.$G)("".concat(x,".").concat((0,l.P)(t))):void 0}));case 6:case"end":return p.stop()}},p)})()}),function(e){return t.apply(this,arguments)}}var p=n(35116);function f(e,t){var n=e.key,r=e.methods,a=e.name,i=e.request,o=e.retryCount,s=void 0===o?3:o,c=e.retryDelay,u=void 0===c?150:c;return{config:{key:n,methods:r,name:a,request:i,retryCount:s,retryDelay:u,timeout:e.timeout,type:e.type},request:d(i,{methods:r,retryCount:s,retryDelay:u,uid:(0,p.h)()}),value:t}}},33984:function(e,t,n){"use strict";n.d(t,{tv:function(){return c},Mu:function(){return u}});var r=n(8239),a=n(8231),i=n(51757),o=n(461),s=n(47188);function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.key,a=void 0===n?"fallback":n,i=t.name,c=void 0===i?"Fallback":i,l=t.rank,d=void 0!==l&&l,p=t.shouldThrow,h=void 0===p?u:p,v=t.retryCount,g=t.retryDelay;return function(t){var n=t.chain,i=t.pollingInterval,u=void 0===i?4e3:i,l=t.timeout,p=b(t,f),m=e,y=function(){},w=(0,s.q)({key:a,name:c,request:function(e){var t=e.method,a=e.params;return(0,r.Z)(A().mark(function e(){var i,o;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){var e=(0,r.Z)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return A().mark(function r(){var s,c,u;return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return s=m[e](E(E({},p),{},{chain:n,retryCount:0,timeout:l})),r.prev=1,r.next=4,s.request({method:t,params:a});case 4:return c=r.sent,r.abrupt("return",(y({method:t,params:a,response:c,transport:s,status:"success"}),c));case 8:if(r.prev=8,r.t0=r.catch(1),y({error:r.t0,method:t,params:a,transport:s,status:"error"}),!h(r.t0)&&e!==m.length-1&&(null!==(u=i)&&void 0!==u||(i=m.slice(e+1).some(function(e){var r=e({chain:n}).config.methods||{},a=r.include,i=r.exclude;return a?a.includes(t):!i||!i.includes(t)})),i)){r.next=12;break}throw r.t0;case 12:return r.abrupt("return",o(e+1));case 13:case"end":return r.stop()}},r,null,[[1,8]])})()});return function(){return e.apply(this,arguments)}}(),e.abrupt("return",o());case 2:case"end":return e.stop()}},e)}))()},retryCount:v,retryDelay:g,type:"fallback"},{onResponse:function(e){return y=e},transports:m.map(function(e){return e({chain:n,retryCount:0})})});if(d){var k,N="object"==typeof d?d:{};!function(e){var t=e.chain,n=e.interval,a=void 0===n?4e3:n,i=e.onTransports,s=e.ping,c=e.sampleCount,u=void 0===c?10:c,l=e.timeout,d=void 0===l?1e3:l,p=e.transports,f=e.weights,h=void 0===f?{}:f,v=h.stability,g=void 0===v?.7:v,m=h.latency,y=void 0===m?.3:m,b=[],w=function(){var e=(0,r.Z)(A().mark(function e(){var n,c,l;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(p.map(function(){var e=(0,r.Z)(A().mark(function e(n){var r,a,i,o;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n({chain:t,retryCount:0,timeout:d}),a=Date.now(),e.prev=1,e.next=4,s?s({transport:r}):r.request({method:"net_listening"});case 4:o=1,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),o=0;case 10:return e.prev=10,i=Date.now(),e.finish(10);case 13:return e.abrupt("return",{latency:i-a,success:o});case 14:case"end":return e.stop()}},e,null,[[1,7,10,13]])}));return function(t){return e.apply(this,arguments)}}()));case 2:return n=e.sent,b.push(n),b.length>u&&b.shift(),c=Math.max.apply(Math,x(b.map(function(e){return Math.max.apply(Math,x(e.map(function(e){return e.latency})))}))),l=p.map(function(e,t){var n=b.map(function(e){return e[t].latency}),r=1-n.reduce(function(e,t){return e+t},0)/n.length/c,a=b.map(function(e){return e[t].success}),i=a.reduce(function(e,t){return e+t},0)/a.length;return 0===i?[0,t]:[y*r+g*i,t]}).sort(function(e,t){return t[0]-e[0]}),i(l.map(function(e){var t=C(e,2)[1];return p[t]})),e.next=8,(0,o.D)(a);case 8:w();case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();w()}({chain:n,interval:null!==(k=N.interval)&&void 0!==k?k:u,onTransports:function(e){return m=e},ping:N.ping,sampleCount:N.sampleCount,timeout:N.timeout,transports:m,weights:N.weights})}return w}}function u(e){return!(!("code"in e)||"number"!=typeof e.code||e.code!==i.KB.code&&e.code!==i.ab.code&&e.code!==i.UF.code&&!a.M_.nodeMessage.test(e.message)&&5e3!==e.code)}},60168:function(e,t,n){"use strict";n.d(t,{d:function(){return u}});var r=n(8239),a=n(66422),i=n(71640),o=n(93614),s=n(29842),c=n(47188);function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.batch,u=t.fetchFn,l=t.fetchOptions,d=t.key,p=void 0===d?"http":d,f=t.methods,h=t.name,v=void 0===h?"HTTP JSON-RPC":h,g=t.onFetchRequest,m=t.onFetchResponse,y=t.retryDelay,b=t.raw;return function(d){var h,w,E=d.chain,k=d.retryCount,x=d.timeout,N="object"==typeof n?n:{},I=N.batchSize,_=void 0===I?1e3:I,S=N.wait,T=void 0===S?0:S,O=null!==(h=t.retryCount)&&void 0!==h?h:k,R=null!==(w=null!=x?x:t.timeout)&&void 0!==w?w:1e4,P=e||(null==E?void 0:E.rpcUrls.default.http[0]);if(!P)throw new i.I;var U=(0,s.x)(P,{fetchFn:u,fetchOptions:l,onRequest:g,onResponse:m,timeout:R});return(0,c.q)({key:p,methods:f,name:v,request:function(e){var t=e.method,i=e.params;return(0,r.Z)(A().mark(function e(){var s,c,u,l,d,p,f,h,v;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s={method:t,params:i},c=(0,o.S)({id:P,wait:T,shouldSplitBatch:function(e){return e.length>_},fn:function(e){return U.request({body:e})},sort:function(e,t){return e.id-t.id}}),u=c.schedule,l=function(){var e=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=4;break}e.t0=u(t),e.next=8;break;case 4:return e.next=6,U.request({body:t});case 6:e.t1=e.sent,e.t0=[e.t1];case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),e.next=6,l(s);case 6:if(d=e.sent,p=C(d,1),f=p[0],h=f.error,v=f.result,!b){e.next=13;break}return e.abrupt("return",{error:h,result:v});case 13:if(!h){e.next=15;break}throw new a.bs({body:s,error:h,url:P});case 15:return e.abrupt("return",v);case 16:case"end":return e.stop()}},e)}))()},retryCount:O,retryDelay:y,timeout:R,type:"http"},{fetchOptions:l,url:P})}}},62282:function(e,t,n){"use strict";n.d(t,{F8:function(){return r},Yi:function(){return a},k3:function(){return o},du:function(){return s},nZ:function(){return c},X$:function(){return u},_A:function(){return l},MR:function(){return d},Wo:function(){return p},Pm:function(){return f},H8:function(){return h},Hr:function(){return v},EN:function(){return g}});var r=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{name:"addr",type:"address"}],name:"getEthBalance",outputs:[{name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"}],a=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],i=[{inputs:[{name:"dns",type:"bytes"}],name:"DNSDecodingFailed",type:"error"},{inputs:[{name:"ens",type:"string"}],name:"DNSEncodingFailed",type:"error"},{inputs:[],name:"EmptyAddress",type:"error"},{inputs:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"HttpError",type:"error"},{inputs:[],name:"InvalidBatchGatewayResponse",type:"error"},{inputs:[{name:"errorData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{name:"name",type:"bytes"},{name:"resolver",type:"address"}],name:"ResolverNotContract",type:"error"},{inputs:[{name:"name",type:"bytes"}],name:"ResolverNotFound",type:"error"},{inputs:[{name:"primary",type:"string"},{name:"primaryAddress",type:"bytes"}],name:"ReverseAddressMismatch",type:"error"},{inputs:[{internalType:"bytes4",name:"selector",type:"bytes4"}],name:"UnsupportedResolverProfile",type:"error"}],o=[].concat(i,[{name:"resolveWithGateways",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}]),s=[].concat(i,[{name:"reverseWithGateways",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"uint256",name:"coinType"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolver"},{type:"address",name:"reverseResolver"}]}]),c=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],u=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],l=[{name:"isValidSignature",type:"function",stateMutability:"view",inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],outputs:[{name:"",type:"bytes4"}]}],d=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],p=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],f=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"bytes32"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"bytes32"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],h=[{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC1155InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC1155InvalidApprover",type:"error"},{inputs:[{internalType:"uint256",name:"idsLength",type:"uint256"},{internalType:"uint256",name:"valuesLength",type:"uint256"}],name:"ERC1155InvalidArrayLength",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"ERC1155InvalidOperator",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC1155InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC1155InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"ERC1155MissingApprovalForAll",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],v=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}]},{type:"event",name:"ApprovalForAll",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"operator",type:"address"},{indexed:!1,name:"approved",type:"bool"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}]},{type:"function",name:"approve",stateMutability:"payable",inputs:[{name:"spender",type:"address"},{name:"tokenId",type:"uint256"}],outputs:[]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"getApproved",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{type:"address"}]},{type:"function",name:"isApprovedForAll",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"operator",type:"address"}],outputs:[{type:"bool"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"ownerOf",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"owner",type:"address"}]},{type:"function",name:"safeTransferFrom",stateMutability:"payable",inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],outputs:[]},{type:"function",name:"safeTransferFrom",stateMutability:"nonpayable",inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"id",type:"uint256"},{name:"data",type:"bytes"}],outputs:[]},{type:"function",name:"setApprovalForAll",stateMutability:"nonpayable",inputs:[{name:"operator",type:"address"},{name:"approved",type:"bool"}],outputs:[]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"tokenByIndex",stateMutability:"view",inputs:[{name:"index",type:"uint256"}],outputs:[{type:"uint256"}]},{type:"function",name:"tokenByIndex",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"index",type:"uint256"}],outputs:[{name:"tokenId",type:"uint256"}]},{type:"function",name:"tokenURI",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transferFrom",stateMutability:"payable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"tokenId",type:"uint256"}],outputs:[]}],g=[{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"receiver",type:"address"},{indexed:!1,name:"assets",type:"uint256"},{indexed:!1,name:"shares",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"receiver",type:"address"},{indexed:!0,name:"owner",type:"address"},{indexed:!1,name:"assets",type:"uint256"},{indexed:!1,name:"shares",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],name:"approve",outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"asset",outputs:[{name:"assetTokenAddress",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"}],name:"convertToAssets",outputs:[{name:"assets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"assets",type:"uint256"}],name:"convertToShares",outputs:[{name:"shares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"assets",type:"uint256"},{name:"receiver",type:"address"}],name:"deposit",outputs:[{name:"shares",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"caller",type:"address"}],name:"maxDeposit",outputs:[{name:"maxAssets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"caller",type:"address"}],name:"maxMint",outputs:[{name:"maxShares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"address"}],name:"maxRedeem",outputs:[{name:"maxShares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"address"}],name:"maxWithdraw",outputs:[{name:"maxAssets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"},{name:"receiver",type:"address"}],name:"mint",outputs:[{name:"assets",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"assets",type:"uint256"}],name:"previewDeposit",outputs:[{name:"shares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"}],name:"previewMint",outputs:[{name:"assets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"}],name:"previewRedeem",outputs:[{name:"assets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"assets",type:"uint256"}],name:"previewWithdraw",outputs:[{name:"shares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"},{name:"receiver",type:"address"},{name:"owner",type:"address"}],name:"redeem",outputs:[{name:"assets",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"totalAssets",outputs:[{name:"totalManagedAssets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"to",type:"address"},{name:"amount",type:"uint256"}],name:"transfer",outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"assets",type:"uint256"},{name:"receiver",type:"address"},{name:"owner",type:"address"}],name:"withdraw",outputs:[{name:"shares",type:"uint256"}],stateMutability:"nonpayable",type:"function"}]},45085:function(e,t,n){"use strict";n.d(t,{ez:function(){return r},Zn:function(){return a},Bd:function(){return i}});var r={gwei:9,wei:18},a={ether:-9,wei:9},i={ether:-18,gwei:-9}},99226:function(e,t,n){"use strict";n.d(t,{G:function(){return o},M:function(){return i}});var r="2.46.3",a={getDocsUrl:function(e){var t=e.docsBaseUrl,n=e.docsPath,r=void 0===n?"":n,a=e.docsSlug;return r?"".concat(null!=t?t:"https://viem.sh").concat(r).concat(a?"#".concat(a):""):void 0},version:"viem@".concat(r)};function i(e){a=e}var o=function(e){N(n,e);var t=I(n);function n(e){var i,o,s,c,u,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};B(this,n);var d=l.cause instanceof n?l.cause.details:null!==(i=l.cause)&&void 0!==i&&i.message?l.cause.message:l.details,p=l.cause instanceof n&&l.cause.docsPath||l.docsPath,f=null===(o=(s=a).getDocsUrl)||void 0===o?void 0:o.call(s,E(E({},l),{},{docsPath:p}));return u=t.call(this,[e||"An error occurred.",""].concat(x(l.metaMessages?[].concat(x(l.metaMessages),[""]):[]),x(f?["Docs: ".concat(f)]:[]),x(d?["Details: ".concat(d)]:[]),x(a.version?["Version: ".concat(a.version)]:[])).join("\n"),l.cause?{cause:l.cause}:void 0),Object.defineProperty(S(u),"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(S(u),"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(S(u),"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(S(u),"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(S(u),"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(S(u),"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),u.details=d,u.docsPath=p,u.metaMessages=l.metaMessages,u.name=null!==(c=l.name)&&void 0!==c?c:u.name,u.shortMessage=e,u.version=r,u}return F(n,[{key:"walk",value:function(e){return s(this,e)}}]),n}(T(Error));function s(e,t){return null!=t&&t(e)?e:e&&"object"==typeof e&&"cause"in e&&void 0!==e.cause?s(e.cause,t):t?null:e}},48883:function(e,t,n){"use strict";n.d(t,{mV:function(){return a},$s:function(){return i},W_:function(){return o}});var r=n(99226),a=function(e){N(n,e);var t=I(n);function n(e){var r=e.offset,a=e.position,i=e.size;return B(this,n),t.call(this,"Slice ".concat("start"===a?"starting":"ending",' at offset "').concat(r,'" is out-of-bounds (size: ').concat(i,")."),{name:"SliceOffsetOutOfBoundsError"})}return F(n)}(r.G),i=function(e){N(n,e);var t=I(n);function n(e){var r=e.size,a=e.targetSize,i=e.type;return B(this,n),t.call(this,"".concat(i.charAt(0).toUpperCase()).concat(i.slice(1).toLowerCase()," size (").concat(r,") exceeds padding size (").concat(a,")."),{name:"SizeExceedsPaddingSizeError"})}return F(n)}(r.G),o=function(e){N(n,e);var t=I(n);function n(e){var r=e.size,a=e.targetSize,i=e.type;return B(this,n),t.call(this,"".concat(i.charAt(0).toUpperCase()).concat(i.slice(1).toLowerCase()," is expected to be ").concat(a," ").concat(i," long, but is ").concat(r," ").concat(i," long."),{name:"InvalidBytesLengthError"})}return F(n)}(r.G)},13997:function(e,t,n){"use strict";n.d(t,{J5:function(){return a},yr:function(){return i},Cd:function(){return o},P9:function(){return s},M6:function(){return c}});var r=n(99226),a=function(e){N(n,e);var t=I(n);function n(e){var r=e.max,a=e.min,i=e.signed,o=e.size,s=e.value;return B(this,n),t.call(this,'Number "'.concat(s,'" is not in safe ').concat(o?"".concat(8*o,"-bit ").concat(i?"signed":"unsigned"," "):"","integer range ").concat(r?"(".concat(a," to ").concat(r,")"):"(above ".concat(a,")")),{name:"IntegerOutOfRangeError"})}return F(n)}(r.G),i=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,'Bytes value "'.concat(e,'" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.'),{name:"InvalidBytesBooleanError"})}return F(n)}(r.G),o=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,'Hex value "'.concat(e,'" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).'),{name:"InvalidHexBooleanError"})}return F(n)}(r.G),s=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,'Hex value "'.concat(e,'" is an odd length (').concat(e.length,"). It must be an even length."),{name:"InvalidHexValueError"})}return F(n)}(r.G),c=function(e){N(n,e);var t=I(n);function n(e){var r=e.givenSize,a=e.maxSize;return B(this,n),t.call(this,"Size cannot exceed ".concat(a," bytes. Given size: ").concat(r," bytes."),{name:"SizeOverflowError"})}return F(n)}(r.G)},8231:function(e,t,n){"use strict";n.d(t,{M_:function(){return i},Hh:function(){return o},G$:function(){return s},ZI:function(){return c},vU:function(){return u},se:function(){return l},C_:function(){return d},WF:function(){return p},dR:function(){return f},pZ:function(){return h},cs:function(){return v},cj:function(){return g}});var r=n(24630),a=n(99226),i=function(e){N(n,e);var t=I(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.cause,i=r.message;B(this,n);var o=null==i||null===(e=i.replace("execution reverted: ",""))||void 0===e?void 0:e.replace("execution reverted","");return t.call(this,"Execution reverted ".concat(o?"with reason: ".concat(o):"for an unknown reason","."),{cause:a,name:"ExecutionRevertedError"})}return F(n)}(a.G);Object.defineProperty(i,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(i,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted|gas required exceeds allowance/});var o=function(e){N(n,e);var t=I(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.cause,i=e.maxFeePerGas;return B(this,n),t.call(this,"The fee cap (`maxFeePerGas`".concat(i?" = ".concat((0,r.o)(i)," gwei"):"",") cannot be higher than the maximum allowed value (2^256-1)."),{cause:a,name:"FeeCapTooHighError"})}return F(n)}(a.G);Object.defineProperty(o,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});var s=function(e){N(n,e);var t=I(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.cause,i=e.maxFeePerGas;return B(this,n),t.call(this,"The fee cap (`maxFeePerGas`".concat(i?" = ".concat((0,r.o)(i)):""," gwei) cannot be lower than the block base fee."),{cause:a,name:"FeeCapTooLowError"})}return F(n)}(a.G);Object.defineProperty(s,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});var c=function(e){N(n,e);var t=I(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.cause,a=e.nonce;return B(this,n),t.call(this,"Nonce provided for the transaction ".concat(a?"(".concat(a,") "):"","is higher than the next one expected."),{cause:r,name:"NonceTooHighError"})}return F(n)}(a.G);Object.defineProperty(c,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});var u=function(e){N(n,e);var t=I(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.cause,a=e.nonce;return B(this,n),t.call(this,["Nonce provided for the transaction ".concat(a?"(".concat(a,") "):"","is lower than the current nonce of the account."),"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join("\n"),{cause:r,name:"NonceTooLowError"})}return F(n)}(a.G);Object.defineProperty(u,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});var l=function(e){N(n,e);var t=I(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.cause,a=e.nonce;return B(this,n),t.call(this,"Nonce provided for the transaction ".concat(a?"(".concat(a,") "):"","exceeds the maximum allowed nonce."),{cause:r,name:"NonceMaxValueError"})}return F(n)}(a.G);Object.defineProperty(l,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});var d=function(e){N(n,e);var t=I(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.cause;return B(this,n),t.call(this,["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join("\n"),{cause:r,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}return F(n)}(a.G);Object.defineProperty(d,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});var p=function(e){N(n,e);var t=I(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.cause,a=e.gas;return B(this,n),t.call(this,"The amount of gas ".concat(a?"(".concat(a,") "):"","provided for the transaction exceeds the limit allowed for the block."),{cause:r,name:"IntrinsicGasTooHighError"})}return F(n)}(a.G);Object.defineProperty(p,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});var f=function(e){N(n,e);var t=I(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.cause,a=e.gas;return B(this,n),t.call(this,"The amount of gas ".concat(a?"(".concat(a,") "):"","provided for the transaction is too low."),{cause:r,name:"IntrinsicGasTooLowError"})}return F(n)}(a.G);Object.defineProperty(f,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});var h=function(e){N(n,e);var t=I(n);function n(e){var r=e.cause;return B(this,n),t.call(this,"The transaction type is not supported for this chain.",{cause:r,name:"TransactionTypeNotSupportedError"})}return F(n)}(a.G);Object.defineProperty(h,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});var v=function(e){N(n,e);var t=I(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.cause,i=e.maxPriorityFeePerGas,o=e.maxFeePerGas;return B(this,n),t.call(this,["The provided tip (`maxPriorityFeePerGas`".concat(i?" = ".concat((0,r.o)(i)," gwei"):"",") cannot be higher than the fee cap (`maxFeePerGas`").concat(o?" = ".concat((0,r.o)(o)," gwei"):"",").")].join("\n"),{cause:a,name:"TipAboveFeeCapError"})}return F(n)}(a.G);Object.defineProperty(v,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});var g=function(e){N(n,e);var t=I(n);function n(e){var r=e.cause;return B(this,n),t.call(this,"An error occurred while executing: ".concat(null==r?void 0:r.shortMessage),{cause:r,name:"UnknownNodeError"})}return F(n)}(a.G)},66422:function(e,t,n){"use strict";n.d(t,{Gg:function(){return o},c9:function(){return s},bs:function(){return c},Cc:function(){return u},W5:function(){return l}});var r=n(90734),a=n(99226),i=n(26672),o=function(e){N(n,e);var t=I(n);function n(e){var a,o=e.body,s=e.cause,c=e.details,u=e.headers,l=e.status,d=e.url;return B(this,n),a=t.call(this,"HTTP request failed.",{cause:s,details:c,metaMessages:[l&&"Status: ".concat(l),"URL: ".concat((0,i.G)(d)),o&&"Request body: ".concat((0,r.P)(o))].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(S(a),"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(S(a),"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(S(a),"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(S(a),"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),a.body=o,a.headers=u,a.status=l,a.url=d,a}return F(n)}(a.G),s=function(e){N(n,e);var t=I(n);function n(e){var a,o=e.body,s=e.cause,c=e.details,u=e.url;return B(this,n),a=t.call(this,"WebSocket request failed.",{cause:s,details:c,metaMessages:["URL: ".concat((0,i.G)(u)),o&&"Request body: ".concat((0,r.P)(o))].filter(Boolean),name:"WebSocketRequestError"}),Object.defineProperty(S(a),"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),a.url=u,a}return F(n)}(a.G),c=function(e){N(n,e);var t=I(n);function n(e){var a,o=e.body,s=e.error,c=e.url;return B(this,n),a=t.call(this,"RPC Request failed.",{cause:s,details:s.message,metaMessages:["URL: ".concat((0,i.G)(c)),"Request body: ".concat((0,r.P)(o))],name:"RpcRequestError"}),Object.defineProperty(S(a),"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(S(a),"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(S(a),"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),a.code=s.code,a.data=s.data,a.url=c,a}return F(n)}(a.G),u=function(e){N(n,e);var t=I(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.url;return B(this,n),e=t.call(this,"The socket has been closed.",{metaMessages:[a&&"URL: ".concat((0,i.G)(a))].filter(Boolean),name:"SocketClosedError"}),Object.defineProperty(S(e),"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e.url=a,e}return F(n)}(a.G),l=function(e){N(n,e);var t=I(n);function n(e){var a,o=e.body,s=e.url;return B(this,n),a=t.call(this,"The request took too long to respond.",{details:"The request timed out.",metaMessages:["URL: ".concat((0,i.G)(s)),"Request body: ".concat((0,r.P)(o))],name:"TimeoutError"}),Object.defineProperty(S(a),"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),a.url=s,a}return F(n)}(a.G)},51757:function(e,t,n){"use strict";n.d(t,{lt:function(){return i},zZ:function(){return o},s7:function(){return s},B:function(){return c},LX:function(){return u},nY:function(){return l},XS:function(){return d},yR:function(){return p},Og:function(){return f},pT:function(){return h},KB:function(){return v},gS:function(){return g},Pv:function(){return m},GD:function(){return y},ab:function(){return b},PE:function(){return w},Ts:function(){return E},u5:function(){return k},I0:function(){return x},x3:function(){return C},vl:function(){return A},Uu:function(){return _},Nt:function(){return T},EJ:function(){return O},fl:function(){return R},NO:function(){return P},r0:function(){return U},UF:function(){return M},ir:function(){return D}});var r=n(99226),a=n(66422),i=function(e){N(n,e);var t=I(n);function n(e,r){var i,o=r.code,s=r.docsPath,c=r.metaMessages,u=r.name,l=r.shortMessage;return B(this,n),i=t.call(this,l,{cause:e,docsPath:s,metaMessages:c||(null==e?void 0:e.metaMessages),name:u||"RpcError"}),Object.defineProperty(S(i),"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),i.name=u||e.name,i.code=e instanceof a.bs?e.code:null!=o?o:-1,i}return F(n)}(r.G),o=function(e){N(n,e);var t=I(n);function n(e,r){var a;return B(this,n),a=t.call(this,e,r),Object.defineProperty(S(a),"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),a.data=r.data,a}return F(n)}(i),s=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,e,{code:n.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}return F(n)}(i);Object.defineProperty(s,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});var c=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,e,{code:n.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}return F(n)}(i);Object.defineProperty(c,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});var u=function(e){N(n,e);var t=I(n);function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.method;return B(this,n),t.call(this,e,{code:n.code,name:"MethodNotFoundRpcError",shortMessage:"The method".concat(a?' "'.concat(a,'"'):""," does not exist / is not available.")})}return F(n)}(i);Object.defineProperty(u,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});var l=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,e,{code:n.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join("\n")})}return F(n)}(i);Object.defineProperty(l,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});var d=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,e,{code:n.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}return F(n)}(i);Object.defineProperty(d,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});var p=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,e,{code:n.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join("\n")})}return F(n)}(i);Object.defineProperty(p,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});var f=function(e){N(n,e);var t=I(n);function n(e){var r;return B(this,n),r=t.call(this,e,{code:n.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(S(r),"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"}),r}return F(n)}(i);Object.defineProperty(f,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});var h=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,e,{code:n.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}return F(n)}(i);Object.defineProperty(h,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});var v=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,e,{code:n.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}return F(n)}(i);Object.defineProperty(v,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});var g=function(e){N(n,e);var t=I(n);function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.method;return B(this,n),t.call(this,e,{code:n.code,name:"MethodNotSupportedRpcError",shortMessage:"Method".concat(a?' "'.concat(a,'"'):""," is not supported.")})}return F(n)}(i);Object.defineProperty(g,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});var m=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,e,{code:n.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}return F(n)}(i);Object.defineProperty(m,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});var y=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,e,{code:n.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}return F(n)}(i);Object.defineProperty(y,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});var b=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,e,{code:n.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}return F(n)}(o);Object.defineProperty(b,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});var w=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,e,{code:n.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}return F(n)}(o);Object.defineProperty(w,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});var E=function(e){N(n,e);var t=I(n);function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.method;return B(this,n),t.call(this,e,{code:n.code,name:"UnsupportedProviderMethodError",shortMessage:"The Provider does not support the requested method".concat(a?' " '.concat(a,'"'):"",".")})}return F(n)}(o);Object.defineProperty(E,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});var k=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,e,{code:n.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}return F(n)}(o);Object.defineProperty(k,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});var x=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,e,{code:n.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}return F(n)}(o);Object.defineProperty(x,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});var C=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,e,{code:n.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}return F(n)}(o);Object.defineProperty(C,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});var A=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,e,{code:n.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}return F(n)}(o);Object.defineProperty(A,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});var _=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,e,{code:n.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}return F(n)}(o);Object.defineProperty(_,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});var T=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,e,{code:n.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}return F(n)}(o);Object.defineProperty(T,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});var O=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,e,{code:n.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}return F(n)}(o);Object.defineProperty(O,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});var R=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,e,{code:n.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}return F(n)}(o);Object.defineProperty(R,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});var P=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,e,{code:n.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}return F(n)}(o);Object.defineProperty(P,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});var U=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,e,{code:n.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}return F(n)}(o);Object.defineProperty(U,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});var M=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,e,{code:n.code,name:"WalletConnectSessionSettlementError",shortMessage:"WalletConnect session settlement failed."})}return F(n)}(o);Object.defineProperty(M,"code",{enumerable:!0,configurable:!0,writable:!0,value:7e3});var D=function(e){N(n,e);var t=I(n);function n(e){return B(this,n),t.call(this,e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}return F(n)}(i)},71640:function(e,t,n){"use strict";n.d(t,{I:function(){return r}});var r=function(e){N(n,e);var t=I(n);function n(){return B(this,n),t.call(this,"No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}return F(n)}(n(99226).G)},26672:function(e,t,n){"use strict";n.d(t,{C:function(){return r},G:function(){return a}});var r=function(e){return e},a=function(e){return e}},14443:function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.strict,r=void 0===n||n;return!(!e||"string"!=typeof e)&&(r?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x"))}n.d(t,{v:function(){return r}})},57606:function(e,t,n){"use strict";n.d(t,{vk:function(){return a},gc:function(){return i},i3:function(){return o}});var r=n(48883);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.dir,r=t.size,a=void 0===r?32:r;return"string"==typeof e?i(e,{dir:n,size:a}):o(e,{dir:n,size:a})}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.dir,a=t.size,i=void 0===a?32:a;if(null===i)return e;var o=e.replace("0x","");if(o.length>2*i)throw new r.$s({size:Math.ceil(o.length/2),targetSize:i,type:"hex"});return"0x".concat(o["right"===n?"padEnd":"padStart"](2*i,"0"))}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.dir,a=t.size,i=void 0===a?32:a;if(null===i)return e;if(e.length>i)throw new r.$s({size:e.length,targetSize:i,type:"bytes"});for(var o=new Uint8Array(i),s=0;s<i;s++){var c="right"===n;o[c?s:i-s-1]=e[c?s:e.length-s-1]}return o}},46380:function(e,t,n){"use strict";n.d(t,{d:function(){return a}});var r=n(14443);function a(e){return(0,r.v)(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}},68765:function(e,t,n){"use strict";function r(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.dir,r=void 0===n?"left":n,a="string"==typeof e?e.replace("0x",""):e,i=0,o=0;o<a.length-1&&"0"===a["left"===r?o:a.length-o-1].toString();o++)i++;return a="left"===r?a.slice(i):a.slice(0,a.length-i),"string"==typeof e?(1===a.length&&"right"===r&&(a="".concat(a,"0")),"0x".concat(a.length%2==1?"0".concat(a):a)):a}n.d(t,{f:function(){return r}})},45583:function(e,t,n){"use strict";n.d(t,{Yf:function(){return s},H_:function(){return c},y_:function(){return u},XA:function(){return l},ly:function(){return d},rR:function(){return p}});var r=n(13997),a=n(46380),i=n(68765),o=n(8256);function s(e,t){var n=t.size;if((0,a.d)(e)>n)throw new r.M6({givenSize:(0,a.d)(e),maxSize:n})}function c(e,t){var n="string"==typeof t?{to:t}:t,r=n.to;return"number"===r?d(e,n):"bigint"===r?u(e,n):"string"===r?p(e,n):"boolean"===r?l(e,n):(0,o.nr)(e,n)}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.signed;t.size&&s(e,{size:t.size});var r=BigInt(e);if(!n)return r;var a=(e.length-2)/2;return r<=(1n<<8n*BigInt(a)-1n)-1n?r:r-BigInt("0x".concat("f".padStart(2*a,"f")))-1n}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if(t.size&&(s(n,{size:t.size}),n=(0,i.f)(n)),"0x00"===(0,i.f)(n))return!1;if("0x01"===(0,i.f)(n))return!0;throw new r.Cd(n)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=u(e,t),a=Number(n);if(!Number.isSafeInteger(a))throw new r.J5({max:"".concat(Number.MAX_SAFE_INTEGER),min:"".concat(Number.MIN_SAFE_INTEGER),signed:t.signed,size:t.size,value:"".concat(n,"n")});return a}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,o.nr)(e);return t.size&&(s(n,{size:t.size}),n=(0,i.f)(n,{dir:"right"})),(new TextDecoder).decode(n)}},8256:function(e,t,n){"use strict";n.d(t,{O0:function(){return u},Cu:function(){return l},nr:function(){return p},hL:function(){return f},qX:function(){return h}});var r=n(99226),a=n(14443),i=n(57606),o=n(45583),s=n(74654),c=new TextEncoder;function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"number"==typeof e||"bigint"==typeof e?f(e,t):"boolean"==typeof e?l(e,t):(0,a.v)(e)?p(e,t):h(e,t)}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Uint8Array(1);return n[0]=Number(e),"number"==typeof t.size?((0,o.Yf)(n,{size:t.size}),(0,i.vk)(n,{size:t.size})):n}function d(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;t.size&&((0,o.Yf)(n,{size:t.size}),n=(0,i.vk)(n,{dir:"right",size:t.size}));var a=n.slice(2);a.length%2&&(a="0".concat(a));for(var s=a.length/2,c=new Uint8Array(s),u=0,l=0;u<s;u++){var p=d(a.charCodeAt(l++)),f=d(a.charCodeAt(l++));if(void 0===p||void 0===f)throw new r.G('Invalid byte sequence ("'.concat(a[l-2]).concat(a[l-1],'" in "').concat(a,'").'));c[u]=16*p+f}return c}function f(e,t){return p((0,s.eC)(e,t))}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=c.encode(e);return"number"==typeof t.size?((0,o.Yf)(n,{size:t.size}),(0,i.vk)(n,{dir:"right",size:t.size})):n}},74654:function(e,t,n){"use strict";n.d(t,{NC:function(){return s},C4:function(){return c},ci:function(){return u},eC:function(){return l},$G:function(){return p}});var r=n(13997),a=n(57606),i=n(45583),o=Array.from({length:256},function(e,t){return t.toString(16).padStart(2,"0")});function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"number"==typeof e||"bigint"==typeof e?l(e,t):"string"==typeof e?p(e,t):"boolean"==typeof e?c(e,t):u(e,t)}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="0x".concat(Number(e));return"number"==typeof t.size?((0,i.Yf)(n,{size:t.size}),(0,a.vk)(n,{size:t.size})):n}function u(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="",r=0;r<e.length;r++)n+=o[e[r]];var s="0x".concat(n);return"number"==typeof t.size?((0,i.Yf)(s,{size:t.size}),(0,a.vk)(s,{dir:"right",size:t.size})):s}function l(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.signed,o=n.size,s=BigInt(e);o?t=i?(1n<<8n*BigInt(o)-1n)-1n:Math.pow(2n,8n*BigInt(o))-1n:"number"==typeof e&&(t=BigInt(Number.MAX_SAFE_INTEGER));var c="bigint"==typeof t&&i?-t-1n:0;if(t&&s>t||s<c){var u="bigint"==typeof e?"n":"";throw new r.J5({max:t?"".concat(t).concat(u):void 0,min:"".concat(c).concat(u),signed:i,size:o,value:"".concat(e).concat(u)})}var l="0x".concat((i&&s<0?(1n<<BigInt(8*o))+BigInt(s):s).toString(16));return o?(0,a.vk)(l,{size:o}):l}var d=new TextEncoder;function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u(d.encode(e),t)}},96885:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});var r=function(e){N(n,e);var t=I(n);function n(e){var r;return B(this,n),r=t.call(this),Object.defineProperty(S(r),"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r.maxSize=e,r}return F(n,[{key:"get",value:function(e){var t=v(U(n.prototype),"get",this).call(this,e);return v(U(n.prototype),"has",this).call(this,e)&&void 0!==t&&(this.delete(e),v(U(n.prototype),"set",this).call(this,e,t)),t}},{key:"set",value:function(e,t){if(v(U(n.prototype),"set",this).call(this,e,t),this.maxSize&&this.size>this.maxSize){var r=this.keys().next().value;r&&this.delete(r)}return this}}]),n}(T(Map))},93614:function(e,t,n){"use strict";n.d(t,{S:function(){return o}});var r=n(8239),a=n(14150),i=new Map;function o(e){var t,n=e.fn,o=e.id,s=e.shouldSplitBatch,c=e.wait,u=void 0===c?0:c,l=e.sort,d=(t=(0,r.Z)(A().mark(function e(){var t,r;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=f(),p(),0!==(r=t.map(function(e){return e.args})).length&&n(r).then(function(e){l&&Array.isArray(e)&&e.sort(l);for(var n=0;n<t.length;n++){var r=t[n].resolve;null==r||r([e[n],e])}}).catch(function(e){for(var n=0;n<t.length;n++){var r=t[n].reject;null==r||r(e)}});case 4:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),p=function(){return i.delete(o)},f=function(){return i.get(o)||[]},h=function(e){return i.set(o,[].concat(x(f()),[e]))};return{flush:p,schedule:function(e){return(0,r.Z)(A().mark(function t(){var n,r,i,o;return A().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,a.n)(),r=n.promise,i=n.resolve,o=n.reject,t.abrupt("return",(null!=s&&s([].concat(x(f().map(function(e){return e.args})),[e]))&&d(),f().length>0?(h({args:e,resolve:i,reject:o}),r):(h({args:e,resolve:i,reject:o}),setTimeout(d,u),r)));case 2:case"end":return t.stop()}},t)}))()}}}},14150:function(e,t,n){"use strict";function r(){var e=function(){},t=function(){};return{promise:new Promise(function(n,r){e=n,t=r}),resolve:e,reject:t}}n.d(t,{n:function(){return r}})},89929:function(e,t,n){"use strict";n.d(t,{J:function(){return i}});var r=n(8239),a=n(461);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.delay,i=void 0===n?100:n,o=t.retryCount,s=void 0===o?2:o,c=t.shouldRetry,u=void 0===c?function(){return!0}:c;return new Promise(function(t,n){var o,c=(o=(0,r.Z)(function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=o.count,d=void 0===l?0:l;return A().mark(function o(){var l,p;return A().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return l=function(){var e=(0,r.Z)(function(e){var t=e.error;return A().mark(function e(){var n;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n="function"==typeof i?i({count:d,error:t}):i,e.t0=n,!e.t0){e.next=5;break}return e.next=5,(0,a.D)(n);case 5:c({count:d+1});case 6:case"end":return e.stop()}},e)})()});return function(t){return e.apply(this,arguments)}}(),o.prev=1,o.next=4,e();case 4:p=o.sent,t(p),o.next=18;break;case 8:if(o.prev=8,o.t0=o.catch(1),o.t1=d<s,!o.t1){o.next=15;break}return o.next=14,u({count:d,error:o.t0});case 14:o.t1=o.sent;case 15:if(!o.t1){o.next=17;break}return o.abrupt("return",l({error:o.t0}));case 17:n(o.t0);case 18:case"end":return o.stop()}},o,null,[[1,8]])})()}),function(){return o.apply(this,arguments)});c()})}},2893:function(e,t,n){"use strict";n.d(t,{F:function(){return a}});var r=n(8239);function a(e,t){var n=t.errorInstance,a=void 0===n?new Error("timed out"):n,i=t.timeout,o=t.signal;return new Promise(function(t,n){(0,r.Z)(A().mark(function r(){var s,c;return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c=new AbortController,i>0&&(s=setTimeout(function(){o?c.abort():n(a)},i)),r.t0=t,r.next=6,e({signal:(null==c?void 0:c.signal)||null});case 6:r.t1=r.sent,(0,r.t0)(r.t1),r.next=13;break;case 10:r.prev=10,r.t2=r.catch(0),"AbortError"===(null===r.t2||void 0===r.t2?void 0:r.t2.name)&&n(a),n(r.t2);case 13:return r.prev=13,clearTimeout(s),r.finish(13);case 16:case"end":return r.stop()}},r,null,[[0,10,13,16]])}))()})}},29842:function(e,t,n){"use strict";n.d(t,{x:function(){return c}});var r=n(8239),a=n(66422),i=n(2893),o=n(90734),s=n(44300);function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(e){try{var t=new URL(e),n=function(){if(t.username){var e="".concat(decodeURIComponent(t.username),":").concat(decodeURIComponent(t.password));return t.username="",t.password="",{url:t.toString(),headers:{Authorization:"Basic ".concat(btoa(e))}}}}();return E({url:t.toString()},n)}catch(r){return{url:e}}}(e),c=n.url,u=n.headers;return{request:function(e){return(0,r.Z)(A().mark(function n(){var l,d,p,f,h,v,g,m,y,b,w,k,x,C,N,I,_,S,T,O;return A().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return h=e.body,v=e.fetchFn,g=void 0===v?null!==(l=t.fetchFn)&&void 0!==l?l:fetch:v,m=e.onRequest,y=void 0===m?t.onRequest:m,b=e.onResponse,w=void 0===b?t.onResponse:b,k=e.timeout,x=void 0===k?null!==(d=t.timeout)&&void 0!==d?d:1e4:k,C=E(E({},null!==(p=t.fetchOptions)&&void 0!==p?p:{}),null!==(f=e.fetchOptions)&&void 0!==f?f:{}),N=C.headers,I=C.method,_=C.signal,n.prev=1,n.next=4,(0,i.F)(function(){var e=(0,r.Z)(function(e){var t=e.signal;return A().mark(function e(){var n,r,a,i,l,d;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=E(E({},C),{},{body:Array.isArray(h)?(0,o.P)(h.map(function(e){var t;return E({jsonrpc:"2.0",id:null!==(t=e.id)&&void 0!==t?t:s.d.take()},e)})):(0,o.P)(E({jsonrpc:"2.0",id:null!==(n=h.id)&&void 0!==n?n:s.d.take()},h)),headers:E(E({},u),{},{"Content-Type":"application/json"},N),method:I||"POST",signal:_||(x>0?t:null)}),l=new Request(c,i),e.next=4,null==y?void 0:y(l,i);case 4:if(e.t1=r=e.sent,e.t0=null!==e.t1,!e.t0){e.next=8;break}e.t0=void 0!==r;case 8:if(!e.t0){e.next=12;break}e.t2=r,e.next=13;break;case 12:e.t2=E(E({},i),{},{url:c});case 13:return d=e.t2,e.next=16,g(null!==(a=d.url)&&void 0!==a?a:c,d);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}},e)})()});return function(t){return e.apply(this,arguments)}}(),{errorInstance:new a.W5({body:h,url:c}),timeout:x,signal:!0});case 4:if(T=n.sent,n.t0=w,!n.t0){n.next=9;break}return n.next=9,w(T);case 9:if(null===(S=T.headers.get("Content-Type"))||void 0===S||!S.startsWith("application/json")){n.next=15;break}return n.next=12,T.json();case 12:O=n.sent,n.next=27;break;case 15:return n.next=17,T.text();case 17:O=n.sent,n.prev=18,O=JSON.parse(O||"{}"),n.next=27;break;case 22:if(n.prev=22,n.t1=n.catch(18),!T.ok){n.next=26;break}throw n.t1;case 26:O={error:O};case 27:if(T.ok){n.next=29;break}throw new a.Gg({body:h,details:(0,o.P)(O.error)||T.statusText,headers:T.headers,status:T.status,url:c});case 29:return n.abrupt("return",O);case 32:throw n.prev=32,n.t2=n.catch(1),n.t2 instanceof a.Gg||n.t2 instanceof a.W5?n.t2:new a.Gg({body:h,cause:n.t2,url:c});case 35:case"end":return n.stop()}},n,null,[[1,32],[18,22]])}))()}}}},44300:function(e,t,n){"use strict";n.d(t,{d:function(){return r}});var r={current:0,take:function(){return this.current++},reset:function(){this.current=0}}},90734:function(e,t,n){"use strict";n.d(t,{P:function(){return r}});var r=function(e,t,n){return JSON.stringify(e,function(e,n){var r="bigint"==typeof n?n.toString():n;return"function"==typeof t?t(e,r):r},n)}},35116:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});var r,a=256;function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:11;if(!r||a+e>512){r="",a=0;for(var t=0;t<256;t++)r+=(256+256*Math.random()|0).toString(16).substring(1)}return r.substring(a,a+++e)}},24630:function(e,t,n){"use strict";n.d(t,{o:function(){return i}});var r=n(45085),a=n(34063);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"wei";return(0,a.b)(e,r.Zn[t])}},34063:function(e,t,n){"use strict";function r(e,t){var n=e.toString(),r=n.startsWith("-");r&&(n=n.slice(1));var a=[(n=n.padStart(t,"0")).slice(0,n.length-t),n.slice(n.length-t)],i=a[0],o=a[1];return o=o.replace(/(0+)$/,""),"".concat(r?"-":"").concat(i||"0").concat(o?".".concat(o):"")}n.d(t,{b:function(){return r}})},461:function(e,t,n){"use strict";n.d(t,{D:function(){return a}});var r=n(8239);function a(e){return i.apply(this,arguments)}function i(){return(i=(0,r.Z)(A().mark(function e(t){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){return setTimeout(e,t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}},23250:function(e,t,n){"use strict";n.d(t,{sj:function(){return g},iH:function(){return b},CO:function(){return y},Ld:function(){return m},WX:function(){return w}}),Symbol();var r=Symbol(),a=Object.getPrototypeOf,i=new WeakMap,o=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];i.set(e,t)},s=function(e){return"object"==typeof e&&null!==e},c=new WeakMap,u=new WeakSet,l=new WeakMap,d=[1],p=new WeakMap,f=Object.is,h=function e(t,n){var r=l.get(t);if((null==r?void 0:r[0])===n)return r[1];var a=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return o(a,!0),l.set(t,[n,a]),Reflect.ownKeys(t).forEach(function(n){if(!Object.getOwnPropertyDescriptor(a,n)){var r=Reflect.get(t,n),i={value:r,enumerable:Reflect.getOwnPropertyDescriptor(t,n).enumerable,configurable:!0};if(u.has(r))o(r,!1);else if(c.has(r)){var s=C(c.get(r),2),l=s[0],d=s[1];i.value=e(l,d())}Object.defineProperty(a,n,i)}}),Object.preventExtensions(a)},v=function(e,t,n,o){return{deleteProperty:function(e,t){var r=Reflect.get(e,t);n(t);var a=Reflect.deleteProperty(e,t);return a&&o(["delete",[t],r]),a},set:function(l,d,h,v){var m=!e()&&Reflect.has(l,d),y=Reflect.get(l,d,v);if(m&&(f(y,h)||p.has(h)&&f(y,p.get(h))))return!0;n(d),s(h)&&(h=function(e){return function(e){return e&&(i.has(e)?i.get(e):a(e)===Object.prototype||a(e)===Array.prototype)}(e)&&e[r]||null}(h)||h);var b=!c.has(h)&&function(e){return s(e)&&!u.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer)&&!(e instanceof Promise)}(h)?g(h):h;return t(d,b),Reflect.set(l,d,b,v),o(["set",[d],h,y]),!0}}};function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!s(e))throw new Error("object required");var t=p.get(e);if(t)return t;var n=d[0],r=new Set,a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:++d[0];n!==t&&(i=n=t,r.forEach(function(n){return n(e,t)}))},i=n,o=function(e){return function(t,n){var r=x(t);r[1]=[e].concat(x(r[1])),a(r,n)}},l=new Map,f=!0,h=v(function(){return f},function(e,t){var n=!u.has(t)&&c.get(t);if(n){if(l.has(e))throw new Error("prop listener already exists");if(r.size){var a=n[2](o(e));l.set(e,[n,a])}else l.set(e,[n])}},function(e){var t,n=l.get(e);n&&(l.delete(e),null==(t=n[1])||t.call(n))},a),g=function(e,t){return new Proxy(e,t)}(e,h);return p.set(e,g),c.set(g,[e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d[0];return i!==e&&(i=e,l.forEach(function(t){var r=C(t,1)[0][1](e);r>n&&(n=r)})),n},function(e){return r.add(e),1===r.size&&l.forEach(function(e,t){var n=C(e,2),r=n[0];if(n[1])throw new Error("remove already exists");var a=r[2](o(t));l.set(t,[r,a])}),function(){r.delete(e),0===r.size&&l.forEach(function(e,t){var n=C(e,2),r=n[0],a=n[1];a&&(a(),l.set(t,[r]))})}}]),Reflect.ownKeys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);"value"in n&&n.writable&&(g[t]=e[t])}),f=!1,g}function m(e,t,n){var r,a=c.get(e);!a&&console.warn("Please use proxy object");var i=[],o=!1,s=(0,a[2])(function(e){i.push(e),n?t(i.splice(0)):r||(r=Promise.resolve().then(function(){r=void 0,o&&t(i.splice(0))}))});return o=!0,function(){o=!1,s()}}function y(e){var t=c.get(e);!t&&console.warn("Please use proxy object");var n=C(t,2),r=n[0],a=n[1];return h(r,a())}function b(e){return u.add(e),e}function w(){return{proxyStateMap:c,refSet:u,snapCache:l,versionHolder:d,proxyCache:p}}},31254:function(e,t,n){"use strict";n.d(t,{Yr:function(){return u},VW:function(){return a}});var r=n(23250);function a(e,t,n,a){var i=e[t];return(0,r.Ld)(e,function(){var r=e[t];Object.is(i,r)||n(i=r)},a)}Symbol();var i=(0,r.WX)(),o=i.proxyStateMap,s=i.snapCache,c=function(e){return o.has(e)};function u(e){var t,n,a,i=[],o=0,u=new Map,l=new WeakMap,d=function(e){return l.get(e)||u};if(e){if("function"!=typeof e[Symbol.iterator])throw new TypeError("proxyMap:\n\tinitial state must be iterable\n\t\ttip: structure should be [[key, value]]");var p,f=M(e);try{for(f.s();!(p=f.n()).done;){var h=C(p.value,2),v=h[0],g=h[1];u.set(v,o),i[o++]=g}}catch(b){f.e(b)}finally{f.f()}}var m=(n={data:i,index:o,epoch:0,get size(){return c(this)||function(){var e=s.get(m),t=null==e?void 0:e[1];if(t&&!l.has(t)){var n=new Map(u);l.set(t,n)}}(),d(this).size},get:function(e){var t=d(this).get(e);if(void 0!==t)return this.data[t]},has:function(e){return d(this).has(e)},set:function(e,t){if(!c(this))throw new Error("Cannot perform mutations on a snapshot");var n=u.get(e);return void 0===n?(u.set(e,this.index),this.data[this.index++]=t):this.data[n]=t,this.epoch++,this},delete:function(e){if(!c(this))throw new Error("Cannot perform mutations on a snapshot");var t=u.get(e);return void 0!==t&&(delete this.data[t],u.delete(e),this.epoch++,!0)},clear:function(){if(!c(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,u.clear()},forEach:function(e){var t=this;d(this).forEach(function(n,r){e(t.data[n],r,t)})},entries:A().mark(function e(){var t,n,r,a,i,o;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=d(this),n=M(t),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=C(r.value,2),i=a[0],o=a[1],e.next=8,[i,this.data[o]];case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}},e,this,[[2,12,15,18]])}),keys:A().mark(function e(){var t,n,r,a;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=d(this),n=M(t.keys()),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a;case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}},e,this,[[2,12,15,18]])}),values:A().mark(function e(){var t,n,r,a;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=d(this),n=M(t.values()),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,this.data[a];case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}},e,this,[[2,12,15,18]])})},k(n,Symbol.iterator,function(){return this.entries()}),(a={})[t=Symbol.toStringTag]=a[t]||{},a[t].get=function(){return"Map"},k(n,"toJSON",function(){return new Map(this.entries())}),function(e,t){for(var n in t)(i=t[n]).configurable=i.enumerable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n,i);if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(t),a=0;a<r.length;a++){var i,o=r[a];(i=t[o]).configurable=i.enumerable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,o,i)}}(n,a),n),y=(0,r.sj)(m);return Object.defineProperties(y,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(y),y}(0,r.WX)()}}])}();