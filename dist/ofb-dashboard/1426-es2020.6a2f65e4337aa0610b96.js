(self.webpackChunkofb_dashboard=self.webpackChunkofb_dashboard||[]).push([[1426],{48873:function(e){e.exports=function(){"use strict";var e=6e4,t=36e5,n="millisecond",r="second",s="minute",i="hour",o="day",a="week",c="month",l="quarter",d="year",u="date",p="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},m=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},y={s:m,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),s=n%60;return(t<=0?"+":"-")+m(r,2,"0")+":"+m(s,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),s=t.clone().add(r,c),i=n-s<0,o=t.clone().add(r+(i?-1:1),c);return+(-(r+(n-s)/(i?s-o:o-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:a,d:o,D:u,h:i,m:s,s:r,ms:n,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",w={};w[b]=g;var v="$isDayjsObject",E=function(e){return e instanceof I||!(!e||!e[v])},C=function e(t,n,r){var s;if(!t)return b;if("string"==typeof t){var i=t.toLowerCase();w[i]&&(s=i),n&&(w[i]=n,s=i);var o=t.split("-");if(!s&&o.length>1)return e(o[0])}else{var a=t.name;w[a]=t,s=a}return!r&&s&&(b=s),s||!r&&b},A=function(e,t){if(E(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new I(n)},N=y;N.l=C,N.i=E,N.w=function(e,t){return A(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var I=function(){function g(e){this.$L=C(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[v]=!0}var m=g.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(N.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(h);if(r){var s=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(t)}(e),this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return N},m.isValid=function(){return this.$d.toString()!==p},m.isSame=function(e,t){var n=A(e);return this.startOf(t)<=n&&n<=this.endOf(t)},m.isAfter=function(e,t){return A(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<A(e)},m.$g=function(e,t,n){return N.u(e)?this[t]:this.set(n,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,t){var n=this,l=!!N.u(t)||t,p=N.p(e),h=function(e,t){var r=N.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return l?r:r.endOf(o)},f=function(e,t){return N.w(n.toDate()[e].apply(n.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},g=this.$W,m=this.$M,y=this.$D,b="set"+(this.$u?"UTC":"");switch(p){case d:return l?h(1,0):h(31,11);case c:return l?h(1,m):h(0,m+1);case a:var w=this.$locale().weekStart||0,v=(g<w?g+7:g)-w;return h(l?y-v:y+(6-v),m);case o:case u:return f(b+"Hours",0);case i:return f(b+"Minutes",1);case s:return f(b+"Seconds",2);case r:return f(b+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(e,t){var a,l=N.p(e),p="set"+(this.$u?"UTC":""),h=(a={},a[o]=p+"Date",a[u]=p+"Date",a[c]=p+"Month",a[d]=p+"FullYear",a[i]=p+"Hours",a[s]=p+"Minutes",a[r]=p+"Seconds",a[n]=p+"Milliseconds",a)[l],f=l===o?this.$D+(t-this.$W):t;if(l===c||l===d){var g=this.clone().set(u,1);g.$d[h](f),g.init(),this.$d=g.set(u,Math.min(this.$D,g.daysInMonth())).$d}else h&&this.$d[h](f);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[N.p(e)]()},m.add=function(n,l){var u,p=this;n=Number(n);var h=N.p(l),f=function(e){var t=A(p);return N.w(t.date(t.date()+Math.round(e*n)),p)};if(h===c)return this.set(c,this.$M+n);if(h===d)return this.set(d,this.$y+n);if(h===o)return f(1);if(h===a)return f(7);var g=(u={},u[s]=e,u[i]=t,u[r]=1e3,u)[h]||1,m=this.$d.getTime()+n*g;return N.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var r=e||"YYYY-MM-DDTHH:mm:ssZ",s=N.z(this),i=this.$H,o=this.$m,a=this.$M,c=n.weekdays,l=n.months,d=function(e,n,s,i){return e&&(e[n]||e(t,r))||s[n].slice(0,i)},u=function(e){return N.s(i%12||12,e,"0")},h=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(f,function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return N.s(t.$y,4,"0");case"M":return a+1;case"MM":return N.s(a+1,2,"0");case"MMM":return d(n.monthsShort,a,l,3);case"MMMM":return d(l,a);case"D":return t.$D;case"DD":return N.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(n.weekdaysMin,t.$W,c,2);case"ddd":return d(n.weekdaysShort,t.$W,c,3);case"dddd":return c[t.$W];case"H":return String(i);case"HH":return N.s(i,2,"0");case"h":return u(1);case"hh":return u(2);case"a":return h(i,o,!0);case"A":return h(i,o,!1);case"m":return String(o);case"mm":return N.s(o,2,"0");case"s":return String(t.$s);case"ss":return N.s(t.$s,2,"0");case"SSS":return N.s(t.$ms,3,"0");case"Z":return s}return null}(e)||s.replace(":","")})},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(n,u,p){var h,f=this,g=N.p(u),m=A(n),y=(m.utcOffset()-this.utcOffset())*e,b=this-m,w=function(){return N.m(f,m)};switch(g){case d:h=w()/12;break;case c:h=w();break;case l:h=w()/3;break;case a:h=(b-y)/6048e5;break;case o:h=(b-y)/864e5;break;case i:h=b/t;break;case s:h=b/e;break;case r:h=b/1e3;break;default:h=b}return p?h:N.a(h)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return w[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=C(e,t,!0);return r&&(n.$L=r),n},m.clone=function(){return N.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},g}(),_=I.prototype;return A.prototype=_,[["$ms",n],["$s",r],["$m",s],["$H",i],["$W",o],["$M",c],["$y",d],["$D",u]].forEach(function(e){_[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),A.extend=function(e,t){return e.$i||(e(t,I,A),e.$i=!0),A},A.locale=C,A.isDayjs=E,A.unix=function(e){return A(1e3*e)},A.en=w[b],A.Ls=w,A.p={},A}()},86102:function(e){e.exports=function(){"use strict";return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}}}()},43603:function(e){e.exports=function(){"use strict";return function(e,t,n){e=e||{};var r=t.prototype,s={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function i(e,t,n,s){return r.fromToBase(e,t,n,s)}n.en.relativeTime=s,r.fromToBase=function(t,r,i,o,a){for(var c,l,d,u=i.$locale().relativeTime||s,p=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],h=p.length,f=0;f<h;f+=1){var g=p[f];g.d&&(c=o?n(t).diff(i,g.d,!0):i.diff(t,g.d,!0));var m=(e.rounding||Math.round)(Math.abs(c));if(d=c>0,m<=g.r||!g.r){m<=1&&f>0&&(g=p[f-1]);var y=u[g.l];a&&(m=a(""+m)),l="string"==typeof y?y.replace("%d",m):y(m,r,g.l,d);break}}if(r)return l;var b=d?u.future:u.past;return"function"==typeof b?b(l):b.replace("%s",l)},r.to=function(e,t){return i(e,t,this,!0)},r.from=function(e,t){return i(e,t,this)};var o=function(e){return e.$u?n.utc():n()};r.toNow=function(e){return this.to(o(this),e)},r.fromNow=function(e){return this.from(o(this),e)}}}()},48968:function(e){e.exports=function(){"use strict";return function(e,t,n){n.updateLocale=function(e,t){var r=n.Ls[e];if(r)return(t?Object.keys(t):[]).forEach(function(e){r[e]=t[e]}),r}}}()},3239:function(e,t,n){"use strict";n.d(t,{fl:function(){return _},iv:function(){return d},Ts:function(){return A},Qu:function(){return N},$m:function(){return l}});var r=n(8239);const s=globalThis,i=s.ShadowRoot&&(void 0===s.ShadyCSS||s.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,o=Symbol(),a=new WeakMap;class c{constructor(e,t,n){if(this._$cssResult$=!0,n!==o)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(i&&void 0===e){const n=void 0!==t&&1===t.length;n&&(e=a.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&a.set(t,e))}return e}toString(){return this.cssText}}const l=e=>new c("string"==typeof e?e:e+"",void 0,o),d=(e,...t)=>{const n=1===e.length?e[0]:t.reduce((t,n,r)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+e[r+1],e[0]);return new c(n,e,o)},u=i?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return l(t)})(e):e,{is:p,defineProperty:h,getOwnPropertyDescriptor:f,getOwnPropertyNames:g,getOwnPropertySymbols:m,getPrototypeOf:y}=Object,b=globalThis,w=b.trustedTypes,v=w?w.emptyScript:"",E=b.reactiveElementPolyfillSupport,C=(e,t)=>e,A={toAttribute(e,t){switch(t){case Boolean:e=e?v:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch{n=null}}return n}},N=(e,t)=>!p(e,t),I={attribute:!0,type:String,converter:A,reflect:!1,useDefault:!1,hasChanged:N};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),b.litPropertyMetadata??(b.litPropertyMetadata=new WeakMap);class _ extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=I){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const n=Symbol(),r=this.getPropertyDescriptor(e,n,t);void 0!==r&&h(this.prototype,e,r)}}static getPropertyDescriptor(e,t,n){const{get:r,set:s}=f(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get:r,set(t){const i=r?.call(this);s?.call(this,t),this.requestUpdate(e,i,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??I}static _$Ei(){if(this.hasOwnProperty(C("elementProperties")))return;const e=y(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(C("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(C("properties"))){const e=this.properties,t=[...g(e),...m(e)];for(const n of t)this.createProperty(n,e[n])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,n]of t)this.elementProperties.set(e,n)}this._$Eh=new Map;for(const[t,n]of this.elementProperties){const e=this._$Eu(t,n);void 0!==e&&this._$Eh.set(e,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const e of n)t.unshift(u(e))}else void 0!==e&&t.push(u(e));return t}static _$Eu(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??(this._$EO=new Set)).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const n of t.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((e,t)=>{if(i)e.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet);else for(const n of t){const t=document.createElement("style"),r=s.litNonce;void 0!==r&&t.setAttribute("nonce",r),t.textContent=n.cssText,e.appendChild(t)}})(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$ET(e,t){const n=this.constructor.elementProperties.get(e),r=this.constructor._$Eu(e,n);if(void 0!==r&&!0===n.reflect){const s=(void 0!==n.converter?.toAttribute?n.converter:A).toAttribute(t,n.type);this._$Em=e,null==s?this.removeAttribute(r):this.setAttribute(r,s),this._$Em=null}}_$AK(e,t){const n=this.constructor,r=n._$Eh.get(e);if(void 0!==r&&this._$Em!==r){const e=n.getPropertyOptions(r),s="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:A;this._$Em=r;const i=s.fromAttribute(t,e.type);this[r]=i??this._$Ej?.get(r)??i,this._$Em=null}}requestUpdate(e,t,n,r=!1,s){if(void 0!==e){const i=this.constructor;if(!1===r&&(s=this[e]),n??(n=i.getPropertyOptions(e)),!((n.hasChanged??N)(s,t)||n.useDefault&&n.reflect&&s===this._$Ej?.get(e)&&!this.hasAttribute(i._$Eu(e,n))))return;this.C(e,t,n)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(e,t,{useDefault:n,reflect:r,wrapped:s},i){n&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,i??t??this[e]),!0!==s||void 0!==i)||(this._$AL.has(e)||(this.hasUpdated||n||(t=void 0),this._$AL.set(e,t)),!0===r&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}_$EP(){var e=this;return(0,r.Z)(function*(){e.isUpdatePending=!0;try{yield e._$ES}catch(n){Promise.reject(n)}const t=e.scheduleUpdate();return null!=t&&(yield t),!e.isUpdatePending})()}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,n]of e){const{wrapped:e}=n,r=this[t];!0!==e||this._$AL.has(t)||void 0===r||this.C(t,void 0,n,r)}}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach(e=>e.hostUpdate?.()),this.update(t)):this._$EM()}catch(n){throw e=!1,this._$EM(),n}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach(e=>e.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(e=>this._$ET(e,this[e]))),this._$EM()}updated(e){}firstUpdated(e){}}_.elementStyles=[],_.shadowRootOptions={mode:"open"},_[C("elementProperties")]=new Map,_[C("finalized")]=new Map,E?.({ReactiveElement:_}),(b.reactiveElementVersions??(b.reactiveElementVersions=[])).push("2.1.2")},72290:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});const r={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",BASE_ACCOUNT:"baseAccount",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122",TON:"ton"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos",sui:"Sui",stacks:"Stacks",ton:"TON"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",TON:"ton"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],SOLANA_SPL_TOKEN_ADDRESSES:{SOL:"So11111111111111111111111111111111111111112"},NATIVE_IMAGE_IDS_BY_NAMESPACE:{eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"3e8119e5-2a6f-4818-c50c-1937011d5900",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00"},TOKEN_SYMBOLS_BY_ADDRESS:{"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48":"USDC","0x833589fcd6edb6e08f4c7c32d4f71b54bda02913":"USDC","0x0b2c639c533813f4aa9d7837caf62653d097ff85":"USDC","0xaf88d065e77c8cc2239327c5edb3a432268e5831":"USDC","0x3c499c542cef5e3811e1192ce70d8cc03d5c3359":"USDC","0x2791bca1f2de4661ed88a30c99a7a9449aa84174":"USDC",EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v:"USDC","0xdac17f958d2ee523a2206206994597c13d831ec7":"USDT","0x94b008aa00579c1307b0ef2c499ad98a8ce58e58":"USDT","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9":"USDT","0xc2132d05d31c914a87c6611c10748aeb04b58e8f":"USDT",Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB:"USDT"},HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:("undefined"!=typeof process&&void 0!==process.env?process.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}},HEADLESS_NOT_ENABLED:{DEFAULT:{displayMessage:"",debugMessage:"Headless support is not enabled. Please enable it with the features.headless option in the AppKit configuration and make sure your current plan supports it."}}},IS_DEVELOPMENT:"undefined"!=typeof process&&!1,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"],METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",OKX_CONNECTOR_NAME:"OKX Wallet",BINANCE_CONNECTOR_NAME:"Binance Wallet",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"AUTH"}},64817:function(e,t,n){"use strict";n.d(t,{g:function(){return a}});const r=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],s=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],i=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}];var o=n(72290);const a={getERC20Abi:e=>o.b.USDT_CONTRACT_ADDRESSES.includes(e)?i:r,getSwapAbi:()=>s}},5546:function(e,t,n){"use strict";n.d(t,{jD:function(){return r},ab:function(){return i}});const r={RPC_ERROR_CODE:{USER_REJECTED_REQUEST:4001,USER_REJECTED_METHODS:5002,USER_REJECTED:5e3,SEND_TRANSACTION_ERROR:5001},PROVIDER_RPC_ERROR_NAME:{PROVIDER_RPC:"ProviderRpcError",USER_REJECTED_REQUEST:"UserRejectedRequestError",SEND_TRANSACTION_ERROR:"SendTransactionError"},isRpcProviderError(e){try{if("object"==typeof e&&null!==e){const t="number"==typeof e.code;return"string"==typeof e.message&&t}return!1}catch{return!1}},isUserRejectedMessage:e=>e.toLowerCase().includes("user rejected")||e.toLowerCase().includes("user cancelled")||e.toLowerCase().includes("user canceled"),isUserRejectedRequestError(e){if(r.isRpcProviderError(e)){const t=e.code===r.RPC_ERROR_CODE.USER_REJECTED_METHODS;return e.code===r.RPC_ERROR_CODE.USER_REJECTED_REQUEST||t||r.isUserRejectedMessage(e.message)}return e instanceof Error&&r.isUserRejectedMessage(e.message)}};class s extends Error{constructor(e,t){super(t.message,{cause:e}),this.name=r.PROVIDER_RPC_ERROR_NAME.PROVIDER_RPC,this.code=t.code}}class i extends s{constructor(e){super(e,{code:r.RPC_ERROR_CODE.USER_REJECTED_REQUEST,message:"User rejected the request"}),this.name=r.PROVIDER_RPC_ERROR_NAME.USER_REJECTED_REQUEST}}},67933:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});const r={isLowerCaseMatch:(e,t)=>e?.toLowerCase()===t?.toLowerCase()}},19579:function(e,t,n){"use strict";n.d(t,{p:function(){return s},F:function(){return i}});var r=n(72290);const s={caipNetworkIdToNumber:e=>e?Number(e.split(":")[1]):void 0,parseEvmChainId(e){return"string"==typeof e?this.caipNetworkIdToNumber(e):e},getNetworksByNamespace:(e,t)=>e?.filter(e=>e.chainNamespace===t)||[],getFirstNetworkByNamespace(e,t){return this.getNetworksByNamespace(e,t)[0]},getNetworkNameByCaipNetworkId(e,t){if(!t)return;const n=e.find(e=>e.caipNetworkId===t);if(n)return n.name;const[s]=t.split(":");return r.b.CHAIN_NAME_MAP?.[s]||void 0}},i=["eip155","solana","polkadot","bip122","cosmos","sui","stacks"]},86482:function(e,t,n){"use strict";n.d(t,{C:function(){return g}});var r=1e6,s=1e6,i="[big.js] ",o=i+"Invalid ",a=o+"decimal places",c=i+"Division by zero",l={},d=void 0,u=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function p(e,t,n,r){var s=e.c;if(n===d&&(n=e.constructor.RM),0!==n&&1!==n&&2!==n&&3!==n)throw Error("[big.js] Invalid rounding mode");if(t<1)r=3===n&&(r||!!s[0])||0===t&&(1===n&&s[0]>=5||2===n&&(s[0]>5||5===s[0]&&(r||s[1]!==d))),s.length=1,r?(e.e=e.e-t+1,s[0]=1):s[0]=e.e=0;else if(t<s.length){if(r=1===n&&s[t]>=5||2===n&&(s[t]>5||5===s[t]&&(r||s[t+1]!==d||1&s[t-1]))||3===n&&(r||!!s[0]),s.length=t,r)for(;++s[--t]>9;)if(s[t]=0,0===t){++e.e,s.unshift(1);break}for(t=s.length;!s[--t];)s.pop()}return e}function h(e,t,n){var r=e.e,s=e.c.join(""),i=s.length;if(t)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return e.s<0&&n?"-"+s:s}l.abs=function(){var e=new this.constructor(this);return e.s=1,e},l.cmp=function(e){var t,n=this,r=n.c,s=(e=new n.constructor(e)).c,i=n.s,o=e.s,a=n.e,c=e.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(t=i<0,a!=c)return a>c^t?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^t?1:-1;return a==c?0:a>c^t?1:-1},l.div=function(e){var t=this,n=t.constructor,s=t.c,i=(e=new n(e)).c,o=t.s==e.s?1:-1,l=n.DP;if(l!==~~l||l<0||l>r)throw Error(a);if(!i[0])throw Error(c);if(!s[0])return e.s=o,e.c=[e.e=0],e;var u,h,f,g,m,y=i.slice(),b=u=i.length,w=s.length,v=s.slice(0,u),E=v.length,C=e,A=C.c=[],N=0,I=l+(C.e=t.e-e.e)+1;for(C.s=o,o=I<0?0:I,y.unshift(0);E++<u;)v.push(0);do{for(f=0;f<10;f++){if(u!=(E=v.length))g=u>E?1:-1;else for(m=-1,g=0;++m<u;)if(i[m]!=v[m]){g=i[m]>v[m]?1:-1;break}if(!(g<0))break;for(h=E==u?i:y;E;){if(v[--E]<h[E]){for(m=E;m&&!v[--m];)v[m]=9;--v[m],v[E]+=10}v[E]-=h[E]}for(;!v[0];)v.shift()}A[N++]=g?f:++f,v[0]&&g?v[E]=s[b]||0:v=[s[b]]}while((b++<w||v[0]!==d)&&o--);return!A[0]&&1!=N&&(A.shift(),C.e--,I--),N>I&&p(C,I,n.RM,v[0]!==d),C},l.eq=function(e){return 0===this.cmp(e)},l.gt=function(e){return this.cmp(e)>0},l.gte=function(e){return this.cmp(e)>-1},l.lt=function(e){return this.cmp(e)<0},l.lte=function(e){return this.cmp(e)<1},l.minus=l.sub=function(e){var t,n,r,s,i=this,o=i.constructor,a=i.s,c=(e=new o(e)).s;if(a!=c)return e.s=-c,i.plus(e);var l=i.c.slice(),d=i.e,u=e.c,p=e.e;if(!l[0]||!u[0])return u[0]?e.s=-c:l[0]?e=new o(i):e.s=1,e;if(a=d-p){for((s=a<0)?(a=-a,r=l):(p=d,r=u),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<u.length)?l:u).length,a=c=0;c<n;c++)if(l[c]!=u[c]){s=l[c]<u[c];break}if(s&&(r=l,l=u,u=r,e.s=-e.s),(c=(n=u.length)-(t=l.length))>0)for(;c--;)l[t++]=0;for(c=t;n>a;){if(l[--n]<u[n]){for(t=n;t&&!l[--t];)l[t]=9;--l[t],l[n]+=10}l[n]-=u[n]}for(;0===l[--c];)l.pop();for(;0===l[0];)l.shift(),--p;return l[0]||(e.s=1,l=[p=0]),e.c=l,e.e=p,e},l.mod=function(e){var t,n=this,r=n.constructor,s=n.s,i=(e=new r(e)).s;if(!e.c[0])throw Error(c);return n.s=e.s=1,t=1==e.cmp(n),n.s=s,e.s=i,t?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(e),r.DP=s,r.RM=i,this.minus(n.times(e)))},l.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},l.plus=l.add=function(e){var t,n,r,s=this,i=s.constructor;if(e=new i(e),s.s!=e.s)return e.s=-e.s,s.minus(e);var o=s.e,a=s.c,c=e.e,l=e.c;if(!a[0]||!l[0])return l[0]||(a[0]?e=new i(s):e.s=s.s),e;if(a=a.slice(),t=o-c){for(t>0?(c=o,r=l):(t=-t,r=a),r.reverse();t--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),t=l.length,n=0;t;a[t]%=10)n=(a[--t]=a[t]+l[t]+n)/10|0;for(n&&(a.unshift(n),++c),t=a.length;0===a[--t];)a.pop();return e.c=a,e.e=c,e},l.pow=function(e){var t=this,n=new t.constructor("1"),r=n,i=e<0;if(e!==~~e||e<-s||e>s)throw Error(o+"exponent");for(i&&(e=-e);1&e&&(r=r.times(t)),e>>=1;)t=t.times(t);return i?n.div(r):r},l.prec=function(e,t){if(e!==~~e||e<1||e>r)throw Error(o+"precision");return p(new this.constructor(this),e,t)},l.round=function(e,t){if(e===d)e=0;else if(e!==~~e||e<-r||e>r)throw Error(a);return p(new this.constructor(this),e+this.e+1,t)},l.sqrt=function(){var e,t,n,r=this,s=r.constructor,o=r.s,a=r.e,c=new s("0.5");if(!r.c[0])return new s(r);if(o<0)throw Error(i+"No square root");0===(o=Math.sqrt(+h(r,!0,!0)))||o===1/0?((t=r.c.join("")).length+a&1||(t+="0"),a=((a+1)/2|0)-(a<0||1&a),e=new s(((o=Math.sqrt(t))==1/0?"5e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+a)):e=new s(o+""),a=e.e+(s.DP+=4);do{e=c.times((n=e).plus(r.div(n)))}while(n.c.slice(0,a).join("")!==e.c.slice(0,a).join(""));return p(e,(s.DP-=4)+e.e+1,s.RM)},l.times=l.mul=function(e){var t,n=this,r=n.c,s=(e=new(0,n.constructor)(e)).c,i=r.length,o=s.length,a=n.e,c=e.e;if(e.s=n.s==e.s?1:-1,!r[0]||!s[0])return e.c=[e.e=0],e;for(e.e=a+c,i<o&&(t=r,r=s,s=t,c=i,i=o,o=c),t=new Array(c=i+o);c--;)t[c]=0;for(a=o;a--;){for(o=0,c=i+a;c>a;)o=t[c]+s[a]*r[c-a-1]+o,t[c--]=o%10,o=o/10|0;t[c]=o}for(o?++e.e:t.shift(),a=t.length;!t[--a];)t.pop();return e.c=t,e},l.toExponential=function(e,t){var n=this,s=n.c[0];if(e!==d){if(e!==~~e||e<0||e>r)throw Error(a);for(n=p(new n.constructor(n),++e,t);n.c.length<e;)n.c.push(0)}return h(n,!0,!!s)},l.toFixed=function(e,t){var n=this,s=n.c[0];if(e!==d){if(e!==~~e||e<0||e>r)throw Error(a);for(e=e+(n=p(new n.constructor(n),e+n.e+1,t)).e+1;n.c.length<e;)n.c.push(0)}return h(n,!1,!!s)},l[Symbol.for("nodejs.util.inspect.custom")]=l.toJSON=l.toString=function(){var e=this,t=e.constructor;return h(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])},l.toNumber=function(){var e=+h(this,!0,!0);if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(i+"Imprecise conversion");return e},l.toPrecision=function(e,t){var n=this,s=n.constructor,i=n.c[0];if(e!==d){if(e!==~~e||e<1||e>r)throw Error(o+"precision");for(n=p(new s(n),e,t);n.c.length<e;)n.c.push(0)}return h(n,e<=n.e||n.e<=s.NE||n.e>=s.PE,!!i)},l.valueOf=function(){var e=this,t=e.constructor;if(!0===t.strict)throw Error(i+"valueOf disallowed");return h(e,e.e<=t.NE||e.e>=t.PE,!0)};var f=function e(){function t(n){var r=this;if(!(r instanceof t))return n===d?e():new t(n);if(n instanceof t)r.s=n.s,r.e=n.e,r.c=n.c.slice();else{if("string"!=typeof n){if(!0===t.strict&&"bigint"!=typeof n)throw TypeError(o+"value");n=0===n&&1/n<0?"-0":String(n)}!function(e,t){var n,r,s;if(!u.test(t))throw Error(o+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),s=t.length,r=0;r<s&&"0"==t.charAt(r);)++r;if(r==s)e.c=[e.e=0];else{for(;s>0&&"0"==t.charAt(--s););for(e.e=n-r-1,e.c=[],n=0;r<=s;)e.c[n++]=+t.charAt(r++)}}(r,n)}r.constructor=t}return t.prototype=l,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=!1,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}();const g={bigNumber(e,t={safe:!1}){try{return new f(e||0)}catch(n){if(t.safe)return new f(0);throw n}},formatNumber(e,t){const{decimals:n,round:r=8,safe:s=!0}=t;return g.bigNumber(e,{safe:s}).div(new f(10).pow(n)).round(r)},multiply(e,t){if(void 0===e||void 0===t)return new f(0);const n=new f(e),r=new f(t);return n.times(r)},toFixed:(e,t=2)=>void 0===e||""===e?new f(0).toFixed(t):new f(e).toFixed(t),formatNumberToLocalString:(e,t=2)=>void 0===e||""===e?"0.00":"number"==typeof e?e.toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t,roundingMode:"floor"}):parseFloat(e).toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t,roundingMode:"floor"}),parseLocalStringToNumber(e){if(void 0===e||""===e)return 0;const t=e.replace(/,/gu,"");return new f(t).toNumber()}}},32750:function(e,t,n){"use strict";n.d(t,{u:function(){return r}});const r={validateCaipAddress(e){if(3!==e.split(":")?.length)throw new Error("Invalid CAIP Address");return e},parseCaipAddress(e){const t=e.split(":");if(3!==t.length)throw new Error(`Invalid CAIP-10 address: ${e}`);const[n,r,s]=t;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${e}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(e){const t=e.split(":");if(2!==t.length)throw new Error(`Invalid CAIP-2 network id: ${e}`);const[n,r]=t;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${e}`);return{chainNamespace:n,chainId:r}}}},86462:function(e,t,n){"use strict";n.d(t,{uJ:function(){return r},Vk:function(){return s},mr:function(){return i},$U:function(){return o}});const r={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",RECENT_WALLET:"@appkit/recent_wallet",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids",HISTORY_TRANSACTIONS_CACHE:"@appkit/history_transactions_cache",TOKEN_PRICE_CACHE:"@appkit/token_price_cache",RECENT_EMAILS:"@appkit/recent_emails",LATEST_APPKIT_VERSION:"@appkit/latest_version",TON_WALLETS_CACHE:"@appkit/ton_wallets_cache"};function s(e){if(!e)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${e}:connected_connector_id`}const i={setItem(e,t){o()&&void 0!==t&&localStorage.setItem(e,t)},getItem(e){if(o())return localStorage.getItem(e)||void 0},removeItem(e){o()&&localStorage.removeItem(e)},clear(){o()&&localStorage.clear()}};function o(){return"undefined"!=typeof window&&"undefined"!=typeof localStorage}},84853:function(e,t,n){"use strict";function r(e,t){const n=e?.["--apkt-accent"]??e?.["--w3m-accent"];return"light"===t?{"--w3m-accent":n||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":n||"hsla(230, 100%, 67%, 1)","--w3m-background":"#202020"}}n.d(t,{t:function(){return r}})},13618:function(e,t,n){"use strict";n.d(t,{j:function(){return s}});const r={adapters:{}},s={state:r,initialize(e){r.adapters={...e}},get:e=>r.adapters[e]}},9483:function(e,t,n){"use strict";n.d(t,{B:function(){return l}});var r=n(23250),s=n(31254),i=n(72290),o=n(79781),a=n(32628);const c=(0,r.sj)({message:"",variant:"info",open:!1}),l=(0,o.P)({state:c,subscribeKey:(e,t)=>(0,s.VW)(c,e,t),open(e,t){const{debug:n}=a.h.state,{code:r,displayMessage:s,debugMessage:o}=e;if(s&&n&&(c.message=s,c.variant=t,c.open=!0),o){if(!i.b.IS_DEVELOPMENT)return;const e="function"==typeof o?o():o,n=r?{code:r}:void 0;"error"===t?console.error(e,n):"warning"===t?console.warn(e,n):console.info(e,n)}},warn(e,t,n){c.open=!0,c.message=e,c.variant="warning",t&&console.warn(t,n)},close(){c.open=!1,c.message="",c.variant="info"}})},91951:function(e,t,n){"use strict";n.d(t,{Q:function(){return v}});var r=n(8239),s=n(23250),i=n(31254),o=n(72290),a=n(14568),c=n(53574),l=n(44329),d=n(67529),u=n(42916),p=n(92809),h=n(63908),f=n(27297),g=n(68886),m=n(32628);const y=c.j.getApiUrl(),b=new l.V({baseUrl:y,clientId:null}),w=(0,s.sj)({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1,explorerWallets:[],explorerFilteredWallets:[],plan:{tier:"none",hasExceededUsageLimit:!1,limits:{isAboveRpcLimit:!1,isAboveMauLimit:!1}}}),v={state:w,subscribeKey:(e,t)=>(0,i.VW)(w,e,t),_getSdkProperties(){const{projectId:e,sdkType:t,sdkVersion:n}=m.h.state;return{projectId:e,st:t||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions:e=>m.h.state.isUniversalProvider?e.filter(e=>Boolean(e.mobile_link||e.desktop_link||e.webapp_link)):e,_fetchWalletImage:e=>(0,r.Z)(function*(){const t=`${b.baseUrl}/getWalletImage/${e}`,n=yield b.getBlob({path:t,params:v._getSdkProperties()});p.W.setWalletImage(e,URL.createObjectURL(n))})(),_fetchNetworkImage:e=>(0,r.Z)(function*(){const t=`${b.baseUrl}/public/getAssetImage/${e}`,n=yield b.getBlob({path:t,params:v._getSdkProperties()});p.W.setNetworkImage(e,URL.createObjectURL(n))})(),_fetchConnectorImage:e=>(0,r.Z)(function*(){const t=`${b.baseUrl}/public/getAssetImage/${e}`,n=yield b.getBlob({path:t,params:v._getSdkProperties()});p.W.setConnectorImage(e,URL.createObjectURL(n))})(),_fetchCurrencyImage:e=>(0,r.Z)(function*(){const t=`${b.baseUrl}/public/getCurrencyImage/${e}`,n=yield b.getBlob({path:t,params:v._getSdkProperties()});p.W.setCurrencyImage(e,URL.createObjectURL(n))})(),_fetchTokenImage:e=>(0,r.Z)(function*(){const t=`${b.baseUrl}/public/getTokenImage/${e}`,n=yield b.getBlob({path:t,params:v._getSdkProperties()});p.W.setTokenImage(e,URL.createObjectURL(n))})(),_filterWalletsByPlatform(e){const t=e.length,n=c.j.isMobile()?e?.filter(e=>!(!e.mobile_link&&!e.webapp_link)||Object.values(d.m).map(e=>e.id).includes(e.id)):e;return{filteredWallets:n,mobileFilteredOutWalletsLength:t-n.length}},fetchProjectConfig:()=>(0,r.Z)(function*(){return(yield b.get({path:"/appkit/v1/config",params:v._getSdkProperties()})).features})(),fetchUsage:()=>(0,r.Z)(function*(){try{const e=yield b.get({path:"/appkit/v1/project-limits",params:v._getSdkProperties()}),{tier:t,isAboveMauLimit:n,isAboveRpcLimit:r}=e.planLimits,s=n||r;v.state.plan={tier:t,hasExceededUsageLimit:"starter"===t&&s,limits:{isAboveRpcLimit:r,isAboveMauLimit:n}}}catch(e){console.warn("Failed to fetch usage",e)}})(),fetchAllowedOrigins:()=>(0,r.Z)(function*(){try{const{allowedOrigins:e}=yield b.get({path:"/projects/v1/origins",params:v._getSdkProperties()});return e}catch(e){if(e instanceof Error&&e.cause instanceof Response){const t=e.cause.status;if(t===o.b.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:e});if(t>=o.b.HTTP_STATUS_CODES.SERVER_ERROR&&t<600)throw new Error("SERVER_ERROR",{cause:e});return[]}return[]}})(),fetchNetworkImages:()=>(0,r.Z)(function*(){const e=h.R.getAllRequestedCaipNetworks()?.map(({assets:e})=>e?.imageId).filter(Boolean).filter(e=>!a.f.getNetworkImageById(e));e&&(yield Promise.allSettled(e.map(e=>v._fetchNetworkImage(e))))})(),fetchConnectorImages:()=>(0,r.Z)(function*(){const{connectors:e}=f.A.state,t=e.map(({imageId:e})=>e).filter(Boolean);yield Promise.allSettled(t.map(e=>v._fetchConnectorImage(e)))})(),fetchCurrencyImages:(e=[])=>(0,r.Z)(function*(){yield Promise.allSettled(e.map(e=>v._fetchCurrencyImage(e)))})(),fetchTokenImages:(e=[])=>(0,r.Z)(function*(){yield Promise.allSettled(e.map(e=>v._fetchTokenImage(e)))})(),fetchWallets:e=>(0,r.Z)(function*(){const t=e.exclude??[];v._getSdkProperties().sv.startsWith("html-core-")&&t.push(...Object.values(d.m).map(e=>e.id));const n=yield b.get({path:"/getWallets",params:{...v._getSdkProperties(),...e,page:String(e.page),entries:String(e.entries),include:e.include?.join(","),exclude:t.join(",")}}),{filteredWallets:r,mobileFilteredOutWalletsLength:s}=v._filterWalletsByPlatform(n?.data);return{data:r||[],count:n?.count,mobileFilteredOutWalletsLength:s}})(),prefetchWalletRanks:()=>(0,r.Z)(function*(){const e=f.A.state.connectors;if(!e?.length)return;const t={page:1,entries:20,badge:"certified"};if(t.names=e.map(e=>e.name).join(","),h.R.state.activeChain===o.b.CHAIN.EVM){const n=[...e.flatMap(e=>e.connectors?.map(e=>e.info?.rdns)||[]),...e.map(e=>e.info?.rdns)].filter(e=>"string"==typeof e&&e.length>0);n.length&&(t.rdns=n.join(","))}const{data:n}=yield v.fetchWallets(t);w.explorerWallets=n,f.A.extendConnectorsWithExplorerWallets(n);const r=h.R.getRequestedCaipNetworkIds().join(",");w.explorerFilteredWallets=n.filter(e=>e.chains?.some(e=>r.includes(e)))})(),fetchFeaturedWallets:()=>(0,r.Z)(function*(){const{featuredWalletIds:e}=m.h.state;if(e?.length){const t={...v._getSdkProperties(),page:1,entries:e?.length??4,include:e},{data:n}=yield v.fetchWallets(t),r=[...n].sort((t,n)=>e.indexOf(t.id)-e.indexOf(n.id)),s=r.map(e=>e.image_id).filter(Boolean);yield Promise.allSettled(s.map(e=>v._fetchWalletImage(e))),w.featured=r,w.allFeatured=r}})(),fetchRecommendedWallets:()=>(0,r.Z)(function*(){try{w.isFetchingRecommendedWallets=!0;const{includeWalletIds:e,excludeWalletIds:t,featuredWalletIds:n}=m.h.state,r={page:1,entries:4,include:e,exclude:[...t??[],...n??[]].filter(Boolean),chains:h.R.getRequestedCaipNetworkIds().join(",")},{data:s,count:i}=yield v.fetchWallets(r),o=u.M.getRecentWallets(),a=s.map(e=>e.image_id).filter(Boolean),c=o.map(e=>e.image_id).filter(Boolean);yield Promise.allSettled([...a,...c].map(e=>v._fetchWalletImage(e))),w.recommended=s,w.allRecommended=s,w.count=i??0}catch{}finally{w.isFetchingRecommendedWallets=!1}})(),fetchWalletsByPage:({page:e})=>(0,r.Z)(function*(){const{includeWalletIds:t,excludeWalletIds:n,featuredWalletIds:r}=m.h.state,s=h.R.getRequestedCaipNetworkIds().join(","),i=[...w.recommended.map(({id:e})=>e),...n??[],...r??[]].filter(Boolean),o={page:e,entries:40,include:t,exclude:i,chains:s},{data:a,count:l,mobileFilteredOutWalletsLength:d}=yield v.fetchWallets(o);w.mobileFilteredOutWalletsLength=d+(w.mobileFilteredOutWalletsLength??0);const u=a.slice(0,20).map(e=>e.image_id).filter(Boolean);yield Promise.allSettled(u.map(e=>v._fetchWalletImage(e))),w.wallets=c.j.uniqueBy([...w.wallets,...v._filterOutExtensions(a)],"id").filter(e=>e.chains?.some(e=>s.includes(e))),w.count=l>w.count?l:w.count,w.page=e})(),initializeExcludedWallets:({ids:e})=>(0,r.Z)(function*(){const t={page:1,entries:e.length,include:e},{data:n}=yield v.fetchWallets(t);n&&n.forEach(e=>{w.excludedWallets.push({rdns:e.rdns,name:e.name})})})(),searchWallet:({search:e,badge:t})=>(0,r.Z)(function*(){const{includeWalletIds:n,excludeWalletIds:r}=m.h.state,s=h.R.getRequestedCaipNetworkIds().join(",");w.search=[];const i={page:1,entries:100,search:e?.trim(),badge_type:t,include:n,exclude:r,chains:s},{data:o}=yield v.fetchWallets(i);g.X.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:t??"",search:e??""}});const a=o.map(e=>e.image_id).filter(Boolean);yield Promise.allSettled([...a.map(e=>v._fetchWalletImage(e)),c.j.wait(300)]),w.search=v._filterOutExtensions(o)})(),initPromise:(e,t)=>w.promises[e]||(w.promises[e]=t()),prefetch({fetchConnectorImages:e=!0,fetchFeaturedWallets:t=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0,fetchWalletRanks:s=!0}={}){const i=[e&&v.initPromise("connectorImages",v.fetchConnectorImages),t&&v.initPromise("featuredWallets",v.fetchFeaturedWallets),n&&v.initPromise("recommendedWallets",v.fetchRecommendedWallets),r&&v.initPromise("networkImages",v.fetchNetworkImages),s&&v.initPromise("walletRanks",v.prefetchWalletRanks)].filter(Boolean);return Promise.allSettled(i)},prefetchAnalyticsConfig(){m.h.state.features.analytics&&v.fetchAnalyticsConfig()},fetchAnalyticsConfig:()=>(0,r.Z)(function*(){try{const{isAnalyticsEnabled:e}=yield b.get({path:"/getAnalyticsConfig",params:v._getSdkProperties()});m.h.setFeatures({analytics:e})}catch{m.h.setFeatures({analytics:!1})}})(),filterByNamespaces(e){if(!e?.length)return w.featured=w.allFeatured,void(w.recommended=w.allRecommended);const t=h.R.getRequestedCaipNetworkIds().join(",");w.featured=w.allFeatured.filter(e=>e.chains?.some(e=>t.includes(e))),w.recommended=w.allRecommended.filter(e=>e.chains?.some(e=>t.includes(e))),w.filteredWallets=w.wallets.filter(e=>e.chains?.some(e=>t.includes(e)))},clearFilterByNamespaces(){w.filteredWallets=[]},setFilterByNamespace(e){if(!e)return w.featured=w.allFeatured,void(w.recommended=w.allRecommended);const t=h.R.getRequestedCaipNetworkIds().join(",");w.featured=w.allFeatured.filter(e=>e.chains?.some(e=>t.includes(e))),w.recommended=w.allRecommended.filter(e=>e.chains?.some(e=>t.includes(e))),w.filteredWallets=w.wallets.filter(e=>e.chains?.some(e=>t.includes(e)))}}},92809:function(e,t,n){"use strict";n.d(t,{W:function(){return a}});var r=n(23250),s=n(31254),i=n(79781);const o=(0,r.sj)({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),a=(0,i.P)({state:o,subscribeNetworkImages:e=>(0,r.Ld)(o.networkImages,()=>e(o.networkImages)),subscribeKey:(e,t)=>(0,s.VW)(o,e,t),subscribe:e=>(0,r.Ld)(o,()=>e(o)),setWalletImage(e,t){o.walletImages[e]=t},setNetworkImage(e,t){o.networkImages[e]=t},setChainImage(e,t){o.chainImages[e]=t},setConnectorImage(e,t){o.connectorImages={...o.connectorImages,[e]:t}},setTokenImage(e,t){o.tokenImages[e]=t},setCurrencyImage(e,t){o.currencyImages[e]=t}})},71848:function(e,t,n){"use strict";n.d(t,{L:function(){return g}});var r=n(8239),s=n(23250),i=n(28153),o=n(53574),a=n(44329),c=n(42916),l=n(63908),d=n(32628),u=n(56152);const p={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},h=o.j.getBlockchainApiUrl(),f=(0,s.sj)({clientId:null,api:new a.V({baseUrl:h,clientId:null}),supportedChains:{http:[],ws:[]}}),g={state:f,get:e=>(0,r.Z)(function*(){const{st:t,sv:n}=g.getSdkProperties(),r={...e.params||{},st:t,sv:n,projectId:d.h.state.projectId};return f.api.get({...e,params:r})})(),getSdkProperties(){const{sdkType:e,sdkVersion:t}=d.h.state;return{st:e||"unknown",sv:t||"unknown"}},isNetworkSupported:e=>(0,r.Z)(function*(){if(!e)return!1;try{f.supportedChains.http.length||(yield g.getSupportedNetworks())}catch{return!1}return f.supportedChains.http.includes(e)})(),getSupportedNetworks:()=>(0,r.Z)(function*(){try{const e=yield g.get({path:"v1/supported-chains"});return f.supportedChains=e,e}catch{return f.supportedChains}})(),fetchIdentity:({address:e})=>(0,r.Z)(function*(){const t=c.M.getIdentityFromCacheForAddress(e);if(t)return t;const n=yield g.get({path:`/v1/identity/${e}`,params:{sender:l.R.state.activeCaipAddress?o.j.getPlainAddress(l.R.state.activeCaipAddress):void 0}});return c.M.updateIdentityCache({address:e,identity:n,timestamp:Date.now()}),n})(),fetchTransactions:({account:e,cursor:t,signal:n,cache:s,chainId:i})=>(0,r.Z)(function*(){if(!(yield g.isNetworkSupported(l.R.state.activeCaipNetwork.caipNetworkId)))return{data:[],next:void 0};const r=c.M.getTransactionsCacheForAddress({address:e,chainId:i});if(r)return r;const o=yield g.get({path:`/v1/account/${e}/history`,params:{cursor:t,chainId:i},signal:n,cache:s});return c.M.updateTransactionsCache({address:e,chainId:i,timestamp:Date.now(),transactions:o}),o})(),fetchSwapQuote:({amount:e,userAddress:t,from:n,to:s,gasPrice:i})=>(0,r.Z)(function*(){return(yield g.isNetworkSupported(l.R.state.activeCaipNetwork.caipNetworkId))?g.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:e,userAddress:t,from:n,to:s,gasPrice:i}}):{quotes:[]}})(),fetchSwapTokens:({chainId:e})=>(0,r.Z)(function*(){return(yield g.isNetworkSupported(l.R.state.activeCaipNetwork.caipNetworkId))?g.get({path:"/v1/convert/tokens",params:{chainId:e}}):{tokens:[]}})(),getAddressBalance:({caipNetworkId:e,address:t})=>(0,r.Z)(function*(){return f.api.post({path:`/v1?chainId=${e}&projectId=${d.h.state.projectId}`,body:{id:"1",jsonrpc:"2.0",method:"getAddressBalance",params:{address:t}}}).then(e=>e.result)})(),fetchTokenPrice:({addresses:e,caipNetworkId:t=l.R.state.activeCaipNetwork.caipNetworkId})=>(0,r.Z)(function*(){if(!(yield g.isNetworkSupported(t)))return{fungibles:[]};const n=c.M.getTokenPriceCacheForAddresses(e);if(n)return n;const r=yield f.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:e,projectId:d.h.state.projectId},headers:{"Content-Type":"application/json"}});return c.M.updateTokenPriceCache({addresses:e,timestamp:Date.now(),tokenPrice:r}),r})(),fetchSwapAllowance:({tokenAddress:e,userAddress:t})=>(0,r.Z)(function*(){return(yield g.isNetworkSupported(l.R.state.activeCaipNetwork.caipNetworkId))?g.get({path:"/v1/convert/allowance",params:{tokenAddress:e,userAddress:t},headers:{"Content-Type":"application/json"}}):{allowance:"0"}})(),fetchGasPrice:({chainId:e})=>(0,r.Z)(function*(){const{st:t,sv:n}=g.getSdkProperties();if(!(yield g.isNetworkSupported(l.R.state.activeCaipNetwork.caipNetworkId)))throw new Error("Network not supported for Gas Price");return g.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:e,st:t,sv:n}})})(),generateSwapCalldata:({amount:e,from:t,to:n,userAddress:s,disableEstimate:o})=>(0,r.Z)(function*(){if(!(yield g.isNetworkSupported(l.R.state.activeCaipNetwork.caipNetworkId)))throw new Error("Network not supported for Swaps");return f.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:e,eip155:{slippage:i.bq.CONVERT_SLIPPAGE_TOLERANCE},projectId:d.h.state.projectId,from:t,to:n,userAddress:s,disableEstimate:o}})})(),generateApproveCalldata:({from:e,to:t,userAddress:n})=>(0,r.Z)(function*(){const{st:r,sv:s}=g.getSdkProperties();if(!(yield g.isNetworkSupported(l.R.state.activeCaipNetwork.caipNetworkId)))throw new Error("Network not supported for Swaps");return g.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:e,to:t,st:r,sv:s}})})(),getBalance:(e,t,n)=>(0,r.Z)(function*(){const{st:r,sv:s}=g.getSdkProperties();if(!(yield g.isNetworkSupported(l.R.state.activeCaipNetwork.caipNetworkId)))return u.K.showError("Token Balance Unavailable"),{balances:[]};const i=`${t}:${e}`,o=c.M.getBalanceCacheForCaipAddress(i);if(o)return o;const a=yield g.get({path:`/v1/account/${e}/balance`,params:{currency:"usd",chainId:t,forceUpdate:n,st:r,sv:s}});return c.M.updateBalanceCache({caipAddress:i,balance:a,timestamp:Date.now()}),a})(),lookupEnsName:e=>(0,r.Z)(function*(){return(yield g.isNetworkSupported(l.R.state.activeCaipNetwork.caipNetworkId))?g.get({path:`/v1/profile/account/${e}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}})(),reverseLookupEnsName:({address:e})=>(0,r.Z)(function*(){if(!(yield g.isNetworkSupported(l.R.state.activeCaipNetwork.caipNetworkId)))return[];const t=l.R.getAccountData()?.address;return g.get({path:`/v1/profile/reverse/${e}`,params:{sender:t,apiVersion:"2"}})})(),getEnsNameSuggestions:e=>(0,r.Z)(function*(){return(yield g.isNetworkSupported(l.R.state.activeCaipNetwork.caipNetworkId))?g.get({path:`/v1/profile/suggestions/${e}`,params:{zone:"reown.id"}}):{suggestions:[]}})(),registerEnsName:({coinType:e,address:t,message:n,signature:s})=>(0,r.Z)(function*(){return(yield g.isNetworkSupported(l.R.state.activeCaipNetwork.caipNetworkId))?f.api.post({path:"/v1/profile/account",body:{coin_type:e,address:t,message:n,signature:s},headers:{"Content-Type":"application/json"}}):{success:!1}})(),generateOnRampURL:({destinationWallets:e,partnerUserId:t,defaultNetwork:n,purchaseAmount:s,paymentAmount:i})=>(0,r.Z)(function*(){return(yield g.isNetworkSupported(l.R.state.activeCaipNetwork.caipNetworkId))?(yield f.api.post({path:"/v1/generators/onrampurl",params:{projectId:d.h.state.projectId},body:{destinationWallets:e,defaultNetwork:n,partnerUserId:t,defaultExperience:"buy",presetCryptoAmount:s,presetFiatAmount:i}})).url:""})(),getOnrampOptions:()=>(0,r.Z)(function*(){if(!(yield g.isNetworkSupported(l.R.state.activeCaipNetwork.caipNetworkId)))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return yield g.get({path:"/v1/onramp/options"})}catch{return p}})(),getOnrampQuote:({purchaseCurrency:e,paymentCurrency:t,amount:n,network:s})=>(0,r.Z)(function*(){try{return(yield g.isNetworkSupported(l.R.state.activeCaipNetwork.caipNetworkId))?yield f.api.post({path:"/v1/onramp/quote",params:{projectId:d.h.state.projectId},body:{purchaseCurrency:e,paymentCurrency:t,amount:n,network:s}}):null}catch{return{networkFee:{amount:n,currency:t.id},paymentSubtotal:{amount:n,currency:t.id},paymentTotal:{amount:n,currency:t.id},purchaseAmount:{amount:n,currency:t.id},quoteId:"mocked-quote-id"}}})(),getSmartSessions:e=>(0,r.Z)(function*(){return(yield g.isNetworkSupported(l.R.state.activeCaipNetwork.caipNetworkId))?g.get({path:`/v1/sessions/${e}`}):[]})(),revokeSmartSession:(e,t,n)=>(0,r.Z)(function*(){return(yield g.isNetworkSupported(l.R.state.activeCaipNetwork.caipNetworkId))?f.api.post({path:`/v1/sessions/${e}/revoke`,params:{projectId:d.h.state.projectId},body:{pci:t,signature:n}}):{success:!1}})(),setClientId(e){f.clientId=e,f.api=new a.V({baseUrl:h,clientId:e})}}},63908:function(e,t,n){"use strict";n.d(t,{R:function(){return U}});var r=n(8239),s=n(23250),i=n(31254),o=n(32750),a=n(72290),c=n(19579),l=n(3628);const d=/^0x(?:[A-Fa-f0-9]{64})$/u,u=/^0x(?:[a-fA-F0-9]{62,})$/u,p=3e4,h={checkIfAllowedToTriggerEmail(){const e=f.get(l.$0.LAST_EMAIL_LOGIN_TIME);if(e){const t=Date.now()-Number(e);if(t<p){const e=Math.ceil((p-t)/1e3);throw new Error(`Please try again after ${e} seconds`)}}},getTimeToNextEmailLogin(){const e=f.get(l.$0.LAST_EMAIL_LOGIN_TIME);if(e){const t=Date.now()-Number(e);if(t<p)return Math.ceil((p-t)/1e3)}return 0},checkIfRequestExists:e=>l.y_.NOT_SAFE_RPC_METHODS.includes(e.method)||l.y_.SAFE_RPC_METHODS.includes(e.method),getResponseType:e=>"string"==typeof e&&(e?.match(d)||e?.match(u))?l.$0.RPC_RESPONSE_TYPE_TX:l.$0.RPC_RESPONSE_TYPE_OBJECT,checkIfRequestIsSafe:e=>l.y_.SAFE_RPC_METHODS.includes(e.method),isClient:"undefined"!=typeof window},f={set(e,t){h.isClient&&localStorage.setItem(`${l.$0.STORAGE_KEY}${e}`,t)},get:e=>h.isClient?localStorage.getItem(`${l.$0.STORAGE_KEY}${e}`):null,delete(e,t){h.isClient&&(t?localStorage.removeItem(e):localStorage.removeItem(`${l.$0.STORAGE_KEY}${e}`))}};var g=n(56276),m=n(28153),y=n(53574),b=n(42916),w=n(79781),v=n(13618),E=n(7551),C=n(27297),A=n(68886),N=n(22167),I=n(32628),_=n(65023),S=n(65298),T=n(26131),R=n(56152);const O={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},P={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},k=(0,s.sj)({chains:(0,i.Yr)(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{connectionControllerClient:void 0},isSwitchingNamespace:!1}),x={state:k,subscribe:e=>(0,s.Ld)(k,()=>{e(k)}),subscribeKey:(e,t)=>(0,i.VW)(k,e,t),subscribeAccountStateProp(e,t,n){const r=n||k.activeChain;return r?(0,i.VW)(k.chains.get(r)?.accountState||{},e,t):()=>{}},subscribeChainProp(e,t,n){let r;return(0,s.Ld)(k.chains,()=>{const s=n||k.activeChain;if(s){const n=k.chains.get(s)?.[e];r!==n&&(r=n,t(n))}})},initialize(e,t,n){const{chainId:r,namespace:i}=b.M.getActiveNetworkProps(),o=t?.find(e=>e.id.toString()===r?.toString()),a=e.find(e=>e?.namespace===i)||e?.[0],c=e.map(e=>e.namespace).filter(e=>void 0!==e),l=I.h.state.enableEmbedded?new Set([...c]):new Set([...t?.map(e=>e.chainNamespace)??[]]);(0===e?.length||!a)&&(k.noAdapters=!0),k.noAdapters||(k.activeChain=a?.namespace,k.activeCaipNetwork=o,U.setChainNetworkData(a?.namespace,{caipNetwork:o}),k.activeChain&&S.I.set({activeChain:a?.namespace})),l.forEach(e=>{const r=t?.filter(t=>t.chainNamespace===e),i=b.M.getPreferredAccountTypes()||{},o={...I.h.state.defaultAccountTypes,...i};U.state.chains.set(e,{namespace:e,networkState:(0,s.sj)({...P,caipNetwork:r?.[0]}),accountState:(0,s.sj)({...O,preferredAccountType:o[e]}),caipNetworks:r??[],...n}),U.setRequestedCaipNetworks(r??[],e)})},removeAdapter(e){if(k.activeChain===e){const t=Array.from(k.chains.entries()).find(([t])=>t!==e);if(t){const e=t[1]?.caipNetworks?.[0];e&&U.setActiveCaipNetwork(e)}}k.chains.delete(e)},addAdapter(e,{connectionControllerClient:t},n){if(!e.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");k.chains.set(e.namespace,{namespace:e.namespace,networkState:{...P,caipNetwork:n[0]},accountState:{...O},caipNetworks:n,connectionControllerClient:t}),U.setRequestedCaipNetworks(n?.filter(t=>t.chainNamespace===e.namespace)??[],e.namespace)},addNetwork(e){const t=k.chains.get(e.chainNamespace);if(t){const n=[...t.caipNetworks||[]];t.caipNetworks?.find(t=>t.id===e.id)||n.push(e),k.chains.set(e.chainNamespace,{...t,caipNetworks:n}),U.setRequestedCaipNetworks(n,e.chainNamespace),C.A.filterByNamespace(e.chainNamespace,!0)}},removeNetwork(e,t){const n=k.chains.get(e);if(n){const r=k.activeCaipNetwork?.id===t,s=[...n.caipNetworks?.filter(e=>e.id!==t)||[]];r&&n?.caipNetworks?.[0]&&U.setActiveCaipNetwork(n.caipNetworks[0]),k.chains.set(e,{...n,caipNetworks:s}),U.setRequestedCaipNetworks(s||[],e),0===s.length&&C.A.filterByNamespace(e,!1)}},setAdapterNetworkState(e,t){const n=k.chains.get(e);n&&(n.networkState={...n.networkState||P,...t},k.chains.set(e,n))},setChainAccountData(e,t,n=!0){if(!e)throw new Error("Chain is required to update chain account data");const r=k.chains.get(e);if(r){const n={...r.accountState||O,...t};k.chains.set(e,{...r,accountState:n}),(1===k.chains.size||k.activeChain===e)&&t.caipAddress&&(k.activeCaipAddress=t.caipAddress)}},setChainNetworkData(e,t){if(!e)return;const n=k.chains.get(e);if(n){const r={...n.networkState||P,...t};k.chains.set(e,{...n,networkState:r})}},setAccountProp(e,t,n,r=!0){U.setChainAccountData(n,{[e]:t},r)},setActiveNamespace(e){k.activeChain=e;const t=e?k.chains.get(e):void 0,n=t?.networkState?.caipNetwork;n?.id&&e&&(k.activeCaipAddress=t?.accountState?.caipAddress,k.activeCaipNetwork=n,U.setChainNetworkData(e,{caipNetwork:n}),b.M.setActiveCaipNetworkId(n?.caipNetworkId),S.I.set({activeChain:e,selectedNetworkId:n?.caipNetworkId}))},setActiveCaipNetwork(e){if(!e)return;const t=k.activeChain===e.chainNamespace;t||U.setIsSwitchingNamespace(!0);const n=k.chains.get(e.chainNamespace);k.activeChain=e.chainNamespace,k.activeCaipNetwork=e,U.setChainNetworkData(e.chainNamespace,{caipNetwork:e});let r=n?.accountState?.address;if(r)k.activeCaipAddress=`${e.chainNamespace}:${e.id}:${r}`;else if(t&&k.activeCaipAddress){const{address:t}=o.u.parseCaipAddress(k.activeCaipAddress);r=t,k.activeCaipAddress=`${e.caipNetworkId}:${r}`}else k.activeCaipAddress=void 0;U.setChainAccountData(e.chainNamespace,{address:r,caipAddress:k.activeCaipAddress}),T.S.resetSend(),S.I.set({activeChain:k.activeChain,selectedNetworkId:k.activeCaipNetwork?.caipNetworkId}),b.M.setActiveCaipNetworkId(e.caipNetworkId),!U.checkIfSupportedNetwork(e.chainNamespace)&&I.h.state.enableNetworkSwitch&&!I.h.state.allowUnsupportedChain&&!E.l.state.wcBasic&&U.showUnsupportedChainUI()},addCaipNetwork(e){if(!e)return;const t=k.chains.get(e.chainNamespace);t&&t?.caipNetworks?.push(e)},switchActiveNamespace:e=>(0,r.Z)(function*(){if(!e)return;const t=e!==U.state.activeChain,n=U.getNetworkData(e)?.caipNetwork,r=U.getCaipNetworkByNamespace(e,n?.id);t&&r&&(yield U.switchActiveNetwork(r))})(),switchActiveNetwork:(e,{throwOnFailure:t=!1}={})=>(0,r.Z)(function*(){const n=U.state.activeChain;if(!n)throw new Error("ChainController:switchActiveNetwork - namespace is required");const r="AUTH"===_.O.getProviderId(k.activeChain),s=U.getAccountData(n)?.address,i=a.b.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e.chainNamespace);try{if(s&&e.chainNamespace===n||r&&i){const t=v.j.get(e.chainNamespace);if(!t)throw new Error("Adapter not found");yield t.switchNetwork({caipNetwork:e})}U.setActiveCaipNetwork(e)}catch(o){if(t)throw o}A.X.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:e.caipNetworkId}})})(),getConnectionControllerClient(e){const t=e||k.activeChain;if(!t)throw new Error("Chain is required to get connection controller client");const n=k.chains.get(t);if(!n?.connectionControllerClient)throw new Error("ConnectionController client not set");return n.connectionControllerClient},getNetworkProp(e,t){const n=k.chains.get(t)?.networkState;if(n)return n[e]},getRequestedCaipNetworks(e){const t=k.chains.get(e),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=t?.networkState||{};return y.j.sortRequestedNetworks(n,r).filter(e=>e?.id)},getAllRequestedCaipNetworks(){const e=[];return k.chains.forEach(t=>{if(!t.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=U.getRequestedCaipNetworks(t.namespace);e.push(...n)}),e},setRequestedCaipNetworks(e,t){U.setAdapterNetworkState(t,{requestedCaipNetworks:e});const n=U.getAllRequestedCaipNetworks().map(e=>e.chainNamespace),r=Array.from(new Set(n));C.A.filterByNamespaces(r)},getAllApprovedCaipNetworkIds(){const e=[];return k.chains.forEach(t=>{if(!t.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=U.getApprovedCaipNetworkIds(t.namespace);e.push(...n)}),e},getActiveCaipNetwork:e=>e?k.chains.get(e)?.networkState?.caipNetwork:k.activeCaipNetwork,getActiveCaipAddress:()=>k.activeCaipAddress,getApprovedCaipNetworkIds:e=>k.chains.get(e)?.networkState?.approvedCaipNetworkIds||[],setApprovedCaipNetworksData(e,t){U.setAdapterNetworkState(e,t)},checkIfSupportedNetwork(e,t){const n=t||k.activeCaipNetwork?.caipNetworkId,r=U.getRequestedCaipNetworks(e);return!r.length||r?.some(e=>e.caipNetworkId===n)},checkIfSupportedChainId:e=>!k.activeChain||U.getRequestedCaipNetworks(k.activeChain)?.some(t=>t.id===e),checkIfSmartAccountEnabled(){const e=c.p.caipNetworkIdToNumber(k.activeCaipNetwork?.caipNetworkId);if(!k.activeChain||!e)return!1;const t=f.get(l.$0.SMART_ACCOUNT_ENABLED_NETWORKS)?.split(",")||[];return Boolean(t?.includes(e.toString()))},showUnsupportedChainUI(){N.I.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const e=k.activeCaipNetwork;return Boolean(e?.chainNamespace&&m.bq.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(e.chainNamespace))},resetNetwork(e){U.setAdapterNetworkState(e,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(e){const t=e;if(!t)throw new Error("Chain is required to set account prop");const n=U.state.chains.get(t)?.accountState?.preferredAccountType,r=I.h.state.defaultAccountTypes[t];k.activeCaipAddress=void 0,U.setChainAccountData(t,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:r||n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),C.A.removeConnectorId(t)},setIsSwitchingNamespace(e){k.isSwitchingNamespace=e},getFirstCaipNetworkSupportsAuthConnector(){const e=[];let t;if(k.chains.forEach(t=>{a.b.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>e===t.namespace)&&t.namespace&&e.push(t.namespace)}),e.length>0){const n=e[0];return t=n?k.chains.get(n)?.caipNetworks?.[0]:void 0,t}},getAccountData(e){const t=e||k.activeChain;if(t)return U.state.chains.get(t)?.accountState},getNetworkData(e){const t=e||k.activeChain;if(t)return U.state.chains.get(t)?.networkState},getCaipNetworkByNamespace(e,t){if(!e)return;const n=U.state.chains.get(e),r=n?.caipNetworks?.find(e=>e.id.toString()===t?.toString());return r||n?.networkState?.caipNetwork||n?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){const e=C.A.state.filterByNamespace;return(e?[k.chains.get(e)]:Array.from(k.chains.values())).flatMap(e=>e?.caipNetworks||[]).map(e=>e.caipNetworkId)},getCaipNetworks:e=>e?U.getRequestedCaipNetworks(e):U.getAllRequestedCaipNetworks(),getCaipNetworkById:(e,t)=>x.getCaipNetworks(t).find(t=>t.id.toString()===e.toString()||t.caipNetworkId.toString()===e.toString()),setLastConnectedSIWECaipNetwork(e){k.lastConnectedSIWECaipNetwork=e},getLastConnectedSIWECaipNetwork:()=>k.lastConnectedSIWECaipNetwork,fetchTokenBalance:e=>(0,r.Z)(function*(){const t=U.getAccountData();if(!t)return[];const n=U.state.activeCaipNetwork?.caipNetworkId,r=U.state.activeCaipNetwork?.chainNamespace,s=U.state.activeCaipAddress,i=s?y.j.getPlainAddress(s):void 0;if(U.setAccountProp("balanceLoading",!0,r),t.lastRetry&&!y.j.isAllowedRetry(t.lastRetry,30*m.bq.ONE_SEC_MS))return U.setAccountProp("balanceLoading",!1,r),[];try{if(i&&n&&r){const e=yield g.Q.getMyTokensWithBalance();return U.setAccountProp("tokenBalance",e,r),U.setAccountProp("lastRetry",void 0,r),U.setAccountProp("balanceLoading",!1,r),e}}catch(o){U.setAccountProp("lastRetry",Date.now(),r),e?.(o),R.K.showError("Token Balance Unavailable")}finally{U.setAccountProp("balanceLoading",!1,r)}return[]})(),isCaipNetworkDisabled(e){const t=e.chainNamespace,n=Boolean(U.getAccountData(t)?.caipAddress),r=U.getAllApprovedCaipNetworkIds(),s=!1!==U.getNetworkProp("supportsAllNetworks",t),i=C.A.getConnectorId(t),o=C.A.getAuthConnector();return!(!n||s||i===a.b.CONNECTOR_ID.AUTH&&o||r?.includes(e.caipNetworkId))}},U=(0,w.P)(x)},7551:function(e,t,n){"use strict";n.d(t,{l:function(){return O}});var r=n(8239),s=n(23250),i=n(31254),o=n(72290),a=n(32750),c=n(71166),l=n(15563),d=n(3628),u=n(63908),p=n(27297),h=n(68886),f=n(22167),g=n(40378),m=n(28153),y=n(53574),b=n(42916);const w={checkNamespaceConnectorId:(e,t)=>p.A.getConnectorId(e)===t,isSocialProvider:e=>m.bq.DEFAULT_REMOTE_FEATURES.socials.includes(e),connectWalletConnect:({walletConnect:e,connector:t,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i})=>new Promise((o,c)=>{if(e&&p.A.setActiveConnector(t),s?.(y.j.isMobile()&&e),r){const e=f.I.subscribeKey("open",t=>{t||(g.P.state.view!==r&&g.P.replace(r),e(),c(new Error("Modal closed")))})}const l=u.R.subscribeKey("activeCaipAddress",e=>{e&&(i?.(),n&&f.I.close(),l(),o(a.u.parseCaipAddress(e)))})}),connectExternal:e=>new Promise((t,n)=>{const r=u.R.subscribeKey("activeCaipAddress",e=>{e&&(f.I.close(),r(),t(a.u.parseCaipAddress(e)))});O.connectExternal(e,e.chain).catch(()=>{r(),n(new Error("Connection rejected"))})}),connectSocial({social:e,namespace:t,closeModalOnConnect:n=!0,onOpenFarcaster:s,onConnect:i}){let c,l=!1,d=null;const g=t||u.R.state.activeChain,m=u.R.subscribeKey("activeCaipAddress",e=>{e&&(n&&f.I.close(),m())});return new Promise((t,n)=>{function m(e){return w.apply(this,arguments)}function w(){return(w=(0,r.Z)(function*(r){if(r.data?.resultUri)if(r.origin===o.b.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",m,!1);try{const s=p.A.getAuthConnector(g);if(s&&!l){c&&c.close(),l=!0;const i=r.data.resultUri;h.X.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:e}}),b.M.setConnectedSocialProvider(e),yield O.connectExternal({id:s.id,type:s.type,socialUri:i},s.chain);const o=u.R.state.activeCaipAddress;if(!o)return void n(new Error("Failed to connect"));t(a.u.parseCaipAddress(o)),h.X.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:e}})}}catch(s){h.X.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:e,message:y.j.parseError(s)}}),n(new Error("Failed to connect"))}}else h.X.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:e,message:"Untrusted Origin"}})})).apply(this,arguments)}function v(){return(v=(0,r.Z)(function*(){if(h.X.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:e}}),"farcaster"===e){s?.();const t=f.I.subscribeKey("open",r=>{!r&&"farcaster"===e&&(n(new Error("Popup closed")),i?.(),t())}),r=p.A.getAuthConnector();if(r&&!u.R.getAccountData(g)?.farcasterUrl)try{const{url:e}=yield r.provider.getFarcasterUri();u.R.setAccountProp("farcasterUrl",e,g)}catch{n(new Error("Failed to connect to farcaster"))}}else{const t=p.A.getAuthConnector();d=y.j.returnOpenHref(`${o.b.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(t){const{uri:r}=yield t.provider.getSocialRedirectUri({provider:e});if(d&&r){d.location.href=r,c=d;const e=setInterval(()=>{c?.closed&&!l&&(n(new Error("Popup closed")),clearInterval(e))},1e3);window.addEventListener("message",m,!1)}else d?.close(),n(new Error("Failed to initiate social connection"))}}catch{n(new Error("Failed to initiate social connection")),d?.close()}}})).apply(this,arguments)}!function(){v.apply(this,arguments)}()})},connectEmail:({closeModalOnConnect:e=!0,redirectViewOnModalClose:t="Connect",onOpen:n,onConnect:r})=>new Promise((s,i)=>{if(n?.(),t){const e=f.I.subscribeKey("open",n=>{n||(g.P.state.view!==t&&g.P.replace(t),e(),i(new Error("Modal closed")))})}const o=u.R.subscribeKey("activeCaipAddress",t=>{t&&(r?.(),e&&f.I.close(),o(),s(a.u.parseCaipAddress(t)))})}),updateEmail:()=>(0,r.Z)(function*(){const e=b.M.getConnectedConnectorId(u.R.state.activeChain),t=p.A.getAuthConnector();if(!t)throw new Error("No auth connector found");if(e!==o.b.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=t.provider.getEmail()??"";return yield f.I.open({view:"UpdateEmailWallet",data:{email:n,redirectView:void 0}}),new Promise((e,r)=>{const s=setInterval(()=>{const r=t.provider.getEmail()??"";r!==n&&(f.I.close(),clearInterval(s),i(),e({email:r}))},1e3),i=f.I.subscribeKey("open",e=>{e||("Connect"!==g.P.state.view&&g.P.push("Connect"),clearInterval(s),i(),r(new Error("Modal closed")))})})})(),canSwitchToSmartAccount:e=>u.R.checkIfSmartAccountEnabled()&&(0,c.r9)(e)===d.y_.ACCOUNT_TYPES.EOA};var v=n(79781),E=n(65298),C=n(71848),A=n(32628),N=n(56152);const I=(0,s.sj)({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),_=(0,v.P)({state:I,subscribe:e=>(0,s.Ld)(I,()=>e(I)),setLastNetworkInView(e){I.lastNetworkInView=e},fetchTransactions:e=>(0,r.Z)(function*(){if(!e)throw new Error("Transactions can't be fetched without an accountAddress");I.loading=!0;try{const t=yield C.L.fetchTransactions({account:e,cursor:I.next,chainId:u.R.state.activeCaipNetwork.caipNetworkId}),n=_.filterSpamTransactions(t.data),r=_.filterByConnectedChain(n),s=[...I.transactions,...r];I.loading=!1,I.transactions=s,I.transactionsByYear=_.groupTransactionsByYearAndMonth(I.transactionsByYear,r),I.empty=0===s.length,I.next=t.next?t.next:void 0}catch{h.X.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:e,projectId:A.h.state.projectId,cursor:I.next,isSmartAccount:(0,c.r9)(u.R.state.activeChain)===d.y_.ACCOUNT_TYPES.SMART_ACCOUNT}}),N.K.showError("Failed to fetch transactions"),I.loading=!1,I.empty=!0,I.next=void 0}})(),groupTransactionsByYearAndMonth(e={},t=[]){const n=e;return t.forEach(e=>{const t=new Date(e.metadata.minedAt).getFullYear(),r=new Date(e.metadata.minedAt).getMonth(),s=n[t]??{},i=(s[r]??[]).filter(t=>t.id!==e.id);n[t]={...s,[r]:[...i,e].sort((e,t)=>new Date(t.metadata.minedAt).getTime()-new Date(e.metadata.minedAt).getTime())}}),n},filterSpamTransactions:e=>e.filter(e=>!e.transfers?.every(e=>!0===e.nft_info?.flags.is_spam)),filterByConnectedChain(e){const t=u.R.state.activeCaipNetwork.caipNetworkId;return e.filter(e=>e.metadata.chain===t)},clearCursor(){I.next=void 0},resetTransactions(){I.transactions=[],I.transactionsByYear={},I.lastNetworkInView=void 0,I.loading=!1,I.empty=!1,I.next=void 0}},"API_ERROR"),S=(0,s.sj)({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,wcFetchingUri:!1,buffering:!1,status:"disconnected"});let T;const R={state:S,subscribe:e=>(0,s.Ld)(S,()=>e(S)),subscribeKey:(e,t)=>(0,i.VW)(S,e,t),_getClient:()=>S._client,setClient(e){S._client=(0,s.iH)(e)},initialize(e){const t=e.filter(e=>Boolean(e.namespace)).map(e=>e.namespace);O.syncStorageConnections(t)},syncStorageConnections(e){const t=b.M.getConnections(),n=e??Array.from(u.R.state.chains.keys());for(const r of n){const e=t[r]??[],n=new Map(S.recentConnections);n.set(r,e),S.recentConnections=n}},getConnections:e=>e?S.connections.get(e)??[]:[],hasAnyConnection:e=>Array.from(O.state.connections.values()).flatMap(e=>e).some(({connectorId:t})=>t===e),connectWalletConnect:({cache:e="auto"}={})=>(0,r.Z)(function*(){S.wcFetchingUri=!0;const t=y.j.isTelegram()||y.j.isSafari()&&y.j.isIos();if("always"===e||"auto"===e&&t){if(T)return yield T,void(T=void 0);if(!y.j.isPairingExpired(S?.wcPairingExpiry))return void(S.wcUri=S.wcUri);T=O._getClient()?.connectWalletConnect?.().catch(()=>{}),O.state.status="connecting",yield T,T=void 0,S.wcPairingExpiry=void 0,O.state.status="connected"}else yield O._getClient()?.connectWalletConnect?.()})(),connectExternal:(e,t,n=!0)=>(0,r.Z)(function*(){const r=yield O._getClient()?.connectExternal?.(e);n&&u.R.setActiveNamespace(t);const s=p.A.state.allConnectors.find(t=>t.id===e?.id);return h.X.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:"AUTH"===e.type?"email":"browser",name:s?.name||"Unknown",view:g.P.state.view,walletRank:s?.explorerWallet?.order}}),r})(),reconnectExternal:e=>(0,r.Z)(function*(){yield O._getClient()?.reconnectExternal?.(e);const t=e.chain||u.R.state.activeChain;t&&p.A.setConnectorId(e.id,t)})(),setPreferredAccountType:(e,t)=>(0,r.Z)(function*(){if(!t)return;f.I.setLoading(!0,u.R.state.activeChain);const n=p.A.getAuthConnector();!n||(u.R.setAccountProp("preferredAccountType",e,t),yield n.provider.setPreferredAccount(e),b.M.setPreferredAccountTypes(Object.entries(u.R.state.chains).reduce((e,[t,n])=>{const r=t,s=(0,c.r9)(r);return void 0!==s&&(e[r]=s),e},{})),yield O.reconnectExternal(n),f.I.setLoading(!1,u.R.state.activeChain),h.X.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:e,network:u.R.state.activeCaipNetwork.caipNetworkId||""}}))})(),signMessage:e=>(0,r.Z)(function*(){return O._getClient()?.signMessage(e)})(),parseUnits:(e,t)=>O._getClient()?.parseUnits(e,t),formatUnits:(e,t)=>O._getClient()?.formatUnits(e,t),updateBalance:e=>O._getClient()?.updateBalance(e),sendTransaction:e=>(0,r.Z)(function*(){return O._getClient()?.sendTransaction(e)})(),getCapabilities:e=>(0,r.Z)(function*(){return O._getClient()?.getCapabilities(e)})(),grantPermissions:e=>(0,r.Z)(function*(){return O._getClient()?.grantPermissions(e)})(),walletGetAssets:e=>(0,r.Z)(function*(){return O._getClient()?.walletGetAssets(e)??{}})(),estimateGas:e=>(0,r.Z)(function*(){return O._getClient()?.estimateGas(e)})(),writeContract:e=>(0,r.Z)(function*(){return O._getClient()?.writeContract(e)})(),writeSolanaTransaction:e=>(0,r.Z)(function*(){return O._getClient()?.writeSolanaTransaction(e)})(),getEnsAddress:e=>(0,r.Z)(function*(){return O._getClient()?.getEnsAddress(e)})(),getEnsAvatar:e=>(0,r.Z)(function*(){return O._getClient()?.getEnsAvatar(e)})(),checkInstalled:e=>O._getClient()?.checkInstalled?.(e)||!1,resetWcConnection(){S.wcUri=void 0,S.wcPairingExpiry=void 0,S.wcLinking=void 0,S.recentWallet=void 0,S.wcFetchingUri=!1,S.status="disconnected",_.resetTransactions(),b.M.deleteWalletConnectDeepLink(),b.M.deleteRecentWallet(),E.I.set({connectingWallet:void 0})},resetUri(){S.wcUri=void 0,S.wcPairingExpiry=void 0,T=void 0,S.wcFetchingUri=!1,E.I.set({connectingWallet:void 0})},finalizeWcConnection(e){const{wcLinking:t,recentWallet:n}=O.state;t&&b.M.setWalletConnectDeepLink(t),n&&b.M.setAppKitRecent(n),e&&h.X.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:e,properties:{method:t?"mobile":"qrcode",name:g.P.state.data.wallet.name||"Unknown",view:g.P.state.view,walletRank:n?.order}})},setWcBasic(e){S.wcBasic=e},setUri(e){S.wcUri=e,S.wcFetchingUri=!1,S.wcPairingExpiry=y.j.getPairingExpiry()},setWcLinking(e){S.wcLinking=e},setWcError(e){S.wcError=e,S.wcFetchingUri=!1,S.buffering=!1},setRecentWallet(e){S.recentWallet=e},setBuffering(e){S.buffering=e},setStatus(e){S.status=e},setIsSwitchingConnection(e){S.isSwitchingConnection=e},disconnect:({id:e,namespace:t,initialDisconnect:n}={})=>(0,r.Z)(function*(){try{yield O._getClient()?.disconnect({id:e,chainNamespace:t,initialDisconnect:n})}catch(r){throw new v.g("Failed to disconnect","INTERNAL_SDK_ERROR",r)}})(),disconnectConnector:({id:e,namespace:t})=>(0,r.Z)(function*(){try{yield O._getClient()?.disconnectConnector({id:e,namespace:t})}catch(n){throw new v.g("Failed to disconnect connector","INTERNAL_SDK_ERROR",n)}})(),setConnections(e,t){const n=new Map(S.connections);n.set(t,e),S.connections=n},handleAuthAccountSwitch:({address:e,namespace:t})=>(0,r.Z)(function*(){const n=u.R.getAccountData(t)?.user?.accounts?.find(e=>"smartAccount"===e.type),r=n&&n.address.toLowerCase()===e.toLowerCase()&&w.canSwitchToSmartAccount(t)?"smartAccount":"eoa";yield O.setPreferredAccountType(r,t)})(),handleActiveConnection:({connection:e,namespace:t,address:n})=>(0,r.Z)(function*(){const r=p.A.getConnectorById(e.connectorId),s=e.connectorId===o.b.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${e.connectorId}`);return s?(n&&(yield O.handleAuthAccountSwitch({address:n,namespace:t})),n):(yield O.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:t},t))?.address})(),handleDisconnectedConnection:({connection:e,namespace:t,address:n,closeModalOnConnect:s})=>(0,r.Z)(function*(){const r=p.A.getConnectorById(e.connectorId),i=e.auth?.name?.toLowerCase(),a=e.connectorId===o.b.CONNECTOR_ID.AUTH,c=e.connectorId===o.b.CONNECTOR_ID.WALLET_CONNECT;if(!r)throw new Error(`No connector found for connection: ${e.connectorId}`);let l;if(a)if(i&&w.isSocialProvider(i)){const{address:e}=yield w.connectSocial({social:i,closeModalOnConnect:s,onOpenFarcaster(){f.I.open({view:"ConnectingFarcaster"})},onConnect(){g.P.replace("ProfileWallets")}});l=e}else{const{address:e}=yield w.connectEmail({closeModalOnConnect:s,onOpen(){f.I.open({view:"EmailLogin"})},onConnect(){g.P.replace("ProfileWallets")}});l=e}else if(c){const{address:e}=yield w.connectWalletConnect({walletConnect:!0,connector:r,closeModalOnConnect:s,onOpen(e){const t=e?"AllWallets":"ConnectingWalletConnect";f.I.state.open?g.P.push(t):f.I.open({view:t})},onConnect(){g.P.replace("ProfileWallets")}});l=e}else{const e=yield O.connectExternal({id:r.id,type:r.type,provider:r.provider,chain:t},t);e&&(l=e.address)}return a&&n&&(yield O.handleAuthAccountSwitch({address:n,namespace:t})),l})(),switchConnection:({connection:e,address:t,namespace:n,closeModalOnConnect:s,onChange:i})=>(0,r.Z)(function*(){let r;const o=u.R.getAccountData(n)?.caipAddress;if(o){const{address:e}=a.u.parseCaipAddress(o);r=e}const c=l.f.getConnectionStatus(e,n);switch(c){case"connected":case"active":{const s=yield O.handleActiveConnection({connection:e,namespace:n,address:t});if(r&&s){const e=s.toLowerCase()!==r.toLowerCase();i?.({address:s,namespace:n,hasSwitchedAccount:e,hasSwitchedWallet:"active"===c})}break}case"disconnected":{const r=yield O.handleDisconnectedConnection({connection:e,namespace:n,address:t,closeModalOnConnect:s});r&&i?.({address:r,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0});break}default:throw new Error(`Invalid connection status: ${c}`)}})()},O=(0,v.P)(R)},27297:function(e,t,n){"use strict";n.d(t,{A:function(){return N}});var r=n(8239),s=n(23250),i=n(31254),o=n(19579),a=n(72290),c=n(84853),l=n(3628),d=n(71166),u=n(38720),p=n(67529),h=n(42916),f=n(79781),g=n(91951),m=n(63908),y=n(22167),b=n(32628),w=n(40378),v=n(50039);const E=Object.fromEntries(o.F.map(e=>[e,void 0])),C=Object.fromEntries(o.F.map(e=>[e,!0])),A=(0,s.sj)({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:E,filterByNamespaceMap:C}),N=(0,f.P)({state:A,subscribe:e=>(0,s.Ld)(A,()=>{e(A)}),subscribeKey:(e,t)=>(0,i.VW)(A,e,t),initialize(e){e.forEach(e=>{const t=h.M.getConnectedConnectorId(e);t&&N.setConnectorId(t,e)})},setActiveConnector(e){e&&(A.activeConnector=(0,s.iH)(e))},setConnectors(e){e.filter(e=>!A.allConnectors.some(t=>t.id===e.id&&N.getConnectorName(t.name)===N.getConnectorName(e.name)&&t.chain===e.chain)).forEach(e=>{"MULTI_CHAIN"!==e.type&&A.allConnectors.push((0,s.iH)(e))});const t=N.getEnabledNamespaces(),n=N.getEnabledConnectors(t);A.connectors=N.mergeMultiChainConnectors(n)},filterByNamespaces(e){Object.keys(A.filterByNamespaceMap).forEach(e=>{A.filterByNamespaceMap[e]=!1}),e.forEach(e=>{A.filterByNamespaceMap[e]=!0}),N.updateConnectorsForEnabledNamespaces()},filterByNamespace(e,t){A.filterByNamespaceMap[e]=t,N.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const e=N.getEnabledNamespaces(),t=N.getEnabledConnectors(e),n=N.areAllNamespacesEnabled();A.connectors=N.mergeMultiChainConnectors(t),n?g.Q.clearFilterByNamespaces():g.Q.filterByNamespaces(e)},getEnabledNamespaces:()=>Object.entries(A.filterByNamespaceMap).filter(([e,t])=>t).map(([e])=>e),getEnabledConnectors:e=>A.allConnectors.filter(t=>e.includes(t.chain)),areAllNamespacesEnabled:()=>Object.values(A.filterByNamespaceMap).every(e=>e),mergeMultiChainConnectors(e){const t=N.generateConnectorMapByName(e),n=[];return t.forEach(e=>{const t=e[0],r=t?.id===a.b.CONNECTOR_ID.AUTH;e.length>1&&t?n.push({name:t.name,imageUrl:t.imageUrl,imageId:t.imageId,connectors:[...e],type:r?"AUTH":"MULTI_CHAIN",chain:"eip155",id:t?.id||""}):t&&n.push(t)}),n},generateConnectorMapByName(e){const t=new Map;return e.forEach(e=>{const{name:n}=e,r=N.getConnectorName(n);if(!r)return;const s=t.get(r)||[];s.find(t=>t.chain===e.chain)||s.push(e),t.set(r,s)}),t},getConnectorName:e=>e&&({"Trust Wallet":"Trust"}[e]||e),getUniqueConnectorsByName(e){const t=[];return e.forEach(e=>{t.find(t=>t.chain===e.chain)||t.push(e)}),t},addConnector(e){if(e.id===a.b.CONNECTOR_ID.AUTH){const t=e,n=(0,s.CO)(b.h.state),r=v.u.getSnapshot().themeMode,i=v.u.getSnapshot().themeVariables;t?.provider?.syncDappData?.({metadata:n.metadata,sdkVersion:n.sdkVersion,projectId:n.projectId,sdkType:n.sdkType}),t?.provider?.syncTheme({themeMode:r,themeVariables:i,w3mThemeVariables:(0,c.t)(i,r)}),N.setConnectors([e])}else N.setConnectors([e])},getAuthConnector(e){const t=e||m.R.state.activeChain,n=A.connectors.find(e=>e.id===a.b.CONNECTOR_ID.AUTH);if(n)return n?.connectors?.length?n.connectors.find(e=>e.chain===t):n},getAnnouncedConnectorRdns:()=>A.connectors.filter(e=>"ANNOUNCED"===e.type).map(e=>e.info?.rdns),getConnectorById:e=>u.C.sortConnectorsByPriority(A.allConnectors).find(t=>t.id===e),getConnector({id:e,namespace:t}){const n=t||m.R.state.activeChain,r=A.allConnectors.filter(e=>e.chain===n);return u.C.sortConnectorsByPriority(r).find(t=>t.id===e||t.explorerId===e)},syncIfAuthConnector(e){if("AUTH"!==e.id)return;const t=e,n=(0,s.CO)(b.h.state),r=v.u.getSnapshot().themeMode,i=v.u.getSnapshot().themeVariables;t?.provider?.syncDappData?.({metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),t.provider.syncTheme({themeMode:r,themeVariables:i,w3mThemeVariables:(0,c.t)(i,r)})},getConnectorsByNamespace(e){const t=A.allConnectors.filter(t=>t.chain===e);return N.mergeMultiChainConnectors(t)},canSwitchToSmartAccount:e=>m.R.checkIfSmartAccountEnabled()&&(0,d.r9)(e)===l.y_.ACCOUNT_TYPES.EOA,selectWalletConnector(e){const t=w.P.state.data.redirectView,n=m.R.state.activeChain,r=n?N.getConnector({id:e.id,namespace:n}):void 0;p.R.handleMobileDeeplinkRedirect(r?.explorerId||e.id,m.R.state.activeChain),r?w.P.push("ConnectingExternal",{connector:r,wallet:e,redirectView:t}):w.P.push("ConnectingWalletConnect",{wallet:e,redirectView:t})},getConnectors:e=>e?N.getConnectorsByNamespace(e):N.mergeMultiChainConnectors(A.allConnectors),setFilterByNamespace(e){A.filterByNamespace=e,A.connectors=N.getConnectors(e),g.Q.setFilterByNamespace(e)},setConnectorId(e,t){e&&(A.activeConnectorIds={...A.activeConnectorIds,[t]:e},h.M.setConnectedConnectorId(t,e))},removeConnectorId(e){A.activeConnectorIds={...A.activeConnectorIds,[e]:void 0},h.M.deleteConnectedConnectorId(e)},getConnectorId(e){if(e)return A.activeConnectorIds[e]},isConnected:e=>e?Boolean(A.activeConnectorIds[e]):Object.values(A.activeConnectorIds).some(e=>Boolean(e)),resetConnectorIds(){A.activeConnectorIds={...E}},extendConnectorsWithExplorerWallets(e){A.allConnectors.forEach(t=>{const n=e.find(e=>e.id===t.id||e.rdns&&e.rdns===t.info?.rdns);n&&(t.explorerWallet=n)});const t=N.getEnabledNamespaces(),n=N.getEnabledConnectors(t);A.connectors=N.mergeMultiChainConnectors(n)},connect:(e={})=>(0,r.Z)(function*(){const{namespace:t}=e;return N.setFilterByNamespace(t),w.P.push("Connect",{addWalletForNamespace:t}),new Promise((e,n)=>{if(t){const r=m.R.subscribeChainProp("accountState",t=>{t?.caipAddress&&(e({caipAddress:t?.caipAddress}),r())},t),s=y.I.subscribeKey("open",e=>{e||(n(new Error("Modal closed")),s())})}else{const t=m.R.subscribeKey("activeCaipAddress",n=>{n&&(e({caipAddress:n}),t())}),r=y.I.subscribeKey("open",e=>{e||(n(new Error("Modal closed")),r())})}})})()})},68886:function(e,t,n){"use strict";n.d(t,{X:function(){return p}});var r=n(23250),s=n(53574),i=n(44329),o=n(63908),a=n(32628);const c=s.j.getAnalyticsUrl(),l=new i.V({baseUrl:c,clientId:null}),d=["MODAL_CREATED"],u=(0,r.sj)({timestamp:Date.now(),lastFlush:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"},pendingEvents:[],subscribedToVisibilityChange:!1,walletImpressions:[]}),p={state:u,subscribe:e=>(0,r.Ld)(u,()=>e(u)),getSdkProperties(){const{projectId:e,sdkType:t,sdkVersion:n}=a.h.state;return{projectId:e,st:t,sv:n||"html-wagmi-4.2.2"}},shouldFlushEvents(){const e=JSON.stringify(u.pendingEvents).length/1024>45,t=u.lastFlush+1e4<Date.now();return e||t},_setPendingEvent(e){try{let t=o.R.getAccountData()?.address;if("address"in e.data&&e.data.address&&(t=e.data.address),d.includes(e.data.event)||"undefined"==typeof window)return;const n=o.R.getActiveCaipNetwork()?.caipNetworkId;this.state.pendingEvents.push({eventId:s.j.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:e.timestamp,props:{...e.data,address:t,properties:{..."properties"in e.data?e.data.properties:{},caipNetworkId:n}}}),u.reportedErrors.FORBIDDEN=!1,p.shouldFlushEvents()&&p._submitPendingEvents()}catch(t){console.warn("_setPendingEvent",t)}},sendEvent(e){u.timestamp=Date.now(),u.data=e,(a.h.state.features.analytics||["INITIALIZE","CONNECT_SUCCESS","SOCIAL_LOGIN_SUCCESS"].includes(e.event))&&p._setPendingEvent(u),this.subscribeToFlushTriggers()},sendWalletImpressionEvent(e){u.walletImpressions.push(e)},_transformPendingEventsForBatch(e){try{return e.filter(e=>"WALLET_IMPRESSION_V2"!==e.props.event)}catch{return e}},_submitPendingEvents(){if(u.lastFlush=Date.now(),0!==u.pendingEvents.length||0!==u.walletImpressions.length)try{const e=p._transformPendingEventsForBatch(u.pendingEvents);u.walletImpressions.length&&e.push({eventId:s.j.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:Date.now(),props:{type:"track",event:"WALLET_IMPRESSION_V2",items:[...u.walletImpressions]}}),l.sendBeacon({path:"/batch",params:p.getSdkProperties(),body:e}),u.reportedErrors.FORBIDDEN=!1,u.pendingEvents=[],u.walletImpressions=[]}catch{u.reportedErrors.FORBIDDEN=!0}},subscribeToFlushTriggers(){u.subscribedToVisibilityChange||"undefined"!=typeof document&&(u.subscribedToVisibilityChange=!0,document?.addEventListener?.("visibilitychange",()=>{"hidden"===document.visibilityState&&p._submitPendingEvents()}),document?.addEventListener?.("freeze",()=>{p._submitPendingEvents()}),window?.addEventListener?.("pagehide",()=>{p._submitPendingEvents()}),setInterval(()=>{p._submitPendingEvents()},1e4))}}},22167:function(e,t,n){"use strict";n.d(t,{I:function(){return w}});var r=n(8239),s=n(23250),i=n(31254),o=n(53574),a=n(72290),c=n(63908),l=n(27297),d=n(40378);const u={onSwitchNetwork({network:e,ignoreSwitchConfirmation:t=!1}){const n=c.R.state.activeChain,r=d.P.state.data;if(e.id===c.R.state.activeCaipNetwork?.id)return;const s=Boolean(c.R.getAccountData(n)?.address),i=Boolean(c.R.getAccountData(e.chainNamespace)?.address),o=e.chainNamespace!==n,u=l.A.getConnectorId(n)===a.b.CONNECTOR_ID.AUTH,p=a.b.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(t=>t===e.chainNamespace);t||u&&p?d.P.push("SwitchNetwork",{...r,network:e}):s&&o&&!i?d.P.push("SwitchActiveChain",{switchToChain:e.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:e}):d.P.push("SwitchNetwork",{...r,network:e})}};var p=n(79781),h=n(91951),f=n(7551),g=n(68886),m=n(32628),y=n(65298);const b=(0,s.sj)({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),w=(0,p.P)({state:b,subscribe:e=>(0,s.Ld)(b,()=>e(b)),subscribeKey:(e,t)=>(0,i.VW)(b,e,t),open:e=>(0,r.Z)(function*(){const t=e?.namespace,n=t&&t!==c.R.state.activeChain,r=c.R.getAccountData(e?.namespace)?.caipAddress,s=c.R.state.noAdapters;if(f.l.state.wcBasic?h.Q.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1,fetchWalletRanks:!1}):yield h.Q.prefetch(),l.A.setFilterByNamespace(e?.namespace),w.setLoading(!0,t),t&&n){const e=c.R.getNetworkData(t)?.caipNetwork||c.R.getRequestedCaipNetworks(t)[0];e&&(s?(yield c.R.switchActiveNetwork(e),d.P.push("ConnectingWalletConnectBasic")):u.onSwitchNetwork({network:e,ignoreSwitchConfirmation:!0}))}else m.h.state.manualWCControl||s&&!r?o.j.isMobile()?d.P.reset("AllWallets"):d.P.reset("ConnectingWalletConnectBasic"):e?.view?d.P.reset(e.view,e.data):d.P.reset(r?"Account":"Connect");b.open=!0,y.I.set({open:!0}),g.X.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:Boolean(r)}})})(),close(){const e=m.h.state.enableEmbedded,t=Boolean(c.R.state.activeCaipAddress);b.open&&g.X.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:t}}),b.open=!1,d.P.reset("Connect"),w.clearLoading(),e?t?d.P.replace("Account"):d.P.push("Connect"):y.I.set({open:!1}),f.l.resetUri()},setLoading(e,t){t&&b.loadingNamespaceMap.set(t,e),b.loading=e,y.I.set({loading:e})},clearLoading(){b.loadingNamespaceMap.clear(),b.loading=!1,y.I.set({loading:!1})},shake(){b.shake||(b.shake=!0,setTimeout(()=>{b.shake=!1},500))}})},32628:function(e,t,n){"use strict";n.d(t,{h:function(){return l}});var r=n(23250),s=n(31254),i=n(28153),o=n(53574),a=n(57564);const c=(0,r.sj)({features:i.bq.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:i.bq.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{},enableMobileFullScreen:!1,coinbasePreference:"all"}),l={state:c,subscribeKey:(e,t)=>(0,s.VW)(c,e,t),setOptions(e){Object.assign(c,e)},setRemoteFeatures(e){if(!e)return;const t={...c.remoteFeatures,...e};c.remoteFeatures=t,c.remoteFeatures?.socials&&(c.remoteFeatures.socials=a.$.filterSocialsByPlatform(c.remoteFeatures.socials)),c.features?.pay&&(c.remoteFeatures.email=!1,c.remoteFeatures.socials=!1)},setFeatures(e){if(!e)return;c.features||(c.features=i.bq.DEFAULT_FEATURES);const t={...c.features,...e};c.features=t,c.features?.pay&&c.remoteFeatures&&(c.remoteFeatures.email=!1,c.remoteFeatures.socials=!1)},setProjectId(e){c.projectId=e},setCustomRpcUrls(e){c.customRpcUrls=e},setAllWallets(e){c.allWallets=e},setIncludeWalletIds(e){c.includeWalletIds=e},setExcludeWalletIds(e){c.excludeWalletIds=e},setFeaturedWalletIds(e){c.featuredWalletIds=e},setTokens(e){c.tokens=e},setTermsConditionsUrl(e){c.termsConditionsUrl=e},setPrivacyPolicyUrl(e){c.privacyPolicyUrl=e},setCustomWallets(e){c.customWallets=e},setIsSiweEnabled(e){c.isSiweEnabled=e},setIsUniversalProvider(e){c.isUniversalProvider=e},setSdkVersion(e){c.sdkVersion=e},setMetadata(e){c.metadata=e},setDisableAppend(e){c.disableAppend=e},setEIP6963Enabled(e){c.enableEIP6963=e},setDebug(e){c.debug=e},setEnableWalletGuide(e){c.enableWalletGuide=e},setEnableAuthLogger(e){c.enableAuthLogger=e},setEnableWallets(e){c.enableWallets=e},setPreferUniversalLinks(e){c.experimental_preferUniversalLinks=e},setSIWX(e){if(e)for(const[t,n]of Object.entries(i.bq.SIWX_DEFAULTS))e[t]??(e[t]=n);c.siwx=e},setConnectMethodsOrder(e){c.features={...c.features,connectMethodsOrder:e}},setWalletFeaturesOrder(e){c.features={...c.features,walletFeaturesOrder:e}},setSocialsOrder(e){c.remoteFeatures={...c.remoteFeatures,socials:e}},setCollapseWallets(e){c.features={...c.features,collapseWallets:e}},setEnableEmbedded(e){c.enableEmbedded=e},setAllowUnsupportedChain(e){c.allowUnsupportedChain=e},setManualWCControl(e){c.manualWCControl=e},setEnableNetworkSwitch(e){c.enableNetworkSwitch=e},setEnableMobileFullScreen(e){c.enableMobileFullScreen=o.j.isMobile()&&e},setEnableReconnect(e){c.enableReconnect=e},setCoinbasePreference(e){c.coinbasePreference=e},setDefaultAccountTypes(e={}){Object.entries(e).forEach(([e,t])=>{t&&(c.defaultAccountTypes[e]=t)})},setUniversalProviderConfigOverride(e){c.universalProviderConfigOverride=e},getUniversalProviderConfigOverride:()=>c.universalProviderConfigOverride,getSnapshot:()=>(0,r.CO)(c)}},65023:function(e,t,n){"use strict";n.d(t,{O:function(){return a}});var r=n(23250),s=n(31254);const i={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0,sui:void 0,stacks:void 0,ton:void 0},o=(0,r.sj)({providers:{...i},providerIds:{...i}}),a={state:o,subscribeKey:(e,t)=>(0,s.VW)(o,e,t),subscribe:e=>(0,r.Ld)(o,()=>{e(o)}),subscribeProviders:e=>(0,r.Ld)(o.providers,()=>e(o.providers)),setProvider(e,t){e&&t&&(o.providers[e]=(0,r.iH)(t))},getProvider(e){if(e)return o.providers[e]},setProviderId(e,t){t&&(o.providerIds[e]=t)},getProviderId(e){if(e)return o.providerIds[e]},reset(){o.providers={...i},o.providerIds={...i}},resetChain(e){o.providers[e]=void 0,o.providerIds[e]=void 0}}},65298:function(e,t,n){"use strict";n.d(t,{I:function(){return o}});var r=n(23250),s=n(31254);const i=(0,r.sj)({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1,connectingWallet:void 0}),o={state:i,subscribe:e=>(0,r.Ld)(i,()=>e(i)),subscribeOpen:e=>(0,s.VW)(i,"open",e),set(e){Object.assign(i,{...i,...e})}}},40378:function(e,t,n){"use strict";n.d(t,{P:function(){return h}});var r=n(23250),s=n(31254),i=n(79781),o=n(91951),a=n(63908),c=n(27297),l=n(22167),d=n(32628);const u=["ConnectingExternal","ConnectingMultiChain","ConnectingSocial","ConnectingFarcaster"],p=(0,r.sj)({view:"Connect",history:["Connect"],transactionStack:[]}),h=(0,i.P)({state:p,subscribeKey:(e,t)=>(0,s.VW)(p,e,t),pushTransactionStack(e){p.transactionStack.push(e)},popTransactionStack(e){const t=p.transactionStack.pop();if(!t)return;const{onSuccess:n,onError:r,onCancel:s}=t;switch(e){case"success":n?.();break;case"error":r?.(),h.goBack();break;case"cancel":s?.(),h.goBack()}},push(e,t){let n=e,r=t;o.Q.state.plan.hasExceededUsageLimit&&u.includes(e)&&(n="UsageExceeded",r=void 0),n!==p.view&&(p.view=n,p.history.push(n),p.data=r)},reset(e,t){p.view=e,p.history=[e],p.data=t},replace(e,t){p.history.at(-1)===e||(p.view=e,p.history[p.history.length-1]=e,p.data=t)},goBack(){const e=a.R.state.activeCaipAddress,t=!e&&"ConnectingFarcaster"===h.state.view;if(p.history.length>1){p.history.pop();const[t]=p.history.slice(-1);t&&(p.view=e&&"Connect"===t?"Account":t)}else l.I.close();p.data?.wallet&&(p.data.wallet=void 0),p.data?.redirectView&&(p.data.redirectView=void 0),setTimeout(()=>{if(t){a.R.setAccountProp("farcasterUrl",void 0,a.R.state.activeChain);const e=c.A.getAuthConnector();e?.provider?.reload();const t=(0,r.CO)(d.h.state);e?.provider?.syncDappData?.({metadata:t.metadata,sdkVersion:t.sdkVersion,projectId:t.projectId,sdkType:t.sdkType})}},100)},goBackToIndex(e){if(p.history.length>1){p.history=p.history.slice(0,e+1);const[t]=p.history.slice(-1);t&&(p.view=t)}},goBackOrCloseModal(){h.state.history.length>1?h.goBack():l.I.close()}})},26131:function(e,t,n){"use strict";n.d(t,{S:function(){return A}});var r=n(8239),s=n(23250),i=n(31254),o=n(5546),a=n(86482),c=n(72290),l=n(64817),d=n(3628),u=n(56276),p=n(71166),h=n(28153),f=n(53574),g=n(44926),m=n(79781),y=n(63908),b=n(7551),w=n(68886),v=n(40378),E=n(56152);const C=(0,s.sj)({tokenBalances:[],loading:!1}),A=(0,m.P)({state:C,subscribe:e=>(0,s.Ld)(C,()=>e(C)),subscribeKey:(e,t)=>(0,i.VW)(C,e,t),setToken(e){e&&(C.token=(0,s.iH)(e))},setTokenAmount(e){C.sendTokenAmount=e},setReceiverAddress(e){C.receiverAddress=e},setReceiverProfileImageUrl(e){C.receiverProfileImageUrl=e},setReceiverProfileName(e){C.receiverProfileName=e},setNetworkBalanceInUsd(e){C.networkBalanceInUSD=e},setLoading(e){C.loading=e},getSdkEventProperties:e=>({message:f.j.parseError(e),isSmartAccount:(0,p.r9)(y.R.state.activeChain)===d.y_.ACCOUNT_TYPES.SMART_ACCOUNT,token:C.token?.symbol||"",amount:C.sendTokenAmount??0,network:y.R.state.activeCaipNetwork.caipNetworkId||""}),sendToken:()=>(0,r.Z)(function*(){try{switch(A.setLoading(!0),y.R.state.activeCaipNetwork.chainNamespace){case"eip155":return void(yield A.sendEvmToken());case"solana":return void(yield A.sendSolanaToken());default:throw new Error("Unsupported chain")}}catch(e){throw o.jD.isUserRejectedRequestError(e)?new o.ab(e):e}finally{A.setLoading(!1)}})(),sendEvmToken:()=>(0,r.Z)(function*(){const e=y.R.state.activeChain;if(!e)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const t=(0,p.r9)(e);if(!A.state.sendTokenAmount||!A.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!A.state.token)throw new Error("A token is required");if(A.state.token?.address){w.X.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:t===d.y_.ACCOUNT_TYPES.SMART_ACCOUNT,token:A.state.token.address,amount:A.state.sendTokenAmount,network:y.R.state.activeCaipNetwork.caipNetworkId||""}});const{hash:e}=yield A.sendERC20Token({receiverAddress:A.state.receiverAddress,tokenAddress:A.state.token.address,sendTokenAmount:A.state.sendTokenAmount,decimals:A.state.token.quantity.decimals});e&&(C.hash=e)}else{w.X.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:t===d.y_.ACCOUNT_TYPES.SMART_ACCOUNT,token:A.state.token.symbol||"",amount:A.state.sendTokenAmount,network:y.R.state.activeCaipNetwork.caipNetworkId||""}});const{hash:e}=yield A.sendNativeToken({receiverAddress:A.state.receiverAddress,sendTokenAmount:A.state.sendTokenAmount,decimals:A.state.token.quantity.decimals});e&&(C.hash=e)}})(),fetchTokenBalance:e=>(0,r.Z)(function*(){C.loading=!0;const t=y.R.state.activeCaipNetwork.caipNetworkId,n=y.R.state.activeCaipNetwork.chainNamespace,r=y.R.getAccountData(y.R.state.activeChain)?.caipAddress??y.R.state.activeCaipAddress,s=r?f.j.getPlainAddress(r):void 0;if(C.lastRetry&&!f.j.isAllowedRetry(C.lastRetry,30*h.bq.ONE_SEC_MS))return C.loading=!1,[];try{if(s&&t&&n){const e=yield u.Q.getMyTokensWithBalance();return C.tokenBalances=e,C.lastRetry=void 0,e}}catch(i){C.lastRetry=Date.now(),e?.(i),E.K.showError("Token Balance Unavailable")}finally{C.loading=!1}return[]})(),fetchNetworkBalance(){if(0===C.tokenBalances.length)return;const e=g.n.mapBalancesToSwapTokens(C.tokenBalances);if(!e)return;const t=e.find(e=>e.address===(0,p.EO)());!t||(C.networkBalanceInUSD=t?a.C.multiply(t.quantity.numeric,t.price).toString():"0")},sendNativeToken:e=>(0,r.Z)(function*(){v.P.pushTransactionStack({});const t=e.receiverAddress,n=y.R.getAccountData()?.address,r=b.l.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals)),s=yield b.l.sendTransaction({chainNamespace:c.b.CHAIN.EVM,to:t,address:n,data:"0x",value:r??BigInt(0)});return w.X.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:(0,p.r9)("eip155")===d.y_.ACCOUNT_TYPES.SMART_ACCOUNT,token:A.state.token?.symbol||"",amount:e.sendTokenAmount,network:y.R.state.activeCaipNetwork.caipNetworkId||"",hash:s||""}}),b.l._getClient()?.updateBalance("eip155"),A.resetSend(),{hash:s}})(),sendERC20Token:e=>(0,r.Z)(function*(){v.P.pushTransactionStack({onSuccess(){v.P.replace("Account")}});const t=b.l.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals)),n=y.R.getAccountData()?.address;if(n&&e.sendTokenAmount&&e.receiverAddress&&e.tokenAddress){const r=f.j.getPlainAddress(e.tokenAddress);if(!r)throw new Error("SendController:sendERC20Token - tokenAddress is required");const s=yield b.l.writeContract({fromAddress:n,tokenAddress:r,args:[e.receiverAddress,t??BigInt(0)],method:"transfer",abi:l.g.getERC20Abi(r),chainNamespace:c.b.CHAIN.EVM});return w.X.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:(0,p.r9)("eip155")===d.y_.ACCOUNT_TYPES.SMART_ACCOUNT,token:A.state.token?.symbol||"",amount:e.sendTokenAmount,network:y.R.state.activeCaipNetwork.caipNetworkId||"",hash:s||""}}),A.resetSend(),{hash:s}}return{hash:void 0}})(),sendSolanaToken:()=>(0,r.Z)(function*(){if(!A.state.sendTokenAmount||!A.state.receiverAddress)throw new Error("An amount and receiver address are required");let e;v.P.pushTransactionStack({onSuccess(){v.P.replace("Account")}}),A.state.token&&A.state.token.address!==h.bq.SOLANA_NATIVE_TOKEN_ADDRESS&&(e=f.j.isCaipAddress(A.state.token.address)?f.j.getPlainAddress(A.state.token.address):A.state.token.address);const t=yield b.l.sendTransaction({chainNamespace:"solana",tokenMint:e,to:A.state.receiverAddress,value:A.state.sendTokenAmount});t&&(C.hash=t),b.l._getClient()?.updateBalance("solana"),w.X.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:!1,token:A.state.token?.symbol||"",amount:A.state.sendTokenAmount,network:y.R.state.activeCaipNetwork.caipNetworkId||"",hash:t||""}}),A.resetSend()})(),resetSend(){C.token=void 0,C.sendTokenAmount=void 0,C.receiverAddress=void 0,C.receiverProfileImageUrl=void 0,C.receiverProfileName=void 0,C.loading=!1,C.tokenBalances=[]}})},56152:function(e,t,n){"use strict";n.d(t,{K:function(){return c}});var r=n(23250),s=n(31254),i=n(53574);const o=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),a=(0,r.sj)({...o}),c={state:a,subscribeKey:(e,t)=>(0,s.VW)(a,e,t),showLoading(e,t={}){this._showMessage({message:e,variant:"loading",...t})},showSuccess(e){this._showMessage({message:e,variant:"success"})},showSvg(e,t){this._showMessage({message:e,svg:t})},showError(e){const t=i.j.parseError(e);this._showMessage({message:t,variant:"error"})},hide(){a.message=o.message,a.variant=o.variant,a.svg=o.svg,a.open=o.open,a.autoClose=o.autoClose},_showMessage({message:e,svg:t,variant:n="success",autoClose:r=o.autoClose}){a.open?(a.open=!1,setTimeout(()=>{a.message=e,a.variant=n,a.svg=t,a.open=!0,a.autoClose=r},150)):(a.message=e,a.variant=n,a.svg=t,a.open=!0,a.autoClose=r)}}},50039:function(e,t,n){"use strict";n.d(t,{u:function(){return l}});var r=n(23250),s=n(84853),i=n(79781),o=n(27297);const a=(0,r.sj)({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),c={state:a,subscribe:e=>(0,r.Ld)(a,()=>e(a)),setThemeMode(e){a.themeMode=e;try{const t=o.A.getAuthConnector();if(t){const n=c.getSnapshot().themeVariables;t.provider.syncTheme({themeMode:e,themeVariables:n,w3mThemeVariables:(0,s.t)(n,e)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(e){a.themeVariables={...a.themeVariables,...e};try{const e=o.A.getAuthConnector();if(e){const t=c.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:t,w3mThemeVariables:(0,s.t)(a.themeVariables,a.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot:()=>(0,r.CO)(a)},l=(0,i.P)(c)},14568:function(e,t,n){"use strict";n.d(t,{f:function(){return u}});var r=n(8239),s=n(23250),i=n(72290),o=n(91951),a=n(92809),c=n(32628);const l={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:"",sui:"",stacks:"",ton:"20f673c0-095e-49b2-07cf-eb5049dcf600"},d=(0,s.sj)({networkImagePromises:{},tokenImagePromises:{}}),u={fetchWalletImage(e){var t=this;return(0,r.Z)(function*(){if(e)return yield o.Q._fetchWalletImage(e),t.getWalletImageById(e)})()},fetchNetworkImage(e){var t=this;return(0,r.Z)(function*(){if(e)return t.getNetworkImageById(e)||(d.networkImagePromises[e]||(d.networkImagePromises[e]=o.Q._fetchNetworkImage(e)),yield d.networkImagePromises[e],t.getNetworkImageById(e))})()},fetchTokenImage(e){var t=this;return(0,r.Z)(function*(){if(e)return d.tokenImagePromises[e]||(d.tokenImagePromises[e]=o.Q._fetchTokenImage(e)),yield d.tokenImagePromises[e],t.getTokenImage(e)})()},getWalletImageById(e){if(e)return a.W.state.walletImages[e]},getWalletImage:e=>e?.image_url?e?.image_url:e?.image_id?a.W.state.walletImages[e.image_id]:void 0,getNetworkImage:e=>e?.assets?.imageUrl?e?.assets?.imageUrl:e?.assets?.imageId?a.W.state.networkImages[e.assets.imageId]:void 0,getNetworkImageById(e){if(e)return a.W.state.networkImages[e]},getConnectorImage:e=>e?.imageUrl?e.imageUrl:e?.info?.icon?e.info.icon:e?.imageId?a.W.state.connectorImages[e.imageId]:void 0,getChainImage:e=>a.W.state.networkImages[l[e]],getTokenImage(e){if(e)return a.W.state.tokenImages[e]},getWalletImageUrl(e){if(!e)return"";const{projectId:t,sdkType:n,sdkVersion:r}=c.h.state,s=new URL(`${i.b.W3M_API_URL}/getWalletImage/${e}`);return s.searchParams.set("projectId",t),s.searchParams.set("st",n),s.searchParams.set("sv",r),s.toString()},getAssetImageUrl(e){if(!e)return"";const{projectId:t,sdkType:n,sdkVersion:r}=c.h.state,s=new URL(`${i.b.W3M_API_URL}/public/getAssetImage/${e}`);return s.searchParams.set("projectId",t),s.searchParams.set("st",n),s.searchParams.set("sv",r),s.toString()},getChainNamespaceImageUrl(e){return this.getAssetImageUrl(l[e])},getImageByToken:(e,t)=>(0,r.Z)(function*(){if("native"===e){const e=i.b.NATIVE_IMAGE_IDS_BY_NAMESPACE[t]??null;return e?u.fetchNetworkImage(e):void 0}const[,n]=Object.entries(i.b.TOKEN_SYMBOLS_BY_ADDRESS).find(([t])=>t.toLowerCase()===e.toLowerCase())??[];if(n)return u.fetchTokenImage(n)})()}},56276:function(e,t,n){"use strict";n.d(t,{Q:function(){return w}});var r=n(8239),s=n(62282),i=n(34063),o=n(72290),a=n(32750),c=n(71848),l=n(63908),d=n(7551),u=n(27297);const p={createBalance(e,t){const n={name:e.metadata.name||"",symbol:e.metadata.symbol||"",decimals:e.metadata.decimals||0,value:e.metadata.value||0,price:e.metadata.price||0,iconUrl:e.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:t,address:"native"===e.address?void 0:this.convertAddressToCAIP10Address(e.address,t),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:e.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance:({hex:e,decimals:t})=>(0,i.b)(BigInt(e),t),convertAddressToCAIP10Address:(e,t)=>`${t}:${e}`,createCAIP2ChainId:(e,t)=>`${t}:${parseInt(e,16)}`,getChainIdHexFromCAIP2ChainId(e){const t=e.split(":");if(t.length<2||!t[1])return"0x0";const n=parseInt(t[1],10);return isNaN(n)?"0x0":`0x${n.toString(16)}`},isWalletGetAssetsResponse(e){return"object"==typeof e&&null!==e&&Object.values(e).every(e=>Array.isArray(e)&&e.every(e=>this.isValidAsset(e)))},isValidAsset:e=>"object"==typeof e&&null!==e&&"string"==typeof e.address&&"string"==typeof e.balance&&("ERC20"===e.type||"NATIVE"===e.type)&&"object"==typeof e.metadata&&null!==e.metadata&&"string"==typeof e.metadata.name&&"string"==typeof e.metadata.symbol&&"number"==typeof e.metadata.decimals&&"number"==typeof e.metadata.price&&"string"==typeof e.metadata.iconUrl};var h=n(42916),f=n(32628);let g;function m(){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)(function*(){if(!g){const{createPublicClient:e,http:t,defineChain:r}=yield n.e(7662).then(n.bind(n,57662));g={createPublicClient:e,http:t,defineChain:r}}return g})).apply(this,arguments)}const b={getBlockchainApiRpcUrl(e,t){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",e),n.searchParams.set("projectId",t),n.toString()},getViemChain:e=>(0,r.Z)(function*(){const{defineChain:t}=yield m(),{chainId:n}=a.u.parseCaipNetworkId(e.caipNetworkId);return t({...e,id:Number(n)})})(),createViemPublicClient:e=>(0,r.Z)(function*(){const{createPublicClient:t,http:n}=yield m(),r=f.h.state.projectId,s=yield b.getViemChain(e);if(!s)throw new Error(`Chain ${e.caipNetworkId} not found in viem/chains`);return t({chain:s,transport:n(b.getBlockchainApiRpcUrl(e.caipNetworkId,r))})})()},w={getMyTokensWithBalance(e={forceUpdate:void 0,caipNetwork:l.R.state.activeCaipNetwork,address:l.R.getAccountData()?.address}){var t=this;return(0,r.Z)(function*(){const{forceUpdate:n,caipNetwork:r,address:s}=e,i=u.A.getConnectorId("eip155")===o.b.CONNECTOR_ID.AUTH;if(!s)return[];const a=h.M.getBalanceCacheForCaipAddress(r?`${r.caipNetworkId}:${s}`:s);if(a)return a.balances;if(r&&r.chainNamespace===o.b.CHAIN.EVM&&i){const e=yield t.getEIP155Balances(s,r);if(e)return t.filterLowQualityTokens(e)}const l=yield c.L.getBalance(s,r?.caipNetworkId,n);return t.filterLowQualityTokens(l.balances)})()},getEIP155Balances:(e,t)=>(0,r.Z)(function*(){try{const n=p.getChainIdHexFromCAIP2ChainId(t.caipNetworkId);if(!(yield d.l.getCapabilities(e))?.[n]?.assetDiscovery?.supported)return null;const r=yield d.l.walletGetAssets({account:e,chainFilter:[n]});if(!p.isWalletGetAssetsResponse(r))return null;const s=(r[n]||[]).map(e=>p.createBalance(e,t.caipNetworkId));return h.M.updateBalanceCache({caipAddress:`${t.caipNetworkId}:${e}`,balance:{balances:s},timestamp:Date.now()}),s}catch{return null}})(),filterLowQualityTokens:e=>e.filter(e=>"0"!==e.quantity.decimals),fetchERC20Balance:({caipAddress:e,assetAddress:t,caipNetwork:n})=>(0,r.Z)(function*(){const r=yield b.createViemPublicClient(n),{address:o}=a.u.parseCaipAddress(e),[{result:c},{result:l},{result:d},{result:u}]=yield r.multicall({contracts:[{address:t,functionName:"name",args:[],abi:s.Wo},{address:t,functionName:"symbol",args:[],abi:s.Wo},{address:t,functionName:"balanceOf",args:[o],abi:s.Wo},{address:t,functionName:"decimals",args:[],abi:s.Wo}]});return{name:c,symbol:l,decimals:u,balance:d&&u?(0,i.b)(d,u):"0"}})()}},71166:function(e,t,n){"use strict";n.d(t,{EO:function(){return i},rG:function(){return o},r9:function(){return a},eq:function(){return c}});var r=n(63908),s=n(28153);function i(){const e=r.R.state.activeCaipNetwork.chainNamespace||"eip155";return`${e}:${r.R.state.activeCaipNetwork.id||1}:${s.bq.NATIVE_TOKEN_ADDRESS[e]}`}function o(e){return s.bq.NATIVE_TOKEN_ADDRESS[e]}function a(e){return r.R.getAccountData(e)?.preferredAccountType}function c(e){return e?r.R.state.chains.get(e)?.networkState?.caipNetwork:r.R.state.activeCaipNetwork}},15563:function(e,t,n){"use strict";n.d(t,{f:function(){return c}});var r=n(7551),s=n(27297),i=n(68886),o=n(32628),a=n(53574);const c={getConnectionStatus(e,t){const n=s.A.state.activeConnectorIds[t],i=r.l.getConnections(t);return Boolean(n)&&e.connectorId===n?"connected":i.some(t=>t.connectorId.toLowerCase()===e.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections:({connections:e,connectorId:t,addresses:n})=>e.map(e=>{if(t&&e.connectorId.toLowerCase()===t.toLowerCase()&&n){const t=e.accounts.filter(e=>!n.some(t=>t.toLowerCase()===e.address.toLowerCase()));return{...e,accounts:t}}return e}),excludeExistingConnections(e,t){const n=new Set(e);return t.filter(e=>!n.has(e.connectorId))},getConnectionsByConnectorId:(e,t)=>e.filter(e=>e.connectorId.toLowerCase()===t.toLowerCase()),getConnectionsData(e){const t=Boolean(o.h.state.remoteFeatures.multiWallet),n=s.A.state.activeConnectorIds[e],i=r.l.getConnections(e),a=(r.l.state.recentConnections.get(e)??[]).filter(e=>s.A.getConnectorById(e.connectorId)),l=c.excludeExistingConnections([...i.map(e=>e.connectorId),...n?[n]:[]],a);return t?{connections:i,recentConnections:l}:{connections:i.filter(e=>e.connectorId.toLowerCase()===n?.toLowerCase()),recentConnections:[]}},onConnectMobile(e){const t=r.l.state.wcUri;if(e?.mobile_link&&t)try{r.l.setWcError(!1);const{mobile_link:n,link_mode:s,name:i}=e,{redirect:c,redirectUniversalLink:l,href:d}=a.j.formatNativeUrl(n,t,s),u=c,p=l,h=a.j.isIframe()?"_top":"_self";r.l.setWcLinking({name:i,href:d}),r.l.setRecentWallet(e),a.j.openHref(o.h.state.experimental_preferUniversalLinks&&p?p:u,h)}catch(n){i.X.sendEvent({type:"track",event:"CONNECT_PROXY_ERROR",properties:{message:n instanceof Error?n.message:"Error parsing the deep link",uri:t,mobile_link:e.mobile_link,name:e.name}}),r.l.setWcError(!0)}}}},38720:function(e,t,n){"use strict";n.d(t,{C:function(){return g}});var r=n(8239),s=n(67933),i=n(72290),o=n(91951),a=n(63908),c=n(7551),l=n(27297),d=n(32628),u=n(53574),p=n(57564),h=n(42916),f=n(97088);const g={getConnectorsByType(e,t,n){const{customWallets:r}=d.h.state,s=h.M.getRecentWallets(),i=f.J.filterOutDuplicateWallets(t),o=f.J.filterOutDuplicateWallets(n),a=e.filter(e=>"MULTI_CHAIN"===e.type),c=e.filter(e=>"ANNOUNCED"===e.type),l=e.filter(e=>"INJECTED"===e.type);return{custom:r,recent:s,external:e.filter(e=>"EXTERNAL"===e.type),multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(e){const t=e.info?.rdns,n=Boolean(t)&&o.Q.state.excludedWallets.some(e=>Boolean(e.rdns)&&e.rdns===t),r=Boolean(e.name)&&o.Q.state.excludedWallets.some(t=>s.g.isLowerCaseMatch(t.name,e.name));return!("INJECTED"===e.type&&("Browser Wallet"===e.name&&(!u.j.isMobile()||u.j.isMobile()&&!t&&!c.l.checkInstalled())||n||r)||("ANNOUNCED"===e.type||"EXTERNAL"===e.type)&&(n||r))},getIsConnectedWithWC:()=>Array.from(a.R.state.chains.values()).some(e=>l.A.getConnectorId(e.namespace)===i.b.CONNECTOR_ID.WALLET_CONNECT),getConnectorTypeOrder({recommended:e,featured:t,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=d.h.state.features.connectorTypeOrder??[]}){const l=[{type:"walletConnect",isEnabled:!0},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:t.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:e.length>0}].filter(e=>e.isEnabled),u=new Set(l.map(e=>e.type)),p=c.filter(e=>u.has(e)).map(e=>({type:e,isEnabled:!0})),h=l.filter(({type:e})=>!p.some(({type:t})=>t===e));return Array.from(new Set([...p,...h].map(({type:e})=>e)))},sortConnectorsByExplorerWallet:e=>[...e].sort((e,t)=>e.explorerWallet&&t.explorerWallet?(e.explorerWallet.order??0)-(t.explorerWallet.order??0):e.explorerWallet?-1:t.explorerWallet?1:0),getPriority:e=>e.id===i.b.CONNECTOR_ID.BASE_ACCOUNT?0:e.id===i.b.CONNECTOR_ID.COINBASE||e.id===i.b.CONNECTOR_ID.COINBASE_SDK?1:2,sortConnectorsByPriority:e=>[...e].sort((e,t)=>g.getPriority(e)-g.getPriority(t)),getAuthName:({email:e,socialUsername:t,socialProvider:n})=>t?n&&"discord"===n&&t.endsWith("0")?t.slice(0,-1):t:e.length>30?`${e.slice(0,-3)}...`:e,fetchProviderData:e=>(0,r.Z)(function*(){try{if("Browser Wallet"===e.name&&!u.j.isMobile())return{accounts:[],chainId:void 0};if(e.id===i.b.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[t,n]=yield Promise.all([e.provider?.request({method:"eth_accounts"}),e.provider?.request({method:"eth_chainId"}).then(e=>Number(e))]);return{accounts:t,chainId:n}}catch(t){return console.warn(`Failed to fetch provider data for ${e.name}`,t),{accounts:[],chainId:void 0}}})(),getFilteredCustomWallets(e){const t=h.M.getRecentWallets(),n=l.A.state.connectors.map(e=>e.info?.rdns).filter(Boolean),r=t.map(e=>e.rdns).filter(Boolean),s=n.concat(r);if(s.includes("io.metamask.mobile")&&u.j.isMobile()){const e=s.indexOf("io.metamask.mobile");s[e]="io.metamask"}return e.filter(e=>!s.includes(String(e?.rdns)))},hasWalletConnector:e=>l.A.state.connectors.some(t=>t.id===e.id||t.name===e.name),isWalletCompatibleWithCurrentChain(e){const t=a.R.state.activeChain;return!t||!e.chains||e.chains.some(e=>{const n=e.split(":")[0];return t===n})},getFilteredRecentWallets(){return h.M.getRecentWallets().filter(e=>!f.J.isExcluded(e)).filter(e=>!this.hasWalletConnector(e)).filter(e=>this.isWalletCompatibleWithCurrentChain(e))},getCappedRecommendedWallets(e){const{connectors:t}=l.A.state,{customWallets:n,featuredWalletIds:r}=d.h.state,s=t.find(e=>"walletConnect"===e.id),i=t.filter(e=>"INJECTED"===e.type||"ANNOUNCED"===e.type||"MULTI_CHAIN"===e.type);if(!s&&!i.length&&!n?.length)return[];const o=p.$.isEmailEnabled(),a=p.$.isSocialsEnabled(),c=i.filter(e=>"Browser Wallet"!==e.name&&"WalletConnect"!==e.name),u=Math.max(0,4-((r?.length||0)+(n?.length||0)+(c.length||0)+(o?1:0)+(a?1:0)));return u<=0?[]:f.J.filterOutDuplicateWallets(e).slice(0,u)},processConnectorsByType(e,t=!0){const n=g.sortConnectorsByExplorerWallet([...e]);return t?n.filter(g.showConnector):n},connectorList(){const e=g.getConnectorsByType(l.A.state.connectors,o.Q.state.recommended,o.Q.state.featured),t=this.processConnectorsByType(e.announced.filter(e=>"walletConnect"!==e.id)),n=this.processConnectorsByType(e.injected),r=this.processConnectorsByType(e.multiChain.filter(e=>"WalletConnect"!==e.name),!1),s=e.custom,a=e.recent,c=this.processConnectorsByType(e.external.filter(e=>e.id!==i.b.CONNECTOR_ID.COINBASE_SDK&&e.id!==i.b.CONNECTOR_ID.BASE_ACCOUNT)),d=e.recommended,p=e.featured,h=g.getConnectorTypeOrder({custom:s,recent:a,announced:t,injected:n,multiChain:r,recommended:d,featured:p,external:c}),f=l.A.state.connectors.find(e=>"walletConnect"===e.id),m=u.j.isMobile(),y=[];for(const i of h)switch(i){case"walletConnect":!m&&f&&y.push({kind:"connector",subtype:"walletConnect",connector:f});break;case"recent":g.getFilteredRecentWallets().forEach(e=>y.push({kind:"wallet",subtype:"recent",wallet:e}));break;case"injected":r.forEach(e=>y.push({kind:"connector",subtype:"multiChain",connector:e})),t.forEach(e=>y.push({kind:"connector",subtype:"announced",connector:e})),n.forEach(e=>y.push({kind:"connector",subtype:"injected",connector:e}));break;case"featured":p.forEach(e=>y.push({kind:"wallet",subtype:"featured",wallet:e}));break;case"custom":g.getFilteredCustomWallets(s??[]).forEach(e=>y.push({kind:"wallet",subtype:"custom",wallet:e}));break;case"external":c.forEach(e=>y.push({kind:"connector",subtype:"external",connector:e}));break;case"recommended":g.getCappedRecommendedWallets(d).forEach(e=>y.push({kind:"wallet",subtype:"recommended",wallet:e}));break;default:console.warn(`Unknown connector type: ${i}`)}return y},hasInjectedConnectors:()=>l.A.state.connectors.filter(e=>("INJECTED"===e.type||"ANNOUNCED"===e.type||"MULTI_CHAIN"===e.type)&&"Browser Wallet"!==e.name&&"WalletConnect"!==e.name).length}},28153:function(e,t,n){"use strict";n.d(t,{bq:function(){return c},a$:function(){return a},gy:function(){return o}});var r=n(72290);const s={ConnectorExplorerIds:{[r.b.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[r.b.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[r.b.CONNECTOR_ID.BASE_ACCOUNT]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[r.b.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[r.b.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[r.b.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[r.b.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[r.b.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[r.b.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[r.b.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[r.b.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[r.b.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[r.b.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[r.b.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[r.b.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[r.b.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[r.b.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13",[r.b.OKX_CONNECTOR_NAME]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[r.b.BINANCE_CONNECTOR_NAME]:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200","00000008819873e925422c1ff0f99f7c":"b3406e4a-bbfc-44fb-e3a6-89673c78b700","-239":"20f673c0-095e-49b2-07cf-eb5049dcf600","-3":"20f673c0-095e-49b2-07cf-eb5049dcf600"},ConnectorImageIds:{[r.b.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[r.b.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[r.b.CONNECTOR_ID.BASE_ACCOUNT]:"bba2c8be-7fd1-463e-42b1-796ecb0ad200",[r.b.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[r.b.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[r.b.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[r.b.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[r.b.CONNECTOR_ID.INJECTED]:"Browser Wallet",[r.b.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[r.b.CONNECTOR_ID.COINBASE]:"Coinbase",[r.b.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[r.b.CONNECTOR_ID.BASE_ACCOUNT]:"Base Account",[r.b.CONNECTOR_ID.LEDGER]:"Ledger",[r.b.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[r.b.CONNECTOR_ID.INJECTED]:"INJECTED",[r.b.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[r.b.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[r.b.CONNECTOR_ID.AUTH]:"AUTH"},WalletConnectRpcChainIds:[1,5,11155111,10,420,42161,421613,137,80001,42220,1313161554,1313161555,56,97,43114,43113,100,8453,84531,7777777,999,324,280]},i=("undefined"!=typeof process&&void 0!==process.env?process.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",o=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],a="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",c={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:i,SECURE_SITE_DASHBOARD:`${i}/dashboard`,SECURE_SITE_FAVICON:`${i}/images/favicon.png`,SOLANA_NATIVE_TOKEN_ADDRESS:"So11111111111111111111111111111111111111111",RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],SUGGESTED_TOKENS_BY_CHAIN:{"eip155:42161":["USD\u20ae0"]},BALANCE_SUPPORTED_CHAINS:[r.b.CHAIN.EVM,r.b.CHAIN.SOLANA],SEND_PARAMS_SUPPORTED_CHAINS:[r.b.CHAIN.EVM],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[r.b.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[r.b.CHAIN.EVM,r.b.CHAIN.SOLANA],PAY_WITH_EXCHANGE_SUPPORTED_CHAIN_NAMESPACES:[r.b.CHAIN.EVM,r.b.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[r.b.CHAIN.EVM,r.b.CHAIN.TON],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x",sui:"0x",stacks:"0x",ton:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[r.b.CHAIN.EVM,r.b.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1,emailCapture:!1,payWithExchange:!1,payments:!1,reownAuthentication:!1,headless:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1,emailCapture:!1,reownAuthentication:!1,headless:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1,reownAuthentication:!1,headless:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa",ton:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0},MANDATORY_WALLET_IDS_ON_MOBILE:[s.ConnectorExplorerIds[r.b.CONNECTOR_ID.COINBASE],s.ConnectorExplorerIds[r.b.CONNECTOR_ID.COINBASE_SDK],s.ConnectorExplorerIds[r.b.CONNECTOR_ID.BASE_ACCOUNT],s.ConnectorExplorerIds[r.b.SOLFLARE_CONNECTOR_NAME],s.ConnectorExplorerIds[r.b.PHANTOM_CONNECTOR_NAME],s.ConnectorExplorerIds[r.b.BINANCE_CONNECTOR_NAME]],DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]}},53574:function(e,t,n){"use strict";n.d(t,{j:function(){return a}});var r=n(8239),s=n(72290),i=n(28153),o=n(42916);const a={getWindow(){if("undefined"!=typeof window)return window},isMobile(){return!!this.isClient()&&Boolean(window?.matchMedia&&"function"==typeof window.matchMedia&&window.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent))},checkCaipNetwork:(e,t="")=>e?.caipNetworkId.toLocaleLowerCase().includes(t.toLowerCase()),isAndroid(){if(!this.isMobile())return!1;const e=window?.navigator.userAgent.toLowerCase();return a.isMobile()&&e.includes("android")},isIos(){if(!this.isMobile())return!1;const e=window?.navigator.userAgent.toLowerCase();return e.includes("iphone")||e.includes("ipad")},isSafari(){return!!this.isClient()&&window?.navigator.userAgent.toLowerCase().includes("safari")},isClient:()=>"undefined"!=typeof window,isPairingExpired:e=>!e||e-Date.now()<=i.bq.TEN_SEC_MS,isAllowedRetry:(e,t=i.bq.ONE_SEC_MS)=>Date.now()-e>=t,copyToClopboard(e){navigator.clipboard.writeText(e)},isIframe(){try{return window?.self!==window?.top}catch{return!1}},isSafeApp(){if(a.isClient()&&window.self!==window.top)try{const e=window?.location?.ancestorOrigins?.[0],t="https://app.safe.global";if(e){const n=new URL(e),r=new URL(t);return n.hostname===r.hostname}}catch{return!1}return!1},getPairingExpiry:()=>Date.now()+i.bq.FOUR_MINUTES_MS,getNetworkId:e=>e?.split(":")[1],getPlainAddress:e=>e?.split(":")[2],wait:e=>(0,r.Z)(function*(){return new Promise(t=>{setTimeout(t,e)})})(),debounce(e,t=500){let n;return(...r)=>{n&&clearTimeout(n),n=setTimeout(function(){e(...r)},t)}},isHttpUrl:e=>e.startsWith("http://")||e.startsWith("https://"),formatNativeUrl(e,t,n=null){if(a.isHttpUrl(e))return this.formatUniversalUrl(e,t);let r=e,s=n;r.includes("://")||(r=e.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!s?.endsWith("/")&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(t=encodeURIComponent(t));const i=encodeURIComponent(t);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(e,t){if(!a.isHttpUrl(e))return this.formatNativeUrl(e,t);let n=e;return n.endsWith("/")||(n=`${n}/`),{redirect:`${n}wc?uri=${encodeURIComponent(t)}`,href:n}},getOpenTargetForPlatform(e){return"popupWindow"===e?e:this.isTelegram()?o.M.getTelegramSocialProvider()?"_top":"_blank":e},openHref(e,t,n){window?.open(e,this.getOpenTargetForPlatform(t),n||"noreferrer noopener")},returnOpenHref(e,t,n){return window?.open(e,this.getOpenTargetForPlatform(t),n||"noreferrer noopener")},isTelegram:()=>"undefined"!=typeof window&&(Boolean(window.TelegramWebviewProxy)||Boolean(window.Telegram)||Boolean(window.TelegramWebviewProxyProto)),isPWA(){if("undefined"==typeof window)return!1;const e=!(!window?.matchMedia||"function"!=typeof window.matchMedia)&&window.matchMedia("(display-mode: standalone)")?.matches,t=window?.navigator?.standalone;return Boolean(e||t)},preloadImage:e=>(0,r.Z)(function*(){const t=new Promise((t,n)=>{const r=new Image;r.onload=t,r.onerror=n,r.crossOrigin="anonymous",r.src=e});return Promise.race([t,a.wait(2e3)])})(),parseBalance(e,t){let n="0.000";if("string"==typeof e){const t=Number(e);if(!isNaN(t)){const e=(Math.floor(1e3*t)/1e3).toFixed(3);e&&(n=e)}}const[r,s]=n.split("."),i=r||"0",o=s||"000";return{formattedText:`${i}.${o}${t?` ${t}`:""}`,value:i,decimals:o,symbol:t}},getApiUrl:()=>s.b.W3M_API_URL,getBlockchainApiUrl:()=>s.b.BLOCKCHAIN_API_RPC_URL,getAnalyticsUrl:()=>s.b.PULSE_API_URL,getUUID:()=>crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),parseError:e=>"string"==typeof e?e:"string"==typeof e?.issues?.[0]?.message?e.issues[0].message:e instanceof Error?e.message:"Unknown error",sortRequestedNetworks(e,t=[]){const n={};return t&&e&&(e.forEach((e,t)=>{n[e]=t}),t.sort((e,t)=>{const r=n[e.id],s=n[t.id];return void 0!==r&&void 0!==s?r-s:void 0!==r?-1:void 0!==s?1:0})),t},calculateBalance(e){let t=0;for(const n of e)t+=n.value??0;return t},formatTokenBalance(e){const t=e.toFixed(2),[n,r]=t.split(".");return{dollars:n,pennies:r}},isAddress(e,t="eip155"){switch(t){case"eip155":return!(!/^(?:0x)?[0-9a-f]{40}$/iu.test(e)||!/^(?:0x)?[0-9a-f]{40}$/iu.test(e)&&!/^(?:0x)?[0-9A-F]{40}$/iu.test(e));case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(e);case"bip122":{const t=/^[1][a-km-zA-HJ-NP-Z1-9]{25,34}$/u.test(e),n=/^[3][a-km-zA-HJ-NP-Z1-9]{25,34}$/u.test(e),r=/^bc1[a-z0-9]{39,87}$/u.test(e),s=/^bc1p[a-z0-9]{58}$/u.test(e);return t||n||r||s}default:return!1}},uniqueBy(e,t){const n=new Set;return e.filter(e=>{const r=e[t];return!n.has(r)&&(n.add(r),!0)})},generateSdkVersion:(e,t,n)=>`${t}-${0===e.length?i.bq.ADAPTER_TYPES.UNIVERSAL:e.map(e=>e.adapterType).join(",")}-${n}`,createAccount:(e,t,n,r,s)=>({namespace:e,address:t,type:n,publicKey:r,path:s}),isCaipAddress(e){if("string"!=typeof e)return!1;const t=e.split(":"),n=t[0];return 3===t.filter(Boolean).length&&n in s.b.CHAIN_NAME_MAP},getAccount:e=>e?"string"==typeof e?{address:e,chainId:void 0}:{address:e.address,chainId:e.chainId}:{address:void 0,chainId:void 0},isMac(){const e=window?.navigator.userAgent.toLowerCase();return e.includes("macintosh")&&!e.includes("safari")},formatTelegramSocialLoginUrl(e){const t=`--${encodeURIComponent(window?.location.href)}`,n="state=";if("auth.magic.link"===new URL(e).host){const r="provider_authorization_url=",s=e.substring(e.indexOf(r)+r.length),i=this.injectIntoUrl(decodeURIComponent(s),n,t);return e.replace(s,encodeURIComponent(i))}return this.injectIntoUrl(e,n,t)},injectIntoUrl(e,t,n){const r=e.indexOf(t);if(-1===r)throw new Error(`${t} parameter not found in the URL: ${e}`);const s=e.indexOf("&",r),i=t.length,o=-1!==s?s:e.length;return e.substring(0,r+i)+(e.substring(r+i,o)+n)+e.substring(s)},isNumber:e=>("number"==typeof e||"string"==typeof e)&&!isNaN(Number(e))}},44329:function(e,t,n){"use strict";n.d(t,{V:function(){return o}});var r=n(8239);function s(){return i.apply(this,arguments)}function i(){return(i=(0,r.Z)(function*(...e){const t=yield fetch(...e);if(!t.ok)throw new Error(`HTTP status code: ${t.status}`,{cause:t});return t})).apply(this,arguments)}class o{constructor({baseUrl:e,clientId:t}){this.baseUrl=e,this.clientId=t}get({headers:e,signal:t,cache:n,...i}){var o=this;return(0,r.Z)(function*(){const r=o.createUrl(i);return(yield s(r,{method:"GET",headers:e,signal:t,cache:n})).json()})()}getBlob({headers:e,signal:t,...n}){var i=this;return(0,r.Z)(function*(){const r=i.createUrl(n);return(yield s(r,{method:"GET",headers:e,signal:t})).blob()})()}post({body:e,headers:t,signal:n,...i}){var o=this;return(0,r.Z)(function*(){const r=o.createUrl(i);return(yield s(r,{method:"POST",headers:t,body:e?JSON.stringify(e):void 0,signal:n})).json()})()}put({body:e,headers:t,signal:n,...i}){var o=this;return(0,r.Z)(function*(){const r=o.createUrl(i);return(yield s(r,{method:"PUT",headers:t,body:e?JSON.stringify(e):void 0,signal:n})).json()})()}delete({body:e,headers:t,signal:n,...i}){var o=this;return(0,r.Z)(function*(){const r=o.createUrl(i);return(yield s(r,{method:"DELETE",headers:t,body:e?JSON.stringify(e):void 0,signal:n})).json()})()}createUrl({path:e,params:t}){const n=new URL(e,this.baseUrl);return t&&Object.entries(t).forEach(([e,t])=>{t&&n.searchParams.append(e,t)}),this.clientId&&n.searchParams.append("clientId",this.clientId),n}sendBeacon({body:e,...t}){const n=this.createUrl(t);return navigator.sendBeacon(n.toString(),e?JSON.stringify(e):void 0)}}},67529:function(e,t,n){"use strict";n.d(t,{m:function(){return i},R:function(){return o}});var r=n(72290),s=n(63908);const i={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"},BINANCE:{id:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25",appId:"yFK5FCqYprrXDiVFbhyRx7",deeplink:"bnc://app.binance.com/mp/app",url:"https://app.binance.com/en/download"}},o={handleMobileDeeplinkRedirect(e,t){const n=window.location.href,o=encodeURIComponent(n);if(e===i.PHANTOM.id&&!("phantom"in window)){const e=n.startsWith("https")?"https":"http",t=n.split("/")[2],r=encodeURIComponent(`${e}://${t}`);window.location.href=`${i.PHANTOM.url}/ul/browse/${o}?ref=${r}`}if(e===i.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${i.SOLFLARE.url}/ul/v1/browse/${o}?ref=${o}`),t===r.b.CHAIN.SOLANA&&e===i.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${i.COINBASE.url}/dapp?cb_url=${o}`),t===r.b.CHAIN.BITCOIN&&e===i.BINANCE.id&&!("binancew3w"in window)){const e=s.R.state.activeCaipNetwork,t=window.btoa("/pages/browser/index"),n=window.btoa(`url=${o}&defaultChainId=${e?.id??1}`),r=new URL(i.BINANCE.deeplink);r.searchParams.set("appId",i.BINANCE.appId),r.searchParams.set("startPagePath",t),r.searchParams.set("startPageQuery",n);const a=new URL(i.BINANCE.url);a.searchParams.set("_dp",window.btoa(r.toString())),window.location.href=a.toString()}}}},57564:function(e,t,n){"use strict";n.d(t,{$:function(){return o}});var r=n(32628),s=n(28153),i=n(53574);const o={getFeatureValue(e,t){const n=t?.[e];return void 0===n?s.bq.DEFAULT_FEATURES[e]:n},filterSocialsByPlatform(e){if(!e||!e.length)return e;let t=e;return i.j.isTelegram()&&(i.j.isIos()&&(t=t.filter(e=>"google"!==e)),i.j.isMac()&&(t=t.filter(e=>"x"!==e)),i.j.isAndroid()&&(t=t.filter(e=>!["facebook","x"].includes(e)))),i.j.isMobile()&&(t=t.filter(e=>"facebook"!==e)),t},isSocialsEnabled:()=>Array.isArray(r.h.state.features.socials)&&r.h.state.features.socials.length>0||Array.isArray(r.h.state.remoteFeatures.socials)&&r.h.state.remoteFeatures.socials.length>0,isEmailEnabled:()=>Boolean(r.h.state.features.email||r.h.state.remoteFeatures.email)}},69419:function(e,t,n){"use strict";n.d(t,{w:function(){return b}});var r=n(8239),s=(n(15863),n(32750)),i=n(72290),o=n(3628),a=n(63908),c=n(7551),l=n(27297),d=n(68886),u=n(22167),p=n(32628),h=n(40378),f=n(56152),g=n(71166),m=n(53574);let y=null;const b={getSIWX:()=>p.h.state.siwx,initializeIfEnabled(e=a.R.getActiveCaipAddress()){var t=this;return(0,r.Z)(function*(){const n=p.h.state.siwx;if(!n||!e)return;const[r,s,i]=e.split(":");if(a.R.checkIfSupportedNetwork(r,`${r}:${s}`))try{if(p.h.state.remoteFeatures.emailCapture){const e=a.R.getAccountData(r)?.user;return void(yield u.I.open({view:"DataCapture",data:{email:e?.email??void 0}}))}if(y&&(yield y),(yield n.getSessions(`${r}:${s}`,i)).length)return;yield u.I.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),d.X.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:t.getSIWXEventProperties(o)}),yield c.l._getClient()?.disconnect().catch(console.error),h.P.reset("Connect"),f.K.showError("A problem occurred while trying initialize authentication")}})()},isAuthenticated:(e=a.R.getActiveCaipAddress())=>(0,r.Z)(function*(){if(!p.h.state.siwx||!e)return!0;const{chainNamespace:t,chainId:n,address:r}=s.u.parseCaipAddress(e),i=`${t}:${n}`;return(yield b.getSessions({address:r,caipNetworkId:i})).length>0})(),requestSignMessage(){var e=this;return(0,r.Z)(function*(){const t=p.h.state.siwx,n=m.j.getPlainAddress(a.R.getActiveCaipAddress()),r=(0,g.eq)();if(!t)throw new Error("SIWX is not enabled");if(!n)throw new Error("No ActiveCaipAddress found");if(!r)throw new Error("No ActiveCaipNetwork or client found");try{const s=yield t.createMessage({chainId:r.caipNetworkId,accountAddress:n}),o=s.toString();let p="";t.signMessage?p=yield t.signMessage({message:o,chainId:r.caipNetworkId,accountAddress:n}):(l.A.getConnectorId(r.chainNamespace)===i.b.CONNECTOR_ID.AUTH&&h.P.pushTransactionStack({}),p=(yield c.l.signMessage(o))||""),yield t.addSession({data:s,message:o,signature:p}),a.R.setLastConnectedSIWECaipNetwork(r),u.I.close(),d.X.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:e.getSIWXEventProperties()})}catch(s){(!u.I.state.open||"ApproveTransaction"===h.P.state.view)&&(yield u.I.open({view:"SIWXSignMessage"})),f.K.showError("Error signing message"),d.X.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:e.getSIWXEventProperties(s)}),console.error("SWIXUtil:requestSignMessage",s)}})()},cancelSignMessage(){var e=this;return(0,r.Z)(function*(){try{const t=e.getSIWX();if(t?.getRequired?.()){const e=a.R.getLastConnectedSIWECaipNetwork();if(e){const n=yield t?.getSessions(e?.caipNetworkId,m.j.getPlainAddress(a.R.getActiveCaipAddress())||"");n&&n.length>0?yield a.R.switchActiveNetwork(e):yield c.l.disconnect()}else yield c.l.disconnect()}else u.I.close();u.I.close(),d.X.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:e.getSIWXEventProperties()})}catch(t){console.error("SIWXUtil:cancelSignMessage",t)}})()},getAllSessions(){var e=this;return(0,r.Z)(function*(){const t=e.getSIWX(),n=a.R.getAllRequestedCaipNetworks(),s=[];return yield Promise.all(n.map(function(){var e=(0,r.Z)(function*(e){const n=yield t?.getSessions(e.caipNetworkId,m.j.getPlainAddress(a.R.getActiveCaipAddress())||"");n&&s.push(...n)});return function(t){return e.apply(this,arguments)}}())),s})()},getSessions:e=>(0,r.Z)(function*(){const t=p.h.state.siwx;let n=e?.address;if(!n){const e=a.R.getActiveCaipAddress();n=m.j.getPlainAddress(e)}let r=e?.caipNetworkId;return r||(r=a.R.getActiveCaipNetwork()?.caipNetworkId),t&&n&&r?t.getSessions(r,n):[]})(),isSIWXCloseDisabled(){var e=this;return(0,r.Z)(function*(){const t=e.getSIWX();if(t){const n="SIWXSignMessage"===h.P.state.view;if("ApproveTransaction"===h.P.state.view||n)return t.getRequired?.()&&0===(yield e.getSessions()).length}return!1})()},authConnectorAuthenticate:({authConnector:e,chainId:t,socialUri:n,preferredAccountType:s,chainNamespace:o})=>(0,r.Z)(function*(){const r=b.getSIWX(),c=(0,g.eq)();if(!r||!o.includes(i.b.CHAIN.EVM)||p.h.state.remoteFeatures.emailCapture){const r=yield e.connect({chainId:t,socialUri:n,preferredAccountType:s});return{address:r.address,chainId:r.chainId,accounts:r.accounts}}const l=`${o}:${t}`,d=yield r.createMessage({chainId:l,accountAddress:"<<AccountAddress>>"}),u={accountAddress:d.accountAddress,chainId:d.chainId,domain:d.domain,uri:d.uri,version:d.version,nonce:d.nonce,notBefore:d.notBefore,statement:d.statement,resources:d.resources,requestId:d.requestId,issuedAt:d.issuedAt,expirationTime:d.expirationTime,serializedMessage:d.toString()},h=yield e.connect({chainId:t,socialUri:n,siwxMessage:u,preferredAccountType:s});return u.accountAddress=h.address,u.serializedMessage=h.message||"",h.signature&&h.message&&(yield b.addEmbeddedWalletSession(u,h.message,h.signature)),a.R.setLastConnectedSIWECaipNetwork(c),{address:h.address,chainId:h.chainId,accounts:h.accounts}})(),addEmbeddedWalletSession:(e,t,n)=>(0,r.Z)(function*(){if(y)return y;const r=b.getSIWX();return r?(y=r.addSession({data:e,message:t,signature:n}).finally(()=>{y=null}),y):Promise.resolve()})(),universalProviderAuthenticate:({universalProvider:e,chains:t,methods:n})=>(0,r.Z)(function*(){const r=b.getSIWX(),s=(0,g.eq)(),i=new Set(t.map(e=>e.split(":")[0]));if(!r||1!==i.size||!i.has("eip155"))return!1;const o=yield r.createMessage({chainId:(0,g.eq)()?.caipNetworkId||"",accountAddress:""}),c=yield e.authenticate({nonce:o.nonce,domain:o.domain,uri:o.uri,exp:o.expirationTime,iat:o.issuedAt,nbf:o.notBefore,requestId:o.requestId,version:o.version,resources:o.resources,statement:o.statement,chainId:o.chainId,methods:n,chains:[o.chainId,...t.filter(e=>e!==o.chainId)]});f.K.showLoading("Authenticating...",{autoClose:!1});const l={...c.session.peer.metadata,name:c.session.peer.metadata.name,icon:c.session.peer.metadata.icons?.[0],type:"WALLET_CONNECT"};if(a.R.setAccountProp("connectedWalletInfo",l,Array.from(i)[0]),c?.auths?.length){const t=c.auths.map(t=>{const n=e.client.formatAuthMessage({request:t.p,iss:t.p.iss});return{data:{...t.p,accountAddress:t.p.iss.split(":").slice(-1).join(""),chainId:t.p.iss.split(":").slice(2,4).join(":"),uri:t.p.aud??"",version:t.p.version||o.version,expirationTime:t.p.exp,issuedAt:t.p.iat,notBefore:t.p.nbf},message:n,signature:t.s.s,cacao:t}});try{yield r.setSessions(t),s&&a.R.setLastConnectedSIWECaipNetwork(s),d.X.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:b.getSIWXEventProperties()})}catch(u){throw console.error("SIWX:universalProviderAuth - failed to set sessions",u),d.X.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:b.getSIWXEventProperties(u)}),yield e.disconnect().catch(console.error),u}finally{f.K.hide()}}return!0})(),getSIWXEventProperties(e){const t=a.R.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:a.R.state.activeCaipNetwork.caipNetworkId||"",isSmartAccount:(0,g.r9)(t)===o.y_.ACCOUNT_TYPES.SMART_ACCOUNT,message:e?m.j.parseError(e):void 0}},clearSessions(){var e=this;return(0,r.Z)(function*(){const t=e.getSIWX();t&&(yield t.setSessions([]))})()}}},42916:function(e,t,n){"use strict";n.d(t,{M:function(){return i}});var r=n(86462),s=n(72290);const i={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5,transactionsHistory:15e3,tokenPrice:15e3,latestAppKitVersion:6048e5,tonWallets:864e5},isCacheExpired:(e,t)=>Date.now()-e>t,getActiveNetworkProps(){const e=i.getActiveNamespace(),t=i.getActiveCaipNetworkId(),n=t?t.split(":")[1]:void 0;return{namespace:e,caipNetworkId:t,chainId:n?isNaN(Number(n))?n:Number(n):void 0}},setWalletConnectDeepLink({name:e,href:t}){try{r.mr.setItem(r.uJ.DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const e=r.mr.getItem(r.uJ.DEEPLINK_CHOICE);if(e)return JSON.parse(e)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{r.mr.removeItem(r.uJ.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(e){try{r.mr.setItem(r.uJ.ACTIVE_NAMESPACE,e)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(e){try{r.mr.setItem(r.uJ.ACTIVE_CAIP_NETWORK_ID,e),i.setActiveNamespace(e.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return r.mr.getItem(r.uJ.ACTIVE_CAIP_NETWORK_ID)}catch{return void console.info("Unable to get active caip network id")}},deleteActiveCaipNetworkId(){try{r.mr.removeItem(r.uJ.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(e){try{const t=(0,r.Vk)(e);r.mr.removeItem(t)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(e){try{const t=i.getRecentWallets();t.find(t=>t.id===e.id)||(t.unshift(e),t.length>2&&t.pop(),r.mr.setItem(r.uJ.RECENT_WALLETS,JSON.stringify(t)),r.mr.setItem(r.uJ.RECENT_WALLET,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const e=r.mr.getItem(r.uJ.RECENT_WALLETS);return e?JSON.parse(e):[]}catch{console.info("Unable to get AppKit recent")}return[]},getRecentWallet(){try{const e=r.mr.getItem(r.uJ.RECENT_WALLET);return e?JSON.parse(e):null}catch{console.info("Unable to get AppKit recent")}return null},deleteRecentWallet(){try{r.mr.removeItem(r.uJ.RECENT_WALLET)}catch{console.info("Unable to delete AppKit recent")}},setConnectedConnectorId(e,t){try{const n=(0,r.Vk)(e);r.mr.setItem(n,t)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return r.mr.getItem(r.uJ.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(e){if(e)try{const t=(0,r.Vk)(e);return r.mr.getItem(t)}catch{console.info("Unable to get connected connector id in namespace",e)}},setConnectedSocialProvider(e){try{r.mr.setItem(r.uJ.CONNECTED_SOCIAL,e)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return r.mr.getItem(r.uJ.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{r.mr.removeItem(r.uJ.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return r.mr.getItem(r.uJ.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId:()=>r.mr.getItem(r.uJ.ACTIVE_CAIP_NETWORK_ID)?.split(":")?.[1],setConnectionStatus(e){try{r.mr.setItem(r.uJ.CONNECTION_STATUS,e)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return r.mr.getItem(r.uJ.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const e=r.mr.getItem(r.uJ.CONNECTED_NAMESPACES);return e?.length?e.split(","):[]}catch{return[]}},setConnectedNamespaces(e){try{const t=Array.from(new Set(e));r.mr.setItem(r.uJ.CONNECTED_NAMESPACES,t.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(e){try{const t=i.getConnectedNamespaces();t.includes(e)||(t.push(e),i.setConnectedNamespaces(t))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(e){try{const t=i.getConnectedNamespaces(),n=t.indexOf(e);n>-1&&(t.splice(n,1),i.setConnectedNamespaces(t))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return r.mr.getItem(r.uJ.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(e){try{r.mr.setItem(r.uJ.TELEGRAM_SOCIAL_PROVIDER,e)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{r.mr.removeItem(r.uJ.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let e={};try{const t=r.mr.getItem(r.uJ.PORTFOLIO_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get balance cache")}return e},removeAddressFromBalanceCache(e){try{const t=i.getBalanceCache();r.mr.setItem(r.uJ.PORTFOLIO_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove address from balance cache",e)}},getBalanceCacheForCaipAddress(e){try{const t=i.getBalanceCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.portfolio))return t.balance;i.removeAddressFromBalanceCache(e)}catch{console.info("Unable to get balance cache for address",e)}},updateBalanceCache(e){try{const t=i.getBalanceCache();t[e.caipAddress]=e,r.mr.setItem(r.uJ.PORTFOLIO_CACHE,JSON.stringify(t))}catch{console.info("Unable to update balance cache",e)}},getNativeBalanceCache(){let e={};try{const t=r.mr.getItem(r.uJ.NATIVE_BALANCE_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get balance cache")}return e},removeAddressFromNativeBalanceCache(e){try{const t=i.getBalanceCache();r.mr.setItem(r.uJ.NATIVE_BALANCE_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove address from balance cache",e)}},getNativeBalanceCacheForCaipAddress(e){try{const t=i.getNativeBalanceCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.nativeBalance))return t;console.info("Discarding cache for address",e),i.removeAddressFromBalanceCache(e)}catch{console.info("Unable to get balance cache for address",e)}},updateNativeBalanceCache(e){try{const t=i.getNativeBalanceCache();t[e.caipAddress]=e,r.mr.setItem(r.uJ.NATIVE_BALANCE_CACHE,JSON.stringify(t))}catch{console.info("Unable to update balance cache",e)}},getEnsCache(){let e={};try{const t=r.mr.getItem(r.uJ.ENS_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get ens name cache")}return e},getEnsFromCacheForAddress(e){try{const t=i.getEnsCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.ens))return t.ens;i.removeEnsFromCache(e)}catch{console.info("Unable to get ens name from cache",e)}},updateEnsCache(e){try{const t=i.getEnsCache();t[e.address]=e,r.mr.setItem(r.uJ.ENS_CACHE,JSON.stringify(t))}catch{console.info("Unable to update ens name cache",e)}},removeEnsFromCache(e){try{const t=i.getEnsCache();r.mr.setItem(r.uJ.ENS_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove ens name from cache",e)}},getIdentityCache(){let e={};try{const t=r.mr.getItem(r.uJ.IDENTITY_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get identity cache")}return e},getIdentityFromCacheForAddress(e){try{const t=i.getIdentityCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.identity))return t.identity;i.removeIdentityFromCache(e)}catch{console.info("Unable to get identity from cache",e)}},updateIdentityCache(e){try{const t=i.getIdentityCache();t[e.address]={identity:e.identity,timestamp:e.timestamp},r.mr.setItem(r.uJ.IDENTITY_CACHE,JSON.stringify(t))}catch{console.info("Unable to update identity cache",e)}},removeIdentityFromCache(e){try{const t=i.getIdentityCache();r.mr.setItem(r.uJ.IDENTITY_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove identity from cache",e)}},getTonWalletsCache(){try{const e=r.mr.getItem(r.uJ.TON_WALLETS_CACHE),t=e?JSON.parse(e):void 0;if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.tonWallets))return t;i.removeTonWalletsCache()}catch{console.info("Unable to get ton wallets cache")}},updateTonWalletsCache(e){try{const t=i.getTonWalletsCache()||{timestamp:0,wallets:[]};t.timestamp=(new Date).getTime(),t.wallets=e,r.mr.setItem(r.uJ.TON_WALLETS_CACHE,JSON.stringify(t))}catch{console.info("Unable to update ton wallets cache",e)}},removeTonWalletsCache(){try{r.mr.removeItem(r.uJ.TON_WALLETS_CACHE)}catch{console.info("Unable to remove ton wallets cache")}},clearAddressCache(){try{r.mr.removeItem(r.uJ.PORTFOLIO_CACHE),r.mr.removeItem(r.uJ.NATIVE_BALANCE_CACHE),r.mr.removeItem(r.uJ.ENS_CACHE),r.mr.removeItem(r.uJ.IDENTITY_CACHE),r.mr.removeItem(r.uJ.HISTORY_TRANSACTIONS_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(e){try{r.mr.setItem(r.uJ.PREFERRED_ACCOUNT_TYPES,JSON.stringify(e))}catch{console.info("Unable to set preferred account types",e)}},getPreferredAccountTypes(){try{const e=r.mr.getItem(r.uJ.PREFERRED_ACCOUNT_TYPES);return e?JSON.parse(e):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(e,t){try{const n=i.getConnections(),o=n[t]??[],a=new Map;for(const e of o)a.set(e.connectorId,{...e});for(const t of e){const e=a.get(t.connectorId),n=t.connectorId===s.b.CONNECTOR_ID.AUTH;if(e&&!n){const n=new Set(e.accounts.map(e=>e.address.toLowerCase())),r=t.accounts.filter(e=>!n.has(e.address.toLowerCase()));e.accounts.push(...r)}else a.set(t.connectorId,{...t})}const c={...n,[t]:Array.from(a.values())};r.mr.setItem(r.uJ.CONNECTIONS,JSON.stringify(c))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const e=r.mr.getItem(r.uJ.CONNECTIONS);return e?JSON.parse(e):{}}catch(e){return console.error("Unable to get connections from storage",e),{}}},deleteAddressFromConnection({connectorId:e,address:t,namespace:n}){try{const s=i.getConnections(),o=new Map((s[n]??[]).map(e=>[e.connectorId,e])),a=o.get(e);a&&(0===a.accounts.filter(e=>e.address.toLowerCase()!==t.toLowerCase()).length?o.delete(e):o.set(e,{...a,accounts:a.accounts.filter(e=>e.address.toLowerCase()!==t.toLowerCase())})),r.mr.setItem(r.uJ.CONNECTIONS,JSON.stringify({...s,[n]:Array.from(o.values())}))}catch{console.error(`Unable to remove address "${t}" from connector "${e}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const e=r.mr.getItem(r.uJ.DISCONNECTED_CONNECTOR_IDS);return e?JSON.parse(e):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(e,t){try{const n=i.getDisconnectedConnectorIds(),s=n[t]??[];s.push(e),r.mr.setItem(r.uJ.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[t]:Array.from(new Set(s))}))}catch{console.error(`Unable to set disconnected connector id "${e}" for namespace "${t}"`)}},removeDisconnectedConnectorId(e,t){try{const n=i.getDisconnectedConnectorIds();let s=n[t]??[];s=s.filter(t=>t.toLowerCase()!==e.toLowerCase()),r.mr.setItem(r.uJ.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[t]:Array.from(new Set(s))}))}catch{console.error(`Unable to remove disconnected connector id "${e}" for namespace "${t}"`)}},isConnectorDisconnected(e,t){try{return(i.getDisconnectedConnectorIds()[t]??[]).some(t=>t.toLowerCase()===e.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${e}" for namespace "${t}"`)}return!1},getTransactionsCache(){try{const e=r.mr.getItem(r.uJ.HISTORY_TRANSACTIONS_CACHE);return e?JSON.parse(e):{}}catch{console.info("Unable to get transactions cache")}return{}},getTransactionsCacheForAddress({address:e,chainId:t=""}){try{const n=i.getTransactionsCache()[e]?.[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.transactionsHistory))return n.transactions;i.removeTransactionsCache({address:e,chainId:t})}catch{console.info("Unable to get transactions cache")}},updateTransactionsCache({address:e,chainId:t="",timestamp:n,transactions:s}){try{const o=i.getTransactionsCache();o[e]={...o[e],[t]:{timestamp:n,transactions:s}},r.mr.setItem(r.uJ.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(o))}catch{console.info("Unable to update transactions cache",{address:e,chainId:t,timestamp:n,transactions:s})}},removeTransactionsCache({address:e,chainId:t}){try{const n=i.getTransactionsCache(),s=n?.[e]||{},{[t]:o,...a}=s;r.mr.setItem(r.uJ.HISTORY_TRANSACTIONS_CACHE,JSON.stringify({...n,[e]:a}))}catch{console.info("Unable to remove transactions cache",{address:e,chainId:t})}},getTokenPriceCache(){try{const e=r.mr.getItem(r.uJ.TOKEN_PRICE_CACHE);return e?JSON.parse(e):{}}catch{console.info("Unable to get token price cache")}return{}},getTokenPriceCacheForAddresses(e){try{const t=i.getTokenPriceCache()[e.join(",")];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.tokenPrice))return t.tokenPrice;i.removeTokenPriceCache(e)}catch{console.info("Unable to get token price cache for addresses",e)}},updateTokenPriceCache(e){try{const t=i.getTokenPriceCache();t[e.addresses.join(",")]={timestamp:e.timestamp,tokenPrice:e.tokenPrice},r.mr.setItem(r.uJ.TOKEN_PRICE_CACHE,JSON.stringify(t))}catch{console.info("Unable to update token price cache",e)}},removeTokenPriceCache(e){try{const t=i.getTokenPriceCache();r.mr.setItem(r.uJ.TOKEN_PRICE_CACHE,JSON.stringify({...t,[e.join(",")]:void 0}))}catch{console.info("Unable to remove token price cache",e)}},getLatestAppKitVersion(){try{const e=this.getLatestAppKitVersionCache(),t=e?.version;return t&&!this.isCacheExpired(e.timestamp,this.cacheExpiry.latestAppKitVersion)?t:void 0}catch{console.info("Unable to get latest AppKit version")}},getLatestAppKitVersionCache(){try{const e=r.mr.getItem(r.uJ.LATEST_APPKIT_VERSION);return e?JSON.parse(e):{}}catch{console.info("Unable to get latest AppKit version cache")}return{}},updateLatestAppKitVersion(e){try{const t=i.getLatestAppKitVersionCache();t.timestamp=e.timestamp,t.version=e.version,r.mr.setItem(r.uJ.LATEST_APPKIT_VERSION,JSON.stringify(t))}catch{console.info("Unable to update latest AppKit version on local storage",e)}}}},44926:function(e,t,n){"use strict";n.d(t,{n:function(){return l}});var r=n(8239),s=n(71848),i=n(63908),o=n(7551),a=n(56276),c=n(71166);const l={getTokenList:e=>(0,r.Z)(function*(){return(yield s.L.fetchSwapTokens({chainId:e}))?.tokens?.map(e=>({...e,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0}))||[]})(),fetchGasPrice:()=>(0,r.Z)(function*(){const e=i.R.state.activeCaipNetwork;if(!e)return null;try{if("solana"===e.chainNamespace){const e=(yield o.l.estimateGas({chainNamespace:"solana"}))?.toString();return{standard:e,fast:e,instant:e}}return yield s.L.fetchGasPrice({chainId:e.caipNetworkId})}catch{return null}})(),fetchSwapAllowance:({tokenAddress:e,userAddress:t,sourceTokenAmount:n,sourceTokenDecimals:i})=>(0,r.Z)(function*(){const r=yield s.L.fetchSwapAllowance({tokenAddress:e,userAddress:t});if(r?.allowance&&n&&i){const e=o.l.parseUnits(n,i)||0;return BigInt(r.allowance)>=e}return!1})(),getMyTokensWithBalance(e){var t=this;return(0,r.Z)(function*(){const n=yield a.Q.getMyTokensWithBalance({forceUpdate:e,caipNetwork:i.R.state.activeCaipNetwork,address:i.R.getAccountData()?.address});return i.R.setAccountProp("tokenBalance",n,i.R.state.activeChain),t.mapBalancesToSwapTokens(n)})()},mapBalancesToSwapTokens:e=>e?.map(e=>({...e,address:e?.address?e.address:(0,c.EO)(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1}))||[],handleSwapError:e=>(0,r.Z)(function*(){try{const t=e?.cause;return t?.json&&(yield t.json())?.reasons?.[0]?.description?.includes("insufficient liquidity")?"Insufficient liquidity":void 0}catch{return}})()}},97088:function(e,t,n){"use strict";n.d(t,{J:function(){return p}});var r=n(67933),s=n(91951),i=n(7551),o=n(27297),a=n(32628),c=n(38720),l=n(28153),d=n(53574),u=n(42916);const p={filterOutDuplicatesByRDNS(e){const t=a.h.state.enableEIP6963?o.A.state.connectors:[],n=u.M.getRecentWallets(),r=t.map(e=>e.info?.rdns).filter(Boolean),s=n.map(e=>e.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&d.j.isMobile()){const e=i.indexOf("io.metamask.mobile");i[e]="io.metamask"}return e.filter(e=>!(e?.rdns&&i.includes(String(e.rdns))||!e?.rdns&&t.some(t=>t.name===e.name)))},filterOutDuplicatesByIds(e){const t=o.A.state.connectors.filter(e=>"ANNOUNCED"===e.type||"INJECTED"===e.type||"MULTI_CHAIN"===e.type),n=u.M.getRecentWallets(),r=t.map(e=>e.explorerId||e.explorerWallet?.id||e.id),s=n.map(e=>e.id),i=r.concat(s);return e.filter(e=>!i.includes(e?.id))},filterOutDuplicateWallets(e){const t=this.filterOutDuplicatesByRDNS(e);return this.filterOutDuplicatesByIds(t)},markWalletsAsInstalled(e){const{connectors:t}=o.A.state,{featuredWalletIds:n}=a.h.state,r=t.filter(e=>"ANNOUNCED"===e.type).reduce((e,t)=>(t.info?.rdns&&(e[t.info.rdns]=!0),e),{});return e.map(e=>({...e,installed:Boolean(e.rdns)&&Boolean(r[e.rdns??""])})).sort((e,t)=>{const r=Number(t.installed)-Number(e.installed);if(0!==r)return r;if(n?.length){const r=n.indexOf(e.id),s=n.indexOf(t.id);if(-1!==r&&-1!==s)return r-s;if(-1!==r)return-1;if(-1!==s)return 1}return 0})},getConnectOrderMethod(e,t){const n=e?.connectMethodsOrder||a.h.state.features.connectMethodsOrder,r=t||o.A.state.connectors;if(n)return n;const{injected:i,announced:d}=c.C.getConnectorsByType(r,s.Q.state.recommended,s.Q.state.featured),u=i.filter(c.C.showConnector),p=d.filter(c.C.showConnector);return u.length||p.length?["wallet","email","social"]:l.bq.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(e){const t=Boolean(e.rdns)&&s.Q.state.excludedWallets.some(t=>t.rdns===e.rdns),n=Boolean(e.name)&&s.Q.state.excludedWallets.some(t=>r.g.isLowerCaseMatch(t.name,e.name));return t||n},markWalletsWithDisplayIndex:e=>e.map((e,t)=>({...e,display_index:t})),filterWalletsByWcSupport:e=>i.l.state.wcBasic?e.filter(e=>e.supports_wc):d.j.isMobile()?e.filter(e=>e.supports_wc||l.bq.MANDATORY_WALLET_IDS_ON_MOBILE.includes(e.id)):e,getWalletConnectWallets(e){const t=[...s.Q.state.featured,...s.Q.state.recommended];s.Q.state.filteredWallets.length>0?t.push(...s.Q.state.filteredWallets):t.push(...e);const n=d.j.uniqueBy(t,"id"),r=p.markWalletsAsInstalled(n),i=p.filterWalletsByWcSupport(r);return p.markWalletsWithDisplayIndex(i)}}},79781:function(e,t,n){"use strict";n.d(t,{g:function(){return h},P:function(){return g}});var r=n(8239),s=n(23250),i=n(31254),o=n(53574),a=n(44329),c=n(32628);const l=Object.freeze({enabled:!0,events:[]}),d=new a.V({baseUrl:o.j.getAnalyticsUrl(),clientId:null}),u=(0,s.sj)({...l}),p={state:u,subscribeKey:(e,t)=>(0,i.VW)(u,e,t),sendError:(e,t)=>(0,r.Z)(function*(){if(!u.enabled)return;const n=Date.now();if(u.events.filter(e=>{const t=new Date(e.properties.timestamp||"").getTime();return n-t<6e4}).length>=5)return;const r={type:"error",event:t,properties:{errorType:e.name,errorMessage:e.message,stackTrace:e.stack,timestamp:(new Date).toISOString()}};u.events.push(r);try{if("undefined"==typeof window)return;const{projectId:n,sdkType:r,sdkVersion:s}=c.h.state;yield d.post({path:"/e",params:{projectId:n,st:r,sv:s||"html-wagmi-4.2.2"},body:{eventId:o.j.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:(new Date).toISOString(),props:{type:"error",event:t,errorType:e.name,errorMessage:e.message,stackTrace:e.stack}}})}catch{}})(),enable(){u.enabled=!0},disable(){u.enabled=!1},clearEvents(){u.events=[]}};class h extends Error{constructor(e,t,n){super(e),this.originalName="AppKitError",this.name="AppKitError",this.category=t,this.originalError=n,n&&n instanceof Error&&(this.originalName=n.name),Object.setPrototypeOf(this,h.prototype);let r=!1;if(n instanceof Error&&"string"==typeof n.stack&&n.stack){const e=n.stack,t=e.indexOf("\n");if(t>-1){const n=e.substring(t+1);this.stack=`${this.name}: ${this.message}\n${n}`,r=!0}}r||(Error.captureStackTrace?Error.captureStackTrace(this,h):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function f(e,t){let n="";try{n=e instanceof Error?e.message:"string"==typeof e?e:"object"==typeof e&&null!==e?0===Object.keys(e).length?"Unknown error":e?.message||JSON.stringify(e):String(e)}catch(s){n="Unknown error",console.error("Error parsing error message",s)}const r=e instanceof h?e:new h(n,t,e);throw p.sendError(r,r.category),r}function g(e,t="INTERNAL_SDK_ERROR"){const n={};return Object.keys(e).forEach(s=>{const i=e[s];if("function"==typeof i){let e=i;e="AsyncFunction"===i.constructor.name?function(){var e=(0,r.Z)(function*(...e){try{return yield i(...e)}catch(n){return f(n,t)}});return function(){return e.apply(this,arguments)}}():(...e)=>{try{return i(...e)}catch(n){return f(n,t)}},n[s]=e}else n[s]=i}),n}},15863:function(e,t,n){"use strict";n(22339),n(2517),n(39330),n(93105)},86499:function(e,t,n){"use strict";n.d(t,{kj:function(){return r},Hg:function(){return i.H},iv:function(){return p.iv},Mo:function(){return u.M},n:function(){return s.n},Hs:function(){return s.Hs},R:function(){return s.R},gR:function(){return p.gR}});const r={interpolate(e,t,n){if(2!==e.length||2!==t.length)throw new Error("inputRange and outputRange must be an array of length 2");const r=e[0]||0,s=e[1]||0,i=t[0]||0,o=t[1]||0;return n<r?i:n>s?o:(o-i)/(s-r)*(n-r)+i}};var s=n(61831),i=n(18504),o=n(48873),a=n(86102),c=n(43603),l=n(48968);o.extend(c),o.extend(l);const d={...a,name:"en-web3-modal",relativeTime:{future:"in %s",past:"%s ago",s:"%d sec",m:"1 min",mm:"%d min",h:"1 hr",hh:"%d hrs",d:"1 d",dd:"%d d",M:"1 mo",MM:"%d mo",y:"1 yr",yy:"%d yr"}};o.locale("en-web3-modal",d);var u=n(35896),p=(n(53707),n(17139))},53707:function(e,t,n){"use strict";n.d(t,{TV:function(){return r},W2:function(){return s}});const r={core:{backgroundAccentPrimary:"#0988F0",backgroundAccentCertified:"#C7B994",backgroundWalletKit:"#FFB800",backgroundAppKit:"#FF573B",backgroundCloud:"#0988F0",backgroundDocumentation:"#008847",backgroundSuccess:"rgba(48, 164, 107, 0.20)",backgroundError:"rgba(223, 74, 52, 0.20)",backgroundWarning:"rgba(243, 161, 63, 0.20)",textAccentPrimary:"#0988F0",textAccentCertified:"#C7B994",textWalletKit:"#FFB800",textAppKit:"#FF573B",textCloud:"#0988F0",textDocumentation:"#008847",textSuccess:"#30A46B",textError:"#DF4A34",textWarning:"#F3A13F",borderAccentPrimary:"#0988F0",borderSecondary:"#C7B994",borderSuccess:"#30A46B",borderError:"#DF4A34",borderWarning:"#F3A13F",foregroundAccent010:"rgba(9, 136, 240, 0.1)",foregroundAccent020:"rgba(9, 136, 240, 0.2)",foregroundAccent040:"rgba(9, 136, 240, 0.4)",foregroundAccent060:"rgba(9, 136, 240, 0.6)",foregroundSecondary020:"rgba(199, 185, 148, 0.2)",foregroundSecondary040:"rgba(199, 185, 148, 0.4)",foregroundSecondary060:"rgba(199, 185, 148, 0.6)",iconAccentPrimary:"#0988F0",iconAccentCertified:"#C7B994",iconSuccess:"#30A46B",iconError:"#DF4A34",iconWarning:"#F3A13F",glass010:"rgba(255, 255, 255, 0.1)",zIndex:"9999"},dark:{overlay:"rgba(0, 0, 0, 0.50)",backgroundPrimary:"#202020",backgroundInvert:"#FFFFFF",textPrimary:"#FFFFFF",textSecondary:"#9A9A9A",textTertiary:"#BBBBBB",textInvert:"#202020",borderPrimary:"#2A2A2A",borderPrimaryDark:"#363636",borderSecondary:"#4F4F4F",foregroundPrimary:"#252525",foregroundSecondary:"#2A2A2A",foregroundTertiary:"#363636",iconDefault:"#9A9A9A",iconInverse:"#FFFFFF"},light:{overlay:"rgba(230 , 230, 230, 0.5)",backgroundPrimary:"#FFFFFF",borderPrimaryDark:"#E9E9E9",backgroundInvert:"#202020",textPrimary:"#202020",textSecondary:"#9A9A9A",textTertiary:"#6C6C6C",textInvert:"#FFFFFF",borderPrimary:"#E9E9E9",borderSecondary:"#D0D0D0",foregroundPrimary:"#F3F3F3",foregroundSecondary:"#E9E9E9",foregroundTertiary:"#D0D0D0",iconDefault:"#9A9A9A",iconInverse:"#202020"}},s={colors:{black:"#202020",white:"#FFFFFF",white010:"rgba(255, 255, 255, 0.1)",accent010:"rgba(9, 136, 240, 0.1)",accent020:"rgba(9, 136, 240, 0.2)",accent030:"rgba(9, 136, 240, 0.3)",accent040:"rgba(9, 136, 240, 0.4)",accent050:"rgba(9, 136, 240, 0.5)",accent060:"rgba(9, 136, 240, 0.6)",accent070:"rgba(9, 136, 240, 0.7)",accent080:"rgba(9, 136, 240, 0.8)",accent090:"rgba(9, 136, 240, 0.9)",accent100:"rgba(9, 136, 240, 1.0)",accentSecondary010:"rgba(199, 185, 148, 0.1)",accentSecondary020:"rgba(199, 185, 148, 0.2)",accentSecondary030:"rgba(199, 185, 148, 0.3)",accentSecondary040:"rgba(199, 185, 148, 0.4)",accentSecondary050:"rgba(199, 185, 148, 0.5)",accentSecondary060:"rgba(199, 185, 148, 0.6)",accentSecondary070:"rgba(199, 185, 148, 0.7)",accentSecondary080:"rgba(199, 185, 148, 0.8)",accentSecondary090:"rgba(199, 185, 148, 0.9)",accentSecondary100:"rgba(199, 185, 148, 1.0)",productWalletKit:"#FFB800",productAppKit:"#FF573B",productCloud:"#0988F0",productDocumentation:"#008847",neutrals050:"#F6F6F6",neutrals100:"#F3F3F3",neutrals200:"#E9E9E9",neutrals300:"#D0D0D0",neutrals400:"#BBB",neutrals500:"#9A9A9A",neutrals600:"#6C6C6C",neutrals700:"#4F4F4F",neutrals800:"#363636",neutrals900:"#2A2A2A",neutrals1000:"#252525",semanticSuccess010:"rgba(48, 164, 107, 0.1)",semanticSuccess020:"rgba(48, 164, 107, 0.2)",semanticSuccess030:"rgba(48, 164, 107, 0.3)",semanticSuccess040:"rgba(48, 164, 107, 0.4)",semanticSuccess050:"rgba(48, 164, 107, 0.5)",semanticSuccess060:"rgba(48, 164, 107, 0.6)",semanticSuccess070:"rgba(48, 164, 107, 0.7)",semanticSuccess080:"rgba(48, 164, 107, 0.8)",semanticSuccess090:"rgba(48, 164, 107, 0.9)",semanticSuccess100:"rgba(48, 164, 107, 1.0)",semanticError010:"rgba(223, 74, 52, 0.1)",semanticError020:"rgba(223, 74, 52, 0.2)",semanticError030:"rgba(223, 74, 52, 0.3)",semanticError040:"rgba(223, 74, 52, 0.4)",semanticError050:"rgba(223, 74, 52, 0.5)",semanticError060:"rgba(223, 74, 52, 0.6)",semanticError070:"rgba(223, 74, 52, 0.7)",semanticError080:"rgba(223, 74, 52, 0.8)",semanticError090:"rgba(223, 74, 52, 0.9)",semanticError100:"rgba(223, 74, 52, 1.0)",semanticWarning010:"rgba(243, 161, 63, 0.1)",semanticWarning020:"rgba(243, 161, 63, 0.2)",semanticWarning030:"rgba(243, 161, 63, 0.3)",semanticWarning040:"rgba(243, 161, 63, 0.4)",semanticWarning050:"rgba(243, 161, 63, 0.5)",semanticWarning060:"rgba(243, 161, 63, 0.6)",semanticWarning070:"rgba(243, 161, 63, 0.7)",semanticWarning080:"rgba(243, 161, 63, 0.8)",semanticWarning090:"rgba(243, 161, 63, 0.9)",semanticWarning100:"rgba(243, 161, 63, 1.0)"},fontFamily:{regular:"KHTeka",mono:"KHTekaMono"},fontWeight:{regular:"400",medium:"500"},textSize:{h1:"50px",h2:"44px",h3:"38px",h4:"32px",h5:"26px",h6:"20px",large:"16px",medium:"14px",small:"12px"},typography:{"h1-regular-mono":{lineHeight:"50px",letterSpacing:"-3px"},"h1-regular":{lineHeight:"50px",letterSpacing:"-1px"},"h1-medium":{lineHeight:"50px",letterSpacing:"-0.84px"},"h2-regular-mono":{lineHeight:"44px",letterSpacing:"-2.64px"},"h2-regular":{lineHeight:"44px",letterSpacing:"-0.88px"},"h2-medium":{lineHeight:"44px",letterSpacing:"-0.88px"},"h3-regular-mono":{lineHeight:"38px",letterSpacing:"-2.28px"},"h3-regular":{lineHeight:"38px",letterSpacing:"-0.76px"},"h3-medium":{lineHeight:"38px",letterSpacing:"-0.76px"},"h4-regular-mono":{lineHeight:"32px",letterSpacing:"-1.92px"},"h4-regular":{lineHeight:"32px",letterSpacing:"-0.32px"},"h4-medium":{lineHeight:"32px",letterSpacing:"-0.32px"},"h5-regular-mono":{lineHeight:"26px",letterSpacing:"-1.56px"},"h5-regular":{lineHeight:"26px",letterSpacing:"-0.26px"},"h5-medium":{lineHeight:"26px",letterSpacing:"-0.26px"},"h6-regular-mono":{lineHeight:"20px",letterSpacing:"-1.2px"},"h6-regular":{lineHeight:"20px",letterSpacing:"-0.6px"},"h6-medium":{lineHeight:"20px",letterSpacing:"-0.6px"},"lg-regular-mono":{lineHeight:"16px",letterSpacing:"-0.96px"},"lg-regular":{lineHeight:"18px",letterSpacing:"-0.16px"},"lg-medium":{lineHeight:"18px",letterSpacing:"-0.16px"},"md-regular-mono":{lineHeight:"14px",letterSpacing:"-0.84px"},"md-regular":{lineHeight:"16px",letterSpacing:"-0.14px"},"md-medium":{lineHeight:"16px",letterSpacing:"-0.14px"},"sm-regular-mono":{lineHeight:"12px",letterSpacing:"-0.72px"},"sm-regular":{lineHeight:"14px",letterSpacing:"-0.12px"},"sm-medium":{lineHeight:"14px",letterSpacing:"-0.12px"}},tokens:{core:r.core,theme:r.dark},borderRadius:{1:"4px",2:"8px",10:"10px",3:"12px",4:"16px",6:"24px",5:"20px",8:"32px",16:"64px",20:"80px",32:"128px",64:"256px",128:"512px",round:"9999px"},spacing:{0:"0px","01":"2px",1:"4px",2:"8px",3:"12px",4:"16px",5:"20px",6:"24px",7:"28px",8:"32px",9:"36px",10:"40px",12:"48px",14:"56px",16:"64px",20:"80px",32:"128px",64:"256px"},durations:{xl:"400ms",lg:"200ms",md:"125ms",sm:"75ms"},easings:{"ease-out-power-2":"cubic-bezier(0.23, 0.09, 0.08, 1.13)","ease-out-power-1":"cubic-bezier(0.12, 0.04, 0.2, 1.06)","ease-in-power-2":"cubic-bezier(0.92, -0.13, 0.77, 0.91)","ease-in-power-1":"cubic-bezier(0.88, -0.06, 0.8, 0.96)","ease-inout-power-2":"cubic-bezier(0.77, 0.09, 0.23, 1.13)","ease-inout-power-1":"cubic-bezier(0.88, 0.04, 0.12, 1.06)"}}},17139:function(e,t,n){"use strict";n.d(t,{e5:function(){return a},iv:function(){return l},gR:function(){return c}});var r=n(14350),s=n(53707);const i="--apkt";function o(e){if(!e)return{};const t={};return t["font-family"]=e["--apkt-font-family"]??e["--w3m-font-family"]??"KHTeka",t.accent=e["--apkt-accent"]??e["--w3m-accent"]??"#0988F0",t["color-mix"]=e["--apkt-color-mix"]??e["--w3m-color-mix"]??"#000",t["color-mix-strength"]=e["--apkt-color-mix-strength"]??e["--w3m-color-mix-strength"]??0,t["font-size-master"]=e["--apkt-font-size-master"]??e["--w3m-font-size-master"]??"10px",t["border-radius-master"]=e["--apkt-border-radius-master"]??e["--w3m-border-radius-master"]??"4px",void 0!==e["--apkt-z-index"]?t["z-index"]=e["--apkt-z-index"]:void 0!==e["--w3m-z-index"]&&(t["z-index"]=e["--w3m-z-index"]),t}const a={createCSSVariables(e){const t={},n={};return function e(t,n,r=""){for(const[s,o]of Object.entries(t)){const t=r?`${r}-${s}`:s;o&&"object"==typeof o&&Object.keys(o).length?(n[s]={},e(o,n[s],t)):"string"==typeof o&&(n[s]=`${i}-${t}`)}}(e,t),function e(t,n){for(const[r,s]of Object.entries(t))s&&"object"==typeof s?(n[r]={},e(s,n[r])):"string"==typeof s&&(n[r]=`var(${s})`)}(t,n),{cssVariables:t,cssVariablesVarPrefix:n}},assignCSSVariables(e,t){const n={};return function e(t,r,s){for(const[o,a]of Object.entries(t)){const t=s?`${s}-${o}`:o,c=r[o];a&&"object"==typeof a?e(a,c,t):"string"==typeof c&&(n[`${i}-${t}`]=c)}}(e,t),n},createRootStyles(e,t){const n={...s.W2,tokens:{...s.W2.tokens,theme:"light"===e?s.TV.light:s.TV.dark}},{cssVariables:r}=a.createCSSVariables(n),i=a.assignCSSVariables(r,n),o=a.generateW3MVariables(t),c=a.generateW3MOverrides(t),l=a.generateScaledVariables(t),d=a.generateBaseVariables(i),u={...i,...d,...o,...c,...l},p=a.applyColorMixToVariables(t,u),h={...u,...p};return`:root {${Object.entries(h).map(([e,t])=>`${e}:${t.replace("/[:;{}</>]/g","")};`).join("")}}`},generateW3MVariables(e){if(!e)return{};const t=o(e),n={};return n["--w3m-font-family"]=t["font-family"],n["--w3m-accent"]=t.accent,n["--w3m-color-mix"]=t["color-mix"],n["--w3m-color-mix-strength"]=`${t["color-mix-strength"]}%`,n["--w3m-font-size-master"]=t["font-size-master"],n["--w3m-border-radius-master"]=t["border-radius-master"],n},generateW3MOverrides(e){if(!e)return{};const t=o(e),n={};if(e["--apkt-accent"]||e["--w3m-accent"]){const e=t.accent;n["--apkt-tokens-core-iconAccentPrimary"]=e,n["--apkt-tokens-core-borderAccentPrimary"]=e,n["--apkt-tokens-core-textAccentPrimary"]=e,n["--apkt-tokens-core-backgroundAccentPrimary"]=e}return(e["--apkt-font-family"]||e["--w3m-font-family"])&&(n["--apkt-fontFamily-regular"]=t["font-family"]),void 0!==t["z-index"]&&(n["--apkt-tokens-core-zIndex"]=`${t["z-index"]}`),n},generateScaledVariables(e){if(!e)return{};const t=o(e),n={};if(e["--apkt-font-size-master"]||e["--w3m-font-size-master"]){const e=parseFloat(t["font-size-master"].replace("px",""));n["--apkt-textSize-h1"]=5*Number(e)+"px",n["--apkt-textSize-h2"]=4.4*Number(e)+"px",n["--apkt-textSize-h3"]=3.8*Number(e)+"px",n["--apkt-textSize-h4"]=3.2*Number(e)+"px",n["--apkt-textSize-h5"]=2.6*Number(e)+"px",n["--apkt-textSize-h6"]=2*Number(e)+"px",n["--apkt-textSize-large"]=1.6*Number(e)+"px",n["--apkt-textSize-medium"]=1.4*Number(e)+"px",n["--apkt-textSize-small"]=1.2*Number(e)+"px"}if(e["--apkt-border-radius-master"]||e["--w3m-border-radius-master"]){const e=parseFloat(t["border-radius-master"].replace("px",""));n["--apkt-borderRadius-1"]=`${Number(e)}px`,n["--apkt-borderRadius-2"]=2*Number(e)+"px",n["--apkt-borderRadius-3"]=3*Number(e)+"px",n["--apkt-borderRadius-4"]=4*Number(e)+"px",n["--apkt-borderRadius-5"]=5*Number(e)+"px",n["--apkt-borderRadius-6"]=6*Number(e)+"px",n["--apkt-borderRadius-8"]=8*Number(e)+"px",n["--apkt-borderRadius-16"]=16*Number(e)+"px",n["--apkt-borderRadius-20"]=20*Number(e)+"px",n["--apkt-borderRadius-32"]=32*Number(e)+"px",n["--apkt-borderRadius-64"]=64*Number(e)+"px",n["--apkt-borderRadius-128"]=128*Number(e)+"px"}return n},generateColorMixCSS(e,t){if(!e?.["--w3m-color-mix"]||!e["--w3m-color-mix-strength"])return"";const n=e["--w3m-color-mix"],r=e["--w3m-color-mix-strength"];if(!r||0===r)return"";const s=Object.keys(t||{}).filter(e=>{const t=e.includes("-tokens-core-background")||e.includes("-tokens-core-text")||e.includes("-tokens-core-border")||e.includes("-tokens-core-foreground")||e.includes("-tokens-core-icon")||e.includes("-tokens-theme-background")||e.includes("-tokens-theme-text")||e.includes("-tokens-theme-border")||e.includes("-tokens-theme-foreground")||e.includes("-tokens-theme-icon"),n=e.includes("-borderRadius-")||e.includes("-spacing-")||e.includes("-textSize-")||e.includes("-fontFamily-")||e.includes("-fontWeight-")||e.includes("-typography-")||e.includes("-duration-")||e.includes("-ease-")||e.includes("-path-")||e.includes("-width-")||e.includes("-height-")||e.includes("-visual-size-")||e.includes("-modal-width")||e.includes("-cover");return t&&!n});return 0===s.length?"":` @supports (background: color-mix(in srgb, white 50%, black)) {\n      :root {\n        ${s.map(e=>{const s=t?.[e]||"";return s.includes("color-mix")||s.startsWith("#")||s.startsWith("rgb")?`${e}: color-mix(in srgb, ${n} ${r}%, ${s});`:`${e}: color-mix(in srgb, ${n} ${r}%, var(${e}-base, ${s}));`}).join("")}\n      }\n    }`},generateBaseVariables(e){const t={},n=e["--apkt-tokens-theme-backgroundPrimary"];n&&(t["--apkt-tokens-theme-backgroundPrimary-base"]=n);const r=e["--apkt-tokens-core-backgroundAccentPrimary"];return r&&(t["--apkt-tokens-core-backgroundAccentPrimary-base"]=r),t},applyColorMixToVariables(e,t){const n={};t?.["--apkt-tokens-theme-backgroundPrimary"]&&(n["--apkt-tokens-theme-backgroundPrimary"]="var(--apkt-tokens-theme-backgroundPrimary-base)"),t?.["--apkt-tokens-core-backgroundAccentPrimary"]&&(n["--apkt-tokens-core-backgroundAccentPrimary"]="var(--apkt-tokens-core-backgroundAccentPrimary-base)");const r=o(e),s=r["color-mix"],i=r["color-mix-strength"];if(!i||0===i)return n;const a=Object.keys(t||{}).filter(e=>{const t=e.includes("-tokens-core-background")||e.includes("-tokens-core-text")||e.includes("-tokens-core-border")||e.includes("-tokens-core-foreground")||e.includes("-tokens-core-icon")||e.includes("-tokens-theme-background")||e.includes("-tokens-theme-text")||e.includes("-tokens-theme-border")||e.includes("-tokens-theme-foreground")||e.includes("-tokens-theme-icon")||e.includes("-tokens-theme-overlay"),n=e.includes("-borderRadius-")||e.includes("-spacing-")||e.includes("-textSize-")||e.includes("-fontFamily-")||e.includes("-fontWeight-")||e.includes("-typography-")||e.includes("-duration-")||e.includes("-ease-")||e.includes("-path-")||e.includes("-width-")||e.includes("-height-")||e.includes("-visual-size-")||e.includes("-modal-width")||e.includes("-cover");return t&&!n});return 0===a.length||a.forEach(e=>{const r=t?.[e]||"";e.endsWith("-base")||(n[e]="--apkt-tokens-theme-backgroundPrimary"===e||"--apkt-tokens-core-backgroundAccentPrimary"===e?`color-mix(in srgb, ${s} ${i}%, var(${e}-base))`:r.includes("color-mix")||r.startsWith("#")||r.startsWith("rgb")?`color-mix(in srgb, ${s} ${i}%, ${r})`:`color-mix(in srgb, ${s} ${i}%, var(${e}-base, ${r}))`)}),n}},{cssVariablesVarPrefix:c}=a.createCSSVariables(s.W2);function l(e,...t){return(0,r.iv)(e,...t.map(e=>(0,r.$m)("function"==typeof e?e(c):e)))}},61831:function(e,t,n){"use strict";n.d(t,{n:function(){return p},Hs:function(){return h},R:function(){return f},ET:function(){return m},ZM:function(){return y}});var r=n(14350),s=n(17139);let i,o,a,c,l;const d={"KHTeka-500-woff2":"https://fonts.reown.com/KHTeka-Medium.woff2","KHTeka-400-woff2":"https://fonts.reown.com/KHTeka-Regular.woff2","KHTeka-300-woff2":"https://fonts.reown.com/KHTeka-Light.woff2","KHTekaMono-400-woff2":"https://fonts.reown.com/KHTekaMono-Regular.woff2","KHTeka-500-woff":"https://fonts.reown.com/KHTeka-Light.woff","KHTeka-400-woff":"https://fonts.reown.com/KHTeka-Regular.woff","KHTeka-300-woff":"https://fonts.reown.com/KHTeka-Light.woff","KHTekaMono-400-woff":"https://fonts.reown.com/KHTekaMono-Regular.woff"};function u(e,t="dark"){i&&document.head.removeChild(i),i=document.createElement("style"),i.textContent=s.e5.createRootStyles(t,e),document.head.appendChild(i)}function p(e,t="dark"){if(l=e,o=document.createElement("style"),a=document.createElement("style"),c=document.createElement("style"),o.textContent=g(e).core.cssText,a.textContent=g(e).dark.cssText,c.textContent=g(e).light.cssText,document.head.appendChild(o),document.head.appendChild(a),document.head.appendChild(c),u(e,t),h(t),!e?.["--apkt-font-family"]&&!e?.["--w3m-font-family"])for(const[n,r]of Object.entries(d)){const e=document.createElement("link");e.rel="preload",e.href=r,e.as="font",e.type=n.includes("woff2")?"font/woff2":"font/woff",e.crossOrigin="anonymous",document.head.appendChild(e)}h(t)}function h(e="dark"){a&&c&&i&&("light"===e?(u(l,e),a.removeAttribute("media"),c.media="enabled"):(u(l,e),c.removeAttribute("media"),a.media="enabled"))}function f(e){if(l=e,o&&a&&c){o.textContent=g(e).core.cssText,a.textContent=g(e).dark.cssText,c.textContent=g(e).light.cssText;const t=e?.["--apkt-font-family"]||e?.["--w3m-font-family"];t&&(o.textContent=o.textContent?.replace("font-family: KHTeka",`font-family: ${t}`),a.textContent=a.textContent?.replace("font-family: KHTeka",`font-family: ${t}`),c.textContent=c.textContent?.replace("font-family: KHTeka",`font-family: ${t}`))}i&&u(e,"enabled"===c?.media?"light":"dark")}function g(e){const t=Boolean(e?.["--apkt-font-family"]||e?.["--w3m-font-family"]);return{core:r.iv`
      ${t?r.iv``:r.iv`
            @font-face {
              font-family: 'KHTeka';
              src:
                url(${(0,r.$m)(d["KHTeka-400-woff2"])}) format('woff2'),
                url(${(0,r.$m)(d["KHTeka-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
              font-display: swap;
            }

            @font-face {
              font-family: 'KHTeka';
              src:
                url(${(0,r.$m)(d["KHTeka-300-woff2"])}) format('woff2'),
                url(${(0,r.$m)(d["KHTeka-300-woff"])}) format('woff');
              font-weight: 300;
              font-style: normal;
            }

            @font-face {
              font-family: 'KHTekaMono';
              src:
                url(${(0,r.$m)(d["KHTekaMono-400-woff2"])}) format('woff2'),
                url(${(0,r.$m)(d["KHTekaMono-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
            }

            @font-face {
              font-family: 'KHTeka';
              src:
                url(${(0,r.$m)(d["KHTeka-400-woff2"])}) format('woff2'),
                url(${(0,r.$m)(d["KHTeka-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
            }
          `}

      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --apkt-modal-width: 370px;

        --apkt-visual-size-inherit: inherit;
        --apkt-visual-size-sm: 40px;
        --apkt-visual-size-md: 55px;
        --apkt-visual-size-lg: 80px;

        --apkt-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --apkt-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --apkt-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --apkt-width-network-sm: 36px;
        --apkt-width-network-md: 48px;
        --apkt-width-network-lg: 86px;

        --apkt-duration-dynamic: 0ms;
        --apkt-height-network-sm: 40px;
        --apkt-height-network-md: 54px;
        --apkt-height-network-lg: 96px;
      }
    `,dark:r.iv`
      :root {
      }
    `,light:r.iv`
      :root {
      }
    `}}const m=r.iv`
  div,
  span,
  iframe,
  a,
  img,
  form,
  button,
  label,
  *::after,
  *::before {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    backface-visibility: hidden;
  }

  :host {
    font-family: var(--apkt-fontFamily-regular);
  }
`,y=r.iv`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;

    will-change: background-color, color, border, box-shadow, width, height, transform, opacity;
    outline: none;
    border: none;
    text-decoration: none;
    transition:
      background-color var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      color var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      border var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      box-shadow var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      width var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      height var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      transform var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      opacity var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      scale var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      border-radius var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2);
    will-change:
      background-color, color, border, box-shadow, width, height, transform, opacity, scale,
      border-radius;
  }

  a:active:not([disabled]),
  button:active:not([disabled]) {
    scale: 0.975;
    transform-origin: center;
  }

  button:disabled {
    cursor: default;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`},18504:function(e,t,n){"use strict";n.d(t,{H:function(){return r}});const r={getSpacingStyles:(e,t)=>Array.isArray(e)?e[t]?`var(--apkt-spacing-${e[t]})`:void 0:"string"==typeof e?`var(--apkt-spacing-${e})`:void 0,getFormattedDate:e=>new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(e),formatCurrency(e=0,t={}){const n=Number(e);return isNaN(n)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2,...t}).format(n)},getHostName(e){try{return new URL(e).hostname}catch{return""}},getTruncateString:({string:e,charsStart:t,charsEnd:n,truncate:r})=>e.length<=t+n?e:"end"===r?`${e.substring(0,t)}...`:"start"===r?`...${e.substring(e.length-n)}`:`${e.substring(0,Math.floor(t))}...${e.substring(e.length-Math.floor(n))}`,generateAvatarColors(e){const t=e.toLowerCase().replace(/^0x/iu,"").replace(/[^a-f0-9]/gu,"").substring(0,6).padEnd(6,"0"),n=this.hexToRgb(t),r=getComputedStyle(document.documentElement).getPropertyValue("--w3m-border-radius-master"),s=100-3*Number(r?.replace("px","")),i=`${s}% ${s}% at 65% 40%`,o=[];for(let a=0;a<5;a+=1){const e=this.tintColor(n,.15*a);o.push(`rgb(${e[0]}, ${e[1]}, ${e[2]})`)}return`\n    --local-color-1: ${o[0]};\n    --local-color-2: ${o[1]};\n    --local-color-3: ${o[2]};\n    --local-color-4: ${o[3]};\n    --local-color-5: ${o[4]};\n    --local-radial-circle: ${i}\n   `},hexToRgb(e){const t=parseInt(e,16);return[t>>16&255,t>>8&255,255&t]},tintColor(e,t){const[n,r,s]=e;return[Math.round(n+(255-n)*t),Math.round(r+(255-r)*t),Math.round(s+(255-s)*t)]},isNumber:e=>/^[0-9]+$/u.test(e),getColorTheme:e=>e||("undefined"!=typeof window&&window.matchMedia&&"function"==typeof window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)")?.matches?"dark":"light":"dark"),splitBalance(e){const t=e.split(".");return 2===t.length?[t[0],t[1]]:["0","00"]},roundNumber:(e,t,n)=>e.toString().length>=t?Number(e).toFixed(n):e,cssDurationToNumber:e=>e.endsWith("s")?1e3*Number(e.replace("s","")):e.endsWith("ms")?Number(e.replace("ms","")):0,maskInput({value:e,decimals:t,integers:n}){if("."===(e=e.replace(",",".")))return"0.";const[r="",s]=e.split(".").map(e=>e.replace(/[^0-9]/gu,"")),i=n?r.substring(0,n):r,o=2===i.length?String(Number(i)):i,a="number"==typeof t?s?.substring(0,t):s;return("string"==typeof a&&("number"!=typeof t||t>0)?[o,a].join("."):o)??""},capitalize:e=>e?e.charAt(0).toUpperCase()+e.slice(1):""}},35896:function(e,t,n){"use strict";function r(e){return function(t){return"function"==typeof t?function(e,t){return customElements.get(e)||customElements.define(e,t),t}(e,t):function(e,t){const{kind:n,elements:r}=t;return{kind:n,elements:r,finisher(t){customElements.get(e)||customElements.define(e,t)}}}(e,t)}}n.d(t,{M:function(){return r}})},87002:function(e,t,n){"use strict";n.d(t,{f:function(){return p}});var r=n(60168),s=n(33984),i=n(72290),o=n(42916),a=n(63908),c=n(52991);const l={ConnectorExplorerIds:{[i.b.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[i.b.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[i.b.CONNECTOR_ID.BASE_ACCOUNT]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[i.b.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[i.b.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[i.b.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[c.b.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[c.b.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[c.b.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[c.b.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[c.b.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[c.b.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[c.b.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[c.b.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[c.b.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[c.b.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[c.b.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13",[c.b.OKX_CONNECTOR_NAME]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[c.b.BINANCE_CONNECTOR_NAME]:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200","00000008819873e925422c1ff0f99f7c":"b3406e4a-bbfc-44fb-e3a6-89673c78b700","-239":"20f673c0-095e-49b2-07cf-eb5049dcf600","-3":"20f673c0-095e-49b2-07cf-eb5049dcf600"},ConnectorImageIds:{[i.b.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[i.b.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[i.b.CONNECTOR_ID.BASE_ACCOUNT]:"bba2c8be-7fd1-463e-42b1-796ecb0ad200",[i.b.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[i.b.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[i.b.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[i.b.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[i.b.CONNECTOR_ID.INJECTED]:"Browser Wallet",[i.b.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[i.b.CONNECTOR_ID.COINBASE]:"Coinbase",[i.b.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[i.b.CONNECTOR_ID.BASE_ACCOUNT]:"Base Account",[i.b.CONNECTOR_ID.LEDGER]:"Ledger",[i.b.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[i.b.CONNECTOR_ID.INJECTED]:"INJECTED",[i.b.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[i.b.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[i.b.CONNECTOR_ID.AUTH]:"AUTH",[c.b.CONNECTOR_TYPE_AUTH]:"AUTH"},WalletConnectRpcChainIds:[1,5,11155111,10,420,42161,421613,137,80001,42220,1313161554,1313161555,56,97,43114,43113,100,8453,84531,7777777,999,324,280]};function d(e,t){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",e),n.searchParams.set("projectId",t),n.toString()}const u=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","eip155:80094","eip155:80069","eip155:560048","eip155:31","eip155:2818","eip155:57054","eip155:911867","eip155:534351","eip155:1112","eip155:534352","eip155:1111","eip155:146","eip155:130","eip155:1284","eip155:30","eip155:2810","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],p={extendRpcUrlWithProjectId(e,t){let n=!1;try{n="rpc.walletconnect.org"===new URL(e).host}catch{n=!1}if(n){const n=new URL(e);return n.searchParams.has("projectId")||n.searchParams.set("projectId",t),n.toString()}return e},isCaipNetwork:e=>"chainNamespace"in e&&"caipNetworkId"in e,getChainNamespace(e){return this.isCaipNetwork(e)?e.chainNamespace:i.b.CHAIN.EVM},getCaipNetworkId(e){return this.isCaipNetwork(e)?e.caipNetworkId:`${i.b.CHAIN.EVM}:${e.id}`},getDefaultRpcUrl(e,t,n){const r=e.rpcUrls?.default?.http?.[0];return u.includes(t)?d(t,n):r||""},extendCaipNetwork(e,{customNetworkImageUrls:t,projectId:n,customRpcUrls:r}){const s=this.getChainNamespace(e),i=this.getCaipNetworkId(e),o=e.rpcUrls?.default?.http?.[0],a=this.getDefaultRpcUrl(e,i,n),c=e?.rpcUrls?.chainDefault?.http?.[0]||o,d=r?.[i]?.map(e=>e.url)||[],u=[...d,...a?[a]:[]],p=[...d];return c&&!p.includes(c)&&p.push(c),{...e,chainNamespace:s,caipNetworkId:i,assets:{imageId:l.NetworkImageIds[e.id],imageUrl:t?.[e.id]},rpcUrls:{...e.rpcUrls,default:{http:u},chainDefault:{http:p}}}},extendCaipNetworks:(e,{customNetworkImageUrls:t,projectId:n,customRpcUrls:r})=>e.map(e=>p.extendCaipNetwork(e,{customNetworkImageUrls:t,customRpcUrls:r,projectId:n})),getViemTransport(e,t,n){const i=[];return n?.forEach(e=>{i.push((0,r.d)(e.url,e.config))}),u.includes(e.caipNetworkId)&&i.push((0,r.d)(d(e.caipNetworkId,t),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),e?.rpcUrls?.default?.http?.forEach(e=>{i.push((0,r.d)(e))}),(0,s.tv)(i)},extendWagmiTransports(e,t,n){if(u.includes(e.caipNetworkId)){const i=this.getDefaultRpcUrl(e,e.caipNetworkId,t);return(0,s.tv)([n,(0,r.d)(i)])}return n},getUnsupportedNetwork:e=>({id:e.split(":")[1],caipNetworkId:e,name:i.b.UNSUPPORTED_NETWORK_NAME,chainNamespace:e.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}),getCaipNetworkFromStorage(e){const t=o.M.getActiveCaipNetworkId(),n=a.R.getAllRequestedCaipNetworks(),r=Array.from(a.R.state.chains.keys()||[]),s=t?.split(":")[0],i=!!s&&r.includes(s),c=n?.find(e=>e.caipNetworkId===t);return i&&!c&&t?this.getUnsupportedNetwork(t):c||e||n?.[0]}}},52991:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});const r={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",OKX_CONNECTOR_NAME:"OKX Wallet",BINANCE_CONNECTOR_NAME:"Binance Wallet",EIP155:n(72290).b.CHAIN.EVM,ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"AUTH",getSDKVersionWarningMessage:(e,t)=>`\n     @@@@@@@           @@@@@@@@@@@@@@@@@@      \n   @@@@@@@@@@@      @@@@@@@@@@@@@@@@@@@@@@@@   \n  @@@@@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@  \n @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@  \n @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@   @@@@@@@@@@@ \n @@@@@@@@@@@@@@@  @@@@@@@@@@@@@   @@@@@@@@@@@@ \n @@@@@@@@@@@@@@@  @@@@@@@@@@@@@  @@@@@@@@@@@@@\n @@@@@@@@@@@@@@@  @@@@@@@@@@@@   @@@@@@@@@@@@@    \n @@@@@@   @@@@@@  @@@@@@@@@@@   @@@@@@@@@@@@@@    \n @@@@@@   @@@@@@  @@@@@@@@@@@  @@@@@@@@@@@@@@@ \n @@@@@@@@@@@@@@@  @@@@@@@@@@   @@@@@@@@@@@@@@@ \n @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@  \n  @@@@@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@  \n   @@@@@@@@@@@      @@@@@@@@@@@@@@@@@@@@@@@@   \n      @@@@@            @@@@@@@@@@@@@@@@@@  \n      \nAppKit SDK version ${e} is outdated. Latest version is ${t}. Please update to the latest version for bug fixes and new features.\n            \nChangelog: https://github.com/reown-com/appkit/releases\nNPM Registry: https://www.npmjs.com/package/@reown/appkit`}},33726:function(e,t,n){"use strict";n.d(t,{g:function(){return l}});var r=n(8239),s=n(72290),i=n(63908),o=n(27297),a=n(42916),c=n(52991);const l={getCaipTokens(e){if(!e)return;const t={};return Object.entries(e).forEach(([e,n])=>{t[`${c.b.EIP155}:${e}`]=n}),t},isLowerCaseMatch:(e,t)=>e?.toLowerCase()===t?.toLowerCase(),getActiveNamespaceConnectedToAuth(){const e=i.R.state.activeChain;return s.b.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(t=>o.A.getConnectorId(t)===s.b.CONNECTOR_ID.AUTH&&t===e)},withRetry({conditionFn:e,intervalMs:t,maxRetries:n}){let s=0;return new Promise(i=>{function o(){return a.apply(this,arguments)}function a(){return(a=(0,r.Z)(function*(){return s+=1,(yield e())?i(!0):s>=n?i(!1):(setTimeout(o,t),null)})).apply(this,arguments)}o()})},userChainIdToChainNamespace(e){if("number"==typeof e)return s.b.CHAIN.EVM;const[t]=e.split(":");return t},getOtherAuthNamespaces:e=>e?s.b.AUTH_CONNECTOR_SUPPORTED_CHAINS.filter(t=>t!==e):[],getConnectorStorageInfo(e,t){const n=a.M.getConnections()[t]??[];return{hasDisconnected:a.M.isConnectorDisconnected(e,t),hasConnected:n.some(t=>l.isLowerCaseMatch(t.connectorId,e))}}}},3628:function(e,t,n){"use strict";n.d(t,{$0:function(){return r},y_:function(){return s}}),"undefined"!=typeof process&&void 0!==process.env&&process,"undefined"!=typeof process&&void 0!==process.env&&process,"undefined"!=typeof process&&void 0!==process.env&&process;const r={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},s={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}}},71426:function(e,t,n){"use strict";n.r(t),n.d(t,{AppKit:function(){return of},createAppKit:function(){return af}});var r=n(8239),s=n(27297),i=n(63908),o=n(7551),a=n(53574),c=n(32628),l=n(93105),d=n(59093),u=n(39927),p=n(14616),h=n(52399),f=Object.defineProperty,g=(e,t,n)=>((e,t,n)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class m extends h.q{constructor(e){super(),this.opts=e,g(this,"protocol","wc"),g(this,"version",2)}}var y=Object.defineProperty;class b extends h.q{constructor(e,t){super(),this.core=e,this.logger=t,((e,t,n)=>{((e,t,n)=>{t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n)})(this,"records",new Map)}}class w extends h.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class v extends h.q{constructor(e){super()}}class E extends h.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class C extends h.q{constructor(e,t){super(),this.core=e,this.logger=t}}var A=Object.defineProperty,N=(e,t,n)=>((e,t,n)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),I=n(14611),_=n(80328),S=n(29168),T=n(97057),R=n(37167),O=n(78359),P=n(13324),k=n(4180),x=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let a=0;a<t.length;a++)t[a]=255;for(let a=0;a<e.length;a++){const n=e.charAt(a),r=n.charCodeAt(0);if(255!==t[r])throw new TypeError(n+" is ambiguous");t[r]=a}const n=e.length,r=e.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;let i=0,o=0,a=0;for(;e[i]===r;)o++,i++;const c=(e.length-i)*s+1>>>0,l=new Uint8Array(c);for(;i<e.length;){const r=e.charCodeAt(i);if(r>255)return;let s=t[r];if(255===s)return;let o=0;for(let e=c-1;(0!==s||o<a)&&-1!==e;e--,o++)s+=n*l[e]>>>0,l[e]=s%256>>>0,s=s/256>>>0;if(0!==s)throw new Error("Non-zero carry");a=o,i++}let d=c-a;for(;d!==c&&0===l[d];)d++;const u=new Uint8Array(o+(c-d));let p=o;for(;d!==c;)u[p++]=l[d++];return u}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";let s=0,o=0,a=0;const c=t.length;for(;a!==c&&0===t[a];)a++,s++;const l=(c-a)*i+1>>>0,d=new Uint8Array(l);for(;a!==c;){let e=t[a],r=0;for(let t=l-1;(0!==e||r<o)&&-1!==t;t--,r++)e+=256*d[t]>>>0,d[t]=e%n>>>0,e=e/n>>>0;if(0!==e)throw new Error("Non-zero carry");o=r,a++}let u=l-o;for(;u!==l&&0===d[u];)u++;let p=r.repeat(s);for(;u<l;++u)p+=e.charAt(d[u]);return p},decodeUnsafe:o,decode:function(e){const t=o(e);if(t)return t;throw new Error("Non-base"+n+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),U=n(5640),M=n(48415),D=n(19663);function L(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}class B{constructor(e,t){this.type=e,this.data=t}}class $ extends Error{constructor(e){super(e);const t=Object.create($.prototype);Object.setPrototypeOf(this,t),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:$.name})}}const j=4294967295;function F(e,t,n){const r=Math.floor(n/4294967296),s=n;e.setUint32(t,r),e.setUint32(t+4,s)}function W(e,t){return 4294967296*e.getInt32(t)+e.getUint32(t+4)}const q={type:-1,encode:function(e){if(e instanceof Date){const t=function(e){const t=e.getTime(),n=Math.floor(t/1e3),r=1e6*(t-1e3*n),s=Math.floor(r/1e9);return{sec:n+s,nsec:r-1e9*s}}(e);return function({sec:e,nsec:t}){if(e>=0&&t>=0&&e<=17179869183){if(0===t&&e<=4294967295){const t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e),t}{const n=e/4294967296,r=4294967295&e,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,t<<2|3&n),i.setUint32(4,r),s}}{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,t),F(r,4,e),n}}(t)}return null},decode:function(e){const t=function(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:{const e=t.getUint32(0);return{sec:4294967296*(3&e)+t.getUint32(4),nsec:e>>>2}}case 12:return{sec:W(t,4),nsec:t.getUint32(0)};default:throw new $(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}(e);return new Date(1e3*t.sec+t.nsec/1e6)}};class Z{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(q)}register({type:e,encode:t,decode:n}){if(e>=0)this.encoders[e]=t,this.decoders[e]=n;else{const r=-1-e;this.builtInEncoders[r]=t,this.builtInDecoders[r]=n}}tryToEncode(e,t){for(let n=0;n<this.builtInEncoders.length;n++){const r=this.builtInEncoders[n];if(null!=r){const s=r(e,t);if(null!=s)return new B(-1-n,s)}}for(let n=0;n<this.encoders.length;n++){const r=this.encoders[n];if(null!=r){const s=r(e,t);if(null!=s)return new B(n,s)}}return e instanceof B?e:null}decode(e,t,n){const r=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return r?r(e,t,n):new B(t,e)}}Z.defaultCodec=new Z;const H=new TextEncoder;function K(e,t,n){let r=t;const s=r+n,i=[];let o="";for(;r<s;){const t=e[r++];if(0==(128&t))i.push(t);else if(192==(224&t)){const n=63&e[r++];i.push((31&t)<<6|n)}else if(224==(240&t)){const n=63&e[r++],s=63&e[r++];i.push((31&t)<<12|n<<6|s)}else if(240==(248&t)){let n=(7&t)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++];n>65535&&(n-=65536,i.push(n>>>10&1023|55296),n=56320|1023&n),i.push(n)}else i.push(t);i.length>=4096&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const V=new TextDecoder;function z(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):function(e){return e instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer}(e)?new Uint8Array(e):Uint8Array.from(e)}function G(e){var t,n,r,s=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);s--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new J(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function J(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(J=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new J(e)}const Y="array",X="map_key",Q="map_value",ee=e=>{if("string"==typeof e||"number"==typeof e)return e;throw new $("The type of key must be string or number but "+typeof e)};class te{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const t=this.getUninitializedStateFromPool();t.type=Y,t.position=0,t.size=e,t.array=new Array(e)}pushMapState(e){const t=this.getUninitializedStateFromPool();t.type=X,t.readCount=0,t.size=e,t.map={}}getUninitializedStateFromPool(){return this.stackHeadPosition++,this.stackHeadPosition===this.stack.length&&this.stack.push({type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null}),this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===Y){const t=e;t.size=0,t.array=void 0,t.position=0,t.type=void 0}if(e.type===X||e.type===Q){const t=e;t.size=0,t.map=void 0,t.readCount=0,t.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const ne=new DataView(new ArrayBuffer(0)),re=new Uint8Array(ne.buffer);try{ne.getInt8(0)}catch(sn){if(!(sn instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const se=new RangeError("Insufficient data"),ie=new class{constructor(e=16,t=16){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=t,this.caches=[];for(let n=0;n<this.maxKeyLength;n++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,t,n){const r=this.caches[n-1];e:for(const s of r){const r=s.bytes;for(let s=0;s<n;s++)if(r[s]!==e[t+s])continue e;return s.str}return null}store(e,t){const n=this.caches[e.length-1],r={bytes:e,str:t};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=r:n.push(r)}decode(e,t,n){const r=this.find(e,t,n);if(null!=r)return this.hit++,r;this.miss++;const s=K(e,t,n),i=Uint8Array.prototype.slice.call(e,t,t+n);return this.store(i,s),s}};class oe{constructor(e){this.totalPos=0,this.pos=0,this.view=ne,this.bytes=re,this.headByte=-1,this.stack=new te,this.entered=!1,this.extensionCodec=e?.extensionCodec??Z.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.rawStrings=e?.rawStrings??!1,this.maxStrLength=e?.maxStrLength??j,this.maxBinLength=e?.maxBinLength??j,this.maxArrayLength=e?.maxArrayLength??j,this.maxMapLength=e?.maxMapLength??j,this.maxExtLength=e?.maxExtLength??j,this.keyDecoder=void 0!==e?.keyDecoder?e.keyDecoder:ie,this.mapKeyConverter=e?.mapKeyConverter??ee}clone(){return new oe({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=-1,this.stack.reset()}setBuffer(e){const t=z(e);this.bytes=t,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.pos=0}appendBuffer(e){if(-1!==this.headByte||this.hasRemaining(1)){const t=this.bytes.subarray(this.pos),n=z(e),r=new Uint8Array(t.length+n.length);r.set(t),r.set(n,t.length),this.setBuffer(r)}else this.setBuffer(e)}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:t,pos:n}=this;return new RangeError(`Extra ${t.byteLength-n} of ${t.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t}finally{this.entered=!1}}*decodeMulti(e){if(this.entered)yield*this.clone().decodeMulti(e);else try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}decodeAsync(e){var t=this;return(0,r.Z)(function*(){if(t.entered)return t.clone().decodeAsync(e);try{t.entered=!0;let d,u=!1;var n,r=!0,s=!1;try{for(var i,o,a=G(e);r=(i=yield a.next()).done,o=yield i.value,!r;r=!0){const e=o;if(u)throw t.entered=!1,t.createExtraByteError(t.totalPos);t.appendBuffer(e);try{d=t.doDecodeSync(),u=!0}catch(c){if(!(c instanceof RangeError))throw c}t.totalPos+=t.pos}}catch(l){s=!0,n=l}finally{try{!r&&null!=a.return&&(yield a.return())}finally{if(s)throw n}}if(u){if(t.hasRemaining(1))throw t.createExtraByteError(t.totalPos);return d}const{headByte:p,pos:h,totalPos:f}=t;throw new RangeError(`Insufficient data in parsing ${L(p)} at ${f} (${h} in the current buffer)`)}finally{t.entered=!1}})()}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}decodeMultiAsync(e,t){var n=this;return(0,U.Z)(function*(){if(n.entered){const r=n.clone();yield*(0,D.Z)(G(r.decodeMultiAsync(e,t)),M.Z)}else try{n.entered=!0;let u=t,p=-1;var r,s=!0,i=!1;try{for(var o,a,c=G(e);s=(o=yield(0,M.Z)(c.next())).done,a=yield(0,M.Z)(o.value),!s;s=!0){const e=a;if(t&&0===p)throw n.createExtraByteError(n.totalPos);n.appendBuffer(e),u&&(p=n.readArraySize(),u=!1,n.complete());try{for(;yield n.doDecodeSync(),0!=--p;);}catch(l){if(!(l instanceof RangeError))throw l}n.totalPos+=n.pos}}catch(d){i=!0,r=d}finally{try{!s&&null!=c.return&&(yield(0,M.Z)(c.return()))}finally{if(i)throw r}}}finally{n.entered=!1}})()}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let t;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){const n=e-128;if(0!==n){this.pushMapState(n),this.complete();continue e}t={}}else if(e<160){const n=e-144;if(0!==n){this.pushArrayState(n),this.complete();continue e}t=[]}else t=this.decodeString(e-160,0);else if(192===e)t=null;else if(194===e)t=!1;else if(195===e)t=!0;else if(202===e)t=this.readF32();else if(203===e)t=this.readF64();else if(204===e)t=this.readU8();else if(205===e)t=this.readU16();else if(206===e)t=this.readU32();else if(207===e)t=this.useBigInt64?this.readU64AsBigInt():this.readU64();else if(208===e)t=this.readI8();else if(209===e)t=this.readI16();else if(210===e)t=this.readI32();else if(211===e)t=this.useBigInt64?this.readI64AsBigInt():this.readI64();else if(217===e){const e=this.lookU8();t=this.decodeString(e,1)}else if(218===e){const e=this.lookU16();t=this.decodeString(e,2)}else if(219===e){const e=this.lookU32();t=this.decodeString(e,4)}else if(220===e){const e=this.readU16();if(0!==e){this.pushArrayState(e),this.complete();continue e}t=[]}else if(221===e){const e=this.readU32();if(0!==e){this.pushArrayState(e),this.complete();continue e}t=[]}else if(222===e){const e=this.readU16();if(0!==e){this.pushMapState(e),this.complete();continue e}t={}}else if(223===e){const e=this.readU32();if(0!==e){this.pushMapState(e),this.complete();continue e}t={}}else if(196===e){const e=this.lookU8();t=this.decodeBinary(e,1)}else if(197===e){const e=this.lookU16();t=this.decodeBinary(e,2)}else if(198===e){const e=this.lookU32();t=this.decodeBinary(e,4)}else if(212===e)t=this.decodeExtension(1,0);else if(213===e)t=this.decodeExtension(2,0);else if(214===e)t=this.decodeExtension(4,0);else if(215===e)t=this.decodeExtension(8,0);else if(216===e)t=this.decodeExtension(16,0);else if(199===e){const e=this.lookU8();t=this.decodeExtension(e,1)}else if(200===e){const e=this.lookU16();t=this.decodeExtension(e,2)}else{if(201!==e)throw new $(`Unrecognized type byte: ${L(e)}`);{const e=this.lookU32();t=this.decodeExtension(e,4)}}this.complete();const n=this.stack;for(;n.length>0;){const e=n.top();if(e.type===Y){if(e.array[e.position]=t,e.position++,e.position!==e.size)continue e;t=e.array,n.release(e)}else{if(e.type===X){if("__proto__"===t)throw new $("The key __proto__ is not allowed");e.key=this.mapKeyConverter(t),e.type=Q;continue e}if(e.map[e.key]=t,e.readCount++,e.readCount!==e.size){e.key=null,e.type=X;continue e}t=e.map,n.release(e)}}return t}}readHeadByte(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=-1}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(e<160)return e-144;throw new $(`Unrecognized array type byte: ${L(e)}`)}}pushMapState(e){if(e>this.maxMapLength)throw new $(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new $(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,t){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,t):this.decodeBinary(e,t)}decodeUtf8String(e,t){if(e>this.maxStrLength)throw new $(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+t+e)throw se;const n=this.pos+t;let r;return r=this.stateIsMapKey()&&this.keyDecoder?.canBeCached(e)?this.keyDecoder.decode(this.bytes,n,e):function(e,t,n){return n>200?function(e,t,n){const r=e.subarray(t,t+n);return V.decode(r)}(e,t,n):K(e,t,n)}(this.bytes,n,e),this.pos+=t+e,r}stateIsMapKey(){return this.stack.length>0&&this.stack.top().type===X}decodeBinary(e,t){if(e>this.maxBinLength)throw new $(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+t))throw se;const n=this.pos+t,r=this.bytes.subarray(n,n+e);return this.pos+=t+e,r}decodeExtension(e,t){if(e>this.maxExtLength)throw new $(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const n=this.view.getInt8(this.pos+t),r=this.decodeBinary(e,t+1);return this.extensionCodec.decode(r,n,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=function(e,t){return 4294967296*e.getUint32(t)+e.getUint32(t+4)}(this.view,this.pos);return this.pos+=8,e}readI64(){const e=W(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}}class ae{constructor(e){this.entered=!1,this.extensionCodec=e?.extensionCodec??Z.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.maxDepth=e?.maxDepth??100,this.initialBufferSize=e?.initialBufferSize??2048,this.sortKeys=e?.sortKeys??!1,this.forceFloat32=e?.forceFloat32??!1,this.ignoreUndefined=e?.ignoreUndefined??!1,this.forceIntegerToFloat=e?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new ae({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,t){if(t>this.maxDepth)throw new Error(`Too deep objects in depth ${t}`);null==e?this.encodeNil():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.useBigInt64&&"bigint"==typeof e?this.encodeBigInt64(e):this.encodeObject(e,t)}ensureBufferSizeToWrite(e){const t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(2*t)}resizeBuffer(e){const t=new ArrayBuffer(e),n=new Uint8Array(t),r=new DataView(t);n.set(this.bytes),this.view=r,this.bytes=n}encodeNil(){this.writeU8(192)}encodeBoolean(e){this.writeU8(!1===e?194:195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else{if(!(e<4294967296))throw new Error(`Too long string: ${e} bytes in UTF-8`);this.writeU8(219),this.writeU32(e)}}encodeString(e){const t=function(e){const t=e.length;let n=0,r=0;for(;r<t;){let s=e.charCodeAt(r++);if(0!=(4294967168&s))if(0==(4294965248&s))n+=2;else{if(s>=55296&&s<=56319&&r<t){const t=e.charCodeAt(r);56320==(64512&t)&&(++r,s=((1023&s)<<10)+(1023&t)+65536)}n+=0==(4294901760&s)?3:4}else n++}return n}(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),function(e,t,n){e.length>50?function(e,t,n){H.encodeInto(e,t.subarray(n))}(e,t,n):function(e,t,n){const r=e.length;let s=n,i=0;for(;i<r;){let n=e.charCodeAt(i++);if(0!=(4294967168&n)){if(0==(4294965248&n))t[s++]=n>>6&31|192;else{if(n>=55296&&n<=56319&&i<r){const t=e.charCodeAt(i);56320==(64512&t)&&(++i,n=((1023&n)<<10)+(1023&t)+65536)}0==(4294901760&n)?(t[s++]=n>>12&15|224,t[s++]=n>>6&63|128):(t[s++]=n>>18&7|240,t[s++]=n>>12&63|128,t[s++]=n>>6&63|128)}t[s++]=63&n|128}else t[s++]=n}}(e,t,n)}(e,this.bytes,this.pos),this.pos+=t}encodeObject(e,t){const n=this.extensionCodec.tryToEncode(e,this.context);if(null!=n)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else{if("object"!=typeof e)throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`);this.encodeMap(e,t)}}encodeBinary(e){const t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else{if(!(t<4294967296))throw new Error(`Too large binary: ${t}`);this.writeU8(198),this.writeU32(t)}const n=z(e);this.writeU8a(n)}encodeArray(e,t){const n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else{if(!(n<4294967296))throw new Error(`Too large array: ${n}`);this.writeU8(221),this.writeU32(n)}for(const r of e)this.doEncode(r,t+1)}countWithoutUndefined(e,t){let n=0;for(const r of t)void 0!==e[r]&&n++;return n}encodeMap(e,t){const n=Object.keys(e);this.sortKeys&&n.sort();const r=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(r<16)this.writeU8(128+r);else if(r<65536)this.writeU8(222),this.writeU16(r);else{if(!(r<4294967296))throw new Error(`Too large map object: ${r}`);this.writeU8(223),this.writeU32(r)}for(const s of n){const n=e[s];this.ignoreUndefined&&void 0===n||(this.encodeString(s),this.doEncode(n,t+1))}}encodeExtension(e){if("function"==typeof e.data){const t=e.data(this.pos+6),n=t.length;if(n>=4294967296)throw new Error(`Too large extension object: ${n}`);return this.writeU8(201),this.writeU32(n),this.writeI8(e.type),void this.writeU8a(t)}const t=e.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else{if(!(t<4294967296))throw new Error(`Too large extension object: ${t}`);this.writeU8(201),this.writeU32(t)}this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),function(e,t,n){const r=n;e.setUint32(t,n/4294967296),e.setUint32(t+4,r)}(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),F(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}}var ce=n(24517),le=n(51462),de=n(63840),ue=n(40187);function pe(e){const[t,n]=e.split(":");return{namespace:t,reference:n}}function he(e,t){return e.includes(":")?[e]:t.chains||[]}var fe=Object.defineProperty,ge=Object.defineProperties,me=Object.getOwnPropertyDescriptors,ye=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,ve=(e,t,n)=>t in e?fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ee=(e,t)=>{for(var n in t||(t={}))be.call(t,n)&&ve(e,n,t[n]);if(ye)for(var n of ye(t))we.call(t,n)&&ve(e,n,t[n]);return e},Ce=(e,t,n)=>ve(e,"symbol"!=typeof t?t+"":t,n);const Ae="js";function Ne(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Ie(){return!(0,R.getDocument)()&&!!(0,R.getNavigator)()&&"ReactNative"===navigator.product}function _e(){return!Ne()&&!!(0,R.getNavigator)()&&!!(0,R.getDocument)()}function Se(){return Ie()?"react-native":Ne()?"node":_e()?"browser":"unknown"}function Te(){var e;try{return Ie()&&typeof global<"u"&&typeof(null==global?void 0:global.Application)<"u"?null==(e=global.Application)?void 0:e.applicationId:void 0}catch{return}}function Re(){return(0,O.D)()||{name:"",description:"",url:"",icons:[""]}}function Oe(e,t,n){const r=function(){if("react-native"===Se()&&typeof global<"u"&&typeof(null==global?void 0:global.Platform)<"u"){const{OS:e,Version:t}=global.Platform;return[e,t].join("-")}const e=(0,T.qY)();if(null===e)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[t,e.name,e.version].join("-"):[t,e.version].join("-")}(),s=function(){var e;const t=Se();return"browser"===t?[t,(null==(e=(0,R.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),[Ae,n].join("-"),r,s].join("/")}function Pe(e,t){return e.filter(e=>t.includes(e)).length===e.length}function ke(e){return Object.fromEntries(e.entries())}function xe(e){return new Map(Object.entries(e))}function Ue(e=I.FIVE_MINUTES,t){const n=(0,I.toMiliseconds)(e||I.FIVE_MINUTES);let r,s,i,o;return{resolve:e=>{i&&r&&(clearTimeout(i),r(e),o=Promise.resolve(e))},reject:e=>{i&&s&&(clearTimeout(i),s(e))},done:()=>new Promise((e,a)=>{if(o)return e(o);i=setTimeout(()=>{const e=new Error(t);o=Promise.reject(e),a(e)},n),r=e,s=a})}}function Me(e,t,n){return new Promise(function(){var s=(0,r.Z)(function*(r,s){const i=setTimeout(()=>s(new Error(n)),t);try{r(yield e)}catch(o){s(o)}clearTimeout(i)});return function(e,t){return s.apply(this,arguments)}}())}function De(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function Le(e){const[t,n]=e.split(":"),r={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof n)r.topic=n;else{if("id"!==t||!Number.isInteger(Number(n)))throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);r.id=Number(n)}return r}function Be(e,t){return(0,I.fromMiliseconds)((t||Date.now())+(0,I.toMiliseconds)(e))}function $e(e){return Date.now()>=(0,I.toMiliseconds)(e)}function je(e,t){return`${e}${t?`:${t}`:""}`}function Fe(e=[],t=[]){return[...new Set([...e,...t])]}function We(){return(We=(0,r.Z)(function*({id:e,topic:t,wcDeepLink:n}){var r;try{if(!n)return;const s=("string"==typeof n?JSON.parse(n):n)?.href;if("string"!=typeof s)return;const i=qe(s,e,t),o=Se();if("browser"===o){if(null==(r=(0,R.getDocument)())||!r.hasFocus())return void console.warn("Document does not have focus, skipping deeplink.");Ze(i)}else"react-native"===o&&typeof(null==global?void 0:global.Linking)<"u"&&(yield global.Linking.openURL(i))}catch(s){console.error(s)}})).apply(this,arguments)}function qe(e,t,n){const r=`requestId=${t}&sessionTopic=${n}`;e.endsWith("/")&&(e=e.slice(0,-1));let s=`${e}`;return s=e.startsWith("https://t.me")?`${s}${e.includes("?")?"&startapp=":"?startapp="}${function(e,t=!1){const n=Buffer.from(e).toString("base64");return t?n.replace(/[=]/g,""):n}(r,!0)}`:`${s}/wc?${r}`,s}function Ze(e){let t="_self";!function(){try{return window.self!==window.top}catch{return!1}}()?(typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"):t="_top",window.open(e,t,"noreferrer noopener")}function He(){return(He=(0,r.Z)(function*(e,t){let n="";try{if(_e()&&(n=localStorage.getItem(t),n))return n;n=yield e.getItem(t)}catch(r){console.error(r)}return n})).apply(this,arguments)}function Ke(e,t){if(!e.includes(t))return null;const n=e.split(/([&,?,=])/),r=n.indexOf(t);return n[r+2]}function Ve(){return typeof crypto<"u"&&null!=crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function ze(){return typeof process<"u"&&"true"===process.env.IS_VITEST}function Ge(e){return Buffer.from(e,"base64").toString("utf-8")}class Je{constructor({limit:e}){Ce(this,"limit"),Ce(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const e=this.set.values().next().value;e&&this.set.delete(e)}this.set.add(e)}}has(e){return this.set.has(e)}}const Ye=BigInt(2**32-1),Xe=BigInt(32);function Qe(e,t=!1){return t?{h:Number(e&Ye),l:Number(e>>Xe&Ye)}:{h:0|Number(e>>Xe&Ye),l:0|Number(e&Ye)}}function et(e,t=!1){const n=e.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:n,l:o}=Qe(e[i],t);[r[i],s[i]]=[n,o]}return[r,s]}const tt=(e,t,n)=>e>>>n,nt=(e,t,n)=>e<<32-n|t>>>n,rt=(e,t,n)=>e>>>n|t<<32-n,st=(e,t,n)=>e<<32-n|t>>>n,it=(e,t,n)=>e<<64-n|t>>>n-32,ot=(e,t,n)=>e>>>n-32|t<<64-n,at=(e,t)=>t,ct=(e,t)=>e;function lt(e,t,n,r){const s=(t>>>0)+(r>>>0);return{h:e+n+(s/2**32|0)|0,l:0|s}}const dt=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),ut=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,pt=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),ht=(e,t,n,r,s)=>t+n+r+s+(e/2**32|0)|0,ft=(e,t,n,r,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(s>>>0),gt=(e,t,n,r,s,i)=>t+n+r+s+i+(e/2**32|0)|0,mt="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function yt(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function bt(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function wt(e,...t){if(!yt(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function vt(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.createHasher");bt(e.outputLen),bt(e.blockLen)}function Et(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Ct(e,t){wt(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function At(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Nt(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function It(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function _t(e,t){return e<<32-t|e>>>t}const St=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Tt(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}const Rt=St?e=>e:e=>Tt(e),Ot=St?e=>e:function(e){for(let t=0;t<e.length;t++)e[t]=Tt(e[t]);return e},Pt="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,kt=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function xt(e){if(wt(e),Pt)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=kt[e[n]];return t}function Ut(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function Mt(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);if(Pt)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const t=Ut(e.charCodeAt(i)),n=Ut(e.charCodeAt(i+1));if(void 0===t||void 0===n)throw new Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);r[s]=16*t+n}return r}function Dt(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}function Lt(e){return"string"==typeof e&&(e=Dt(e)),wt(e),e}function Bt(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];wt(n),t+=n.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const t=e[r];n.set(t,s),s+=t.length}return n}class $t{}function jt(e){const t=t=>e().update(Lt(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Ft(e=32){if(mt&&"function"==typeof mt.getRandomValues)return mt.getRandomValues(new Uint8Array(e));if(mt&&"function"==typeof mt.randomBytes)return Uint8Array.from(mt.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}const Wt=BigInt(0),qt=BigInt(1),Zt=BigInt(2),Ht=BigInt(7),Kt=BigInt(256),Vt=BigInt(113),zt=[],Gt=[],Jt=[];for(let cf=0,lf=qt,df=1,uf=0;cf<24;cf++){[df,uf]=[uf,(2*df+3*uf)%5],zt.push(2*(5*uf+df)),Gt.push((cf+1)*(cf+2)/2%64);let e=Wt;for(let t=0;t<7;t++)lf=(lf<<qt^(lf>>Ht)*Vt)%Kt,lf&Zt&&(e^=qt<<(qt<<BigInt(t))-qt);Jt.push(e)}const Yt=et(Jt,!0),Xt=Yt[0],Qt=Yt[1],en=(e,t,n)=>n>32?((e,t,n)=>t<<n-32|e>>>64-n)(e,t,n):((e,t,n)=>e<<n|t>>>32-n)(e,t,n),tn=(e,t,n)=>n>32?((e,t,n)=>e<<n-32|t>>>64-n)(e,t,n):((e,t,n)=>t<<n|e>>>32-n)(e,t,n);class nn extends $t{constructor(e,t,n,r=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=r,this.rounds=s,bt(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=At(this.state)}clone(){return this._cloneInto()}keccak(){Ot(this.state32),function(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let r=0;r<10;r++)n[r]=e[r]^e[r+10]^e[r+20]^e[r+30]^e[r+40];for(let r=0;r<10;r+=2){const t=(r+8)%10,s=(r+2)%10,i=n[s],o=n[s+1],a=en(i,o,1)^n[t],c=tn(i,o,1)^n[t+1];for(let n=0;n<50;n+=10)e[r+n]^=a,e[r+n+1]^=c}let t=e[2],s=e[3];for(let n=0;n<24;n++){const r=Gt[n],i=en(t,s,r),o=tn(t,s,r),a=zt[n];t=e[a],s=e[a+1],e[a]=i,e[a+1]=o}for(let r=0;r<50;r+=10){for(let t=0;t<10;t++)n[t]=e[r+t];for(let t=0;t<10;t++)e[r+t]^=~n[(t+2)%10]&n[(t+4)%10]}e[0]^=Xt[r],e[1]^=Qt[r]}Nt(n)}(this.state32,this.rounds),Ot(this.state32),this.posOut=0,this.pos=0}update(e){Et(this),wt(e=Lt(e));const{blockLen:t,state:n}=this,r=e.length;for(let s=0;s<r;){const i=Math.min(t-this.pos,r-s);for(let t=0;t<i;t++)n[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:r}=this;e[n]^=t,0!=(128&t)&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){Et(this,!1),wt(e),this.finish();const t=this.state,{blockLen:n}=this;for(let r=0,s=e.length;r<s;){this.posOut>=n&&this.keccak();const i=Math.min(n-this.posOut,s-r);e.set(t.subarray(this.posOut,this.posOut+i),r),this.posOut+=i,r+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return bt(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Ct(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Nt(this.state)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:r,rounds:s,enableXOF:i}=this;return e||(e=new nn(t,n,r,i,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=r,e.enableXOF=i,e.destroyed=this.destroyed,e}}const rn=(sn=1,136,32,jt(()=>new nn(136,1,32)));var sn;function on(e,t,n){return e&t^~e&n}function an(e,t,n){return e&t^e&n^t&n}class cn extends $t{constructor(e,t,n,r){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.buffer=new Uint8Array(e),this.view=It(this.buffer)}update(e){Et(this),wt(e=Lt(e));const{view:t,buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o!==r)n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=It(e);for(;r<=s-i;i+=r)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Et(this),Ct(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:s}=this;let{pos:i}=this;t[i++]=128,Nt(this.buffer.subarray(i)),this.padOffset>r-i&&(this.process(n,0),i=0);for(let d=i;d<r;d++)t[d]=0;(function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?0:4;e.setUint32(t+(r?4:0),o,r),e.setUint32(t+c,a,r)})(n,r-8,BigInt(8*this.length),s),this.process(n,0);const o=It(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<c;d++)o.setUint32(4*d,l[d],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:s,destroyed:i,pos:o}=this;return e.destroyed=i,e.finished=s,e.length=r,e.pos=o,r%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const ln=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),dn=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),un=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),pn=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),hn=new Uint32Array(64);class fn extends cn{constructor(e=32){super(64,e,8,!1),this.A=0|ln[0],this.B=0|ln[1],this.C=0|ln[2],this.D=0|ln[3],this.E=0|ln[4],this.F=0|ln[5],this.G=0|ln[6],this.H=0|ln[7]}get(){const{A:e,B:t,C:n,D:r,E:s,F:i,G:o,H:a}=this;return[e,t,n,r,s,i,o,a]}set(e,t,n,r,s,i,o,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|s,this.F=0|i,this.G=0|o,this.H=0|a}process(e,t){for(let d=0;d<16;d++,t+=4)hn[d]=e.getUint32(t,!1);for(let d=16;d<64;d++){const e=hn[d-15],t=hn[d-2],n=_t(e,7)^_t(e,18)^e>>>3,r=_t(t,17)^_t(t,19)^t>>>10;hn[d]=r+hn[d-7]+n+hn[d-16]|0}let{A:n,B:r,C:s,D:i,E:o,F:a,G:c,H:l}=this;for(let d=0;d<64;d++){const e=l+(_t(o,6)^_t(o,11)^_t(o,25))+on(o,a,c)+pn[d]+hn[d]|0,t=(_t(n,2)^_t(n,13)^_t(n,22))+an(n,r,s)|0;l=c,c=a,a=o,o=i+e|0,i=s,s=r,r=n,n=e+t|0}n=n+this.A|0,r=r+this.B|0,s=s+this.C|0,i=i+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,r,s,i,o,a,c,l)}roundClean(){Nt(hn)}destroy(){this.set(0,0,0,0,0,0,0,0),Nt(this.buffer)}}const gn=et(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),mn=gn[0],yn=gn[1],bn=new Uint32Array(80),wn=new Uint32Array(80);class vn extends cn{constructor(e=64){super(128,e,16,!1),this.Ah=0|un[0],this.Al=0|un[1],this.Bh=0|un[2],this.Bl=0|un[3],this.Ch=0|un[4],this.Cl=0|un[5],this.Dh=0|un[6],this.Dl=0|un[7],this.Eh=0|un[8],this.El=0|un[9],this.Fh=0|un[10],this.Fl=0|un[11],this.Gh=0|un[12],this.Gl=0|un[13],this.Hh=0|un[14],this.Hl=0|un[15]}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:s,Cl:i,Dh:o,Dl:a,Eh:c,El:l,Fh:d,Fl:u,Gh:p,Gl:h,Hh:f,Hl:g}=this;return[e,t,n,r,s,i,o,a,c,l,d,u,p,h,f,g]}set(e,t,n,r,s,i,o,a,c,l,d,u,p,h,f,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|s,this.Cl=0|i,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|l,this.Fh=0|d,this.Fl=0|u,this.Gh=0|p,this.Gl=0|h,this.Hh=0|f,this.Hl=0|g}process(e,t){for(let b=0;b<16;b++,t+=4)bn[b]=e.getUint32(t),wn[b]=e.getUint32(t+=4);for(let b=16;b<80;b++){const e=0|bn[b-15],t=0|wn[b-15],n=rt(e,t,1)^rt(e,t,8)^tt(e,0,7),r=st(e,t,1)^st(e,t,8)^nt(e,t,7),s=0|bn[b-2],i=0|wn[b-2],o=rt(s,i,19)^it(s,i,61)^tt(s,0,6),a=st(s,i,19)^ot(s,i,61)^nt(s,i,6),c=pt(r,a,wn[b-7],wn[b-16]),l=ht(c,n,o,bn[b-7],bn[b-16]);bn[b]=0|l,wn[b]=0|c}let{Ah:n,Al:r,Bh:s,Bl:i,Ch:o,Cl:a,Dh:c,Dl:l,Eh:d,El:u,Fh:p,Fl:h,Gh:f,Gl:g,Hh:m,Hl:y}=this;for(let b=0;b<80;b++){const e=rt(d,u,14)^rt(d,u,18)^it(d,u,41),t=st(d,u,14)^st(d,u,18)^ot(d,u,41),w=d&p^~d&f,v=ft(y,t,u&h^~u&g,yn[b],wn[b]),E=gt(v,m,e,w,mn[b],bn[b]),C=0|v,A=rt(n,r,28)^it(n,r,34)^it(n,r,39),N=st(n,r,28)^ot(n,r,34)^ot(n,r,39),I=n&s^n&o^s&o,_=r&i^r&a^i&a;m=0|f,y=0|g,f=0|p,g=0|h,p=0|d,h=0|u,({h:d,l:u}=lt(0|c,0|l,0|E,0|C)),c=0|o,l=0|a,o=0|s,a=0|i,s=0|n,i=0|r;const S=dt(C,N,_);n=ut(S,E,A,I),r=0|S}({h:n,l:r}=lt(0|this.Ah,0|this.Al,0|n,0|r)),({h:s,l:i}=lt(0|this.Bh,0|this.Bl,0|s,0|i)),({h:o,l:a}=lt(0|this.Ch,0|this.Cl,0|o,0|a)),({h:c,l}=lt(0|this.Dh,0|this.Dl,0|c,0|l)),({h:d,l:u}=lt(0|this.Eh,0|this.El,0|d,0|u)),({h:p,l:h}=lt(0|this.Fh,0|this.Fl,0|p,0|h)),({h:f,l:g}=lt(0|this.Gh,0|this.Gl,0|f,0|g)),({h:m,l:y}=lt(0|this.Hh,0|this.Hl,0|m,0|y)),this.set(n,r,s,i,o,a,c,l,d,u,p,h,f,g,m,y)}roundClean(){Nt(bn,wn)}destroy(){Nt(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class En extends vn{constructor(){super(48),this.Ah=0|dn[0],this.Al=0|dn[1],this.Bh=0|dn[2],this.Bl=0|dn[3],this.Ch=0|dn[4],this.Cl=0|dn[5],this.Dh=0|dn[6],this.Dl=0|dn[7],this.Eh=0|dn[8],this.El=0|dn[9],this.Fh=0|dn[10],this.Fl=0|dn[11],this.Gh=0|dn[12],this.Gl=0|dn[13],this.Hh=0|dn[14],this.Hl=0|dn[15]}}const Cn=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class An extends vn{constructor(){super(32),this.Ah=0|Cn[0],this.Al=0|Cn[1],this.Bh=0|Cn[2],this.Bl=0|Cn[3],this.Ch=0|Cn[4],this.Cl=0|Cn[5],this.Dh=0|Cn[6],this.Dl=0|Cn[7],this.Eh=0|Cn[8],this.El=0|Cn[9],this.Fh=0|Cn[10],this.Fl=0|Cn[11],this.Gh=0|Cn[12],this.Gl=0|Cn[13],this.Hh=0|Cn[14],this.Hl=0|Cn[15]}}const Nn=jt(()=>new fn),In=jt(()=>new vn),_n=jt(()=>new En),Sn=jt(()=>new An),Tn=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Rn=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),On=new Uint32Array(32);function Pn(e,t,n,r,s,i){const o=s[i+1];let a=On[2*e],c=On[2*e+1],l=On[2*t],d=On[2*t+1],u=On[2*n],p=On[2*n+1],h=On[2*r],f=On[2*r+1],g=dt(a,l,s[i]);c=ut(g,c,d,o),a=0|g,({Dh:f,Dl:h}={Dh:f^c,Dl:h^a}),({Dh:f,Dl:h}={Dh:at(0,h),Dl:ct(f)}),({h:p,l:u}=lt(p,u,f,h)),({Bh:d,Bl:l}={Bh:d^p,Bl:l^u}),({Bh:d,Bl:l}={Bh:rt(d,l,24),Bl:st(d,l,24)}),On[2*e]=a,On[2*e+1]=c,On[2*t]=l,On[2*t+1]=d,On[2*n]=u,On[2*n+1]=p,On[2*r]=h,On[2*r+1]=f}function kn(e,t,n,r,s,i){const o=s[i+1];let a=On[2*e],c=On[2*e+1],l=On[2*t],d=On[2*t+1],u=On[2*n],p=On[2*n+1],h=On[2*r],f=On[2*r+1],g=dt(a,l,s[i]);c=ut(g,c,d,o),a=0|g,({Dh:f,Dl:h}={Dh:f^c,Dl:h^a}),({Dh:f,Dl:h}={Dh:rt(f,h,16),Dl:st(f,h,16)}),({h:p,l:u}=lt(p,u,f,h)),({Bh:d,Bl:l}={Bh:d^p,Bl:l^u}),({Bh:d,Bl:l}={Bh:it(d,l,63),Bl:ot(d,l,63)}),On[2*e]=a,On[2*e+1]=c,On[2*t]=l,On[2*t+1]=d,On[2*n]=u,On[2*n+1]=p,On[2*r]=h,On[2*r+1]=f}class xn extends $t{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,bt(e),bt(t),this.blockLen=e,this.outputLen=t,this.buffer=new Uint8Array(e),this.buffer32=At(this.buffer)}update(e){Et(this),wt(e=Lt(e));const{blockLen:t,buffer:n,buffer32:r}=this,s=e.length,i=e.byteOffset,o=e.buffer;for(let a=0;a<s;){this.pos===t&&(Ot(r),this.compress(r,0,!1),Ot(r),this.pos=0);const c=Math.min(t-this.pos,s-a),l=i+a;if(c!==t||l%4||!(a+c<s))n.set(e.subarray(a,a+c),this.pos),this.pos+=c,this.length+=c,a+=c;else{const e=new Uint32Array(o,l,Math.floor((s-a)/4));Ot(e);for(let n=0;a+t<s;n+=r.length,a+=t)this.length+=t,this.compress(e,n,!1);Ot(e)}}return this}digestInto(e){Et(this),Ct(e,this);const{pos:t,buffer32:n}=this;this.finished=!0,Nt(this.buffer.subarray(t)),Ot(n),this.compress(n,0,!0),Ot(n);const r=At(e);this.get().forEach((e,t)=>r[t]=Rt(e))}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){const{buffer:t,length:n,finished:r,destroyed:s,outputLen:i,pos:o}=this;return e||(e=new this.constructor({dkLen:i})),e.set(...this.get()),e.buffer.set(t),e.destroyed=s,e.finished=r,e.length=n,e.pos=o,e.outputLen=i,e}clone(){return this._cloneInto()}}class Un extends xn{constructor(e={}){const t=void 0===e.dkLen?64:e.dkLen;super(128,t),this.v0l=0|Rn[0],this.v0h=0|Rn[1],this.v1l=0|Rn[2],this.v1h=0|Rn[3],this.v2l=0|Rn[4],this.v2h=0|Rn[5],this.v3l=0|Rn[6],this.v3h=0|Rn[7],this.v4l=0|Rn[8],this.v4h=0|Rn[9],this.v5l=0|Rn[10],this.v5h=0|Rn[11],this.v6l=0|Rn[12],this.v6h=0|Rn[13],this.v7l=0|Rn[14],this.v7h=0|Rn[15],function(e,t={},n,r,s){if(bt(n),e<0||e>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=t;if(void 0!==i&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(void 0!==o&&o.length!==r)throw new Error("salt must be undefined or "+r);if(void 0!==a&&a.length!==s)throw new Error("personalization must be undefined or "+s)}(t,e,64,16,16);let{key:n,personalization:r,salt:s}=e,i=0;if(void 0!==n&&(n=Lt(n),i=n.length),this.v0l^=this.outputLen|i<<8|65536|1<<24,void 0!==s){s=Lt(s);const e=At(s);this.v4l^=Rt(e[0]),this.v4h^=Rt(e[1]),this.v5l^=Rt(e[2]),this.v5h^=Rt(e[3])}if(void 0!==r){r=Lt(r);const e=At(r);this.v6l^=Rt(e[0]),this.v6h^=Rt(e[1]),this.v7l^=Rt(e[2]),this.v7h^=Rt(e[3])}if(void 0!==n){const e=new Uint8Array(this.blockLen);e.set(n),this.update(e)}}get(){let{v0l:e,v0h:t,v1l:n,v1h:r,v2l:s,v2h:i,v3l:o,v3h:a,v4l:c,v4h:l,v5l:d,v5h:u,v6l:p,v6h:h,v7l:f,v7h:g}=this;return[e,t,n,r,s,i,o,a,c,l,d,u,p,h,f,g]}set(e,t,n,r,s,i,o,a,c,l,d,u,p,h,f,g){this.v0l=0|e,this.v0h=0|t,this.v1l=0|n,this.v1h=0|r,this.v2l=0|s,this.v2h=0|i,this.v3l=0|o,this.v3h=0|a,this.v4l=0|c,this.v4h=0|l,this.v5l=0|d,this.v5h=0|u,this.v6l=0|p,this.v6h=0|h,this.v7l=0|f,this.v7h=0|g}compress(e,t,n){this.get().forEach((e,t)=>On[t]=e),On.set(Rn,16);let{h:r,l:s}=Qe(BigInt(this.length));On[24]=Rn[8]^s,On[25]=Rn[9]^r,n&&(On[28]=~On[28],On[29]=~On[29]);let i=0;const o=Tn;for(let a=0;a<12;a++)Pn(0,4,8,12,e,t+2*o[i++]),kn(0,4,8,12,e,t+2*o[i++]),Pn(1,5,9,13,e,t+2*o[i++]),kn(1,5,9,13,e,t+2*o[i++]),Pn(2,6,10,14,e,t+2*o[i++]),kn(2,6,10,14,e,t+2*o[i++]),Pn(3,7,11,15,e,t+2*o[i++]),kn(3,7,11,15,e,t+2*o[i++]),Pn(0,5,10,15,e,t+2*o[i++]),kn(0,5,10,15,e,t+2*o[i++]),Pn(1,6,11,12,e,t+2*o[i++]),kn(1,6,11,12,e,t+2*o[i++]),Pn(2,7,8,13,e,t+2*o[i++]),kn(2,7,8,13,e,t+2*o[i++]),Pn(3,4,9,14,e,t+2*o[i++]),kn(3,4,9,14,e,t+2*o[i++]);this.v0l^=On[0]^On[16],this.v0h^=On[1]^On[17],this.v1l^=On[2]^On[18],this.v1h^=On[3]^On[19],this.v2l^=On[4]^On[20],this.v2h^=On[5]^On[21],this.v3l^=On[6]^On[22],this.v3h^=On[7]^On[23],this.v4l^=On[8]^On[24],this.v4h^=On[9]^On[25],this.v5l^=On[10]^On[26],this.v5h^=On[11]^On[27],this.v6l^=On[12]^On[28],this.v6h^=On[13]^On[29],this.v7l^=On[14]^On[30],this.v7h^=On[15]^On[31],Nt(On)}destroy(){this.destroyed=!0,Nt(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Mn=function(e){const t=(t,n)=>e(n).update(Lt(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t}(e=>new Un(e)),Dn="https://rpc.walletconnect.org/v1";function Ln(e){const t=`\x19Ethereum Signed Message:\n${e.length}`,n=(new TextEncoder).encode(t+e);return"0x"+Buffer.from(rn(n)).toString("hex")}function Bn(e,t,n,r,s,i){return $n.apply(this,arguments)}function $n(){return $n=(0,r.Z)(function*(e,t,n,r,s,i){switch(n.t){case"eip191":return yield jn(e,t,n.s);case"eip1271":return yield Fn(e,t,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}),$n.apply(this,arguments)}function jn(e,t,n){const r=P.H_(n);return k.RJ({payload:Ln(t),signature:r}).toLowerCase()===e.toLowerCase()}function Fn(e,t,n,r,s,i){return Wn.apply(this,arguments)}function Wn(){return Wn=(0,r.Z)(function*(e,t,n,r,s,i){const o=pe(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const o="0x1626ba7e",a="0000000000000000000000000000000000000000000000000000000000000040",c=n.substring(2),l=(c.length/2).toString(16).padStart(64,"0"),d=o+(t.startsWith("0x")?t:Ln(t)).substring(2)+a+l+c,u=yield fetch(`${i||Dn}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:qn(),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:d},"latest"]})}),{result:p}=yield u.json();return!!p&&p.slice(0,o.length).toLowerCase()===o.toLowerCase()}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}),Wn.apply(this,arguments)}function qn(){return Date.now()+Math.floor(1e3*Math.random())}function Zn(e){const t=new Uint8Array(Buffer.from(e,"base64")),n=Array.from("TransactionData::").map(e=>e.charCodeAt(0)),r=new Uint8Array(n.length+t.length);r.set(n),r.set(t,n.length);const s=Mn(r,{dkLen:32});return x.encode(s)}function Hn(e){const t=new Uint8Array(Nn(function(e){if(e instanceof Uint8Array)return e;if(Array.isArray(e))return new Uint8Array(e);if("object"==typeof e&&null!=e&&e.data)return new Uint8Array(Object.values(e.data));if("object"==typeof e&&e)return new Uint8Array(Object.values(e));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}(e)));return x.encode(t)}function Kn(e){const t=function(e,t){return new oe(void 0).decode(e)}(Buffer.from(e,"base64")).txn;if(!t)throw new Error("Invalid signed transaction: missing 'txn' field");const n=function(e,t){return new ae(void 0).encodeSharedRef(e)}(t),r=Buffer.from("TX"),s=Buffer.concat([r,Buffer.from(n)]),i=Sn(s);return ce.pJ.encode(i).replace(/=+$/,"")}function Vn(e){const t=[];let n=BigInt(e);for(;n>=BigInt(128);)t.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return t.push(Number(n)),Buffer.from(t)}function zn(e){const t=Buffer.from(e.signed.bodyBytes,"base64"),n=Buffer.from(e.signed.authInfoBytes,"base64"),r=Buffer.from(e.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(Vn(t.length)),s.push(t),s.push(Buffer.from([18])),s.push(Vn(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(Vn(r.length)),s.push(r);const i=Buffer.concat(s),o=Nn(i);return Buffer.from(o).toString("hex").toUpperCase()}var Gn=Object.defineProperty,Jn=Object.defineProperties,Yn=Object.getOwnPropertyDescriptors,Xn=Object.getOwnPropertySymbols,Qn=Object.prototype.hasOwnProperty,er=Object.prototype.propertyIsEnumerable,tr=(e,t,n)=>t in e?Gn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const nr="did:pkh:",rr={eip155:"Ethereum",solana:"Solana",bip122:"Bitcoin"},sr=e=>e?.split(":"),ir=e=>{const t=e&&sr(e);if(t)return t[2]+":"+t[3]},or=e=>{const t=e&&sr(e);if(t)return t.pop()};function ar(e){return cr.apply(this,arguments)}function cr(){return cr=(0,r.Z)(function*(e){const{cacao:t,projectId:n}=e,{s:r,p:s}=t,i=lr(s,s.iss),o=or(s.iss);return yield Bn(o,i,r,ir(s.iss),n)}),cr.apply(this,arguments)}const lr=(e,t)=>{const n=(e=>{const t=e&&sr(e);if(t)return e.includes(nr)?t[2]:t[0]})(t);if(!n)throw new Error("Invalid issuer: "+t);const r=`${e.domain} wants you to sign in with your ${(e=>e?rr[e]||e:"")(n)} account:`,s=or(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=e.statement||void 0;const o=`URI: ${e.aud||e.uri}`,a=`Version: ${e.version}`,c=`Chain ID: ${(e=>{const t=e&&sr(e);if(t)return e.includes(nr)?t[3]:t[1]})(t)}`,l=`Nonce: ${e.nonce}`,d=`Issued At: ${e.iat}`,u=e.exp?`Expiration Time: ${e.exp}`:void 0,p=e.nbf?`Not Before: ${e.nbf}`:void 0,h=e.requestId?`Request ID: ${e.requestId}`:void 0,f=e.resources?`Resources:${e.resources.map(e=>`\n- ${e}`).join("")}`:void 0,g=yr(e.resources);return g&&(i=function(e="",t){dr(t);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(n))return e;const r=[];let s=0;return Object.keys(t.att).forEach(e=>{const n=Object.keys(t.att[e]).map(e=>({ability:e.split("/")[0],action:e.split("/")[1]}));n.sort((e,t)=>e.action.localeCompare(t.action));const i={};n.forEach(e=>{i[e.ability]||(i[e.ability]=[]),i[e.ability].push(e.action)});const o=Object.keys(i).map(t=>(s++,`(${s}) '${t}': '${i[t].join("', '")}' for '${e}'.`));r.push(o.join(", ").replace(".,","."))}),`${e?e+" ":""}${n}${r.join(" ")}`}(i,hr(g))),[r,s,"",i,"",o,a,c,l,d,u,p,h,f].filter(e=>null!=e).join("\n")};function dr(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(null==t||!t.length)throw new Error("No resources found in `att` property");t.forEach(t=>{const n=e.att[t];if(Array.isArray(n))throw new Error(`Resource must be an object: ${t}`);if("object"!=typeof n)throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(n).forEach(e=>{const t=n[e];if(!Array.isArray(t))throw new Error(`Ability limits ${e} must be an array of objects, found: ${t}`);if(!t.length)throw new Error(`Value of ${e} is empty array, must be an array with objects`);t.forEach(t=>{if("object"!=typeof t)throw new Error(`Ability limits (${e}) must be an array of objects, found: ${t}`)})})})}function ur(e,t,n={}){t=t?.sort((e,t)=>e.localeCompare(t));const r=t.map(t=>({[`${e}/${t}`]:[n]}));return Object.assign({},...r)}function pr(e){return dr(e),`urn:recap:${function(e){return Buffer.from(JSON.stringify(e)).toString("base64")}(e).replace(/=/g,"")}`}function hr(e){const t=function(e){return JSON.parse(Buffer.from(e,"base64").toString("utf-8"))}(e.replace("urn:recap:",""));return dr(t),t}function fr(e,t){const n=function(e,t){dr(e),dr(t);const n=Object.keys(e.att).concat(Object.keys(t.att)).sort((e,t)=>e.localeCompare(t)),r={att:{}};return n.forEach(n=>{var s,i;Object.keys((null==(s=e.att)?void 0:s[n])||{}).concat(Object.keys((null==(i=t.att)?void 0:i[n])||{})).sort((e,t)=>e.localeCompare(t)).forEach(s=>{var i,o;r.att[n]=((e,t)=>Jn(e,Yn(t)))(((e,t)=>{for(var n in t||(t={}))Qn.call(t,n)&&tr(e,n,t[n]);if(Xn)for(var n of Xn(t))er.call(t,n)&&tr(e,n,t[n]);return e})({},r.att[n]),{[s]:(null==(i=e.att[n])?void 0:i[s])||(null==(o=t.att[n])?void 0:o[s])})})}),r}(hr(e),hr(t));return pr(n)}function gr(e){var t;const n=hr(e);dr(n);const r=null==(t=n.att)?void 0:t.eip155;return r?Object.keys(r).map(e=>e.split("/")[1]):[]}function mr(e){const t=hr(e);dr(t);const n=[];return Object.values(t.att).forEach(e=>{Object.values(e).forEach(e=>{var t;null!=(t=e?.[0])&&t.chains&&n.push(e[0].chains)})}),[...new Set(n.flat())]}function yr(e){if(!e)return;const t=e?.[e.length-1];return function(e){return e&&e.includes("urn:recap:")}(t)?t:void 0}function br(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function wr(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)}function vr(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Er(e,...t){if(!br(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Cr(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Ar(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Nr(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}const Ir=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function _r(e){if("string"==typeof e)e=function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}(e);else{if(!br(e))throw new Error("Uint8Array expected, got "+typeof e);e=Rr(e)}return e}function Sr(e,t,n=!0){if(void 0===t)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(n&&!function(e){return e.byteOffset%4==0}(t))throw new Error("invalid output, must be aligned");return t}function Tr(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?0:4;e.setUint32(t+(r?4:0),o,r),e.setUint32(t+c,a,r)}function Rr(e){return Uint8Array.from(e)}const Or=e=>Uint8Array.from(e.split("").map(e=>e.charCodeAt(0))),Pr=Or("expand 16-byte k"),kr=Or("expand 32-byte k"),xr=Ar(Pr),Ur=Ar(kr);function Mr(e,t){return e<<t|e>>>32-t}function Dr(e){return e.byteOffset%4==0}const Lr=2**32-1,Br=new Uint32Array,$r=(e,t)=>255&e[t++]|(255&e[t++])<<8;class jr{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,Er(e=_r(e),32);const t=$r(e,0),n=$r(e,2),r=$r(e,4),s=$r(e,6),i=$r(e,8),o=$r(e,10),a=$r(e,12),c=$r(e,14);this.r[0]=8191&t,this.r[1]=8191&(t>>>13|n<<3),this.r[2]=7939&(n>>>10|r<<6),this.r[3]=8191&(r>>>7|s<<9),this.r[4]=255&(s>>>4|i<<12),this.r[5]=i>>>1&8190,this.r[6]=8191&(i>>>14|o<<2),this.r[7]=8065&(o>>>11|a<<5),this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127;for(let l=0;l<8;l++)this.pad[l]=$r(e,16+2*l)}process(e,t,n=!1){const r=n?0:2048,{h:s,r:i}=this,o=i[0],a=i[1],c=i[2],l=i[3],d=i[4],u=i[5],p=i[6],h=i[7],f=i[8],g=i[9],m=$r(e,t+0),y=$r(e,t+2),b=$r(e,t+4),w=$r(e,t+6),v=$r(e,t+8),E=$r(e,t+10),C=$r(e,t+12),A=$r(e,t+14);let N=s[0]+(8191&m),I=s[1]+(8191&(m>>>13|y<<3)),_=s[2]+(8191&(y>>>10|b<<6)),S=s[3]+(8191&(b>>>7|w<<9)),T=s[4]+(8191&(w>>>4|v<<12)),R=s[5]+(v>>>1&8191),O=s[6]+(8191&(v>>>14|E<<2)),P=s[7]+(8191&(E>>>11|C<<5)),k=s[8]+(8191&(C>>>8|A<<8)),x=s[9]+(A>>>5|r),U=0,M=U+N*o+I*(5*g)+_*(5*f)+S*(5*h)+T*(5*p);U=M>>>13,M&=8191,M+=R*(5*u)+O*(5*d)+P*(5*l)+k*(5*c)+x*(5*a),U+=M>>>13,M&=8191;let D=U+N*a+I*o+_*(5*g)+S*(5*f)+T*(5*h);U=D>>>13,D&=8191,D+=R*(5*p)+O*(5*u)+P*(5*d)+k*(5*l)+x*(5*c),U+=D>>>13,D&=8191;let L=U+N*c+I*a+_*o+S*(5*g)+T*(5*f);U=L>>>13,L&=8191,L+=R*(5*h)+O*(5*p)+P*(5*u)+k*(5*d)+x*(5*l),U+=L>>>13,L&=8191;let B=U+N*l+I*c+_*a+S*o+T*(5*g);U=B>>>13,B&=8191,B+=R*(5*f)+O*(5*h)+P*(5*p)+k*(5*u)+x*(5*d),U+=B>>>13,B&=8191;let $=U+N*d+I*l+_*c+S*a+T*o;U=$>>>13,$&=8191,$+=R*(5*g)+O*(5*f)+P*(5*h)+k*(5*p)+x*(5*u),U+=$>>>13,$&=8191;let j=U+N*u+I*d+_*l+S*c+T*a;U=j>>>13,j&=8191,j+=R*o+O*(5*g)+P*(5*f)+k*(5*h)+x*(5*p),U+=j>>>13,j&=8191;let F=U+N*p+I*u+_*d+S*l+T*c;U=F>>>13,F&=8191,F+=R*a+O*o+P*(5*g)+k*(5*f)+x*(5*h),U+=F>>>13,F&=8191;let W=U+N*h+I*p+_*u+S*d+T*l;U=W>>>13,W&=8191,W+=R*c+O*a+P*o+k*(5*g)+x*(5*f),U+=W>>>13,W&=8191;let q=U+N*f+I*h+_*p+S*u+T*d;U=q>>>13,q&=8191,q+=R*l+O*c+P*a+k*o+x*(5*g),U+=q>>>13,q&=8191;let Z=U+N*g+I*f+_*h+S*p+T*u;U=Z>>>13,Z&=8191,Z+=R*d+O*l+P*c+k*a+x*o,U+=Z>>>13,Z&=8191,U=(U<<2)+U|0,U=U+M|0,M=8191&U,U>>>=13,D+=U,s[0]=M,s[1]=D,s[2]=L,s[3]=B,s[4]=$,s[5]=j,s[6]=F,s[7]=W,s[8]=q,s[9]=Z}finalize(){const{h:e,pad:t}=this,n=new Uint16Array(10);let r=e[1]>>>13;e[1]&=8191;for(let o=2;o<10;o++)e[o]+=r,r=e[o]>>>13,e[o]&=8191;e[0]+=5*r,r=e[0]>>>13,e[0]&=8191,e[1]+=r,r=e[1]>>>13,e[1]&=8191,e[2]+=r,n[0]=e[0]+5,r=n[0]>>>13,n[0]&=8191;for(let o=1;o<10;o++)n[o]=e[o]+r,r=n[o]>>>13,n[o]&=8191;n[9]-=8192;let s=(1^r)-1;for(let o=0;o<10;o++)n[o]&=s;s=~s;for(let o=0;o<10;o++)e[o]=e[o]&s|n[o];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let i=e[0]+t[0];e[0]=65535&i;for(let o=1;o<8;o++)i=(e[o]+t[o]|0)+(i>>>16)|0,e[o]=65535&i;Nr(n)}update(e){Cr(this),Er(e=_r(e));const{buffer:t,blockLen:n}=this,r=e.length;for(let s=0;s<r;){const i=Math.min(n-this.pos,r-s);if(i!==n)t.set(e.subarray(s,s+i),this.pos),this.pos+=i,s+=i,this.pos===n&&(this.process(t,0,!1),this.pos=0);else for(;n<=r-s;s+=n)this.process(e,s)}return this}destroy(){Nr(this.h,this.r,this.buffer,this.pad)}digestInto(e){Cr(this),function(e,t){Er(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}(e,this),this.finished=!0;const{buffer:t,h:n}=this;let{pos:r}=this;if(r){for(t[r++]=1;r<16;r++)t[r]=0;this.process(t,0,!0)}this.finalize();let s=0;for(let i=0;i<8;i++)e[s++]=n[i]>>>0,e[s++]=n[i]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}}const Fr=function(e){const t=(t,n)=>e(n).update(_r(t)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t}(e=>new jr(e)),Wr=function(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=function(e,t){if(null==t||"object"!=typeof t)throw new Error("options must be defined");return Object.assign({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t)}(0,{counterRight:!1,counterLength:4,allowShortKeys:!1});return vr(s),vr(o),wr(i),wr(n),(t,a,c,l,d=0)=>{Er(t),Er(a),Er(c);const u=c.length;if(void 0===l&&(l=new Uint8Array(u)),Er(l),vr(d),d<0||d>=Lr)throw new Error("arx: counter overflow");if(l.length<u)throw new Error(`arx: output (${l.length}) is shorter than data (${u})`);const p=[];let h,f,g=t.length;if(32===g)p.push(h=Rr(t)),f=Ur;else{if(16!==g||!n)throw new Error(`arx: invalid 32-byte key, got length=${g}`);h=new Uint8Array(32),h.set(t),h.set(t,16),f=xr,p.push(h)}Dr(a)||p.push(a=Rr(a));const m=Ar(h);if(r){if(24!==a.length)throw new Error("arx: extended nonce must be 24 bytes");r(f,m,Ar(a.subarray(0,16)),m),a=a.subarray(16)}const y=16-s;if(y!==a.length)throw new Error(`arx: nonce must be ${y} or 16 bytes`);if(12!==y){const e=new Uint8Array(12);e.set(a,i?0:12-a.length),p.push(a=e)}const b=Ar(a);return function(e,t,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(64),d=Ar(l),u=Dr(s)&&Dr(i),p=u?Ar(s):Br,h=u?Ar(i):Br;for(let f=0;f<c;o++){if(e(t,n,r,d,o,a),o>=Lr)throw new Error("arx: counter overflow");const g=Math.min(64,c-f);if(u&&64===g){const e=f/4;if(f%4!=0)throw new Error("arx: invalid block position");for(let t,n=0;n<16;n++)t=e+n,h[t]=p[t]^d[n];f+=64}else{for(let e,t=0;t<g;t++)e=f+t,i[e]=s[e]^l[t];f+=g}}}(e,f,m,b,c,l,d,o),Nr(...p),l}}(function(e,t,n,r,s,i=20){let o=e[0],a=e[1],c=e[2],l=e[3],d=t[0],u=t[1],p=t[2],h=t[3],f=t[4],g=t[5],m=t[6],y=t[7],b=s,w=n[0],v=n[1],E=n[2],C=o,A=a,N=c,I=l,_=d,S=u,T=p,R=h,O=f,P=g,k=m,x=y,U=b,M=w,D=v,L=E;for(let $=0;$<i;$+=2)C=C+_|0,U=Mr(U^C,16),O=O+U|0,_=Mr(_^O,12),C=C+_|0,U=Mr(U^C,8),O=O+U|0,_=Mr(_^O,7),A=A+S|0,M=Mr(M^A,16),P=P+M|0,S=Mr(S^P,12),A=A+S|0,M=Mr(M^A,8),P=P+M|0,S=Mr(S^P,7),N=N+T|0,D=Mr(D^N,16),k=k+D|0,T=Mr(T^k,12),N=N+T|0,D=Mr(D^N,8),k=k+D|0,T=Mr(T^k,7),I=I+R|0,L=Mr(L^I,16),x=x+L|0,R=Mr(R^x,12),I=I+R|0,L=Mr(L^I,8),x=x+L|0,R=Mr(R^x,7),C=C+S|0,L=Mr(L^C,16),k=k+L|0,S=Mr(S^k,12),C=C+S|0,L=Mr(L^C,8),k=k+L|0,S=Mr(S^k,7),A=A+T|0,U=Mr(U^A,16),x=x+U|0,T=Mr(T^x,12),A=A+T|0,U=Mr(U^A,8),x=x+U|0,T=Mr(T^x,7),N=N+R|0,M=Mr(M^N,16),O=O+M|0,R=Mr(R^O,12),N=N+R|0,M=Mr(M^N,8),O=O+M|0,R=Mr(R^O,7),I=I+_|0,D=Mr(D^I,16),P=P+D|0,_=Mr(_^P,12),I=I+_|0,D=Mr(D^I,8),P=P+D|0,_=Mr(_^P,7);let B=0;r[B++]=o+C|0,r[B++]=a+A|0,r[B++]=c+N|0,r[B++]=l+I|0,r[B++]=d+_|0,r[B++]=u+S|0,r[B++]=p+T|0,r[B++]=h+R|0,r[B++]=f+O|0,r[B++]=g+P|0,r[B++]=m+k|0,r[B++]=y+x|0,r[B++]=b+U|0,r[B++]=w+M|0,r[B++]=v+D|0,r[B++]=E+L|0}),qr=new Uint8Array(16),Zr=(e,t)=>{e.update(t);const n=t.length%16;n&&e.update(qr.subarray(n))},Hr=new Uint8Array(32);function Kr(e,t,n,r,s){const i=e(t,n,Hr),o=Fr.create(i);s&&Zr(o,s),Zr(o,r);const a=function(e,t,n){wr(n);const r=new Uint8Array(16),s=function(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}(r);return Tr(s,0,BigInt(t),n),Tr(s,8,BigInt(e),n),r}(r.length,s?s.length:0,!0);o.update(a);const c=o.digest();return Nr(i,a),c}const Vr=((e,t)=>{function n(n,...r){if(Er(n),!Ir)throw new Error("Non little-endian hardware is not yet supported");if(void 0!==e.nonceLength){const t=r[0];if(!t)throw new Error("nonce / iv required");e.varSizeNonce?Er(t):Er(t,e.nonceLength)}const s=e.tagLength;s&&void 0!==r[1]&&Er(r[1]);const i=t(n,...r),o=(e,t)=>{if(void 0!==t){if(2!==e)throw new Error("cipher output not supported");Er(t)}};let a=!1;return{encrypt(e,t){if(a)throw new Error("cannot encrypt() twice with same key + nonce");return a=!0,Er(e),o(i.encrypt.length,t),i.encrypt(e,t)},decrypt(e,t){if(Er(e),s&&e.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return o(i.decrypt.length,t),i.decrypt(e,t)}}}return Object.assign(n,e),n})({blockSize:64,nonceLength:12,tagLength:16},(e=>(t,n,r)=>({encrypt(s,i){const o=s.length;(i=Sr(o+16,i,!1)).set(s);const a=i.subarray(0,-16);e(t,n,a,a,1);const c=Kr(e,t,n,a,r);return i.set(c,o),Nr(c),i},decrypt(s,i){i=Sr(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=Kr(e,t,n,o,r);if(!function(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n}(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),e(t,n,i,i,1),Nr(c),i}}))(Wr));class zr extends $t{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,vt(e);const n=Lt(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,s=new Uint8Array(r);s.set(n.length>r?e.create().update(n).digest():n);for(let i=0;i<s.length;i++)s[i]^=54;this.iHash.update(s),this.oHash=e.create();for(let i=0;i<s.length;i++)s[i]^=106;this.oHash.update(s),Nt(s)}update(e){return Et(this),this.iHash.update(e),this}digestInto(e){Et(this),wt(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:s,blockLen:i,outputLen:o}=this;return e.finished=r,e.destroyed=s,e.blockLen=i,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Gr=(e,t,n)=>new zr(e,t).update(n).digest();Gr.create=(e,t)=>new zr(e,t);const Jr=Uint8Array.from([0]),Yr=Uint8Array.of(),Xr=Nn,Qr=BigInt(0),es=BigInt(1);function ts(e,t=""){if("boolean"!=typeof e)throw new Error((t&&`"${t}"`)+"expected boolean, got type="+typeof e);return e}function ns(e,t,n=""){const r=yt(e),s=e?.length,i=void 0!==t;if(!r||i&&s!==t)throw new Error((n&&`"${n}" `)+"expected Uint8Array"+(i?` of length ${t}`:"")+", got "+(r?`length=${s}`:"type="+typeof e));return e}function rs(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function ss(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?Qr:BigInt("0x"+e)}function is(e){return ss(xt(e))}function os(e){return wt(e),ss(xt(Uint8Array.from(e).reverse()))}function as(e,t){return Mt(e.toString(16).padStart(2*t,"0"))}function cs(e,t){return as(e,t).reverse()}function ls(e,t,n){let r;if("string"==typeof t)try{r=Mt(t)}catch(i){throw new Error(e+" must be hex string or Uint8Array, cause: "+i)}else{if(!yt(t))throw new Error(e+" must be hex string or Uint8Array");r=Uint8Array.from(t)}const s=r.length;if("number"==typeof n&&s!==n)throw new Error(e+" of length "+n+" expected, got "+s);return r}const ds=e=>"bigint"==typeof e&&Qr<=e;function us(e,t,n,r){if(!function(e,t,n){return ds(e)&&ds(t)&&ds(n)&&t<=e&&e<n}(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function ps(e){let t;for(t=0;e>Qr;e>>=es,t+=1);return t}const hs=e=>(es<<BigInt(e))-es;function fs(e,t,n={}){if(!e||"object"!=typeof e)throw new Error("expected valid options object");function r(t,n,r){const s=e[t];if(r&&void 0===s)return;const i=typeof s;if(i!==n||null===s)throw new Error(`param "${t}" is invalid: expected ${n}, got ${i}`)}Object.entries(t).forEach(([e,t])=>r(e,t,!1)),Object.entries(n).forEach(([e,t])=>r(e,t,!0))}function gs(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(void 0!==s)return s;const i=e(n,...r);return t.set(n,i),i}}const ms=BigInt(0),ys=BigInt(1),bs=BigInt(2),ws=BigInt(3),vs=BigInt(4),Es=BigInt(5),Cs=BigInt(7),As=BigInt(8),Ns=BigInt(9),Is=BigInt(16);function _s(e,t){const n=e%t;return n>=ms?n:t+n}function Ss(e,t,n){let r=e;for(;t-- >ms;)r*=r,r%=n;return r}function Ts(e,t){if(e===ms)throw new Error("invert: expected non-zero number");if(t<=ms)throw new Error("invert: expected positive modulus, got "+t);let n=_s(e,t),r=t,s=ms,i=ys;for(;n!==ms;){const e=r%n,t=s-i*(r/n);r=n,n=e,s=i,i=t}if(r!==ys)throw new Error("invert: does not exist");return _s(s,t)}function Rs(e,t,n){if(!e.eql(e.sqr(t),n))throw new Error("Cannot find square root")}function Os(e,t){const n=e.pow(t,(e.ORDER+ys)/vs);return Rs(e,n,t),n}function Ps(e,t){const n=(e.ORDER-Es)/As,r=e.mul(t,bs),s=e.pow(r,n),i=e.mul(t,s),o=e.mul(e.mul(i,bs),s),a=e.mul(i,e.sub(o,e.ONE));return Rs(e,a,t),a}function ks(e){if(e<ws)throw new Error("sqrt is not defined for small field");let t=e-ys,n=0;for(;t%bs===ms;)t/=bs,n++;let r=bs;const s=Ls(e);for(;1===Ms(s,r);)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(1===n)return Os;let i=s.pow(r,t);const o=(t+ys)/bs;return function(e,r){if(e.is0(r))return r;if(1!==Ms(e,r))throw new Error("Cannot find square root");let s=n,a=e.mul(e.ONE,i),c=e.pow(r,t),l=e.pow(r,o);for(;!e.eql(c,e.ONE);){if(e.is0(c))return e.ZERO;let t=1,n=e.sqr(c);for(;!e.eql(n,e.ONE);)if(t++,n=e.sqr(n),t===s)throw new Error("Cannot find square root");const r=ys<<BigInt(s-t-1),i=e.pow(a,r);s=t,a=e.sqr(i),c=e.mul(c,a),l=e.mul(l,i)}return l}}const xs=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Us(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),s=t.reduce((t,n,s)=>e.is0(n)?t:(r[s]=t,e.mul(t,n)),e.ONE),i=e.inv(s);return t.reduceRight((t,n,s)=>e.is0(n)?t:(r[s]=e.mul(t,r[s]),e.mul(t,n)),i),r}function Ms(e,t){const n=e.pow(t,(e.ORDER-ys)/bs),r=e.eql(n,e.ONE),s=e.eql(n,e.ZERO),i=e.eql(n,e.neg(e.ONE));if(!r&&!s&&!i)throw new Error("invalid Legendre symbol result");return r?1:s?0:-1}function Ds(e,t){void 0!==t&&bt(t);const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function Ls(e,t,n=!1,r={}){if(e<=ms)throw new Error("invalid field: expected ORDER > 0, got "+e);let s,i,o,a=!1;if("object"==typeof t&&null!=t){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const e=t;e.BITS&&(s=e.BITS),e.sqrt&&(i=e.sqrt),"boolean"==typeof e.isLE&&(n=e.isLE),"boolean"==typeof e.modFromBytes&&(a=e.modFromBytes),o=e.allowedLengths}else"number"==typeof t&&(s=t),r.sqrt&&(i=r.sqrt);const{nBitLength:c,nByteLength:l}=Ds(e,s);if(l>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let d;const u=Object.freeze({ORDER:e,isLE:n,BITS:c,BYTES:l,MASK:hs(c),ZERO:ms,ONE:ys,allowedLengths:o,create:t=>_s(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return ms<=t&&t<e},is0:e=>e===ms,isValidNot0:e=>!u.is0(e)&&u.isValid(e),isOdd:e=>(e&ys)===ys,neg:t=>_s(-t,e),eql:(e,t)=>e===t,sqr:t=>_s(t*t,e),add:(t,n)=>_s(t+n,e),sub:(t,n)=>_s(t-n,e),mul:(t,n)=>_s(t*n,e),pow:(e,t)=>function(e,t,n){if(n<ms)throw new Error("invalid exponent, negatives unsupported");if(n===ms)return e.ONE;if(n===ys)return t;let r=e.ONE,s=t;for(;n>ms;)n&ys&&(r=e.mul(r,s)),s=e.sqr(s),n>>=ys;return r}(u,e,t),div:(t,n)=>_s(t*Ts(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Ts(t,e),sqrt:i||(t=>(d||(d=function(e){return e%vs===ws?Os:e%As===Es?Ps:e%Is===Ns?function(e){const t=Ls(e),n=ks(e),r=n(t,t.neg(t.ONE)),s=n(t,r),i=n(t,t.neg(r)),o=(e+Cs)/Is;return(e,t)=>{let n=e.pow(t,o),a=e.mul(n,r);const c=e.mul(n,s),l=e.mul(n,i),d=e.eql(e.sqr(a),t),u=e.eql(e.sqr(c),t);n=e.cmov(n,a,d),a=e.cmov(l,c,u);const p=e.eql(e.sqr(a),t),h=e.cmov(n,a,p);return Rs(e,h,t),h}}(e):ks(e)}(e)),d(u,t))),toBytes:e=>n?cs(e,l):as(e,l),fromBytes:(t,r=!0)=>{if(o){if(!o.includes(t.length)||t.length>l)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+t.length);const e=new Uint8Array(l);e.set(t,n?0:e.length-t.length),t=e}if(t.length!==l)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+t.length);let s=n?os(t):is(t);if(a&&(s=_s(s,e)),!r&&!u.isValid(s))throw new Error("invalid field element: outside of range 0..ORDER");return s},invertBatch:e=>Us(u,e),cmov:(e,t,n)=>n?t:e});return Object.freeze(u)}function Bs(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function $s(e){const t=Bs(e);return t+Math.ceil(t/2)}const js=BigInt(0),Fs=BigInt(1);function Ws(e,t){const n=t.negate();return e?n:t}function qs(e,t){const n=Us(e.Fp,t.map(e=>e.Z));return t.map((t,r)=>e.fromAffine(t.toAffine(n[r])))}function Zs(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Hs(e,t){Zs(e,t);const n=2**e;return{windows:Math.ceil(t/e)+1,windowSize:2**(e-1),mask:hs(e),maxNumber:n,shiftBy:BigInt(e)}}function Ks(e,t,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(e&s),c=e>>o;a>r&&(a-=i,c+=Fs);const l=t*r;return{nextN:c,offset:l+Math.abs(a)-1,isZero:0===a,isNeg:a<0,isNegF:t%2!=0,offsetF:l}}const Vs=new WeakMap,zs=new WeakMap;function Gs(e){return zs.get(e)||1}function Js(e){if(e!==js)throw new Error("invalid wNAF")}class Ys{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,n=this.ZERO){let r=e;for(;t>js;)t&Fs&&(n=n.add(r)),r=r.double(),t>>=Fs;return n}precomputeWindow(e,t){const{windows:n,windowSize:r}=Hs(t,this.bits),s=[];let i=e,o=i;for(let a=0;a<n;a++){o=i,s.push(o);for(let e=1;e<r;e++)o=o.add(i),s.push(o);i=o.double()}return s}wNAF(e,t,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let r=this.ZERO,s=this.BASE;const i=Hs(e,this.bits);for(let o=0;o<i.windows;o++){const{nextN:e,offset:a,isZero:c,isNeg:l,isNegF:d,offsetF:u}=Ks(n,o,i);n=e,c?s=s.add(Ws(d,t[u])):r=r.add(Ws(l,t[a]))}return Js(n),{p:r,f:s}}wNAFUnsafe(e,t,n,r=this.ZERO){const s=Hs(e,this.bits);for(let i=0;i<s.windows&&n!==js;i++){const{nextN:e,offset:o,isZero:a,isNeg:c}=Ks(n,i,s);if(n=e,!a){const e=t[o];r=r.add(c?e.negate():e)}}return Js(n),r}getPrecomputes(e,t,n){let r=Vs.get(t);return r||(r=this.precomputeWindow(t,e),1!==e&&("function"==typeof n&&(r=n(r)),Vs.set(t,r))),r}cached(e,t,n){const r=Gs(e);return this.wNAF(r,this.getPrecomputes(r,e,n),t)}unsafe(e,t,n,r){const s=Gs(e);return 1===s?this._unsafeLadder(e,t,r):this.wNAFUnsafe(s,this.getPrecomputes(s,e,n),t,r)}createCache(e,t){Zs(t,this.bits),zs.set(e,t),Vs.delete(e)}hasCache(e){return 1!==Gs(e)}}function Xs(e,t,n){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return function(e){fs(e,xs.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"}))}(t),t}return Ls(e,{isLE:n})}BigInt(0),BigInt(1),BigInt(2),BigInt(8),Dt("HashToScalar-");const Qs=BigInt(0),ei=BigInt(1),ti=BigInt(2);const ni=BigInt(1),ri=BigInt(2),si=BigInt(3),ii=BigInt(5),oi=(BigInt(8),BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"));function ai(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const ci=Ls([oi,BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")][0],{isLE:!0}),li=(()=>{const e=ci.ORDER;return function(e){const t=function(e){return fs(e,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...e})}(e),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=t,a="x25519"===r;if(!a&&"x448"!==r)throw new Error("invalid type");const c=o||Ft,l=a?255:448,d=a?32:56,u=BigInt(a?9:5),p=BigInt(a?121665:39081),h=a?ti**BigInt(254):ti**BigInt(447),f=a?BigInt(8)*ti**BigInt(251)-ei:BigInt(4)*ti**BigInt(445)-ei,g=h+f+ei,m=e=>_s(e,n),y=b(u);function b(e){return cs(m(e),d)}function w(e,t){const r=function(e,t){us("u",e,Qs,n),us("scalar",t,h,g);const r=t,s=e;let o=ei,a=Qs,c=e,d=ei,u=Qs;for(let n=BigInt(l-1);n>=Qs;n--){const e=r>>n&ei;u^=e,({x_2:o,x_3:c}=E(u,o,c)),({x_2:a,x_3:d}=E(u,a,d)),u=e;const t=o+a,i=m(t*t),l=o-a,h=m(l*l),f=i-h,g=c+d,y=m((c-d)*t),b=m(g*l),w=y+b,v=y-b;c=m(w*w),d=m(s*m(v*v)),o=m(i*h),a=m(f*(i+m(p*f)))}({x_2:o,x_3:c}=E(u,o,c)),({x_2:a,x_3:d}=E(u,a,d));const f=i(a);return m(o*f)}(function(e){const t=ls("u coordinate",e,d);return a&&(t[31]&=127),m(os(t))}(t),function(e){return os(s(ls("scalar",e,d)))}(e));if(r===Qs)throw new Error("invalid private or public key received");return b(r)}function v(e){return w(e,y)}function E(e,t,n){const r=m(e*(t-n));return{x_2:t=m(t-r),x_3:n=m(n+r)}}const C={secretKey:d,publicKey:d,seed:d},A=(e=c(d))=>(wt(e,C.seed),e);return{keygen:function(e){const t=A(e);return{secretKey:t,publicKey:v(t)}},getSharedSecret:(e,t)=>w(e,t),getPublicKey:e=>v(e),scalarMult:w,scalarMultBase:v,utils:{randomSecretKey:A,randomPrivateKey:A},GuBytes:y.slice(),lengths:C}}({P:e,type:"x25519",powPminus2:t=>{const{pow_p_5_8:n,b2:r}=function(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=oi,o=e*e%i*e%i,a=Ss(o,ri,i)*o%i,c=Ss(a,ni,i)*e%i,l=Ss(c,ii,i)*c%i,d=Ss(l,t,i)*l%i,u=Ss(d,n,i)*d%i,p=Ss(u,r,i)*u%i,h=Ss(p,s,i)*p%i,f=Ss(h,s,i)*p%i,g=Ss(f,t,i)*l%i;return{pow_p_5_8:Ss(g,ri,i)*e%i,b2:o}}(t);return _s(Ss(n,si,e)*r,e)},adjustScalarBytes:ai})})(),di=(e,t)=>(e+(e>=0?t:-t)/yi)/t;function ui(e){if(!["compact","recovered","der"].includes(e))throw new Error('Signature format must be "compact", "recovered", or "der"');return e}function pi(e,t){const n={};for(let r of Object.keys(t))n[r]=void 0===e[r]?t[r]:e[r];return ts(n.lowS,"lowS"),ts(n.prehash,"prehash"),void 0!==n.format&&ui(n.format),n}class hi extends Error{constructor(e=""){super(e)}}const fi={Err:hi,_tlv:{encode:(e,t)=>{const{Err:n}=fi;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(1&t.length)throw new n("tlv.encode: unpadded data");const r=t.length/2,s=rs(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?rs(s.length/2|128):"";return rs(e)+i+s+t},decode(e,t){const{Err:n}=fi;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[r++];let i=0;if(128&s){const e=127&s;if(!e)throw new n("tlv.decode(long): indefinite length not supported");if(e>4)throw new n("tlv.decode(long): byte length is too big");const o=t.subarray(r,r+e);if(o.length!==e)throw new n("tlv.decode: length bytes not complete");if(0===o[0])throw new n("tlv.decode(long): zero leftmost byte");for(const t of o)i=i<<8|t;if(r+=e,i<128)throw new n("tlv.decode(long): not minimal encoding")}else i=s;const o=t.subarray(r,r+i);if(o.length!==i)throw new n("tlv.decode: wrong value length");return{v:o,l:t.subarray(r+i)}}},_int:{encode(e){const{Err:t}=fi;if(e<gi)throw new t("integer: negative integers are not allowed");let n=rs(e);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=fi;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return is(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=fi,s=ls("signature",e),{v:i,l:o}=r.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:d}=r.decode(2,c);if(d.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(e){const{_tlv:t,_int:n}=fi,r=t.encode(2,n.encode(e.r)),s=t.encode(2,n.encode(e.s));return t.encode(48,r+s)}},gi=BigInt(0),mi=BigInt(1),yi=BigInt(2),bi=BigInt(3),wi=BigInt(4);function vi(e,t){const{BYTES:n}=e;let r;if("bigint"==typeof t)r=t;else{let s=ls("private key",t);try{r=e.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof t}`)}}if(!e.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function Ei(e,t={}){const n=function(e,t,n={},r){if(void 0===r&&(r="edwards"===e),!t||"object"!=typeof t)throw new Error(`expected valid ${e} CURVE object`);for(const a of["p","n","h"]){const e=t[a];if(!("bigint"==typeof e&&e>js))throw new Error(`CURVE.${a} must be positive bigint`)}const s=Xs(t.p,n.Fp,r),i=Xs(t.n,n.Fn,r),o=["Gx","Gy","a","weierstrass"===e?"b":"d"];for(const a of o)if(!s.isValid(t[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{CURVE:t=Object.freeze(Object.assign({},t)),Fp:s,Fn:i}}("weierstrass",e,t),{Fp:r,Fn:s}=n;let i=n.CURVE;const{h:o,n:a}=i;fs(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=t;if(c&&(!r.is0(i.a)||"bigint"!=typeof c.beta||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const l=Ai(r,s);function d(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}const u=t.toBytes||function(e,t,n){const{x:s,y:i}=t.toAffine(),o=r.toBytes(s);return ts(n,"isCompressed"),n?(d(),Bt(Ci(!r.isOdd(i)),o)):Bt(Uint8Array.of(4),o,r.toBytes(i))},p=t.fromBytes||function(e){ns(e,void 0,"Point");const{publicKey:t,publicKeyUncompressed:n}=l,s=e.length,i=e[0],o=e.subarray(1);if(s!==t||2!==i&&3!==i){if(s===n&&4===i){const e=r.BYTES,t=r.fromBytes(o.subarray(0,e)),n=r.fromBytes(o.subarray(e,2*e));if(!f(t,n))throw new Error("bad point: is not on curve");return{x:t,y:n}}throw new Error(`bad point: got length ${s}, expected compressed=${t} or uncompressed=${n}`)}{const e=r.fromBytes(o);if(!r.isValid(e))throw new Error("bad point: is not on curve, wrong x");const t=h(e);let n;try{n=r.sqrt(t)}catch(a){const e=a instanceof Error?": "+a.message:"";throw new Error("bad point: is not on curve, sqrt error"+e)}return d(),1==(1&i)!==r.isOdd(n)&&(n=r.neg(n)),{x:e,y:n}}};function h(e){const t=r.sqr(e),n=r.mul(t,e);return r.add(r.add(n,r.mul(e,i.a)),i.b)}function f(e,t){const n=r.sqr(t),s=h(e);return r.eql(n,s)}if(!f(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const g=r.mul(r.pow(i.a,bi),wi),m=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(g,m)))throw new Error("bad curve params: a or b");function y(e,t,n=!1){if(!r.isValid(t)||n&&r.is0(t))throw new Error(`bad point coordinate ${e}`);return t}function b(e){if(!(e instanceof A))throw new Error("ProjectivePoint expected")}function w(e){if(!c||!c.basises)throw new Error("no endo");return function(e,t,n){const[[r,s],[i,o]]=t,a=di(o*e,n),c=di(-s*e,n);let l=e-a*r-c*i,d=-a*s-c*o;const u=l<gi,p=d<gi;u&&(l=-l),p&&(d=-d);const h=hs(Math.ceil(ps(n)/2))+mi;if(l<gi||l>=h||d<gi||d>=h)throw new Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:u,k1:l,k2neg:p,k2:d}}(e,c.basises,s.ORDER)}const v=gs((e,t)=>{const{X:n,Y:s,Z:i}=e;if(r.eql(i,r.ONE))return{x:n,y:s};const o=e.is0();null==t&&(t=o?r.ONE:r.inv(i));const a=r.mul(n,t),c=r.mul(s,t),l=r.mul(i,t);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw new Error("invZ was invalid");return{x:a,y:c}}),E=gs(e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.Y))return;throw new Error("bad point: ZERO")}const{x:n,y:s}=e.toAffine();if(!r.isValid(n)||!r.isValid(s))throw new Error("bad point: x or y not field elements");if(!f(n,s))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function C(e,t,n,s,i){return n=new A(r.mul(n.X,e),n.Y,n.Z),t=Ws(s,t),n=Ws(i,n),t.add(n)}class A{constructor(e,t,n){this.X=y("x",e),this.Y=y("y",t,!0),this.Z=y("z",n),Object.freeze(this)}static CURVE(){return i}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof A)throw new Error("projective point not allowed");return r.is0(t)&&r.is0(n)?A.ZERO:new A(t,n,r.ONE)}static fromBytes(e){const t=A.fromAffine(p(ns(e,void 0,"point")));return t.assertValidity(),t}static fromHex(e){return A.fromBytes(ls("pointHex",e))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(e=8,t=!0){return I.createCache(this,e),t||this.multiply(bi),this}assertValidity(){E(this)}hasEvenY(){const{y:e}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(e)}equals(e){b(e);const{X:t,Y:n,Z:s}=this,{X:i,Y:o,Z:a}=e,c=r.eql(r.mul(t,a),r.mul(i,s)),l=r.eql(r.mul(n,a),r.mul(o,s));return c&&l}negate(){return new A(this.X,r.neg(this.Y),this.Z)}double(){const{a:e,b:t}=i,n=r.mul(t,bi),{X:s,Y:o,Z:a}=this;let c=r.ZERO,l=r.ZERO,d=r.ZERO,u=r.mul(s,s),p=r.mul(o,o),h=r.mul(a,a),f=r.mul(s,o);return f=r.add(f,f),d=r.mul(s,a),d=r.add(d,d),c=r.mul(e,d),l=r.mul(n,h),l=r.add(c,l),c=r.sub(p,l),l=r.add(p,l),l=r.mul(c,l),c=r.mul(f,c),d=r.mul(n,d),h=r.mul(e,h),f=r.sub(u,h),f=r.mul(e,f),f=r.add(f,d),d=r.add(u,u),u=r.add(d,u),u=r.add(u,h),u=r.mul(u,f),l=r.add(l,u),h=r.mul(o,a),h=r.add(h,h),u=r.mul(h,f),c=r.sub(c,u),d=r.mul(h,p),d=r.add(d,d),d=r.add(d,d),new A(c,l,d)}add(e){b(e);const{X:t,Y:n,Z:s}=this,{X:o,Y:a,Z:c}=e;let l=r.ZERO,d=r.ZERO,u=r.ZERO;const p=i.a,h=r.mul(i.b,bi);let f=r.mul(t,o),g=r.mul(n,a),m=r.mul(s,c),y=r.add(t,n),w=r.add(o,a);y=r.mul(y,w),w=r.add(f,g),y=r.sub(y,w),w=r.add(t,s);let v=r.add(o,c);return w=r.mul(w,v),v=r.add(f,m),w=r.sub(w,v),v=r.add(n,s),l=r.add(a,c),v=r.mul(v,l),l=r.add(g,m),v=r.sub(v,l),u=r.mul(p,w),l=r.mul(h,m),u=r.add(l,u),l=r.sub(g,u),u=r.add(g,u),d=r.mul(l,u),g=r.add(f,f),g=r.add(g,f),m=r.mul(p,m),w=r.mul(h,w),g=r.add(g,m),m=r.sub(f,m),m=r.mul(p,m),w=r.add(w,m),f=r.mul(g,w),d=r.add(d,f),f=r.mul(v,w),l=r.mul(y,l),l=r.sub(l,f),f=r.mul(y,g),u=r.mul(v,u),u=r.add(u,f),new A(l,d,u)}subtract(e){return this.add(e.negate())}is0(){return this.equals(A.ZERO)}multiply(e){const{endo:n}=t;if(!s.isValidNot0(e))throw new Error("invalid scalar: out of range");let r,i;const o=e=>I.cached(this,e,e=>qs(A,e));if(n){const{k1neg:t,k1:s,k2neg:a,k2:c}=w(e),{p:l,f:d}=o(s),{p:u,f:p}=o(c);i=d.add(p),r=C(n.beta,l,u,t,a)}else{const{p:t,f:n}=o(e);r=t,i=n}return qs(A,[r,i])[0]}multiplyUnsafe(e){const{endo:n}=t,r=this;if(!s.isValid(e))throw new Error("invalid scalar: out of range");if(e===gi||r.is0())return A.ZERO;if(e===mi)return r;if(I.hasCache(this))return this.multiply(e);if(n){const{k1neg:t,k1:s,k2neg:i,k2:o}=w(e),{p1:a,p2:c}=function(e,t,n,r){let s=t,i=e.ZERO,o=e.ZERO;for(;n>js||r>js;)n&Fs&&(i=i.add(s)),r&Fs&&(o=o.add(s)),s=s.double(),n>>=Fs,r>>=Fs;return{p1:i,p2:o}}(A,r,s,o);return C(n.beta,a,c,t,i)}return I.unsafe(r,e)}multiplyAndAddUnsafe(e,t,n){const r=this.multiplyUnsafe(t).add(e.multiplyUnsafe(n));return r.is0()?void 0:r}toAffine(e){return v(this,e)}isTorsionFree(){const{isTorsionFree:e}=t;return o===mi||(e?e(A,this):I.unsafe(this,a).is0())}clearCofactor(){const{clearCofactor:e}=t;return o===mi?this:e?e(A,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(e=!0){return ts(e,"isCompressed"),this.assertValidity(),u(A,this,e)}toHex(e=!0){return xt(this.toBytes(e))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(e=!0){return this.toBytes(e)}_setWindowSize(e){this.precompute(e)}static normalizeZ(e){return qs(A,e)}static msm(e,t){return function(e,t,n,r){(function(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)})})(n,e),function(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)})}(r,t);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=e.ZERO,a=ps(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=hs(c),d=new Array(Number(l)+1).fill(o);let u=o;for(let p=Math.floor((t.BITS-1)/c)*c;p>=0;p-=c){d.fill(o);for(let t=0;t<i;t++){const e=Number(r[t]>>BigInt(p)&l);d[e]=d[e].add(n[t])}let e=o;for(let t=d.length-1,n=o;t>0;t--)n=n.add(d[t]),e=e.add(n);if(u=u.add(e),0!==p)for(let t=0;t<c;t++)u=u.double()}return u}(A,s,e,t)}static fromPrivateKey(e){return A.BASE.multiply(vi(s,e))}}A.BASE=new A(i.Gx,i.Gy,r.ONE),A.ZERO=new A(r.ZERO,r.ONE,r.ZERO),A.Fp=r,A.Fn=s;const N=s.BITS,I=new Ys(A,t.endo?Math.ceil(N/2):N);return A.BASE.precompute(8),A}function Ci(e){return Uint8Array.of(e?2:3)}function Ai(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function Ni(e,t,n={}){vt(t),fs(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||Ft,s=n.hmac||((e,...n)=>Gr(t,e,Bt(...n))),{Fp:i,Fn:o}=e,{ORDER:a,BITS:c}=o,{keygen:l,getPublicKey:d,getSharedSecret:u,utils:p,lengths:h}=function(e,t={}){const{Fn:n}=e,r=t.randomBytes||Ft,s=Object.assign(Ai(e.Fp,n),{seed:$s(n.ORDER)});function i(e){try{return!!vi(n,e)}catch{return!1}}function o(e=r(s.seed)){return function(e,t,n=!1){const r=e.length,s=Bs(t),i=$s(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=_s(n?os(e):is(e),t-ys)+ys;return n?cs(o,s):as(o,s)}(ns(e,s.seed,"seed"),n.ORDER)}function a(t,r=!0){return e.BASE.multiply(vi(n,t)).toBytes(r)}function c(t){if("bigint"==typeof t)return!1;if(t instanceof e)return!0;const{secretKey:r,publicKey:i,publicKeyUncompressed:o}=s;if(n.allowedLengths||r===i)return;const a=ls("key",t).length;return a===i||a===o}return Object.freeze({getPublicKey:a,getSharedSecret:function(t,r,s=!0){if(!0===c(t))throw new Error("first arg must be private key");if(!1===c(r))throw new Error("second arg must be public key");const i=vi(n,t);return e.fromHex(r).multiply(i).toBytes(s)},keygen:function(e){const t=o(e);return{secretKey:t,publicKey:a(t)}},Point:e,utils:{isValidSecretKey:i,isValidPublicKey:function(t,n){const{publicKey:r,publicKeyUncompressed:i}=s;try{const s=t.length;return!(!0===n&&s!==r||!1===n&&s!==i||!e.fromBytes(t))}catch{return!1}},randomSecretKey:o,isValidPrivateKey:i,randomPrivateKey:o,normPrivateKeyToScalar:e=>vi(n,e),precompute:(t=8,n=e.BASE)=>n.precompute(t,!1)},lengths:s})}(e,n),f={prehash:!1,lowS:"boolean"==typeof n.lowS&&n.lowS,format:void 0,extraEntropy:!1},g="compact";function m(e){return e>a>>mi}function y(e,t){if(!o.isValidNot0(t))throw new Error(`invalid signature ${e}: out of range 1..Point.Fn.ORDER`);return t}class b{constructor(e,t,n){this.r=y("r",e),this.s=y("s",t),null!=n&&(this.recovery=n),Object.freeze(this)}static fromBytes(e,t=g){let n;if(function(e,t){ui(t);const n=h.signature;ns(e,"compact"===t?n:"recovered"===t?n+1:void 0,`${t} signature`)}(e,t),"der"===t){const{r:t,s:n}=fi.toSig(ns(e));return new b(t,n)}"recovered"===t&&(n=e[0],t="compact",e=e.subarray(1));const r=o.BYTES,s=e.subarray(0,r),i=e.subarray(r,2*r);return new b(o.fromBytes(s),o.fromBytes(i),n)}static fromHex(e,t){return this.fromBytes(Mt(e),t)}addRecoveryBit(e){return new b(this.r,this.s,e)}recoverPublicKey(t){const n=i.ORDER,{r,s,recovery:c}=this;if(null==c||![0,1,2,3].includes(c))throw new Error("recovery id invalid");if(a*yi<n&&c>1)throw new Error("recovery id is ambiguous for h>1 curve");const l=2===c||3===c?r+a:r;if(!i.isValid(l))throw new Error("recovery id 2 or 3 invalid");const d=i.toBytes(l),u=e.fromBytes(Bt(Ci(0==(1&c)),d)),p=o.inv(l),h=v(ls("msgHash",t)),f=o.create(-h*p),g=o.create(s*p),m=e.BASE.multiplyUnsafe(f).add(u.multiplyUnsafe(g));if(m.is0())throw new Error("point at infinify");return m.assertValidity(),m}hasHighS(){return m(this.s)}toBytes(e=g){if(ui(e),"der"===e)return Mt(fi.hexFromSig(this));const t=o.toBytes(this.r),n=o.toBytes(this.s);if("recovered"===e){if(null==this.recovery)throw new Error("recovery bit must be present");return Bt(Uint8Array.of(this.recovery),t,n)}return Bt(t,n)}toHex(e){return xt(this.toBytes(e))}assertValidity(){}static fromCompact(e){return b.fromBytes(ls("sig",e),"compact")}static fromDER(e){return b.fromBytes(ls("sig",e),"der")}normalizeS(){return this.hasHighS()?new b(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return xt(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return xt(this.toBytes("compact"))}}const w=n.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const t=is(e),n=8*e.length-c;return n>0?t>>BigInt(n):t},v=n.bits2int_modN||function(e){return o.create(w(e))},E=hs(c);function C(e){return us("num < 2^"+c,e,gi,E),o.toBytes(e)}function A(e,n){return ns(e,void 0,"message"),n?ns(t(e),void 0,"prehashed message"):e}return Object.freeze({keygen:l,getPublicKey:d,getSharedSecret:u,utils:p,lengths:h,Point:e,sign:function(n,i,a={}){n=ls("message",n);const{seed:c,k2sig:l}=function(t,n,s){if(["recovered","canonical"].some(e=>e in s))throw new Error("sign() legacy options not supported");const{lowS:i,prehash:a,extraEntropy:c}=pi(s,f);t=A(t,a);const l=v(t),d=vi(o,n),u=[C(d),C(l)];if(null!=c&&!1!==c){const e=!0===c?r(h.secretKey):c;u.push(ls("extraEntropy",e))}const p=Bt(...u),g=l;return{seed:p,k2sig:function(t){const n=w(t);if(!o.isValidNot0(n))return;const r=o.inv(n),s=e.BASE.multiply(n).toAffine(),a=o.create(s.x);if(a===gi)return;const c=o.create(r*o.create(g+a*d));if(c===gi)return;let l=(s.x===a?0:2)|Number(s.y&mi),u=c;return i&&m(c)&&(u=o.neg(c),l^=1),new b(a,u,l)}}}(n,i,a);return function(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");const r=e=>new Uint8Array(e),s=e=>Uint8Array.of(e);let i=r(e),o=r(e),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...e)=>n(o,i,...e),d=(e=r(0))=>{o=l(s(0),e),i=l(),0!==e.length&&(o=l(s(1),e),i=l())},u=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){i=l();const t=i.slice();n.push(t),e+=i.length}return Bt(...n)};return(e,t)=>{let n;for(c(),d(e);!(n=t(u()));)d();return c(),n}}(t.outputLen,o.BYTES,s)(c,l)},verify:function(t,n,r,s={}){const{lowS:i,prehash:a,format:c}=pi(s,f);if(r=ls("publicKey",r),n=A(ls("message",n),a),"strict"in s)throw new Error("options.strict was renamed to lowS");const l=void 0===c?function(e){let t;const n="string"==typeof e||yt(e),r=!n&&null!==e&&"object"==typeof e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!n&&!r)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(r)t=new b(e.r,e.s);else if(n){try{t=b.fromBytes(ls("sig",e),"der")}catch(i){if(!(i instanceof fi.Err))throw i}if(!t)try{t=b.fromBytes(ls("sig",e),"compact")}catch{return!1}}return t||!1}(t):b.fromBytes(ls("sig",t),c);if(!1===l)return!1;try{const t=e.fromBytes(r);if(i&&l.hasHighS())return!1;const{r:s,s:a}=l,c=v(n),d=o.inv(a),u=o.create(c*d),p=o.create(s*d),h=e.BASE.multiplyUnsafe(u).add(t.multiplyUnsafe(p));return!h.is0()&&o.create(h.x)===s}catch{return!1}},recoverPublicKey:function(e,t,n={}){const{prehash:r}=pi(n,f);return t=A(t,r),b.fromBytes(e,"recovered").recoverPublicKey(t).toBytes()},Signature:b,hash:t})}function Ii(e){const{CURVE:t,curveOpts:n,hash:r,ecdsaOpts:s}=function(e){const{CURVE:t,curveOpts:n}=function(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp;let r=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(e=>Math.ceil(e/2)))):void 0;return{CURVE:t,curveOpts:{Fp:n,Fn:Ls(t.n,{BITS:e.nBitLength,allowedLengths:r,modFromBytes:e.wrapPrivateKey}),allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes}}}(e);return{CURVE:t,curveOpts:n,hash:e.hash,ecdsaOpts:{hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN}}}(e);return function(e,t){const n=t.Point;return Object.assign({},t,{ProjectivePoint:n,CURVE:Object.assign({},e,Ds(n.Fn.ORDER,n.Fn.BITS))})}(e,Ni(Ei(t,n),r,s))}function _i(e,t){const n=t=>Ii({...e,hash:t});return{...n(t),create:n}}const Si={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},Ti={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},Ri={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Oi=Ls(Si.p),Pi=Ls(Ti.p),ki=Ls(Ri.p),xi=_i({...Si,Fp:Oi,lowS:!1},Nn);_i({...Ti,Fp:Pi,lowS:!1},_n),_i({...Ri,Fp:ki,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},In);const Ui=xi,Mi="base16",Di="base64pad",Li="base64url",Bi="utf8";function $i(){const e=Ft(32);return(0,le.BB)(e,Mi)}function ji(e){const t=Xr((0,le.mL)(e,Mi));return(0,le.BB)(t,Mi)}function Fi(e){const t=Xr((0,le.mL)(e,Bi));return(0,le.BB)(t,Mi)}function Wi(e){return(0,le.mL)(`${e}`,"base10")}function qi(e){return Number((0,le.BB)(e,"base10"))}function Zi(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Hi(e){const t=e.replace(/-/g,"+").replace(/_/g,"/");return t+"=".repeat((4-t.length%4)%4)}function Ki(e){if(2===qi(e.type))return(0,le.BB)((0,le.zo)([e.type,e.sealed]),Di);if(1===qi(e.type)){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return(0,le.BB)((0,le.zo)([e.type,e.senderPublicKey,e.iv,e.sealed]),Di)}return(0,le.BB)((0,le.zo)([e.type,e.iv,e.sealed]),Di)}function Vi(e){const t=(e.encoding||Di)===Li?Hi(e.encoded):e.encoded,n=(0,le.mL)(t,Di),r=n.slice(0,1);if(1===qi(r)){const e=33,t=e+12,s=n.slice(1,e),i=n.slice(e,t);return{type:r,sealed:n.slice(t),iv:i,senderPublicKey:s}}if(2===qi(r))return{type:r,sealed:n.slice(1),iv:Ft(12)};const s=n.slice(1,13);return{type:r,sealed:n.slice(13),iv:s}}function zi(e){const t=e?.type||0;if(1===t){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function Gi(e){return 1===e.type&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}function Ji(e){return 2===e.type}function Yi(e){return e?.relay||{protocol:"irn"}}function Xi(e){const t=de.iO[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var Qi=Object.defineProperty,eo=Object.defineProperties,to=Object.getOwnPropertyDescriptors,no=Object.getOwnPropertySymbols,ro=Object.prototype.hasOwnProperty,so=Object.prototype.propertyIsEnumerable,io=(e,t,n)=>t in e?Qi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oo=(e,t)=>{for(var n in t||(t={}))ro.call(t,n)&&io(e,n,t[n]);if(no)for(var n of no(t))so.call(t,n)&&io(e,n,t[n]);return e};function ao(e,t="-"){const n={},r="relay"+t;return Object.keys(e).forEach(t=>{if(t.startsWith(r)){const s=t.replace(r,"");n[s]=e[t]}}),n}function co(e){if(!e.includes("wc:")){const t=Ge(e);null!=t&&t.includes("wc:")&&(e=t)}const t=(e=(e=e.includes("wc://")?e.replace("wc://",""):e).includes("wc:")?e.replace("wc:",""):e).indexOf(":"),n=-1!==e.indexOf("?")?e.indexOf("?"):void 0,r=e.substring(0,t),s=e.substring(t+1,n).split("@"),i=typeof n<"u"?e.substring(n):"",o=new URLSearchParams(i),a=Object.fromEntries(o.entries()),c="string"==typeof a.methods?a.methods.split(","):void 0;return{protocol:r,topic:lo(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:ao(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function lo(e){return e.startsWith("//")?e.substring(2):e}function uo(e){const t=new URLSearchParams,n=oo(oo(((e,t)=>eo(e,to(t)))(oo({},function(e,t="-"){const n={};return Object.keys(e).forEach(r=>{e[r]&&(n["relay"+t+r]=e[r])}),n}(e.relay)),{symKey:e.symKey}),e.expiryTimestamp&&{expiryTimestamp:e.expiryTimestamp.toString()}),e.methods&&{methods:e.methods.join(",")});return Object.entries(n).sort(([e],[t])=>e.localeCompare(t)).forEach(([e,n])=>{void 0!==n&&t.append(e,String(n))}),`${e.protocol}:${e.topic}@${e.version}?${t}`}function po(e,t,n){return`${e}?wc_ev=${n}&topic=${t}`}var ho=Object.defineProperty,fo=Object.defineProperties,go=Object.getOwnPropertyDescriptors,mo=Object.getOwnPropertySymbols,yo=Object.prototype.hasOwnProperty,bo=Object.prototype.propertyIsEnumerable,wo=(e,t,n)=>t in e?ho(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vo=(e,t)=>{for(var n in t||(t={}))yo.call(t,n)&&wo(e,n,t[n]);if(mo)for(var n of mo(t))bo.call(t,n)&&wo(e,n,t[n]);return e},Eo=(e,t)=>fo(e,go(t));function Co(e){const t=[];return e.forEach(e=>{const[n,r]=e.split(":");t.push(`${n}:${r}`)}),t}function Ao(e){const t=[];return Object.values(e).forEach(e=>{t.push(...Co(e.accounts))}),[...new Set(t)]}function No(e){return e.includes(":")}function Io(e){return No(e)?e.split(":")[0]:e}function _o(e){var t,n,r;const s={};if(!xo(e))return s;for(const[i,o]of Object.entries(e)){const e=No(i)?[i]:o.chains,a=o.methods||[],c=o.events||[],l=Io(i);s[l]=Eo(vo({},s[l]),{chains:Fe(e,null==(t=s[l])?void 0:t.chains),methods:Fe(a,null==(n=s[l])?void 0:n.methods),events:Fe(c,null==(r=s[l])?void 0:r.events)})}return s}function So(e,t){const n=function(e){const t={};return e?.forEach(e=>{var n;const[r,s]=e.split(":");t[r]||(t[r]={accounts:[],chains:[],events:[],methods:[]}),t[r].accounts.push(e),null==(n=t[r].chains)||n.push(`${r}:${s}`)}),t}(t=t.map(e=>e.replace("did:pkh:","")));for(const[r,s]of Object.entries(n))s.methods=s.methods?Fe(s.methods,e):e,s.events=["chainChanged","accountsChanged"];return n}const To={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Ro={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Oo(e,t){const{message:n,code:r}=Ro[e];return{message:t?`${n} ${t}`:n,code:r}}function Po(e,t){const{message:n,code:r}=To[e];return{message:t?`${n} ${t}`:n,code:r}}function ko(e,t){return!!Array.isArray(e)&&(!(typeof t<"u"&&e.length)||e.every(t))}function xo(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function Uo(e){return typeof e>"u"}function Mo(e,t){return!(!t||!Uo(e))||"string"==typeof e&&!!e.trim().length}function Do(e,t){return!(!t||!Uo(e))||"number"==typeof e&&!isNaN(e)}function Lo(e){return!(!Mo(e,!1)||!e.includes(":"))&&2===e.split(":").length}function Bo(e){let t=!0;return ko(e)?e.length&&(t=e.every(e=>Mo(e,!1))):t=!1,t}function $o(e,t){let n=null;return Object.values(e).forEach(e=>{if(n)return;const r=function(e,t){let n=null;return Bo(e?.methods)?Bo(e?.events)||(n=Po("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):n=Po("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),n}(e,`${t}, namespace`);r&&(n=r)}),n}function jo(e,t){let n=null;if(e&&xo(e)){const r=$o(e,t);r&&(n=r);const s=function(e,t){let n=null;return Object.values(e).forEach(e=>{if(n)return;const r=function(e,t){let n=null;return ko(e)?e.forEach(e=>{n||function(e){if(Mo(e,!1)&&e.includes(":")){const t=e.split(":");if(3===t.length){const e=t[0]+":"+t[1];return!!t[2]&&Lo(e)}}return!1}(e)||(n=Po("UNSUPPORTED_ACCOUNTS",`${t}, account ${e} should be a string and conform to "namespace:chainId:address" format`))}):n=Po("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}(e?.accounts,`${t} namespace`);r&&(n=r)}),n}(e,t);s&&(n=s)}else n=Oo("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return n}function Fo(e){return Mo(e.protocol,!0)}function Wo(e){return typeof e<"u"&&null!==typeof e}function qo(e,t){return!(!Lo(t)||!Ao(e).includes(t))}function Zo(e,t,n){let r=null;const s=function(e){const t={};return Object.keys(e).forEach(n=>{var r;n.includes(":")?t[n]=e[n]:null==(r=e[n].chains)||r.forEach(r=>{t[r]={methods:e[n].methods,events:e[n].events}})}),t}(e),i=function(e){const t={};return Object.keys(e).forEach(n=>{n.includes(":")?t[n]=e[n]:Co(e[n].accounts)?.forEach(r=>{t[r]={accounts:e[n].accounts.filter(e=>e.includes(`${r}:`)),methods:e[n].methods,events:e[n].events}})}),t}(t),o=Object.keys(s),a=Object.keys(i),c=Ho(Object.keys(e)),l=Ho(Object.keys(t)),d=c.filter(e=>!l.includes(e));return d.length&&(r=Oo("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${d.toString()}\n      Received: ${Object.keys(t).toString()}`)),Pe(o,a)||(r=Oo("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.\n      Required: ${o.toString()}\n      Approved: ${a.toString()}`)),Object.keys(t).forEach(e=>{if(!e.includes(":")||r)return;const s=Co(t[e].accounts);s.includes(e)||(r=Oo("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${e}\n        Required: ${e}\n        Approved: ${s.toString()}`))}),o.forEach(e=>{r||(Pe(s[e].methods,i[e].methods)?Pe(s[e].events,i[e].events)||(r=Oo("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${e}`)):r=Oo("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${e}`))}),r}function Ho(e){return[...new Set(e.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Ko(){const e=Se();return new Promise(t=>{switch(e){case"browser":t(_e()&&navigator?.onLine);break;case"react-native":t(function(){return Vo.apply(this,arguments)}());break;default:t(!0)}})}function Vo(){return(Vo=(0,r.Z)(function*(){return!(Ie()&&typeof global<"u"&&null!=global&&global.NetInfo)||(yield null==global?void 0:global.NetInfo.fetch())?.isConnected})).apply(this,arguments)}const zo={};class Go{static get(e){return zo[e]}static set(e,t){zo[e]=t}static delete(e){delete zo[e]}}function Jo(e){return new Uint8Array(e.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Yo(e){const t=Uint8Array.from(Buffer.from(e.signature,"hex")),n=function(e){const t=x.decode(e);if(t.length<33)throw new Error("Too short to contain a public key");return t.slice(1,33)}(e.transaction.address),r=function({publicKey:e,signature:t,payload:n}){var r;const s=Jo(n.method),i=128|parseInt((null==(r=n.version)?void 0:r.toString())||"4"),o=function(e){const t=x.decode(e)[0];return 42===t?0:60===t?2:1}(n.address),a="00"===n.era?new Uint8Array([0]):Jo(n.era);if(1!==a.length&&2!==a.length)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),l=new Uint8Array([255&c,c>>8&255]),d=BigInt(`0x${function(e){return e.startsWith("0x")?e.slice(2):e}(n.tip)}`),u=function(e){if(e<BigInt(1)<<BigInt(6))return new Uint8Array([Number(e<<BigInt(2))]);if(e<BigInt(1)<<BigInt(14)){const t=e<<BigInt(2)|BigInt(1);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255))])}if(e<BigInt(1)<<BigInt(30)){const t=e<<BigInt(2)|BigInt(2);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255)),Number(t>>BigInt(16)&BigInt(255)),Number(t>>BigInt(24)&BigInt(255))])}throw new Error("BigInt compact encoding not supported > 2^30")}(d),p=new Uint8Array([0,...e,o,...t,...a,...l,...u,...s]),h=function(e){if(e<64)return new Uint8Array([e<<2]);if(e<16384){const t=e<<2|1;return new Uint8Array([255&t,t>>8&255])}if(e<1<<30){const t=e<<2|2;return new Uint8Array([255&t,t>>8&255,t>>16&255,t>>24&255])}throw new Error("Compact encoding > 2^30 not supported")}(p.length+1);return new Uint8Array([...h,i,...p])}({publicKey:n,signature:t,payload:e.transaction});return function(e){const t=Jo(e),n=(0,ue.blake2b)(t,void 0,32);return"0x"+Buffer.from(n).toString("hex")}(Buffer.from(r).toString("hex"))}function Xo({logger:e,name:t}){const n="string"==typeof e?(0,p.Rt)({opts:{level:e,name:t}}).logger:e;return n.level="string"==typeof e?e:e.level,n}var Qo=n(2517),ea=n(22339),ta=n(70213);const na="wc@2:core:",ra={database:":memory:"},sa="client_ed25519_seed",ia=I.ONE_DAY,oa=I.SIX_HOURS,aa="wss://relay.walletconnect.org",ca="relayer_publish",la="2.23.2",da={link_mode:"link_mode",relay:"relay"},ua="WALLETCONNECT_LINK_MODE_APPS",pa="subscription_created",ha="subscription_deleted",fa={wc_pairingDelete:{req:{ttl:I.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:I.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:I.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:I.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:I.ONE_DAY,prompt:!1,tag:0},res:{ttl:I.ONE_DAY,prompt:!1,tag:0}}},ga="expirer_expired",ma="https://verify.walletconnect.org",ya=ma,ba=`${ya}/v3`,wa=["https://verify.walletconnect.com",ma];var va=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<e.length;s++){var i=e.charAt(s),o=i.charCodeAt(0);if(255!==n[o])throw new TypeError(i+" is ambiguous");n[o]=s}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function u(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,s=0;e[t]===c;)r++,t++;for(var i=(e.length-t)*l+1>>>0,o=new Uint8Array(i);e[t];){var d=n[e.charCodeAt(t)];if(255===d)return;for(var u=0,p=i-1;(0!==d||u<s)&&-1!==p;p--,u++)o[p]=(d+=a*o[p]>>>0)%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");s=u,t++}if(" "!==e[t]){for(var h=i-s;h!==i&&0===o[h];)h++;for(var f=new Uint8Array(r+(i-h)),g=r;h!==i;)f[g++]=o[h++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,s=0,i=t.length;s!==i&&0===t[s];)s++,n++;for(var o=(i-s)*d+1>>>0,l=new Uint8Array(o);s!==i;){for(var u=t[s],p=0,h=o-1;(0!==u||p<r)&&-1!==h;h--,p++)l[h]=(u+=256*l[h]>>>0)%a>>>0,u=u/a>>>0;if(0!==u)throw new Error("Non-zero carry");r=p,s++}for(var f=o-r;f!==o&&0===l[f];)f++;for(var g=c.repeat(n);f<o;++f)g+=e.charAt(l[f]);return g},decodeUnsafe:u,decode:function(e){var n=u(e);if(n)return n;throw new Error(`Non-${t} character`)}}};const Ea=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class Ca{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Aa{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Ia(this,e)}}class Na{constructor(e){this.decoders=e}or(e){return Ia(this,e)}decode(e){const t=this.decoders[e[0]];if(t)return t.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Ia=(e,t)=>new Na({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class _a{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new Ca(e,t,n),this.decoder=new Aa(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Sa=({name:e,prefix:t,encode:n,decode:r})=>new _a(e,t,n,r),Ta=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:s}=va(n,t);return Sa({prefix:e,name:t,encode:r,decode:e=>Ea(s(e))})},Ra=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Sa({prefix:t,name:e,encode:e=>((e,t,n)=>{const r="="===t[t.length-1],s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>n;)o-=n,i+=t[s&a>>o];if(o&&(i+=t[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i})(e,r,n),decode:t=>((e,t,n,r)=>{const s={};for(let d=0;d<t.length;++d)s[t[d]]=d;let i=e.length;for(;"="===e[i-1];)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let d=0;d<i;++d){const t=s[e[d]];if(void 0===t)throw new SyntaxError(`Non-${r} character`);c=c<<n|t,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,r,n,e)}),Oa=Sa({prefix:"\0",name:"identity",encode:e=>(e=>(new TextDecoder).decode(e))(e),decode:e=>(e=>(new TextEncoder).encode(e))(e)});var Pa=Object.freeze({__proto__:null,identity:Oa});const ka=Ra({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var xa=Object.freeze({__proto__:null,base2:ka});const Ua=Ra({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Ma=Object.freeze({__proto__:null,base8:Ua});const Da=Ta({prefix:"9",name:"base10",alphabet:"0123456789"});var La=Object.freeze({__proto__:null,base10:Da});const Ba=Ra({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),$a=Ra({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ja=Object.freeze({__proto__:null,base16:Ba,base16upper:$a});const Fa=Ra({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Wa=Ra({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),qa=Ra({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Za=Ra({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ha=Ra({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ka=Ra({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Va=Ra({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),za=Ra({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ga=Ra({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Ja=Object.freeze({__proto__:null,base32:Fa,base32upper:Wa,base32pad:qa,base32padupper:Za,base32hex:Ha,base32hexupper:Ka,base32hexpad:Va,base32hexpadupper:za,base32z:Ga});const Ya=Ta({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Xa=Ta({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Qa=Object.freeze({__proto__:null,base36:Ya,base36upper:Xa});const ec=Ta({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),tc=Ta({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var nc=Object.freeze({__proto__:null,base58btc:ec,base58flickr:tc});const rc=Ra({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),sc=Ra({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ic=Ra({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),oc=Ra({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var ac=Object.freeze({__proto__:null,base64:rc,base64pad:sc,base64url:ic,base64urlpad:oc});const cc=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),lc=cc.reduce((e,t,n)=>(e[n]=t,e),[]),dc=cc.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]),uc=Sa({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+lc[t],"")},decode:function(e){const t=[];for(const n of e){const e=dc[n.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${n}`);t.push(e)}return new Uint8Array(t)}});var pc=Object.freeze({__proto__:null,base256emoji:uc}),hc=Math.pow(2,31),fc=Math.pow(2,7),gc=Math.pow(2,14),mc=Math.pow(2,21),yc=Math.pow(2,28),bc=Math.pow(2,35),wc=Math.pow(2,42),vc=Math.pow(2,49),Ec=Math.pow(2,56),Cc=Math.pow(2,63),Ac={encode:function e(t,n,r){n=n||[];for(var s=r=r||0;t>=hc;)n[r++]=255&t|128,t/=128;for(;-128&t;)n[r++]=255&t|128,t>>>=7;return n[r]=0|t,e.bytes=r-s+1,n},decode:function e(t,n){var r,s=0,i=0,o=n=n||0,a=t.length;do{if(o>=a)throw e.bytes=0,new RangeError("Could not decode varint");r=t[o++],s+=i<28?(127&r)<<i:(127&r)*Math.pow(2,i),i+=7}while(r>=128);return e.bytes=o-n,s},encodingLength:function(e){return e<fc?1:e<gc?2:e<mc?3:e<yc?4:e<bc?5:e<wc?6:e<vc?7:e<Ec?8:e<Cc?9:10}},Nc=Ac;const Ic=(e,t,n=0)=>(Nc.encode(e,t,n),t),_c=e=>Nc.encodingLength(e),Sc=(e,t)=>{const n=t.byteLength,r=_c(e),s=r+_c(n),i=new Uint8Array(s+n);return Ic(e,i,0),Ic(n,i,r),i.set(t,s),new Tc(e,n,t,i)};class Tc{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}}const Rc=({name:e,code:t,encode:n})=>new Oc(e,t,n);class Oc{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Sc(this.code,t):t.then(e=>Sc(this.code,e))}throw Error("Unknown type, must be binary type")}}const Pc=e=>function(){var t=(0,r.Z)(function*(t){return new Uint8Array(yield crypto.subtle.digest(e,t))});return function(e){return t.apply(this,arguments)}}(),kc=Rc({name:"sha2-256",code:18,encode:Pc("SHA-256")}),xc=Rc({name:"sha2-512",code:19,encode:Pc("SHA-512")});Object.freeze({__proto__:null,sha256:kc,sha512:xc});const Uc=Ea;Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:Uc,digest:e=>Sc(0,Uc(e))}}),new TextEncoder,new TextDecoder;const Mc={...Pa,...xa,...Ma,...La,...ja,...Ja,...Qa,...nc,...ac,...pc};function Dc(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Lc(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const Bc=Lc("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>(new TextEncoder).encode(e.substring(1))),$c=Lc("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{const t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?Dc(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}((e=e.substring(1)).length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),jc={utf8:Bc,"utf-8":Bc,hex:Mc.base16,latin1:$c,ascii:$c,binary:$c,...Mc};var Fc=Object.defineProperty,Wc=(e,t,n)=>((e,t,n)=>t in e?Fc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class qc{constructor(e,t){var n=this;this.core=e,this.logger=t,Wc(this,"keychain",new Map),Wc(this,"name","keychain"),Wc(this,"version","0.3"),Wc(this,"initialized",!1),Wc(this,"storagePrefix",na),Wc(this,"init",(0,r.Z)(function*(){if(!n.initialized){const e=yield n.getKeyChain();typeof e<"u"&&(n.keychain=e),n.initialized=!0}})),Wc(this,"has",e=>(this.isInitialized(),this.keychain.has(e))),Wc(this,"set",function(){var e=(0,r.Z)(function*(e,t){n.isInitialized(),n.keychain.set(e,t),yield n.persist()});return function(t,n){return e.apply(this,arguments)}}()),Wc(this,"get",e=>{this.isInitialized();const t=this.keychain.get(e);if(typeof t>"u"){const{message:t}=Oo("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}),Wc(this,"del",function(){var e=(0,r.Z)(function*(e){n.isInitialized(),n.keychain.delete(e),yield n.persist()});return function(t){return e.apply(this,arguments)}}()),this.core=e,this.logger=(0,p.Ep)(t,this.name)}get context(){return(0,p.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}setKeyChain(e){var t=this;return(0,r.Z)(function*(){yield t.core.storage.setItem(t.storageKey,ke(e))})()}getKeyChain(){var e=this;return(0,r.Z)(function*(){const t=yield e.core.storage.getItem(e.storageKey);return typeof t<"u"?xe(t):void 0})()}persist(){var e=this;return(0,r.Z)(function*(){yield e.setKeyChain(e.keychain)})()}isInitialized(){if(!this.initialized){const{message:e}=Oo("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Zc=Object.defineProperty,Hc=(e,t,n)=>((e,t,n)=>t in e?Zc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class Kc{constructor(e,t,n){var s=this;this.core=e,this.logger=t,Hc(this,"name","crypto"),Hc(this,"keychain"),Hc(this,"randomSessionIdentifier",$i()),Hc(this,"initialized",!1),Hc(this,"clientId"),Hc(this,"init",(0,r.Z)(function*(){s.initialized||(yield s.keychain.init(),s.initialized=!0)})),Hc(this,"hasKeys",e=>(this.isInitialized(),this.keychain.has(e))),Hc(this,"getClientId",(0,r.Z)(function*(){if(s.isInitialized(),s.clientId)return s.clientId;const e=yield s.getClientSeed(),t=S.Au(e),n=S.bG(t.publicKey);return s.clientId=n,n})),Hc(this,"generateKeyPair",()=>{this.isInitialized();const e=function(){const e=li.utils.randomPrivateKey(),t=li.getPublicKey(e);return{privateKey:(0,le.BB)(e,Mi),publicKey:(0,le.BB)(t,Mi)}}();return this.setPrivateKey(e.publicKey,e.privateKey)}),Hc(this,"signJWT",function(){var e=(0,r.Z)(function*(e){s.isInitialized();const t=yield s.getClientSeed(),n=S.Au(t),r=s.randomSessionIdentifier,i=ia;return yield S.vf(r,e,i,n)});return function(t){return e.apply(this,arguments)}}()),Hc(this,"generateSharedKey",(e,t,n)=>{this.isInitialized();const r=function(e,t){const n=li.getSharedSecret((0,le.mL)(e,Mi),(0,le.mL)(t,Mi)),r=((e,t,n,r,s)=>function(e,t,n,r=32){vt(e),bt(r);const s=e.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);void 0===n&&(n=Yr);const o=new Uint8Array(i*s),a=Gr.create(e,t),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let d=0;d<i;d++)Jr[0]=d+1,c.update(0===d?Yr:l).update(n).update(Jr).digestInto(l),o.set(l,s*d),a._cloneInto(c);return a.destroy(),c.destroy(),Nt(l,Jr),o.slice(0,r)}(e,function(e,t,n){return vt(e),void 0===n&&(n=new Uint8Array(e.outputLen)),Gr(e,Lt(n),Lt(t))}(e,t,n),r,s))(Xr,n,void 0,void 0,32);return(0,le.BB)(r,Mi)}(this.getPrivateKey(e),t);return this.setSymKey(r,n)}),Hc(this,"setSymKey",function(){var e=(0,r.Z)(function*(e,t){s.isInitialized();const n=t||ji(e);return yield s.keychain.set(n,e),n});return function(t,n){return e.apply(this,arguments)}}()),Hc(this,"deleteKeyPair",function(){var e=(0,r.Z)(function*(e){s.isInitialized(),yield s.keychain.del(e)});return function(t){return e.apply(this,arguments)}}()),Hc(this,"deleteSymKey",function(){var e=(0,r.Z)(function*(e){s.isInitialized(),yield s.keychain.del(e)});return function(t){return e.apply(this,arguments)}}()),Hc(this,"encode",function(){var e=(0,r.Z)(function*(e,t,n){s.isInitialized();const r=zi(n),i=(0,_.u)(t);if(Ji(r))return function(e,t){const n=Wi(2),r=Ft(12),s=Ki({type:n,sealed:(0,le.mL)(e,Bi),iv:r});return t===Li?Zi(s):s}(i,n?.encoding);if(Gi(r)){const t=r.senderPublicKey,n=r.receiverPublicKey;e=yield s.generateSharedKey(t,n)}const o=s.getSymKey(e),{type:a,senderPublicKey:c}=r;return function(e){const t=Wi(typeof e.type<"u"?e.type:0);if(1===qi(t)&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof e.senderPublicKey<"u"?(0,le.mL)(e.senderPublicKey,Mi):void 0,r=typeof e.iv<"u"?(0,le.mL)(e.iv,Mi):Ft(12),s=(0,le.mL)(e.symKey,Mi),i=Ki({type:t,sealed:Vr(s,r).encrypt((0,le.mL)(e.message,Bi)),iv:r,senderPublicKey:n});return e.encoding===Li?Zi(i):i}({type:a,symKey:o,message:i,senderPublicKey:c,encoding:n?.encoding})});return function(t,n,r){return e.apply(this,arguments)}}()),Hc(this,"decode",function(){var e=(0,r.Z)(function*(e,t,n){s.isInitialized();const r=function(e,t){const n=Vi({encoded:e,encoding:t?.encoding});return zi({type:qi(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?(0,le.BB)(n.senderPublicKey,Mi):void 0,receiverPublicKey:t?.receiverPublicKey})}(t,n);if(Ji(r)){const e=function(e,t){const{sealed:n}=Vi({encoded:e,encoding:t});return(0,le.BB)(n,Bi)}(t,n?.encoding);return(0,_.D)(e)}if(Gi(r)){const t=r.receiverPublicKey,n=r.senderPublicKey;e=yield s.generateSharedKey(t,n)}try{const r=function(e){const t=(0,le.mL)(e.symKey,Mi),{sealed:n,iv:r}=Vi({encoded:e.encoded,encoding:e.encoding}),s=Vr(t,r).decrypt(n);if(null===s)throw new Error("Failed to decrypt");return(0,le.BB)(s,Bi)}({symKey:s.getSymKey(e),encoded:t,encoding:n?.encoding});return(0,_.D)(r)}catch(i){s.logger.error(`Failed to decode message from topic: '${e}', clientId: '${yield s.getClientId()}'`),s.logger.error(i)}});return function(t,n,r){return e.apply(this,arguments)}}()),Hc(this,"getPayloadType",(e,t=Di)=>qi(Vi({encoded:e,encoding:t}).type)),Hc(this,"getPayloadSenderPublicKey",(e,t=Di)=>{const n=Vi({encoded:e,encoding:t});return n.senderPublicKey?(0,le.BB)(n.senderPublicKey,Mi):void 0}),this.core=e,this.logger=(0,p.Ep)(t,this.name),this.keychain=n||new qc(this.core,this.logger)}get context(){return(0,p.Fd)(this.logger)}setPrivateKey(e,t){var n=this;return(0,r.Z)(function*(){return yield n.keychain.set(e,t),e})()}getPrivateKey(e){return this.keychain.get(e)}getClientSeed(){var e=this;return(0,r.Z)(function*(){let t="";try{t=e.keychain.get(sa)}catch{t=$i(),yield e.keychain.set(sa,t)}return function(e,t="utf8"){const n=jc[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.decoder.decode(`${n.prefix}${e}`):Dc(globalThis.Buffer.from(e,"utf-8"))}(t,"base16")})()}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Oo("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Vc=Object.defineProperty,zc=Object.defineProperties,Gc=Object.getOwnPropertyDescriptors,Jc=Object.getOwnPropertySymbols,Yc=Object.prototype.hasOwnProperty,Xc=Object.prototype.propertyIsEnumerable,Qc=(e,t,n)=>t in e?Vc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,el=(e,t,n)=>Qc(e,"symbol"!=typeof t?t+"":t,n);class tl extends class{constructor(e,t){this.logger=e,this.core=t}}{constructor(e,t){var n;super(e,t),n=this,this.logger=e,this.core=t,el(this,"messages",new Map),el(this,"messagesWithoutClientAck",new Map),el(this,"name","messages"),el(this,"version","0.3"),el(this,"initialized",!1),el(this,"storagePrefix",na),el(this,"init",(0,r.Z)(function*(){if(!n.initialized){n.logger.trace("Initialized");try{const e=yield n.getRelayerMessages();typeof e<"u"&&(n.messages=e);const t=yield n.getRelayerMessagesWithoutClientAck();typeof t<"u"&&(n.messagesWithoutClientAck=t),n.logger.debug(`Successfully Restored records for ${n.name}`),n.logger.trace({type:"method",method:"restore",size:n.messages.size})}catch(e){n.logger.debug(`Failed to Restore records for ${n.name}`),n.logger.error(e)}finally{n.initialized=!0}}})),el(this,"set",function(){var e=(0,r.Z)(function*(e,t,r){n.isInitialized();const s=Fi(t);let i=n.messages.get(e);if(typeof i>"u"&&(i={}),typeof i[s]<"u")return s;if(i[s]=t,n.messages.set(e,i),"inbound"===r){const r=n.messagesWithoutClientAck.get(e)||{};n.messagesWithoutClientAck.set(e,((e,t)=>zc(e,Gc(t)))(((e,t)=>{for(var n in t||(t={}))Yc.call(t,n)&&Qc(e,n,t[n]);if(Jc)for(var n of Jc(t))Xc.call(t,n)&&Qc(e,n,t[n]);return e})({},r),{[s]:t}))}return yield n.persist(),s});return function(t,n,r){return e.apply(this,arguments)}}()),el(this,"get",e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t}),el(this,"getWithoutAck",e=>{this.isInitialized();const t={};for(const n of e){const e=this.messagesWithoutClientAck.get(n)||{};t[n]=Object.values(e)}return t}),el(this,"has",(e,t)=>(this.isInitialized(),typeof this.get(e)[Fi(t)]<"u")),el(this,"ack",function(){var e=(0,r.Z)(function*(e,t){n.isInitialized();const r=n.messagesWithoutClientAck.get(e);typeof r>"u"||(delete r[Fi(t)],0===Object.keys(r).length?n.messagesWithoutClientAck.delete(e):n.messagesWithoutClientAck.set(e,r),yield n.persist())});return function(t,n){return e.apply(this,arguments)}}()),el(this,"del",function(){var e=(0,r.Z)(function*(e){n.isInitialized(),n.messages.delete(e),n.messagesWithoutClientAck.delete(e),yield n.persist()});return function(t){return e.apply(this,arguments)}}()),this.logger=(0,p.Ep)(e,this.name),this.core=t}get context(){return(0,p.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}setRelayerMessages(e){var t=this;return(0,r.Z)(function*(){yield t.core.storage.setItem(t.storageKey,ke(e))})()}setRelayerMessagesWithoutClientAck(e){var t=this;return(0,r.Z)(function*(){yield t.core.storage.setItem(t.storageKeyWithoutClientAck,ke(e))})()}getRelayerMessages(){var e=this;return(0,r.Z)(function*(){const t=yield e.core.storage.getItem(e.storageKey);return typeof t<"u"?xe(t):void 0})()}getRelayerMessagesWithoutClientAck(){var e=this;return(0,r.Z)(function*(){const t=yield e.core.storage.getItem(e.storageKeyWithoutClientAck);return typeof t<"u"?xe(t):void 0})()}persist(){var e=this;return(0,r.Z)(function*(){yield e.setRelayerMessages(e.messages),yield e.setRelayerMessagesWithoutClientAck(e.messagesWithoutClientAck)})()}isInitialized(){if(!this.initialized){const{message:e}=Oo("NOT_INITIALIZED",this.name);throw new Error(e)}}}var nl=Object.defineProperty,rl=Object.defineProperties,sl=Object.getOwnPropertyDescriptors,il=Object.getOwnPropertySymbols,ol=Object.prototype.hasOwnProperty,al=Object.prototype.propertyIsEnumerable,cl=(e,t,n)=>t in e?nl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ll=(e,t)=>{for(var n in t||(t={}))ol.call(t,n)&&cl(e,n,t[n]);if(il)for(var n of il(t))al.call(t,n)&&cl(e,n,t[n]);return e},dl=(e,t)=>rl(e,sl(t)),ul=(e,t,n)=>cl(e,"symbol"!=typeof t?t+"":t,n);class pl extends w{constructor(e,t){var n;super(e,t),n=this,this.relayer=e,this.logger=t,ul(this,"events",new l.EventEmitter),ul(this,"name","publisher"),ul(this,"queue",new Map),ul(this,"publishTimeout",(0,I.toMiliseconds)(I.ONE_MINUTE)),ul(this,"initialPublishTimeout",(0,I.toMiliseconds)(15*I.ONE_SECOND)),ul(this,"needsTransportRestart",!1),ul(this,"publish",function(){var e=(0,r.Z)(function*(e,t,s){var i,o,a,c,l;n.logger.debug("Publishing Payload"),n.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:s}});const d=s?.ttl||oa,u=s?.prompt||!1,p=s?.tag||0,h=s?.id||(0,ea.getBigIntRpcId)().toString(),f=Xi(Yi().protocol),g={id:h,method:s?.publishMethod||f.publish,params:ll({topic:e,message:t,ttl:d,prompt:u,tag:p,attestation:s?.attestation},s?.tvf)},m=`Failed to publish payload, please try again. id:${h} tag:${p}`;try{Uo(null==(i=g.params)?void 0:i.prompt)&&(null==(o=g.params)||delete o.prompt),Uo(null==(a=g.params)?void 0:a.tag)&&(null==(c=g.params)||delete c.tag);const l=new Promise(function(){var e=(0,r.Z)(function*(e){const t=({id:r})=>{var s;(null==(s=g.id)?void 0:s.toString())===r.toString()&&(n.removeRequestFromQueue(r),n.relayer.events.removeListener(ca,t),e())};n.relayer.events.on(ca,t);const r=Me(new Promise((e,t)=>{n.rpcPublish(g,s).then(e).catch(e=>{n.logger.warn(e,e?.message),t(e)})}),n.initialPublishTimeout,`Failed initial publish, retrying.... id:${h} tag:${p}`);try{yield r,n.events.removeListener(ca,t)}catch(i){n.queue.set(h,{request:g,opts:s,attempt:1}),n.logger.warn(i,i?.message)}});return function(t){return e.apply(this,arguments)}}());n.logger.trace({type:"method",method:"publish",params:{id:h,topic:e,message:t,opts:s}}),yield Me(l,n.publishTimeout,m)}catch(y){if(n.logger.debug("Failed to Publish Payload"),n.logger.error(y),null!=(l=s?.internal)&&l.throwOnFailedPublish)throw y}finally{n.queue.delete(h)}});return function(t,n,r){return e.apply(this,arguments)}}()),ul(this,"publishCustom",function(){var e=(0,r.Z)(function*(e){var t,s,i,o,a;n.logger.debug("Publishing custom payload"),n.logger.trace({type:"method",method:"publishCustom",params:e});const{payload:c,opts:l={}}=e,{attestation:d,tvf:u,publishMethod:p,prompt:h,tag:f,ttl:g=I.FIVE_MINUTES}=l,m=l.id||(0,ea.getBigIntRpcId)().toString(),y=Xi(Yi().protocol),b=p||y.publish,w={id:m,method:b,params:ll(dl(ll({},c),{ttl:g,prompt:h,tag:f,attestation:d}),u)},v=`Failed to publish custom payload, please try again. id:${m} tag:${f}`;try{Uo(null==(t=w.params)?void 0:t.prompt)&&(null==(s=w.params)||delete s.prompt),Uo(null==(i=w.params)?void 0:i.tag)&&(null==(o=w.params)||delete o.tag);const e=new Promise(function(){var e=(0,r.Z)(function*(e){const t=({id:r})=>{var s;(null==(s=w.id)?void 0:s.toString())===r.toString()&&(n.removeRequestFromQueue(r),n.relayer.events.removeListener(ca,t),e())};n.relayer.events.on(ca,t);const r=Me(new Promise((e,t)=>{n.rpcPublish(w,l).then(e).catch(e=>{n.logger.warn(e,e?.message),t(e)})}),n.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${b} id:${m} tag:${f}`);try{yield r,n.events.removeListener(ca,t)}catch(s){n.queue.set(m,{request:w,opts:l,attempt:1}),n.logger.warn(s,s?.message)}});return function(t){return e.apply(this,arguments)}}());n.logger.trace({type:"method",method:"publish",params:{id:m,payload:c,opts:l}}),yield Me(e,n.publishTimeout,v)}catch(E){if(n.logger.debug("Failed to Publish Payload"),n.logger.error(E),null!=(a=l?.internal)&&a.throwOnFailedPublish)throw E}finally{n.queue.delete(m)}});return function(t){return e.apply(this,arguments)}}()),ul(this,"on",(e,t)=>{this.events.on(e,t)}),ul(this,"once",(e,t)=>{this.events.once(e,t)}),ul(this,"off",(e,t)=>{this.events.off(e,t)}),ul(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.relayer=e,this.logger=(0,p.Ep)(t,this.name),this.registerEventListeners()}get context(){return(0,p.Fd)(this.logger)}rpcPublish(e,t){var n=this;return(0,r.Z)(function*(){n.logger.debug("Outgoing Relay Payload"),n.logger.trace({type:"message",direction:"outgoing",request:e});const r=yield n.relayer.request(e);return n.relayer.events.emit(ca,ll(ll({},e),t)),n.logger.debug("Successfully Published Payload"),r})()}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){var e=this;this.queue.forEach(function(){var t=(0,r.Z)(function*(t,n){var r;const s=t.attempt+1;e.queue.set(n,dl(ll({},t),{attempt:s})),e.logger.warn({},`Publisher: queue->publishing: ${t.request.id}, tag: ${null==(r=t.request.params)?void 0:r.tag}, attempt: ${s}`),yield e.rpcPublish(t.request,t.opts),e.logger.warn({},`Publisher: queue->published: ${t.request.id}`)});return function(e,n){return t.apply(this,arguments)}}())}registerEventListeners(){this.relayer.core.heartbeat.on(d.Lx.pulse,()=>{if(this.needsTransportRestart)return this.needsTransportRestart=!1,void this.relayer.events.emit("relayer_connection_stalled");this.checkQueue()}),this.relayer.on("relayer_message_ack",e=>{this.removeRequestFromQueue(e.id.toString())})}}var hl=Object.defineProperty,fl=(e,t,n)=>((e,t,n)=>t in e?hl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class gl{constructor(){fl(this,"map",new Map),fl(this,"set",(e,t)=>{const n=this.get(e);this.exists(e,t)||this.map.set(e,[...n,t])}),fl(this,"get",e=>this.map.get(e)||[]),fl(this,"exists",(e,t)=>this.get(e).includes(t)),fl(this,"delete",(e,t)=>{if(typeof t>"u")return void this.map.delete(e);if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,t))return;const r=n.filter(e=>e!==t);r.length?this.map.set(e,r):this.map.delete(e)}),fl(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var ml=Object.defineProperty,yl=Object.defineProperties,bl=Object.getOwnPropertyDescriptors,wl=Object.getOwnPropertySymbols,vl=Object.prototype.hasOwnProperty,El=Object.prototype.propertyIsEnumerable,Cl=(e,t,n)=>t in e?ml(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Al=(e,t)=>{for(var n in t||(t={}))vl.call(t,n)&&Cl(e,n,t[n]);if(wl)for(var n of wl(t))El.call(t,n)&&Cl(e,n,t[n]);return e},Nl=(e,t)=>yl(e,bl(t)),Il=(e,t,n)=>Cl(e,"symbol"!=typeof t?t+"":t,n);class _l extends E{constructor(e,t){var n;super(e,t),n=this,this.relayer=e,this.logger=t,Il(this,"subscriptions",new Map),Il(this,"topicMap",new gl),Il(this,"events",new l.EventEmitter),Il(this,"name","subscription"),Il(this,"version","0.3"),Il(this,"pending",new Map),Il(this,"cached",[]),Il(this,"initialized",!1),Il(this,"storagePrefix",na),Il(this,"subscribeTimeout",(0,I.toMiliseconds)(I.ONE_MINUTE)),Il(this,"initialSubscribeTimeout",(0,I.toMiliseconds)(15*I.ONE_SECOND)),Il(this,"clientId"),Il(this,"batchSubscribeTopicsLimit",500),Il(this,"init",(0,r.Z)(function*(){n.initialized||(n.logger.trace("Initialized"),n.registerEventListeners(),yield n.restore()),n.initialized=!0})),Il(this,"subscribe",function(){var e=(0,r.Z)(function*(e,t){var r;n.isInitialized(),n.logger.debug("Subscribing Topic"),n.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{const s=Yi(t),i={topic:e,relay:s,transportType:t?.transportType};null!=(r=t?.internal)&&r.skipSubscribe||n.pending.set(e,i);const o=yield n.rpcSubscribe(e,s,t);return"string"==typeof o&&(n.onSubscribe(o,i),n.logger.debug("Successfully Subscribed Topic"),n.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}})),o}catch(s){throw n.logger.debug("Failed to Subscribe Topic"),n.logger.error(s),s}});return function(t,n){return e.apply(this,arguments)}}()),Il(this,"unsubscribe",function(){var e=(0,r.Z)(function*(e,t){n.isInitialized(),typeof t?.id<"u"?yield n.unsubscribeById(e,t.id,t):yield n.unsubscribeByTopic(e,t)});return function(t,n){return e.apply(this,arguments)}}()),Il(this,"isSubscribed",e=>new Promise(t=>{t(this.topicMap.topics.includes(e))})),Il(this,"isKnownTopic",e=>new Promise(t=>{t(this.topicMap.topics.includes(e)||this.pending.has(e)||this.cached.some(t=>t.topic===e))})),Il(this,"on",(e,t)=>{this.events.on(e,t)}),Il(this,"once",(e,t)=>{this.events.once(e,t)}),Il(this,"off",(e,t)=>{this.events.off(e,t)}),Il(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),Il(this,"start",(0,r.Z)(function*(){yield n.onConnect()})),Il(this,"stop",(0,r.Z)(function*(){yield n.onDisconnect()})),Il(this,"restart",(0,r.Z)(function*(){yield n.restore(),yield n.onRestart()})),Il(this,"checkPending",(0,r.Z)(function*(){if(!(0!==n.pending.size||n.initialized&&n.relayer.connected))return;const e=[];n.pending.forEach(t=>{e.push(t)}),yield n.batchSubscribe(e)})),Il(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(d.Lx.pulse,(0,r.Z)(function*(){yield n.checkPending()})),this.events.on(pa,function(){var e=(0,r.Z)(function*(e){const t=pa;n.logger.info(`Emitting ${t}`),n.logger.debug({type:"event",event:t,data:e}),yield n.persist()});return function(t){return e.apply(this,arguments)}}()),this.events.on(ha,function(){var e=(0,r.Z)(function*(e){const t=ha;n.logger.info(`Emitting ${t}`),n.logger.debug({type:"event",event:t,data:e}),yield n.persist()});return function(t){return e.apply(this,arguments)}}())}),this.relayer=e,this.logger=(0,p.Ep)(t,this.name),this.clientId=""}get context(){return(0,p.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let n=!1;try{n=this.getSubscription(e).topic===t}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}unsubscribeByTopic(e,t){var n=this;return(0,r.Z)(function*(){const s=n.topicMap.get(e);yield Promise.all(s.map(function(){var s=(0,r.Z)(function*(r){return yield n.unsubscribeById(e,r,t)});return function(e){return s.apply(this,arguments)}}()))})()}unsubscribeById(e,t,n){var s=this;return(0,r.Z)(function*(){s.logger.debug("Unsubscribing Topic"),s.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}});try{const r=Yi(n);yield s.restartToComplete({topic:e,id:t,relay:r}),yield s.rpcUnsubscribe(e,t,r);const i=Po("USER_DISCONNECTED",`${s.name}, ${e}`);yield s.onUnsubscribe(e,t,i),s.logger.debug("Successfully Unsubscribed Topic"),s.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}})}catch(r){throw s.logger.debug("Failed to Unsubscribe Topic"),s.logger.error(r),r}})()}rpcSubscribe(e,t,n){var s=this;return(0,r.Z)(function*(){var i,o;const a=yield s.getSubscriptionId(e);if(null!=(i=n?.internal)&&i.skipSubscribe)return a;(!n||n?.transportType===da.relay)&&(yield s.restartToComplete({topic:e,id:e,relay:t}));const c={method:Xi(t.protocol).subscribe,params:{topic:e}};s.logger.debug("Outgoing Relay Payload"),s.logger.trace({type:"payload",direction:"outgoing",request:c});const l=null==(o=n?.internal)?void 0:o.throwOnFailedPublish;try{if(n?.transportType===da.link_mode)return setTimeout(()=>{(s.relayer.connected||s.relayer.connecting)&&s.relayer.request(c).catch(e=>s.logger.warn(e))},(0,I.toMiliseconds)(I.ONE_SECOND)),a;const t=new Promise(function(){var t=(0,r.Z)(function*(t){const n=r=>{r.topic===e&&(s.events.removeListener(pa,n),t(r.id))};s.events.on(pa,n);try{const r=yield Me(new Promise((e,t)=>{s.relayer.request(c).catch(e=>{s.logger.warn(e,e?.message),t(e)}).then(e)}),s.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);s.events.removeListener(pa,n),t(r)}catch{}});return function(e){return t.apply(this,arguments)}}()),i=yield Me(t,s.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!i&&l)throw new Error(`Subscribing to ${e} failed, please try again`);return i?a:null}catch(d){if(s.logger.debug("Outgoing Relay Subscribe Payload stalled"),s.relayer.events.emit("relayer_connection_stalled"),l)throw d}return null})()}rpcBatchSubscribe(e){var t=this;return(0,r.Z)(function*(){if(!e.length)return;const n={method:Xi(e[0].relay.protocol).batchSubscribe,params:{topics:e.map(e=>e.topic)}};t.logger.debug("Outgoing Relay Payload"),t.logger.trace({type:"payload",direction:"outgoing",request:n});try{yield yield Me(new Promise(e=>{t.relayer.request(n).catch(e=>t.logger.warn(e)).then(e)}),t.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{t.relayer.events.emit("relayer_connection_stalled")}})()}rpcBatchFetchMessages(e){var t=this;return(0,r.Z)(function*(){if(!e.length)return;const n={method:Xi(e[0].relay.protocol).batchFetchMessages,params:{topics:e.map(e=>e.topic)}};let r;t.logger.debug("Outgoing Relay Payload"),t.logger.trace({type:"payload",direction:"outgoing",request:n});try{r=yield yield Me(new Promise((e,r)=>{t.relayer.request(n).catch(e=>{t.logger.warn(e),r(e)}).then(e)}),t.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{t.relayer.events.emit("relayer_connection_stalled")}return r})()}rpcUnsubscribe(e,t,n){const r={method:Xi(n.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r}),this.relayer.request(r)}onSubscribe(e,t){this.setSubscription(e,Nl(Al({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(e=>{this.setSubscription(e.id,Al({},e)),this.pending.delete(e.topic)})}onUnsubscribe(e,t,n){var s=this;return(0,r.Z)(function*(){s.events.removeAllListeners(t),s.hasSubscription(t,e)&&s.deleteSubscription(t,n),yield s.relayer.messages.del(e)})()}setRelayerSubscriptions(e){var t=this;return(0,r.Z)(function*(){yield t.relayer.core.storage.setItem(t.storageKey,e)})()}getRelayerSubscriptions(){var e=this;return(0,r.Z)(function*(){return yield e.relayer.core.storage.getItem(e.storageKey)})()}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,Al({},t)),this.topicMap.set(t.topic,e),this.events.emit(pa,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:t}=Oo("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(ha,Nl(Al({},n),{reason:t}))}persist(){var e=this;return(0,r.Z)(function*(){yield e.setRelayerSubscriptions(e.values),e.events.emit("subscription_sync")})()}onRestart(){var e=this;return(0,r.Z)(function*(){if(e.cached.length){const t=[...e.cached],n=Math.ceil(e.cached.length/e.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const n=t.splice(0,e.batchSubscribeTopicsLimit);yield e.batchSubscribe(n)}}e.events.emit("subscription_resubscribed")})()}restore(){var e=this;return(0,r.Z)(function*(){try{const t=yield e.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(e.subscriptions.size&&!t.every(t=>{var n;return t.topic===(null==(n=e.subscriptions.get(t.id))?void 0:n.topic)})){const{message:t}=Oo("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(t),e.logger.error(`${e.name}: ${JSON.stringify(e.values)}`),new Error(t)}e.cached=t,e.logger.debug(`Successfully Restored subscriptions for ${e.name}`),e.logger.trace({type:"method",method:"restore",subscriptions:e.values})}catch(t){e.logger.debug(`Failed to Restore subscriptions for ${e.name}`),e.logger.error(t)}})()}batchSubscribe(e){var t=this;return(0,r.Z)(function*(){e.length&&(yield t.rpcBatchSubscribe(e),t.onBatchSubscribe(yield Promise.all(e.map(function(){var e=(0,r.Z)(function*(e){return Nl(Al({},e),{id:yield t.getSubscriptionId(e.topic)})});return function(t){return e.apply(this,arguments)}}()))))})()}batchFetchMessages(e){var t=this;return(0,r.Z)(function*(){if(!e.length)return;t.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=yield t.rpcBatchFetchMessages(e);n&&n.messages&&(yield function(e){return new Promise(t=>setTimeout(t,e))}((0,I.toMiliseconds)(I.ONE_SECOND)),yield t.relayer.handleBatchMessageEvents(n.messages))})()}onConnect(){var e=this;return(0,r.Z)(function*(){yield e.restart(),e.reset()})()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Oo("NOT_INITIALIZED",this.name);throw new Error(e)}}restartToComplete(e){var t=this;return(0,r.Z)(function*(){!t.relayer.connected&&!t.relayer.connecting&&(t.cached.push(e),yield t.relayer.transportOpen())})()}getClientId(){var e=this;return(0,r.Z)(function*(){return e.clientId||(e.clientId=yield e.relayer.core.crypto.getClientId()),e.clientId})()}getSubscriptionId(e){var t=this;return(0,r.Z)(function*(){return Fi(e+(yield t.getClientId()))})()}}var Sl=Object.defineProperty,Tl=Object.getOwnPropertySymbols,Rl=Object.prototype.hasOwnProperty,Ol=Object.prototype.propertyIsEnumerable,Pl=(e,t,n)=>t in e?Sl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kl=(e,t)=>{for(var n in t||(t={}))Rl.call(t,n)&&Pl(e,n,t[n]);if(Tl)for(var n of Tl(t))Ol.call(t,n)&&Pl(e,n,t[n]);return e},xl=(e,t,n)=>Pl(e,"symbol"!=typeof t?t+"":t,n);class Ul extends v{constructor(e){var t,n;super(e),t=this,xl(this,"protocol","wc"),xl(this,"version",2),xl(this,"core"),xl(this,"logger"),xl(this,"events",new l.EventEmitter),xl(this,"provider"),xl(this,"messages"),xl(this,"subscriber"),xl(this,"publisher"),xl(this,"name","relayer"),xl(this,"transportExplicitlyClosed",!1),xl(this,"initialized",!1),xl(this,"connectionAttemptInProgress",!1),xl(this,"relayUrl"),xl(this,"projectId"),xl(this,"packageName"),xl(this,"bundleId"),xl(this,"hasExperiencedNetworkDisruption",!1),xl(this,"pingTimeout"),xl(this,"heartBeatTimeout",(0,I.toMiliseconds)(I.THIRTY_SECONDS+I.FIVE_SECONDS)),xl(this,"reconnectTimeout"),xl(this,"connectPromise"),xl(this,"reconnectInProgress",!1),xl(this,"requestsInFlight",[]),xl(this,"connectTimeout",(0,I.toMiliseconds)(15*I.ONE_SECOND)),xl(this,"request",function(){var e=(0,r.Z)(function*(e){var n,r;t.logger.debug("Publishing Request Payload");const s=e.id||(0,ea.getBigIntRpcId)().toString();yield t.toEstablishConnection();try{t.logger.trace({id:s,method:e.method,topic:null==(n=e.params)?void 0:n.topic},"relayer.request - publishing...");const i=`${s}:${(null==(r=e.params)?void 0:r.tag)||""}`;t.requestsInFlight.push(i);const o=yield t.provider.request(e);return t.requestsInFlight=t.requestsInFlight.filter(e=>e!==i),o}catch(i){throw t.logger.debug(`Failed to Publish Request: ${s}`),i}});return function(t){return e.apply(this,arguments)}}()),xl(this,"resetPingTimeout",()=>{Ne()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var e,t,n,r;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),null==(r=null==(n=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:n.terminate)||r.call(n)}catch(s){this.logger.warn(s,s?.message)}},this.heartBeatTimeout))}),xl(this,"onPayloadHandler",e=>{this.onProviderPayload(e),this.resetPingTimeout()}),xl(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected \ud83d\udedc"),this.startPingTimeout(),this.events.emit("relayer_connect")}),xl(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected \ud83d\uded1"),this.requestsInFlight=[],this.onProviderDisconnect()}),xl(this,"onProviderErrorHandler",e=>{this.logger.fatal(`Fatal socket error: ${e.message}`),this.events.emit("relayer_error",e),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),xl(this,"registerProviderListeners",()=>{this.provider.on("payload",this.onPayloadHandler),this.provider.on("connect",this.onConnectHandler),this.provider.on("disconnect",this.onDisconnectHandler),this.provider.on("error",this.onProviderErrorHandler)}),this.core=e.core,this.logger=Xo({logger:null!=(n=e.logger)?n:"error",name:this.name}),this.messages=new tl(this.logger,e.core),this.subscriber=new _l(this,this.logger),this.publisher=new pl(this,this.logger),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||aa,Ie()&&typeof global<"u"&&typeof(null==global?void 0:global.Platform)<"u"&&"android"===(null==global?void 0:global.Platform.OS)?this.packageName=Te():Ie()&&typeof global<"u"&&typeof(null==global?void 0:global.Platform)<"u"&&"ios"===(null==global?void 0:global.Platform.OS)&&(this.bundleId=Te()),this.provider={}}init(){var e=this;return(0,r.Z)(function*(){e.logger.trace("Initialized"),e.registerEventListeners(),yield Promise.all([e.messages.init(),e.subscriber.init()]),e.initialized=!0,e.transportOpen().catch(t=>e.logger.warn(t,t?.message))})()}get context(){return(0,p.Fd)(this.logger)}get connected(){var e,t,n;return 1===(null==(n=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:n.readyState)||!1}get connecting(){var e,t,n;return 0===(null==(n=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:n.readyState)||void 0!==this.connectPromise||!1}publish(e,t,n){var s=this;return(0,r.Z)(function*(){s.isInitialized(),yield s.publisher.publish(e,t,n),yield s.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:da.relay},"outbound")})()}publishCustom(e){var t=this;return(0,r.Z)(function*(){t.isInitialized(),yield t.publisher.publishCustom(e)})()}subscribe(e,t){var n=this;return(0,r.Z)(function*(){var s,i,o;n.isInitialized(),(null==t||!t.transportType||"relay"===t?.transportType)&&(yield n.toEstablishConnection());const a=typeof(null==(s=t?.internal)?void 0:s.throwOnFailedPublish)>"u"||(null==(i=t?.internal)?void 0:i.throwOnFailedPublish);let c,l=(null==(o=n.subscriber.topicMap.get(e))?void 0:o[0])||"";const d=t=>{t.topic===e&&(n.subscriber.off(pa,d),c())};return yield Promise.all([new Promise(e=>{c=e,n.subscriber.on(pa,d)}),new Promise(function(){var s=(0,r.Z)(function*(r,s){l=(yield n.subscriber.subscribe(e,kl({internal:{throwOnFailedPublish:a}},t)).catch(e=>{a&&s(e)}))||l,r()});return function(e,t){return s.apply(this,arguments)}}())]),l})()}unsubscribe(e,t){var n=this;return(0,r.Z)(function*(){n.isInitialized(),yield n.subscriber.unsubscribe(e,t)})()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}transportDisconnect(){var e=this;return(0,r.Z)(function*(){e.provider.disconnect&&(e.hasExperiencedNetworkDisruption||e.connected)?yield Me(e.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>e.onProviderDisconnect()):e.onProviderDisconnect()})()}transportClose(){var e=this;return(0,r.Z)(function*(){e.transportExplicitlyClosed=!0,yield e.transportDisconnect()})()}transportOpen(e){var t=this;return(0,r.Z)(function*(){if(t.subscriber.hasAnyTopics){if(t.connectPromise?(t.logger.debug({},"Waiting for existing connection attempt to resolve..."),yield t.connectPromise,t.logger.debug({},"Existing connection attempt resolved")):(t.connectPromise=new Promise(function(){var n=(0,r.Z)(function*(n,r){yield t.connect(e).then(n).catch(r).finally(()=>{t.connectPromise=void 0})});return function(e,t){return n.apply(this,arguments)}}()),yield t.connectPromise),!t.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${t.relayUrl}`)}else t.logger.info("Starting WS connection skipped because the client has no topics to work with.")})()}restartTransport(e){var t=this;return(0,r.Z)(function*(){t.logger.debug({},"Restarting transport..."),!t.connectionAttemptInProgress&&(t.relayUrl=e||t.relayUrl,yield t.confirmOnlineStateOrThrow(),yield t.transportClose(),yield t.transportOpen())})()}confirmOnlineStateOrThrow(){return(0,r.Z)(function*(){if(!(yield Ko()))throw new Error("No internet connection detected. Please restart your network and try again.")})()}handleBatchMessageEvents(e){var t=this;return(0,r.Z)(function*(){if(0===e?.length)return void t.logger.trace("Batch message events is empty. Ignoring...");const n=e.sort((e,t)=>e.publishedAt-t.publishedAt);t.logger.debug(`Batch of ${n.length} message events sorted`);for(const e of n)try{yield t.onMessageEvent(e)}catch(r){t.logger.warn(r,"Error while processing batch message event: "+r?.message)}t.logger.trace(`Batch of ${n.length} message events processed`)})()}onLinkMessageEvent(e,t){var n=this;return(0,r.Z)(function*(){const{topic:r}=e;if(!t.sessionExists){const e={topic:r,expiry:Be(I.FIVE_MINUTES),relay:{protocol:"irn"},active:!1};yield n.core.pairing.pairings.set(r,e)}n.events.emit("relayer_message",e),yield n.recordMessageEvent(e,"inbound")})()}connect(e){var t=this;return(0,r.Z)(function*(){yield t.confirmOnlineStateOrThrow(),e&&e!==t.relayUrl&&(t.relayUrl=e,yield t.transportDisconnect()),t.connectionAttemptInProgress=!0,t.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(t.transportExplicitlyClosed)break;t.logger.debug({},`Connecting to ${t.relayUrl}, attempt: ${n}...`),yield t.createProvider(),yield new Promise(function(){var e=(0,r.Z)(function*(e,n){const s=()=>{n(new Error("Connection interrupted while trying to connect"))};t.provider.once("disconnect",s),yield Me(new Promise((e,n)=>{t.provider.connect().then(e).catch(n)}),t.connectTimeout,`Socket stalled when trying to connect to ${t.relayUrl}`).catch(e=>{n(e)}).finally(()=>{t.provider.off("disconnect",s),clearTimeout(t.reconnectTimeout)}),yield new Promise(function(){var e=(0,r.Z)(function*(e,r){const s=()=>{n(new Error("Connection interrupted while trying to subscribe"))};t.provider.once("disconnect",s),yield t.subscriber.start().then(e).catch(r).finally(()=>{t.provider.off("disconnect",s)})});return function(t,n){return e.apply(this,arguments)}}()),t.hasExperiencedNetworkDisruption=!1,e()});return function(t,n){return e.apply(this,arguments)}}())}catch(s){yield t.subscriber.stop(),t.logger.warn({},s.message),t.hasExperiencedNetworkDisruption=!0}finally{t.connectionAttemptInProgress=!1}if(t.connected){t.logger.debug({},`Connected to ${t.relayUrl} successfully on attempt: ${n}`);break}yield new Promise(e=>setTimeout(e,(0,I.toMiliseconds)(1*n))),n++}})()}startPingTimeout(){var e,t,n,r,s;if(Ne())try{null!=(t=null==(e=this.provider)?void 0:e.connection)&&t.socket&&(null==(s=null==(r=null==(n=this.provider)?void 0:n.connection)?void 0:r.socket)||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(i){this.logger.warn(i,i?.message)}}createProvider(){var e=this;return(0,r.Z)(function*(){e.provider.connection&&e.unregisterProviderListeners();const t=yield e.core.crypto.signJWT(e.relayUrl);e.provider=new Qo.r(new ta.Z(function({protocol:e,version:t,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),d=Oe(e,t,r),u=function(e,t){const n=new URLSearchParams(e);return Object.entries(t).sort(([e],[t])=>e.localeCompare(t)).forEach(([e,t])=>{null!=t&&n.set(e,String(t))}),n.toString()}(l[1]||"",{auth:s,ua:d,projectId:i,useOnCloseEvent:o||void 0,packageName:c||void 0,bundleId:a||void 0});return l[0]+"?"+u}({sdkVersion:la,protocol:e.protocol,version:e.version,relayUrl:e.relayUrl,projectId:e.projectId,auth:t,useOnCloseEvent:!0,bundleId:e.bundleId,packageName:e.packageName}))),e.registerProviderListeners()})()}recordMessageEvent(e,t){var n=this;return(0,r.Z)(function*(){const{topic:r,message:s}=e;yield n.messages.set(r,s,t)})()}shouldIgnoreMessageEvent(e){var t=this;return(0,r.Z)(function*(){const{topic:n,message:r}=e;if(!r||0===r.length)return t.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!(yield t.subscriber.isKnownTopic(n)))return t.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=t.messages.has(n,r);return s&&t.logger.warn(`Ignoring duplicate message: ${r}`),s})()}onProviderPayload(e){var t=this;return(0,r.Z)(function*(){if(t.logger.debug("Incoming Relay Payload"),t.logger.trace({type:"payload",direction:"incoming",payload:e}),(0,ea.isJsonRpcRequest)(e)){if(!e.method.endsWith("_subscription"))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:da.relay,attestation:o};t.logger.debug("Emitting Relayer Payload"),t.logger.trace(kl({type:"event",event:n.id},a)),t.events.emit(n.id,a),yield t.acknowledgePayload(e),yield t.onMessageEvent(a)}else(0,ea.isJsonRpcResponse)(e)&&t.events.emit("relayer_message_ack",e)})()}onMessageEvent(e){var t=this;return(0,r.Z)(function*(){(yield t.shouldIgnoreMessageEvent(e))||(yield t.recordMessageEvent(e,"inbound"),t.events.emit("relayer_message",e))})()}acknowledgePayload(e){var t=this;return(0,r.Z)(function*(){const n=(0,ea.formatJsonRpcResult)(e.id,!0);yield t.provider.connection.send(n)})()}unregisterProviderListeners(){this.provider.off("payload",this.onPayloadHandler),this.provider.off("connect",this.onConnectHandler),this.provider.off("disconnect",this.onDisconnectHandler),this.provider.off("error",this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}registerEventListeners(){var e=this;return(0,r.Z)(function*(){let t=yield Ko();(function(e){switch(Se()){case"browser":!function(e){!Ie()&&_e()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)))}(e);break;case"react-native":!function(e){Ie()&&typeof global<"u"&&null!=global&&global.NetInfo&&global?.NetInfo.addEventListener(t=>e(t?.isConnected))}(e)}})(function(){var n=(0,r.Z)(function*(n){t!==n&&(t=n,n?yield e.transportOpen().catch(t=>e.logger.error(t,t?.message)):(e.hasExperiencedNetworkDisruption=!0,yield e.transportDisconnect(),e.transportExplicitlyClosed=!1))});return function(e){return n.apply(this,arguments)}}()),e.core.heartbeat.on(d.Lx.pulse,(0,r.Z)(function*(){if(!e.transportExplicitlyClosed&&!e.connected&&function(){var e;return!_e()||!(0,R.getDocument)()||"visible"===(null==(e=(0,R.getDocument)())?void 0:e.visibilityState)}())try{yield e.confirmOnlineStateOrThrow(),yield e.transportOpen()}catch(t){e.logger.warn(t,t?.message)}}))})()}onProviderDisconnect(){var e=this;return(0,r.Z)(function*(){clearTimeout(e.pingTimeout),e.events.emit("relayer_disconnect"),e.connectionAttemptInProgress=!1,!e.reconnectInProgress&&(e.reconnectInProgress=!0,yield e.subscriber.stop(),e.subscriber.hasAnyTopics&&(e.transportExplicitlyClosed||(e.reconnectTimeout=setTimeout((0,r.Z)(function*(){yield e.transportOpen().catch(t=>e.logger.error(t,t?.message)),e.reconnectTimeout=void 0,e.reconnectInProgress=!1}),(0,I.toMiliseconds)(.1)))))})()}isInitialized(){if(!this.initialized){const{message:e}=Oo("NOT_INITIALIZED",this.name);throw new Error(e)}}toEstablishConnection(){var e=this;return(0,r.Z)(function*(){if(yield e.confirmOnlineStateOrThrow(),!e.connected){if(e.connectPromise)return void(yield e.connectPromise);yield e.connect()}})()}}function Ml(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function Dl(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Ll="[object Arguments]",Bl="[object Object]";function $l(){}function jl(e){if(!e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&"[object Object]"===Object.prototype.toString.call(e)}function Fl(e,t,n,r,s,i,o){const a=o(e,t,n,r,s,i);if(void 0!==a)return a;if(typeof e==typeof t)switch(typeof e){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return e===t;case"number":return e===t||Object.is(e,t);case"object":return Wl(e,t,i,o)}return Wl(e,t,i,o)}function Wl(e,t,n,r){if(Object.is(e,t))return!0;let s=Dl(e),i=Dl(t);if(s===Ll&&(s=Bl),i===Ll&&(i=Bl),s!==i)return!1;switch(s){case"[object String]":return e.toString()===t.toString();case"[object Number]":return function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}(e.valueOf(),t.valueOf());case"[object Boolean]":case"[object Date]":case"[object Symbol]":return Object.is(e.valueOf(),t.valueOf());case"[object RegExp]":return e.source===t.source&&e.flags===t.flags;case"[object Function]":return e===t}const o=(n=n??new Map).get(e),a=n.get(t);if(null!=o&&null!=a)return o===t;n.set(e,t),n.set(t,e);try{switch(s){case"[object Map]":if(e.size!==t.size)return!1;for(const[s,i]of e.entries())if(!t.has(s)||!Fl(i,t.get(s),s,e,t,n,r))return!1;return!0;case"[object Set]":{if(e.size!==t.size)return!1;const s=Array.from(e.values()),i=Array.from(t.values());for(let o=0;o<s.length;o++){const a=s[o],c=i.findIndex(s=>Fl(a,s,void 0,e,t,n,r));if(-1===c)return!1;i.splice(c,1)}return!0}case"[object Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":case"[object BigUint64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object BigInt64Array]":case"[object Float32Array]":case"[object Float64Array]":if(typeof Buffer<"u"&&Buffer.isBuffer(e)!==Buffer.isBuffer(t)||e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(!Fl(e[s],t[s],s,e,t,n,r))return!1;return!0;case"[object ArrayBuffer]":return e.byteLength===t.byteLength&&Wl(new Uint8Array(e),new Uint8Array(t),n,r);case"[object DataView]":return e.byteLength===t.byteLength&&e.byteOffset===t.byteOffset&&Wl(new Uint8Array(e),new Uint8Array(t),n,r);case"[object Error]":return e.name===t.name&&e.message===t.message;case Bl:{if(!(Wl(e.constructor,t.constructor,n,r)||jl(e)&&jl(t)))return!1;const s=[...Object.keys(e),...Ml(e)],i=[...Object.keys(t),...Ml(t)];if(s.length!==i.length)return!1;for(let o=0;o<s.length;o++){const i=s[o],a=e[i];if(!Object.hasOwn(t,i))return!1;if(!Fl(a,t[i],i,e,t,n,r))return!1}return!0}default:return!1}}finally{n.delete(e),n.delete(t)}}var ql=Object.defineProperty,Zl=Object.getOwnPropertySymbols,Hl=Object.prototype.hasOwnProperty,Kl=Object.prototype.propertyIsEnumerable,Vl=(e,t,n)=>t in e?ql(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zl=(e,t)=>{for(var n in t||(t={}))Hl.call(t,n)&&Vl(e,n,t[n]);if(Zl)for(var n of Zl(t))Kl.call(t,n)&&Vl(e,n,t[n]);return e},Gl=(e,t,n)=>Vl(e,"symbol"!=typeof t?t+"":t,n);class Jl extends class{constructor(e,t,n,r){this.core=e,this.logger=t,this.name=n}}{constructor(e,t,n,s=na,i){var o;super(e,t,n,s),o=this,this.core=e,this.logger=t,this.name=n,Gl(this,"map",new Map),Gl(this,"version","0.3"),Gl(this,"cached",[]),Gl(this,"initialized",!1),Gl(this,"getKey"),Gl(this,"storagePrefix",na),Gl(this,"recentlyDeleted",[]),Gl(this,"recentlyDeletedLimit",200),Gl(this,"init",(0,r.Z)(function*(){o.initialized||(o.logger.trace("Initialized"),yield o.restore(),o.cached.forEach(e=>{o.getKey&&null!==e&&!Uo(e)?o.map.set(o.getKey(e),e):function(e){var t;return null==(t=e?.proposer)?void 0:t.publicKey}(e)?o.map.set(e.id,e):function(e){return e?.topic}(e)&&o.map.set(e.topic,e)}),o.cached=[],o.initialized=!0)})),Gl(this,"set",function(){var e=(0,r.Z)(function*(e,t){o.isInitialized(),o.map.has(e)?yield o.update(e,t):(o.logger.debug("Setting value"),o.logger.trace({type:"method",method:"set",key:e,value:t}),o.map.set(e,t),yield o.persist())});return function(t,n){return e.apply(this,arguments)}}()),Gl(this,"get",e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e))),Gl(this,"getAll",e=>(this.isInitialized(),e?this.values.filter(t=>Object.keys(e).every(n=>function(e,t){return function(e,t,n){return Fl(e,t,void 0,void 0,void 0,void 0,n)}(e,t,$l)}(t[n],e[n]))):this.values)),Gl(this,"update",function(){var e=(0,r.Z)(function*(e,t){o.isInitialized(),o.logger.debug("Updating value"),o.logger.trace({type:"method",method:"update",key:e,update:t});const n=zl(zl({},o.getData(e)),t);o.map.set(e,n),yield o.persist()});return function(t,n){return e.apply(this,arguments)}}()),Gl(this,"delete",function(){var e=(0,r.Z)(function*(e,t){o.isInitialized(),o.map.has(e)&&(o.logger.debug("Deleting value"),o.logger.trace({type:"method",method:"delete",key:e,reason:t}),o.map.delete(e),o.addToRecentlyDeleted(e),yield o.persist())});return function(t,n){return e.apply(this,arguments)}}()),this.logger=(0,p.Ep)(t,this.name),this.storagePrefix=s,this.getKey=i}get context(){return(0,p.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}setDataStore(e){var t=this;return(0,r.Z)(function*(){yield t.core.storage.setItem(t.storageKey,e)})()}getDataStore(){var e=this;return(0,r.Z)(function*(){return yield e.core.storage.getItem(e.storageKey)})()}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:t}=Oo("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}const{message:t}=Oo("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}return t}persist(){var e=this;return(0,r.Z)(function*(){yield e.setDataStore(e.values)})()}restore(){var e=this;return(0,r.Z)(function*(){try{const t=yield e.getDataStore();if(typeof t>"u"||!t.length)return;if(e.map.size){const{message:t}=Oo("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(t),new Error(t)}e.cached=t,e.logger.debug(`Successfully Restored value for ${e.name}`),e.logger.trace({type:"method",method:"restore",value:e.values})}catch(t){e.logger.debug(`Failed to Restore value for ${e.name}`),e.logger.error(t)}})()}isInitialized(){if(!this.initialized){const{message:e}=Oo("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Yl=Object.defineProperty,Xl=(e,t,n)=>((e,t,n)=>t in e?Yl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class Ql{constructor(e,t){var n=this;this.core=e,this.logger=t,Xl(this,"name","pairing"),Xl(this,"version","0.3"),Xl(this,"events",new l),Xl(this,"pairings"),Xl(this,"initialized",!1),Xl(this,"storagePrefix",na),Xl(this,"ignoredPayloadTypes",[1]),Xl(this,"registeredMethods",[]),Xl(this,"init",(0,r.Z)(function*(){n.initialized||(yield n.pairings.init(),yield n.cleanup(),n.registerRelayerEvents(),n.registerExpirerEvents(),n.initialized=!0,n.logger.trace("Initialized"))})),Xl(this,"register",({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]}),Xl(this,"create",function(){var e=(0,r.Z)(function*(e){n.isInitialized();const t=$i(),r=yield n.core.crypto.setSymKey(t),s=Be(I.FIVE_MINUTES),i={protocol:"irn"},o={topic:r,expiry:s,relay:i,active:!1,methods:e?.methods},a=uo({protocol:n.core.protocol,version:n.core.version,topic:r,symKey:t,relay:i,expiryTimestamp:s,methods:e?.methods});return n.events.emit("pairing_create",o),n.core.expirer.set(r,s),yield n.pairings.set(r,o),yield n.core.relayer.subscribe(r,{transportType:e?.transportType,internal:e?.internal}),{topic:r,uri:a}});return function(t){return e.apply(this,arguments)}}()),Xl(this,"pair",function(){var e=(0,r.Z)(function*(e){n.isInitialized();const t=n.core.eventClient.createEvent({properties:{topic:e?.uri,trace:["pairing_started"]}});n.isValidPair(e,t);const{topic:r,symKey:s,relay:i,expiryTimestamp:o,methods:a}=co(e.uri);let c;if(t.props.properties.topic=r,t.addTrace("pairing_uri_validation_success"),t.addTrace("pairing_uri_not_expired"),n.pairings.keys.includes(r)){if(c=n.pairings.get(r),t.addTrace("existing_pairing"),c.active)throw t.setError("active_pairing_already_exists"),new Error(`Pairing already exists: ${r}. Please try again with a new connection URI.`);t.addTrace("pairing_not_expired")}const l=o||Be(I.FIVE_MINUTES),d={topic:r,relay:i,expiry:l,active:!1,methods:a};n.core.expirer.set(r,l),yield n.pairings.set(r,d),t.addTrace("store_new_pairing"),e.activatePairing&&(yield n.activate({topic:r})),n.events.emit("pairing_create",d),t.addTrace("emit_inactive_pairing"),n.core.crypto.keychain.has(r)||(yield n.core.crypto.setSymKey(s,r)),t.addTrace("subscribing_pairing_topic");try{yield n.core.relayer.confirmOnlineStateOrThrow()}catch{t.setError("no_internet_connection")}try{yield n.core.relayer.subscribe(r,{relay:i})}catch(u){throw t.setError("subscribe_pairing_topic_failure"),u}return t.addTrace("subscribe_pairing_topic_success"),d});return function(t){return e.apply(this,arguments)}}()),Xl(this,"activate",function(){var e=(0,r.Z)(function*({topic:e}){n.isInitialized();const t=Be(I.FIVE_MINUTES);n.core.expirer.set(e,t),yield n.pairings.update(e,{active:!0,expiry:t})});return function(t){return e.apply(this,arguments)}}()),Xl(this,"ping",function(){var e=(0,r.Z)(function*(e){n.isInitialized(),yield n.isValidPing(e),n.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:t}=e;if(n.pairings.keys.includes(t)){const e=yield n.sendRequest(t,"wc_pairingPing",{}),{done:r,resolve:s,reject:i}=Ue();n.events.once(je("pairing_ping",e),({error:e})=>{e?i(e):s()}),yield r()}});return function(t){return e.apply(this,arguments)}}()),Xl(this,"updateExpiry",function(){var e=(0,r.Z)(function*({topic:e,expiry:t}){n.isInitialized(),yield n.pairings.update(e,{expiry:t})});return function(t){return e.apply(this,arguments)}}()),Xl(this,"updateMetadata",function(){var e=(0,r.Z)(function*({topic:e,metadata:t}){n.isInitialized(),yield n.pairings.update(e,{peerMetadata:t})});return function(t){return e.apply(this,arguments)}}()),Xl(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Xl(this,"disconnect",function(){var e=(0,r.Z)(function*(e){n.isInitialized(),yield n.isValidDisconnect(e);const{topic:t}=e;n.pairings.keys.includes(t)&&(yield n.sendRequest(t,"wc_pairingDelete",Po("USER_DISCONNECTED")),yield n.deletePairing(t))});return function(t){return e.apply(this,arguments)}}()),Xl(this,"formatUriFromPairing",e=>{this.isInitialized();const{topic:t,relay:n,expiry:r,methods:s}=e,i=this.core.crypto.keychain.get(t);return uo({protocol:this.core.protocol,version:this.core.version,topic:t,symKey:i,relay:n,expiryTimestamp:r,methods:s})}),Xl(this,"sendRequest",function(){var e=(0,r.Z)(function*(e,t,r){const s=(0,ea.formatJsonRpcRequest)(t,r),i=yield n.core.crypto.encode(e,s),o=fa[t].req;return n.core.history.set(e,s),n.core.relayer.publish(e,i,o),s.id});return function(t,n,r){return e.apply(this,arguments)}}()),Xl(this,"sendResult",function(){var e=(0,r.Z)(function*(e,t,r){const s=(0,ea.formatJsonRpcResult)(e,r),i=yield n.core.crypto.encode(t,s),o=(yield n.core.history.get(t,e)).request.method,a=fa[o].res;yield n.core.relayer.publish(t,i,a),yield n.core.history.resolve(s)});return function(t,n,r){return e.apply(this,arguments)}}()),Xl(this,"sendError",function(){var e=(0,r.Z)(function*(e,t,r){const s=(0,ea.formatJsonRpcError)(e,r),i=yield n.core.crypto.encode(t,s),o=(yield n.core.history.get(t,e)).request.method,a=fa[o]?fa[o].res:fa.unregistered_method.res;yield n.core.relayer.publish(t,i,a),yield n.core.history.resolve(s)});return function(t,n,r){return e.apply(this,arguments)}}()),Xl(this,"deletePairing",function(){var e=(0,r.Z)(function*(e,t){yield n.core.relayer.unsubscribe(e),yield Promise.all([n.pairings.delete(e,Po("USER_DISCONNECTED")),n.core.crypto.deleteSymKey(e),t?Promise.resolve():n.core.expirer.del(e)])});return function(t,n){return e.apply(this,arguments)}}()),Xl(this,"cleanup",(0,r.Z)(function*(){const e=n.pairings.getAll().filter(e=>$e(e.expiry));yield Promise.all(e.map(e=>n.deletePairing(e.topic)))})),Xl(this,"onRelayEventRequest",function(){var e=(0,r.Z)(function*(e){const{topic:t,payload:r}=e;switch(r.method){case"wc_pairingPing":return yield n.onPairingPingRequest(t,r);case"wc_pairingDelete":return yield n.onPairingDeleteRequest(t,r);default:return yield n.onUnknownRpcMethodRequest(t,r)}});return function(t){return e.apply(this,arguments)}}()),Xl(this,"onRelayEventResponse",function(){var e=(0,r.Z)(function*(e){const{topic:t,payload:r}=e,s=(yield n.core.history.get(t,r.id)).request.method;return"wc_pairingPing"===s?n.onPairingPingResponse(t,r):n.onUnknownRpcMethodResponse(s)});return function(t){return e.apply(this,arguments)}}()),Xl(this,"onPairingPingRequest",function(){var e=(0,r.Z)(function*(e,t){const{id:r}=t;try{n.isValidPing({topic:e}),yield n.sendResult(r,e,!0),n.events.emit("pairing_ping",{id:r,topic:e})}catch(s){yield n.sendError(r,e,s),n.logger.error(s)}});return function(t,n){return e.apply(this,arguments)}}()),Xl(this,"onPairingPingResponse",(e,t)=>{const{id:n}=t;setTimeout(()=>{(0,ea.isJsonRpcResult)(t)?this.events.emit(je("pairing_ping",n),{}):(0,ea.isJsonRpcError)(t)&&this.events.emit(je("pairing_ping",n),{error:t.error})},500)}),Xl(this,"onPairingDeleteRequest",function(){var e=(0,r.Z)(function*(e,t){const{id:r}=t;try{n.isValidDisconnect({topic:e}),yield n.deletePairing(e),n.events.emit("pairing_delete",{id:r,topic:e})}catch(s){yield n.sendError(r,e,s),n.logger.error(s)}});return function(t,n){return e.apply(this,arguments)}}()),Xl(this,"onUnknownRpcMethodRequest",function(){var e=(0,r.Z)(function*(e,t){const{id:r,method:s}=t;try{if(n.registeredMethods.includes(s))return;const t=Po("WC_METHOD_UNSUPPORTED",s);yield n.sendError(r,e,t),n.logger.error(t)}catch(i){yield n.sendError(r,e,i),n.logger.error(i)}});return function(t,n){return e.apply(this,arguments)}}()),Xl(this,"onUnknownRpcMethodResponse",e=>{this.registeredMethods.includes(e)||this.logger.error(Po("WC_METHOD_UNSUPPORTED",e))}),Xl(this,"isValidPair",(e,t)=>{var n;if(!Wo(e)){const{message:n}=Oo("MISSING_OR_INVALID",`pair() params: ${e}`);throw t.setError("malformed_pairing_uri"),new Error(n)}if(!function(e){function t(e){try{return typeof new URL(e)<"u"}catch{return!1}}try{if(Mo(e,!1))return!!t(e)||t(Ge(e))}catch{}return!1}(e.uri)){const{message:n}=Oo("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw t.setError("malformed_pairing_uri"),new Error(n)}const r=co(e?.uri);if(null==(n=r?.relay)||!n.protocol){const{message:e}=Oo("MISSING_OR_INVALID","pair() uri#relay-protocol");throw t.setError("malformed_pairing_uri"),new Error(e)}if(null==r||!r.symKey){const{message:e}=Oo("MISSING_OR_INVALID","pair() uri#symKey");throw t.setError("malformed_pairing_uri"),new Error(e)}if(null!=r&&r.expiryTimestamp&&(0,I.toMiliseconds)(r?.expiryTimestamp)<Date.now()){t.setError("pairing_expired");const{message:e}=Oo("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(e)}}),Xl(this,"isValidPing",function(){var e=(0,r.Z)(function*(e){if(!Wo(e)){const{message:t}=Oo("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;yield n.isValidPairingTopic(t)});return function(t){return e.apply(this,arguments)}}()),Xl(this,"isValidDisconnect",function(){var e=(0,r.Z)(function*(e){if(!Wo(e)){const{message:t}=Oo("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;yield n.isValidPairingTopic(t)});return function(t){return e.apply(this,arguments)}}()),Xl(this,"isValidPairingTopic",function(){var e=(0,r.Z)(function*(e){if(!Mo(e,!1)){const{message:t}=Oo("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!n.pairings.keys.includes(e)){const{message:t}=Oo("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if($e(n.pairings.get(e).expiry)){yield n.deletePairing(e);const{message:t}=Oo("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}});return function(t){return e.apply(this,arguments)}}()),this.core=e,this.logger=(0,p.Ep)(t,this.name),this.pairings=new Jl(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,p.Fd)(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Oo("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){var e=this;this.core.relayer.on("relayer_message",function(){var t=(0,r.Z)(function*(t){const{topic:n,message:r,transportType:s}=t;if(e.pairings.keys.includes(n)&&s!==da.link_mode&&!e.ignoredPayloadTypes.includes(e.core.crypto.getPayloadType(r)))try{const t=yield e.core.crypto.decode(n,r);(0,ea.isJsonRpcRequest)(t)?(e.core.history.set(n,t),yield e.onRelayEventRequest({topic:n,payload:t})):(0,ea.isJsonRpcResponse)(t)&&(yield e.core.history.resolve(t),yield e.onRelayEventResponse({topic:n,payload:t}),e.core.history.delete(n,t.id)),yield e.core.relayer.messages.ack(n,r)}catch(i){e.logger.error(i)}});return function(e){return t.apply(this,arguments)}}())}registerExpirerEvents(){var e=this;this.core.expirer.on(ga,function(){var t=(0,r.Z)(function*(t){const{topic:n}=Le(t.target);n&&e.pairings.keys.includes(n)&&(yield e.deletePairing(n,!0),e.events.emit("pairing_expire",{topic:n}))});return function(e){return t.apply(this,arguments)}}())}}var ed=Object.defineProperty,td=(e,t,n)=>((e,t,n)=>t in e?ed(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class nd extends b{constructor(e,t){var n;super(e,t),n=this,this.core=e,this.logger=t,td(this,"records",new Map),td(this,"events",new l.EventEmitter),td(this,"name","history"),td(this,"version","0.3"),td(this,"cached",[]),td(this,"initialized",!1),td(this,"storagePrefix",na),td(this,"init",(0,r.Z)(function*(){n.initialized||(n.logger.trace("Initialized"),yield n.restore(),n.cached.forEach(e=>n.records.set(e.id,e)),n.cached=[],n.registerEventListeners(),n.initialized=!0)})),td(this,"set",(e,t,n)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:n}),this.records.has(t.id))return;const r={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:n,expiry:Be(I.THIRTY_DAYS)};this.records.set(r.id,r),this.persist(),this.events.emit("history_created",r)}),td(this,"resolve",function(){var e=(0,r.Z)(function*(e){if(n.isInitialized(),n.logger.debug("Updating JSON-RPC response history record"),n.logger.trace({type:"method",method:"update",response:e}),!n.records.has(e.id))return;const t=yield n.getRecord(e.id);typeof t.response>"u"&&(t.response=(0,ea.isJsonRpcError)(e)?{error:e.error}:{result:e.result},n.records.set(t.id,t),n.persist(),n.events.emit("history_updated",t))});return function(t){return e.apply(this,arguments)}}()),td(this,"get",function(){var e=(0,r.Z)(function*(e,t){return n.isInitialized(),n.logger.debug("Getting record"),n.logger.trace({type:"method",method:"get",topic:e,id:t}),yield n.getRecord(t)});return function(t,n){return e.apply(this,arguments)}}()),td(this,"delete",(e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach(n=>{if(n.topic===e){if(typeof t<"u"&&n.id!==t)return;this.records.delete(n.id),this.events.emit("history_deleted",n)}}),this.persist()}),td(this,"exists",function(){var e=(0,r.Z)(function*(e,t){return n.isInitialized(),!!n.records.has(t)&&(yield n.getRecord(t)).topic===e});return function(t,n){return e.apply(this,arguments)}}()),td(this,"on",(e,t)=>{this.events.on(e,t)}),td(this,"once",(e,t)=>{this.events.once(e,t)}),td(this,"off",(e,t)=>{this.events.off(e,t)}),td(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.logger=(0,p.Ep)(t,this.name)}get context(){return(0,p.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const n={topic:t.topic,request:(0,ea.formatJsonRpcRequest)(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(n)}),e}setJsonRpcRecords(e){var t=this;return(0,r.Z)(function*(){yield t.core.storage.setItem(t.storageKey,e)})()}getJsonRpcRecords(){var e=this;return(0,r.Z)(function*(){return yield e.core.storage.getItem(e.storageKey)})()}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:t}=Oo("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}persist(){var e=this;return(0,r.Z)(function*(){yield e.setJsonRpcRecords(e.values),e.events.emit("history_sync")})()}restore(){var e=this;return(0,r.Z)(function*(){try{const t=yield e.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(e.records.size){const{message:t}=Oo("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(t),new Error(t)}e.cached=t,e.logger.debug(`Successfully Restored records for ${e.name}`),e.logger.trace({type:"method",method:"restore",records:e.values})}catch(t){e.logger.debug(`Failed to Restore records for ${e.name}`),e.logger.error(t)}})()}registerEventListeners(){this.events.on("history_created",e=>{const t="history_created";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on("history_updated",e=>{const t="history_updated";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on("history_deleted",e=>{const t="history_deleted";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(d.Lx.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{(0,I.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit("history_deleted",t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Oo("NOT_INITIALIZED",this.name);throw new Error(e)}}}var rd=Object.defineProperty,sd=(e,t,n)=>((e,t,n)=>t in e?rd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class id extends C{constructor(e,t){var n;super(e,t),n=this,this.core=e,this.logger=t,sd(this,"expirations",new Map),sd(this,"events",new l.EventEmitter),sd(this,"name","expirer"),sd(this,"version","0.3"),sd(this,"cached",[]),sd(this,"initialized",!1),sd(this,"storagePrefix",na),sd(this,"init",(0,r.Z)(function*(){n.initialized||(n.logger.trace("Initialized"),yield n.restore(),n.cached.forEach(e=>n.expirations.set(e.target,e)),n.cached=[],n.registerEventListeners(),n.initialized=!0)})),sd(this,"has",e=>{try{const t=this.formatTarget(e);return typeof this.getExpiration(t)<"u"}catch{return!1}}),sd(this,"set",(e,t)=>{this.isInitialized();const n=this.formatTarget(e),r={target:n,expiry:t};this.expirations.set(n,r),this.checkExpiry(n,r),this.events.emit("expirer_created",{target:n,expiration:r})}),sd(this,"get",e=>{this.isInitialized();const t=this.formatTarget(e);return this.getExpiration(t)}),sd(this,"del",e=>{if(this.isInitialized(),this.has(e)){const t=this.formatTarget(e),n=this.getExpiration(t);this.expirations.delete(t),this.events.emit("expirer_deleted",{target:t,expiration:n})}}),sd(this,"on",(e,t)=>{this.events.on(e,t)}),sd(this,"once",(e,t)=>{this.events.once(e,t)}),sd(this,"off",(e,t)=>{this.events.off(e,t)}),sd(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.logger=(0,p.Ep)(t,this.name)}get context(){return(0,p.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return function(e){return De("topic",e)}(e);if("number"==typeof e)return function(e){return De("id",e)}(e);const{message:t}=Oo("UNKNOWN_TYPE","Target type: "+typeof e);throw new Error(t)}setExpirations(e){var t=this;return(0,r.Z)(function*(){yield t.core.storage.setItem(t.storageKey,e)})()}getExpirations(){var e=this;return(0,r.Z)(function*(){return yield e.core.storage.getItem(e.storageKey)})()}persist(){var e=this;return(0,r.Z)(function*(){yield e.setExpirations(e.values),e.events.emit("expirer_sync")})()}restore(){var e=this;return(0,r.Z)(function*(){try{const t=yield e.getExpirations();if(typeof t>"u"||!t.length)return;if(e.expirations.size){const{message:t}=Oo("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(t),new Error(t)}e.cached=t,e.logger.debug(`Successfully Restored expirations for ${e.name}`),e.logger.trace({type:"method",method:"restore",expirations:e.values})}catch(t){e.logger.debug(`Failed to Restore expirations for ${e.name}`),e.logger.error(t)}})()}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:t}=Oo("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(t),new Error(t)}return t}checkExpiry(e,t){const{expiry:n}=t;(0,I.toMiliseconds)(n)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(ga,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(d.Lx.pulse,()=>this.checkExpirations()),this.events.on("expirer_created",e=>{const t="expirer_created";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(ga,e=>{const t=ga;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on("expirer_deleted",e=>{const t="expirer_deleted";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Oo("NOT_INITIALIZED",this.name);throw new Error(e)}}}var od=Object.defineProperty,ad=(e,t,n)=>((e,t,n)=>t in e?od(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class cd extends class{constructor(e,t,n){this.core=e,this.logger=t,this.store=n}}{constructor(e,t,n){var s;super(e,t,n),s=this,this.core=e,this.logger=t,this.store=n,ad(this,"name","verify-api"),ad(this,"abortController"),ad(this,"isDevEnv"),ad(this,"verifyUrlV3",ba),ad(this,"storagePrefix",na),ad(this,"version",2),ad(this,"publicKey"),ad(this,"fetchPromise"),ad(this,"init",(0,r.Z)(function*(){var e;s.isDevEnv||(s.publicKey=yield s.store.getItem(s.storeKey),s.publicKey&&(0,I.toMiliseconds)(null==(e=s.publicKey)?void 0:e.expiresAt)<Date.now()&&(s.logger.debug("verify v2 public key expired"),yield s.removePublicKey()))})),ad(this,"register",function(){var e=(0,r.Z)(function*(e){if(!_e()||s.isDevEnv)return;const t=window.location.origin,{id:n,decryptedId:r}=e,i=`${s.verifyUrlV3}/attestation?projectId=${s.core.projectId}&origin=${t}&id=${n}&decryptedId=${r}`;try{const e=(0,R.getDocument)(),t=s.startAbortTimer(5*I.ONE_SECOND),r=yield new Promise((r,o)=>{const a=()=>{window.removeEventListener("message",l),e.body.removeChild(c),o("attestation aborted")};s.abortController.signal.addEventListener("abort",a);const c=e.createElement("iframe");c.src=i,c.style.display="none",c.addEventListener("error",a,{signal:s.abortController.signal});const l=i=>{if(i.data&&"string"==typeof i.data)try{const o=JSON.parse(i.data);if("verify_attestation"===o.type){if((0,S.xp)(o.attestation).payload.id!==n)return;clearInterval(t),e.body.removeChild(c),s.abortController.signal.removeEventListener("abort",a),window.removeEventListener("message",l),r(null===o.attestation?"":o.attestation)}}catch(o){s.logger.warn(o)}};e.body.appendChild(c),window.addEventListener("message",l,{signal:s.abortController.signal})});return s.logger.debug(r,"jwt attestation"),r}catch(o){s.logger.warn(o)}return""});return function(t){return e.apply(this,arguments)}}()),ad(this,"resolve",function(){var e=(0,r.Z)(function*(e){if(s.isDevEnv)return"";const{attestationId:t,hash:n,encryptedId:r}=e;if(""===t)return void s.logger.debug("resolve: attestationId is empty, skipping");if(t){if((0,S.xp)(t).payload.id!==r)return;const e=yield s.isValidJwtAttestation(t);if(e)return e.isVerified?e:void s.logger.warn("resolve: jwt attestation: origin url not verified")}if(!n)return;const i=s.getVerifyUrl(e?.verifyUrl);return s.fetchAttestation(n,i)});return function(t){return e.apply(this,arguments)}}()),ad(this,"fetchAttestation",function(){var e=(0,r.Z)(function*(e,t){s.logger.debug(`resolving attestation: ${e} from url: ${t}`);const n=s.startAbortTimer(5*I.ONE_SECOND),r=yield fetch(`${t}/attestation/${e}?v2Supported=true`,{signal:s.abortController.signal});return clearTimeout(n),200===r.status?yield r.json():void 0});return function(t,n){return e.apply(this,arguments)}}()),ad(this,"getVerifyUrl",e=>{let t=e||ya;return wa.includes(t)||(this.logger.info(`verify url: ${t}, not included in trusted list, assigning default: ${ya}`),t=ya),t}),ad(this,"fetchPublicKey",(0,r.Z)(function*(){try{s.logger.debug(`fetching public key from: ${s.verifyUrlV3}`);const e=s.startAbortTimer(I.FIVE_SECONDS),t=yield fetch(`${s.verifyUrlV3}/public-key`,{signal:s.abortController.signal});return clearTimeout(e),yield t.json()}catch(e){s.logger.warn(e)}})),ad(this,"persistPublicKey",function(){var e=(0,r.Z)(function*(e){s.logger.debug(e,"persisting public key to local storage"),yield s.store.setItem(s.storeKey,e),s.publicKey=e});return function(t){return e.apply(this,arguments)}}()),ad(this,"removePublicKey",(0,r.Z)(function*(){s.logger.debug("removing verify v2 public key from storage"),yield s.store.removeItem(s.storeKey),s.publicKey=void 0})),ad(this,"isValidJwtAttestation",function(){var e=(0,r.Z)(function*(e){const t=yield s.getPublicKey();try{if(t)return s.validateAttestation(e,t)}catch(r){s.logger.error(r),s.logger.warn("error validating attestation")}const n=yield s.fetchAndPersistPublicKey();try{if(n)return s.validateAttestation(e,n)}catch(r){s.logger.error(r),s.logger.warn("error validating attestation")}});return function(t){return e.apply(this,arguments)}}()),ad(this,"getPublicKey",(0,r.Z)(function*(){return s.publicKey?s.publicKey:yield s.fetchAndPersistPublicKey()})),ad(this,"fetchAndPersistPublicKey",(0,r.Z)(function*(){if(s.fetchPromise)return yield s.fetchPromise,s.publicKey;s.fetchPromise=new Promise(function(){var e=(0,r.Z)(function*(e){const t=yield s.fetchPublicKey();t&&(yield s.persistPublicKey(t),e(t))});return function(t){return e.apply(this,arguments)}}());const e=yield s.fetchPromise;return s.fetchPromise=void 0,e})),ad(this,"validateAttestation",(e,t)=>{const n=function(e,t){const[n,r,s]=e.split("."),i=Buffer.from(Hi(s),"base64");if(64!==i.length)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=Xr(`${n}.${r}`),l=function(e){const t=Buffer.from(e.x,"base64"),n=Buffer.from(e.y,"base64");return(0,le.zo)([new Uint8Array([4]),t,n])}(t);if(!Ui.verify((0,le.zo)([o,a]),c,l))throw new Error("Invalid signature");return(0,S.xp)(e).payload}(e,t.publicKey),r={hasExpired:(0,I.toMiliseconds)(n.exp)<Date.now(),payload:n};if(r.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:r.payload.origin,isScam:r.payload.isScam,isVerified:r.payload.isVerified}}),this.logger=(0,p.Ep)(t,this.name),this.abortController=new AbortController,this.isDevEnv=ze(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return(0,p.Fd)(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,I.toMiliseconds)(e))}}var ld=Object.defineProperty,dd=(e,t,n)=>((e,t,n)=>t in e?ld(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class ud extends class{constructor(e,t){this.projectId=e,this.logger=t}}{constructor(e,t){var n;super(e,t),n=this,this.projectId=e,this.logger=t,dd(this,"context","echo"),dd(this,"registerDeviceToken",function(){var e=(0,r.Z)(function*(e){const{clientId:t,token:r,notificationType:s,enableEncrypted:i=!1}=e,o=`https://echo.walletconnect.com/${n.projectId}/clients`;yield fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t,type:s,token:r,always_raw:i})})});return function(t){return e.apply(this,arguments)}}()),this.logger=(0,p.Ep)(t,this.context)}}var pd=Object.defineProperty,hd=Object.getOwnPropertySymbols,fd=Object.prototype.hasOwnProperty,gd=Object.prototype.propertyIsEnumerable,md=(e,t,n)=>t in e?pd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yd=(e,t)=>{for(var n in t||(t={}))fd.call(t,n)&&md(e,n,t[n]);if(hd)for(var n of hd(t))gd.call(t,n)&&md(e,n,t[n]);return e},bd=(e,t,n)=>md(e,"symbol"!=typeof t?t+"":t,n);class wd extends class{constructor(e,t,n){this.core=e,this.logger=t,this.telemetryEnabled=n}}{constructor(e,t,n=!0){var s;super(e,t,n),s=this,this.core=e,this.logger=t,bd(this,"context","event-client"),bd(this,"storagePrefix",na),bd(this,"storageVersion",.1),bd(this,"events",new Map),bd(this,"shouldPersist",!1),bd(this,"init",(0,r.Z)(function*(){if(!ze())try{const e={eventId:Ve(),timestamp:Date.now(),domain:s.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:yield s.core.crypto.getClientId(),user_agent:Oe(s.core.relayer.protocol,s.core.relayer.version,la)}}};yield s.sendEvent([e])}catch(e){s.logger.warn(e)}})),bd(this,"createEvent",e=>{const{event:t="ERROR",type:n="",properties:{topic:r,trace:s}}=e,i=Ve(),o=this.core.projectId||"",a=Date.now(),c=yd({eventId:i,timestamp:a,props:{event:t,type:n,properties:{topic:r,trace:s}},bundleId:o,domain:this.getAppDomain()},this.setMethods(i));return this.telemetryEnabled&&(this.events.set(i,c),this.shouldPersist=!0),c}),bd(this,"getEvent",e=>{const{eventId:t,topic:n}=e;if(t)return this.events.get(t);const r=Array.from(this.events.values()).find(e=>e.props.properties.topic===n);return r?yd(yd({},r),this.setMethods(r.eventId)):void 0}),bd(this,"deleteEvent",e=>{const{eventId:t}=e;this.events.delete(t),this.shouldPersist=!0}),bd(this,"setEventListeners",()=>{this.core.heartbeat.on(d.Lx.pulse,(0,r.Z)(function*(){s.shouldPersist&&(yield s.persist()),s.events.forEach(e=>{(0,I.fromMiliseconds)(Date.now())-(0,I.fromMiliseconds)(e.timestamp)>86400&&(s.events.delete(e.eventId),s.shouldPersist=!0)})}))}),bd(this,"setMethods",e=>({addTrace:t=>this.addTrace(e,t),setError:t=>this.setError(e,t)})),bd(this,"addTrace",(e,t)=>{const n=this.events.get(e);n&&(n.props.properties.trace.push(t),this.events.set(e,n),this.shouldPersist=!0)}),bd(this,"setError",(e,t)=>{const n=this.events.get(e);n&&(n.props.type=t,n.timestamp=Date.now(),this.events.set(e,n),this.shouldPersist=!0)}),bd(this,"persist",(0,r.Z)(function*(){yield s.core.storage.setItem(s.storageKey,Array.from(s.events.values())),s.shouldPersist=!1})),bd(this,"restore",(0,r.Z)(function*(){try{const e=(yield s.core.storage.getItem(s.storageKey))||[];if(!e.length)return;e.forEach(e=>{s.events.set(e.eventId,yd(yd({},e),s.setMethods(e.eventId)))})}catch(e){s.logger.warn(e)}})),bd(this,"submit",(0,r.Z)(function*(){if(!s.telemetryEnabled||0===s.events.size)return;const e=[];for(const[n,r]of s.events)r.props.type&&e.push(r);if(0!==e.length)try{if((yield s.sendEvent(e)).ok)for(const t of e)s.events.delete(t.eventId),s.shouldPersist=!0}catch(t){s.logger.warn(t)}})),bd(this,"sendEvent",function(){var e=(0,r.Z)(function*(e){const t=s.getAppDomain()?"":"&sp=desktop";return yield fetch(`https://pulse.walletconnect.org/batch?projectId=${s.core.projectId}&st=events_sdk&sv=js-${la}${t}`,{method:"POST",body:JSON.stringify(e)})});return function(t){return e.apply(this,arguments)}}()),bd(this,"getAppDomain",()=>Re().url),this.logger=(0,p.Ep)(t,this.context),this.telemetryEnabled=n,n?this.restore().then((0,r.Z)(function*(){yield s.submit(),s.setEventListeners()})):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var vd=Object.defineProperty,Ed=Object.getOwnPropertySymbols,Cd=Object.prototype.hasOwnProperty,Ad=Object.prototype.propertyIsEnumerable,Nd=(e,t,n)=>t in e?vd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Id=(e,t)=>{for(var n in t||(t={}))Cd.call(t,n)&&Nd(e,n,t[n]);if(Ed)for(var n of Ed(t))Ad.call(t,n)&&Nd(e,n,t[n]);return e},_d=(e,t,n)=>Nd(e,"symbol"!=typeof t?t+"":t,n);class Sd extends m{constructor(e){var t,n;super(e),t=this,_d(this,"protocol","wc"),_d(this,"version",2),_d(this,"name","core"),_d(this,"relayUrl"),_d(this,"projectId"),_d(this,"customStoragePrefix"),_d(this,"events",new l.EventEmitter),_d(this,"logger"),_d(this,"heartbeat"),_d(this,"relayer"),_d(this,"crypto"),_d(this,"storage"),_d(this,"history"),_d(this,"expirer"),_d(this,"pairing"),_d(this,"verify"),_d(this,"echoClient"),_d(this,"linkModeSupportedApps"),_d(this,"eventClient"),_d(this,"initialized",!1),_d(this,"logChunkController"),_d(this,"on",(e,t)=>this.events.on(e,t)),_d(this,"once",(e,t)=>this.events.once(e,t)),_d(this,"off",(e,t)=>this.events.off(e,t)),_d(this,"removeListener",(e,t)=>this.events.removeListener(e,t)),_d(this,"dispatchEnvelope",({topic:e,message:t,sessionExists:n})=>{if(!e||!t)return;const r={topic:e,message:t,publishedAt:Date.now(),transportType:da.link_mode};this.relayer.onLinkMessageEvent(r,{sessionExists:n})});const s=this.getGlobalCore(e?.customStoragePrefix);if(s)try{return this.customStoragePrefix=s.customStoragePrefix,this.logger=s.logger,this.heartbeat=s.heartbeat,this.crypto=s.crypto,this.history=s.history,this.expirer=s.expirer,this.storage=s.storage,this.relayer=s.relayer,this.pairing=s.pairing,this.verify=s.verify,this.echoClient=s.echoClient,this.linkModeSupportedApps=s.linkModeSupportedApps,this.eventClient=s.eventClient,this.initialized=s.initialized,this.logChunkController=s.logChunkController,s}catch(c){console.warn("Failed to copy global core",c)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||aa,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=(0,p.jI)({level:"string"==typeof e?.logger&&e.logger?e.logger:"error",name:"core"}),{logger:o,chunkLoggerController:a}=(0,p.Rt)({opts:i,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=a,null!=(n=this.logChunkController)&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=(0,r.Z)(function*(){var e,n;null!=(e=t.logChunkController)&&e.downloadLogsBlobInBrowser&&(null==(n=t.logChunkController)||n.downloadLogsBlobInBrowser({clientId:yield t.crypto.getClientId()}))})),this.logger=(0,p.Ep)(o,this.name),this.heartbeat=new d.C$,this.crypto=new Kc(this,this.logger,e?.keychain),this.history=new nd(this,this.logger),this.expirer=new id(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new u.Z(Id(Id({},ra),e?.storageOptions)),this.relayer=new Ul({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Ql(this,this.logger),this.verify=new cd(this,this.logger,this.storage),this.echoClient=new ud(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new wd(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static init(e){return(0,r.Z)(function*(){const t=new Sd(e);yield t.initialize();const n=yield t.crypto.getClientId();return yield t.storage.setItem("WALLETCONNECT_CLIENT_ID",n),t})()}get context(){return(0,p.Fd)(this.logger)}start(){var e=this;return(0,r.Z)(function*(){e.initialized||(yield e.initialize())})()}getLogsBlob(){var e=this;return(0,r.Z)(function*(){var t;return null==(t=e.logChunkController)?void 0:t.logsToBlob({clientId:yield e.crypto.getClientId()})})()}addLinkModeSupportedApp(e){var t=this;return(0,r.Z)(function*(){t.linkModeSupportedApps.includes(e)||(t.linkModeSupportedApps.push(e),yield t.storage.setItem(ua,t.linkModeSupportedApps))})()}initialize(){var e=this;return(0,r.Z)(function*(){e.logger.trace("Initialized");try{yield e.crypto.init(),yield e.history.init(),yield e.expirer.init(),yield e.relayer.init(),yield e.heartbeat.init(),yield e.pairing.init(),e.linkModeSupportedApps=(yield e.storage.getItem(ua))||[],e.initialized=!0,e.logger.info("Core Initialization Success")}catch(t){throw e.logger.warn(t,`Core Initialization Failure at epoch ${Date.now()}`),e.logger.error(t.message),t}})()}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const t=`_walletConnectCore_${e}`,n=`${t}_count`;return globalThis[n]=(globalThis[n]||0)+1,globalThis[n]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[n]} times.`),globalThis[t]}catch(t){return void console.warn("Failed to get global WalletConnect core",t)}}setGlobalCore(e){var t;try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${(null==(t=e.opts)?void 0:t.customStoragePrefix)||""}`;globalThis[n]=e}catch(n){console.warn("Failed to set global WalletConnect core",n)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&"true"===process.env.DISABLE_GLOBAL_CORE}catch{return!0}}}const Td=Sd,Rd="wc@2:client:",Od="WALLETCONNECT_DEEPLINK_CHOICE",Pd="Proposal expired",kd=I.SEVEN_DAYS,xd={wc_sessionPropose:{req:{ttl:I.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:I.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:I.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:I.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:I.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:I.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:I.ONE_DAY,prompt:!1,tag:1104},res:{ttl:I.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:I.ONE_DAY,prompt:!1,tag:1106},res:{ttl:I.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:I.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:I.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:I.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:I.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:I.ONE_DAY,prompt:!1,tag:1112},res:{ttl:I.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:I.ONE_DAY,prompt:!1,tag:1114},res:{ttl:I.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:I.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:I.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:I.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:I.FIVE_MINUTES,prompt:!1,tag:1119}}},Ud={min:I.FIVE_MINUTES,max:I.SEVEN_DAYS},Md={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},Dd=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],Ld="wc@1.5:auth:",Bd=`${Ld}:PUB_KEY`;var $d=Object.defineProperty,jd=Object.defineProperties,Fd=Object.getOwnPropertyDescriptors,Wd=Object.getOwnPropertySymbols,qd=Object.prototype.hasOwnProperty,Zd=Object.prototype.propertyIsEnumerable,Hd=(e,t,n)=>t in e?$d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Kd=(e,t)=>{for(var n in t||(t={}))qd.call(t,n)&&Hd(e,n,t[n]);if(Wd)for(var n of Wd(t))Zd.call(t,n)&&Hd(e,n,t[n]);return e},Vd=(e,t)=>jd(e,Fd(t)),zd=(e,t,n)=>Hd(e,"symbol"!=typeof t?t+"":t,n);class Gd extends class{constructor(e){this.client=e}}{constructor(e){var t;super(e),t=this,zd(this,"name","engine"),zd(this,"events",new l),zd(this,"initialized",!1),zd(this,"requestQueue",{state:"IDLE",queue:[]}),zd(this,"sessionRequestQueue",{state:"IDLE",queue:[]}),zd(this,"emittedSessionRequests",new Je({limit:500})),zd(this,"requestQueueDelay",I.ONE_SECOND),zd(this,"expectedPairingMethodMap",new Map),zd(this,"recentlyDeletedMap",new Map),zd(this,"recentlyDeletedLimit",200),zd(this,"relayMessageCache",[]),zd(this,"pendingSessions",new Map),zd(this,"init",(0,r.Z)(function*(){t.initialized||(yield t.cleanup(),t.registerRelayerEvents(),t.registerExpirerEvents(),t.registerPairingEvents(),yield t.registerLinkModeListeners(),t.client.core.pairing.register({methods:Object.keys(xd)}),t.initialized=!0,setTimeout((0,r.Z)(function*(){yield t.processPendingMessageEvents(),t.sessionRequestQueue.queue=t.getPendingSessionRequests(),t.processSessionRequestQueue()}),(0,I.toMiliseconds)(t.requestQueueDelay)))})),zd(this,"connect",function(){var e=(0,r.Z)(function*(e){var n;t.isInitialized(),yield t.confirmOnlineStateOrThrow();const r=Vd(Kd({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});yield t.isValidConnect(r),r.optionalNamespaces=function(e,t){var n,r,s,i,o,a;const c=_o(e),l=_o(t),d={},u=Object.keys(c).concat(Object.keys(l));for(const p of u)d[p]={chains:Fe(null==(n=c[p])?void 0:n.chains,null==(r=l[p])?void 0:r.chains),methods:Fe(null==(s=c[p])?void 0:s.methods,null==(i=l[p])?void 0:i.methods),events:Fe(null==(o=c[p])?void 0:o.events,null==(a=l[p])?void 0:a.events)};return d}(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l,authentication:d,walletPay:u}=r,p=(null==(n=d?.[0])?void 0:n.ttl)||xd.wc_sessionPropose.req.ttl||I.FIVE_MINUTES;t.validateRequestExpiry(p);let h,f=s,g=!1;try{if(f){const e=t.client.core.pairing.pairings.get(f);t.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),g=e.active}}catch(N){throw t.client.logger.error(`connect() -> pairing.get(${f}) failed`),N}if(!f||!g){const{topic:e,uri:n}=yield t.client.core.pairing.create({internal:{skipSubscribe:!0}});f=e,h=n}if(!f){const{message:e}=Oo("NO_MATCHING_KEY",`connect() pairing topic: ${f}`);throw new Error(e)}const m=yield t.client.core.crypto.generateKeyPair(),y=Be(p),b=Kd(Vd(Kd(Kd({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:"irn"}],proposer:{publicKey:m,metadata:t.client.metadata},expiryTimestamp:y,pairingTopic:f},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:(0,ea.payloadId)()}),(d||u)&&{requests:{authentication:d?.map(e=>{const{domain:t,chains:n,nonce:r,uri:s,exp:i,nbf:o,type:a,statement:c,requestId:l,resources:d,signatureTypes:u}=e;return{domain:t,chains:n,nonce:r,type:a??"caip122",aud:s,version:"1",iat:(new Date).toISOString(),exp:i,nbf:o,statement:c,requestId:l,resources:d,signatureTypes:u}}),walletPay:u}}),w=je("session_connect",b.id),{reject:v,resolve:E,done:C}=Ue(p,Pd),A=({id:e})=>{e===b.id&&(t.client.events.off("proposal_expire",A),t.pendingSessions.delete(b.id),t.events.emit(w,{error:{message:Pd,code:0}}))};return t.client.events.on("proposal_expire",A),t.events.once(w,({error:e,session:n})=>{t.client.events.off("proposal_expire",A),e?v(e):n&&E(n)}),yield t.setProposal(b.id,b),yield t.sendProposeSession({proposal:b,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:b.id}}}).catch(e=>{throw t.deleteProposal(b.id),e}),{uri:h,approval:C}});return function(t){return e.apply(this,arguments)}}()),zd(this,"pair",function(){var e=(0,r.Z)(function*(e){t.isInitialized(),yield t.confirmOnlineStateOrThrow();try{return yield t.client.core.pairing.pair(e)}catch(n){throw t.client.logger.error("pair() failed"),n}});return function(t){return e.apply(this,arguments)}}()),zd(this,"approve",function(){var e=(0,r.Z)(function*(e){var n,r,s;const i=t.client.core.eventClient.createEvent({properties:{topic:null==(n=e?.id)?void 0:n.toString(),trace:["session_approve_started"]}});try{t.isInitialized(),yield t.confirmOnlineStateOrThrow()}catch(I){throw i.setError("no_internet_connection"),I}try{yield t.isValidProposalId(e?.id)}catch(I){throw t.client.logger.error(`approve() -> proposal.get(${e?.id}) failed`),i.setError("proposal_not_found"),I}try{yield t.isValidApprove(e)}catch(I){throw t.client.logger.error("approve() -> isValidApprove() failed"),i.setError("session_approve_namespace_validation_failure"),I}const{id:o,relayProtocol:a,namespaces:c,sessionProperties:l,scopedProperties:d,sessionConfig:u,proposalRequestsResponses:p}=e,h=t.client.proposal.get(o);t.client.core.eventClient.deleteEvent({eventId:i.eventId});const{pairingTopic:f,proposer:g,requiredNamespaces:m,optionalNamespaces:y}=h;let b=null==(r=t.client.core.eventClient)?void 0:r.getEvent({topic:f});b||(b=null==(s=t.client.core.eventClient)?void 0:s.createEvent({type:"session_approve_started",properties:{topic:f,trace:["session_approve_started","session_namespaces_validation_success"]}}));const w=yield t.client.core.crypto.generateKeyPair(),v=g.publicKey,E=yield t.client.core.crypto.generateSharedKey(w,v),C=Vd(Kd(Kd(Kd({relay:{protocol:a??"irn"},namespaces:c,controller:{publicKey:w,metadata:t.client.metadata},expiry:Be(kd)},l&&{sessionProperties:l}),d&&{scopedProperties:d}),u&&{sessionConfig:u}),{proposalRequestsResponses:p}),A=da.relay;b.addTrace("subscribing_session_topic");try{yield t.client.core.relayer.subscribe(E,{transportType:A,internal:{skipSubscribe:!0}})}catch(I){throw b.setError("subscribe_session_topic_failure"),I}b.addTrace("subscribe_session_topic_success");const N=Vd(Kd({},C),{topic:E,requiredNamespaces:m,optionalNamespaces:y,pairingTopic:f,acknowledged:!1,self:C.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:w,transportType:da.relay,authentication:p?.authentication,walletPayResult:p?.walletPay});yield t.client.session.set(E,N),b.addTrace("store_session");try{yield t.sendApproveSession({sessionTopic:E,proposal:h,pairingProposalResponse:{relay:{protocol:a??"irn"},responderPublicKey:w},sessionSettleRequest:C,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:Kd({correlationId:o},t.getTVFApproveParams(N))}}),b.addTrace("session_approve_publish_success")}catch(I){throw t.client.logger.error(I),t.client.session.delete(E,Po("USER_DISCONNECTED")),yield t.client.core.relayer.unsubscribe(E),I}return t.client.core.eventClient.deleteEvent({eventId:b.eventId}),yield t.client.core.pairing.updateMetadata({topic:f,metadata:g.metadata}),yield t.deleteProposal(o),yield t.client.core.pairing.activate({topic:f}),yield t.setExpiry(E,Be(kd)),{topic:E,acknowledged:()=>Promise.resolve(t.client.session.get(E))}});return function(t){return e.apply(this,arguments)}}()),zd(this,"reject",function(){var e=(0,r.Z)(function*(e){t.isInitialized(),yield t.confirmOnlineStateOrThrow();try{yield t.isValidReject(e)}catch(i){throw t.client.logger.error("reject() -> isValidReject() failed"),i}const{id:n,reason:r}=e;let s;try{s=t.client.proposal.get(n).pairingTopic}catch(i){throw t.client.logger.error(`reject() -> proposal.get(${n}) failed`),i}s&&(yield t.sendError({id:n,topic:s,error:r,rpcOpts:xd.wc_sessionPropose.reject})),yield t.deleteProposal(n)});return function(t){return e.apply(this,arguments)}}()),zd(this,"update",function(){var e=(0,r.Z)(function*(e){t.isInitialized(),yield t.confirmOnlineStateOrThrow();try{yield t.isValidUpdate(e)}catch(d){throw t.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:n,namespaces:r}=e,{done:s,resolve:i,reject:o}=Ue(I.FIVE_MINUTES,"Session update request expired without receiving any acknowledgement"),a=(0,ea.payloadId)(),c=(0,ea.getBigIntRpcId)().toString(),l=t.client.session.get(n).namespaces;return t.events.once(je("session_update",a),({error:e})=>{e?o(e):i()}),yield t.client.session.update(n,{namespaces:r}),yield t.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:r},throwOnFailedPublish:!0,clientRpcId:a,relayRpcId:c}).catch(e=>{t.client.logger.error(e),t.client.session.update(n,{namespaces:l}),o(e)}),{acknowledged:s}});return function(t){return e.apply(this,arguments)}}()),zd(this,"extend",function(){var e=(0,r.Z)(function*(e){t.isInitialized(),yield t.confirmOnlineStateOrThrow();try{yield t.isValidExtend(e)}catch(a){throw t.client.logger.error("extend() -> isValidExtend() failed"),a}const{topic:n}=e,r=(0,ea.payloadId)(),{done:s,resolve:i,reject:o}=Ue(I.FIVE_MINUTES,"Session extend request expired without receiving any acknowledgement");return t.events.once(je("session_extend",r),({error:e})=>{e?o(e):i()}),yield t.setExpiry(n,Be(kd)),t.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:r,throwOnFailedPublish:!0}).catch(e=>{o(e)}),{acknowledged:s}});return function(t){return e.apply(this,arguments)}}()),zd(this,"request",function(){var e=(0,r.Z)(function*(e){t.isInitialized();try{yield t.isValidRequest(e)}catch(m){throw t.client.logger.error("request() -> isValidRequest() failed"),m}const{chainId:n,request:s,topic:i,expiry:o=xd.wc_sessionRequest.req.ttl}=e,a=t.client.session.get(i);a?.transportType===da.relay&&(yield t.confirmOnlineStateOrThrow());const c=(0,ea.payloadId)(),l=(0,ea.getBigIntRpcId)().toString(),{done:d,resolve:u,reject:p}=Ue(o,"Request expired. Please try again.");t.events.once(je("session_request",c),({error:e,result:t})=>{e?p(e):u(t)});const h="wc_sessionRequest",f=t.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(f)return yield t.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:h,params:{request:Vd(Kd({},s),{expiryTimestamp:Be(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:f}).catch(e=>p(e)),t.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:c}),yield d();const g={request:Vd(Kd({},s),{expiryTimestamp:Be(o)}),chainId:n};return yield Promise.all([new Promise(function(){var e=(0,r.Z)(function*(e){yield t.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:h,params:g,expiry:o,throwOnFailedPublish:!0,tvf:t.getTVFParams(c,g)}).catch(e=>p(e)),t.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:c}),e()});return function(t){return e.apply(this,arguments)}}()),new Promise(function(){var e=(0,r.Z)(function*(e){var n;if(null==(n=a.sessionConfig)||!n.disableDeepLink){const e=yield function(e,t){return He.apply(this,arguments)}(t.client.core.storage,Od);yield function(e){return We.apply(this,arguments)}({id:c,topic:i,wcDeepLink:e})}e()});return function(t){return e.apply(this,arguments)}}()),d()]).then(e=>e[2])});return function(t){return e.apply(this,arguments)}}()),zd(this,"respond",function(){var e=(0,r.Z)(function*(e){var n,r;t.isInitialized();const s=t.client.core.eventClient.createEvent({properties:{topic:e?.topic||(null==(r=null==(n=e?.response)?void 0:n.id)?void 0:r.toString()),trace:["session_request_response_started"]}});try{yield t.isValidRespond(e)}catch(d){throw s.addTrace(d?.message),s.setError("session_request_response_validation_failure"),d}s.addTrace("session_request_response_validation_success");const{topic:i,response:o}=e,{id:a}=o,c=t.client.session.get(i);c.transportType===da.relay&&(yield t.confirmOnlineStateOrThrow());const l=t.getAppLinkIfEnabled(c.peer.metadata,c.transportType);try{s.addTrace("session_request_response_publish_started"),(0,ea.isJsonRpcResult)(o)?yield t.sendResult({id:a,topic:i,result:o.result,throwOnFailedPublish:!0,appLink:l}):(0,ea.isJsonRpcError)(o)&&(yield t.sendError({id:a,topic:i,error:o.error,appLink:l})),t.cleanupAfterResponse(e)}catch(d){throw s.addTrace(d?.message),s.setError("session_request_response_publish_failure"),d}});return function(t){return e.apply(this,arguments)}}()),zd(this,"ping",function(){var e=(0,r.Z)(function*(e){t.isInitialized(),yield t.confirmOnlineStateOrThrow();try{yield t.isValidPing(e)}catch(r){throw t.client.logger.error("ping() -> isValidPing() failed"),r}const{topic:n}=e;if(t.client.session.keys.includes(n)){const e=(0,ea.payloadId)(),r=(0,ea.getBigIntRpcId)().toString(),{done:s,resolve:i,reject:o}=Ue(I.FIVE_MINUTES,"Ping request expired without receiving any acknowledgement");t.events.once(je("session_ping",e),({error:e})=>{e?o(e):i()}),yield Promise.all([t.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:e,relayRpcId:r}),s()])}else t.client.core.pairing.pairings.keys.includes(n)&&(t.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),yield t.client.core.pairing.ping({topic:n}))});return function(t){return e.apply(this,arguments)}}()),zd(this,"emit",function(){var e=(0,r.Z)(function*(e){t.isInitialized(),yield t.confirmOnlineStateOrThrow(),yield t.isValidEmit(e);const{topic:n,event:r,chainId:s}=e,i=(0,ea.getBigIntRpcId)().toString(),o=(0,ea.payloadId)();yield t.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:r,chainId:s},throwOnFailedPublish:!0,relayRpcId:i,clientRpcId:o})});return function(t){return e.apply(this,arguments)}}()),zd(this,"disconnect",function(){var e=(0,r.Z)(function*(e){t.isInitialized(),yield t.confirmOnlineStateOrThrow(),yield t.isValidDisconnect(e);const{topic:n}=e;if(t.client.session.keys.includes(n))yield t.sendRequest({topic:n,method:"wc_sessionDelete",params:Po("USER_DISCONNECTED"),throwOnFailedPublish:!0}),yield t.deleteSession({topic:n,emitEvent:!1});else{if(!t.client.core.pairing.pairings.keys.includes(n)){const{message:e}=Oo("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(e)}yield t.client.core.pairing.disconnect({topic:n})}});return function(t){return e.apply(this,arguments)}}()),zd(this,"find",e=>(this.isInitialized(),this.client.session.getAll().filter(t=>function(e,t){const{requiredNamespaces:n}=t,r=Object.keys(e.namespaces),s=Object.keys(n);let i=!0;return!!Pe(s,r)&&(r.forEach(t=>{const{accounts:r,methods:s,events:o}=e.namespaces[t],a=Co(r),c=n[t];Pe(he(t,c),a)&&Pe(c.methods,s)&&Pe(c.events,o)||(i=!1)}),i)}(t,e)))),zd(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),zd(this,"authenticate",function(){var e=(0,r.Z)(function*(e,n){var s;t.isInitialized(),t.isValidAuthenticate(e);const i=n&&t.client.core.linkModeSupportedApps.includes(n)&&(null==(s=t.client.metadata.redirect)?void 0:s.linkMode),o=i?da.link_mode:da.relay;o===da.relay&&(yield t.confirmOnlineStateOrThrow());const{chains:a,statement:c="",uri:l,domain:d,nonce:u,type:p,exp:h,nbf:f,methods:g=[],expiry:m}=e,y=[...e.resources||[]],{topic:b,uri:w}=yield t.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});t.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:w}});const v=yield t.client.core.crypto.generateKeyPair(),E=ji(v);if(yield Promise.all([t.client.auth.authKeys.set(Bd,{responseTopic:E,publicKey:v}),t.client.auth.pairingTopics.set(E,{topic:E,pairingTopic:b})]),yield t.client.core.relayer.subscribe(E,{transportType:o}),t.client.logger.info(`sending request to new pairing topic: ${b}`),g.length>0){const{namespace:e}=pe(a[0]);let t=function(e,t,n){const r=function(e,t,n,r={}){return n?.sort((e,t)=>e.localeCompare(t)),{att:{[e]:ur(t,n,r)}}}(e,t,n);return pr(r)}(e,"request",g);yr(y)&&(t=fr(t,y.pop())),y.push(t)}const C=m&&m>xd.wc_sessionAuthenticate.req.ttl?m:xd.wc_sessionAuthenticate.req.ttl,A={authPayload:{type:p??"caip122",chains:a,statement:c,aud:l,domain:d,version:"1",nonce:u,iat:(new Date).toISOString(),exp:h,nbf:f,resources:y},requester:{publicKey:v,metadata:t.client.metadata},expiryTimestamp:Be(C)},N={requiredNamespaces:{},optionalNamespaces:{eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:v,metadata:t.client.metadata},expiryTimestamp:Be(xd.wc_sessionPropose.req.ttl),id:(0,ea.payloadId)()},{done:I,resolve:_,reject:S}=Ue(C,"Request expired"),T=(0,ea.payloadId)(),R=je("session_connect",N.id),O=je("session_request",T),P=function(){var e=(0,r.Z)(function*({error:e,session:n}){t.events.off(O,k),e?S(e):n&&_({session:n})});return function(t){return e.apply(this,arguments)}}(),k=function(){var e=(0,r.Z)(function*(e){var r,s,i;if(yield t.deletePendingAuthRequest(T,{message:"fulfilled",code:0}),e.error){const n=Po("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return e.error.code===n.code?void 0:(t.events.off(R,P),S(e.error.message))}yield t.deleteProposal(N.id),t.events.off(R,P);const{cacaos:a,responder:c}=e.result,l=[],d=[];for(const n of a){(yield ar({cacao:n,projectId:t.client.core.projectId}))||(t.client.logger.error(n,"Signature verification failed"),S(Po("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:e}=n,r=yr(e.resources),s=[ir(e.iss)],i=or(e.iss);if(r){const e=gr(r),t=mr(r);l.push(...e),s.push(...t)}for(const t of s)d.push(`${t}:${i}`)}const u=yield t.client.core.crypto.generateSharedKey(v,c.publicKey);let p;l.length>0&&(p={topic:u,acknowledged:!0,self:{publicKey:v,metadata:t.client.metadata},peer:c,controller:c.publicKey,expiry:Be(kd),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:So([...new Set(l)],[...new Set(d)]),transportType:o},yield t.client.core.relayer.subscribe(u,{transportType:o}),yield t.client.session.set(u,p),b&&(yield t.client.core.pairing.updateMetadata({topic:b,metadata:c.metadata})),p=t.client.session.get(u)),null!=(r=t.client.metadata.redirect)&&r.linkMode&&null!=(s=c.metadata.redirect)&&s.linkMode&&null!=(i=c.metadata.redirect)&&i.universal&&n&&(t.client.core.addLinkModeSupportedApp(c.metadata.redirect.universal),t.client.session.update(u,{transportType:da.link_mode})),_({auths:a,session:p})});return function(t){return e.apply(this,arguments)}}();let x;t.events.once(R,P),t.events.once(O,k);try{if(i){const e=(0,ea.formatJsonRpcRequest)("wc_sessionAuthenticate",A,T);t.client.core.history.set(b,e);const r=yield t.client.core.crypto.encode("",e,{type:2,encoding:Li});x=po(n,b,r)}else yield Promise.all([t.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:A,expiry:e.expiry,throwOnFailedPublish:!0,clientRpcId:T}),t.sendRequest({topic:b,method:"wc_sessionPropose",params:N,expiry:xd.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:N.id})])}catch(U){throw t.events.off(R,P),t.events.off(O,k),U}return yield t.setProposal(N.id,N),yield t.setAuthRequest(T,{request:Vd(Kd({},A),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:x??w,response:I}});return function(t,n){return e.apply(this,arguments)}}()),zd(this,"approveSessionAuthenticate",function(){var e=(0,r.Z)(function*(e){const{id:n,auths:r}=e,s=t.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:["authenticated_session_approve_started"]}});try{t.isInitialized()}catch(g){throw s.setError("no_internet_connection"),g}const i=t.getPendingAuthRequest(n);if(!i)throw s.setError("authenticated_session_pending_request_not_found"),new Error(`Could not find pending auth request with id ${n}`);const o=i.transportType||da.relay;o===da.relay&&(yield t.confirmOnlineStateOrThrow());const a=i.requester.publicKey,c=yield t.client.core.crypto.generateKeyPair(),l=ji(a),d={type:1,receiverPublicKey:a,senderPublicKey:c},u=[],p=[];for(const m of r){if(!(yield ar({cacao:m,projectId:t.client.core.projectId}))){s.setError("invalid_cacao");const e=Po("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw yield t.sendError({id:n,topic:l,error:e,encodeOpts:d}),new Error(e.message)}s.addTrace("cacaos_verified");const{p:e}=m,r=yr(e.resources),i=[ir(e.iss)],o=or(e.iss);if(r){const e=gr(r),t=mr(r);u.push(...e),i.push(...t)}for(const t of i)p.push(`${t}:${o}`)}const h=yield t.client.core.crypto.generateSharedKey(c,a);let f;if(s.addTrace("create_authenticated_session_topic"),u?.length>0){f={topic:h,acknowledged:!0,self:{publicKey:c,metadata:t.client.metadata},peer:{publicKey:a,metadata:i.requester.metadata},controller:a,expiry:Be(kd),authentication:r,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:i.pairingTopic,namespaces:So([...new Set(u)],[...new Set(p)]),transportType:o},s.addTrace("subscribing_authenticated_session_topic");try{yield t.client.core.relayer.subscribe(h,{transportType:o})}catch(g){throw s.setError("subscribe_authenticated_session_topic_failure"),g}s.addTrace("subscribe_authenticated_session_topic_success"),yield t.client.session.set(h,f),s.addTrace("store_authenticated_session"),yield t.client.core.pairing.updateMetadata({topic:i.pairingTopic,metadata:i.requester.metadata})}s.addTrace("publishing_authenticated_session_approve");try{yield t.sendResult({topic:l,id:n,result:{cacaos:r,responder:{publicKey:c,metadata:t.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:t.getAppLinkIfEnabled(i.requester.metadata,o)})}catch(g){throw s.setError("authenticated_session_approve_publish_failure"),g}return yield t.client.auth.requests.delete(n,{message:"fulfilled",code:0}),yield t.client.core.pairing.activate({topic:i.pairingTopic}),t.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:f}});return function(t){return e.apply(this,arguments)}}()),zd(this,"rejectSessionAuthenticate",function(){var e=(0,r.Z)(function*(e){t.isInitialized();const{id:n,reason:r}=e,s=t.getPendingAuthRequest(n);if(!s)throw new Error(`Could not find pending auth request with id ${n}`);s.transportType===da.relay&&(yield t.confirmOnlineStateOrThrow());const i=s.requester.publicKey,o=yield t.client.core.crypto.generateKeyPair(),a=ji(i),c={type:1,receiverPublicKey:i,senderPublicKey:o};yield t.sendError({id:n,topic:a,error:r,encodeOpts:c,rpcOpts:xd.wc_sessionAuthenticate.reject,appLink:t.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),yield t.client.auth.requests.delete(n,{message:"rejected",code:0}),yield t.deleteProposal(n)});return function(t){return e.apply(this,arguments)}}()),zd(this,"formatAuthMessage",e=>{this.isInitialized();const{request:t,iss:n}=e;return lr(t,n)}),zd(this,"processRelayMessageCache",()=>{setTimeout((0,r.Z)(function*(){if(0!==t.relayMessageCache.length)for(;t.relayMessageCache.length>0;)try{const e=t.relayMessageCache.shift();e&&(yield t.onRelayMessage(e))}catch(e){t.client.logger.error(e)}}),50)}),zd(this,"cleanupDuplicatePairings",function(){var e=(0,r.Z)(function*(e){if(e.pairingTopic)try{const n=t.client.core.pairing.pairings.get(e.pairingTopic),r=t.client.core.pairing.pairings.getAll().filter(t=>{var r,s;return(null==(r=t.peerMetadata)?void 0:r.url)&&(null==(s=t.peerMetadata)?void 0:s.url)===e.peer.metadata.url&&t.topic&&t.topic!==n.topic});if(0===r.length)return;t.client.logger.info(`Cleaning up ${r.length} duplicate pairing(s)`),yield Promise.all(r.map(e=>t.client.core.pairing.disconnect({topic:e.topic}))),t.client.logger.info("Duplicate pairings clean up finished")}catch(n){t.client.logger.error(n)}});return function(t){return e.apply(this,arguments)}}()),zd(this,"deleteSession",function(){var e=(0,r.Z)(function*(e){var n;const{topic:r,expirerHasDeleted:s=!1,emitEvent:i=!0,id:o=0}=e,{self:a}=t.client.session.get(r);yield t.client.core.relayer.unsubscribe(r),yield t.client.session.delete(r,Po("USER_DISCONNECTED")),t.addToRecentlyDeleted(r,"session"),t.client.core.crypto.keychain.has(a.publicKey)&&(yield t.client.core.crypto.deleteKeyPair(a.publicKey)),t.client.core.crypto.keychain.has(r)&&(yield t.client.core.crypto.deleteSymKey(r)),s||t.client.core.expirer.del(r),t.client.core.storage.removeItem(Od).catch(e=>t.client.logger.warn(e)),r===(null==(n=t.sessionRequestQueue.queue[0])?void 0:n.topic)&&(t.sessionRequestQueue.state="IDLE"),yield Promise.all(t.getPendingSessionRequests().filter(e=>e.topic===r).map(e=>t.deletePendingSessionRequest(e.id,Po("USER_DISCONNECTED")))),i&&t.client.events.emit("session_delete",{id:o,topic:r})});return function(t){return e.apply(this,arguments)}}()),zd(this,"deleteProposal",function(){var e=(0,r.Z)(function*(e,n){if(n)try{const n=t.client.proposal.get(e);t.client.core.eventClient.getEvent({topic:n.pairingTopic})?.setError("proposal_expired")}catch{}yield Promise.all([t.client.proposal.delete(e,Po("USER_DISCONNECTED")),n?Promise.resolve():t.client.core.expirer.del(e)]),t.addToRecentlyDeleted(e,"proposal")});return function(t,n){return e.apply(this,arguments)}}()),zd(this,"deletePendingSessionRequest",function(){var e=(0,r.Z)(function*(e,n,r=!1){yield Promise.all([t.client.pendingRequest.delete(e,n),r?Promise.resolve():t.client.core.expirer.del(e)]),t.addToRecentlyDeleted(e,"request"),t.sessionRequestQueue.queue=t.sessionRequestQueue.queue.filter(t=>t.id!==e),r&&(t.sessionRequestQueue.state="IDLE",t.client.events.emit("session_request_expire",{id:e}))});return function(t,n){return e.apply(this,arguments)}}()),zd(this,"deletePendingAuthRequest",function(){var e=(0,r.Z)(function*(e,n,r=!1){yield Promise.all([t.client.auth.requests.delete(e,n),r?Promise.resolve():t.client.core.expirer.del(e)])});return function(t,n){return e.apply(this,arguments)}}()),zd(this,"setExpiry",function(){var e=(0,r.Z)(function*(e,n){t.client.session.keys.includes(e)&&(t.client.core.expirer.set(e,n),yield t.client.session.update(e,{expiry:n}))});return function(t,n){return e.apply(this,arguments)}}()),zd(this,"setProposal",function(){var e=(0,r.Z)(function*(e,n){t.client.core.expirer.set(e,Be(xd.wc_sessionPropose.req.ttl)),yield t.client.proposal.set(e,n)});return function(t,n){return e.apply(this,arguments)}}()),zd(this,"setAuthRequest",function(){var e=(0,r.Z)(function*(e,n){const{request:r,pairingTopic:s,transportType:i=da.relay}=n;t.client.core.expirer.set(e,r.expiryTimestamp),yield t.client.auth.requests.set(e,{authPayload:r.authPayload,requester:r.requester,expiryTimestamp:r.expiryTimestamp,id:e,pairingTopic:s,verifyContext:r.verifyContext,transportType:i})});return function(t,n){return e.apply(this,arguments)}}()),zd(this,"setPendingSessionRequest",function(){var e=(0,r.Z)(function*(e){const{id:n,topic:r,params:s,verifyContext:i}=e,o=s.request.expiryTimestamp||Be(xd.wc_sessionRequest.req.ttl);t.client.core.expirer.set(n,o),yield t.client.pendingRequest.set(n,{id:n,topic:r,params:s,verifyContext:i})});return function(t){return e.apply(this,arguments)}}()),zd(this,"sendRequest",function(){var e=(0,r.Z)(function*(e){const{topic:n,method:r,params:s,expiry:i,relayRpcId:o,clientRpcId:a,throwOnFailedPublish:c,appLink:l,tvf:d,publishOpts:u={}}=e,p=(0,ea.formatJsonRpcRequest)(r,s,a);let h;const f=!!l;try{const e=f?Li:Di;h=yield t.client.core.crypto.encode(n,p,{encoding:e})}catch(y){throw yield t.cleanup(),t.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),y}let g;if(Dd.includes(r)){const e=Fi(JSON.stringify(p)),n=Fi(h);g=yield t.client.core.verify.register({id:n,decryptedId:e})}const m=Kd(Kd({},xd[r].req),u);if(m.attestation=g,i&&(m.ttl=i),o&&(m.id=o),t.client.core.history.set(n,p),f){const e=po(l,n,h);yield global.Linking.openURL(e,t.client.name)}else m.tvf=Vd(Kd({},d),{correlationId:p.id}),c?(m.internal=Vd(Kd({},m.internal),{throwOnFailedPublish:!0}),yield t.client.core.relayer.publish(n,h,m)):t.client.core.relayer.publish(n,h,m).catch(e=>t.client.logger.error(e));return p.id});return function(t){return e.apply(this,arguments)}}()),zd(this,"sendProposeSession",function(){var e=(0,r.Z)(function*(e){const{proposal:n,publishOpts:r}=e,s=(0,ea.formatJsonRpcRequest)("wc_sessionPropose",n,n.id);t.client.core.history.set(n.pairingTopic,s);const i=yield t.client.core.crypto.encode(n.pairingTopic,s,{encoding:Di}),o=Fi(JSON.stringify(s)),a=Fi(i),c=yield t.client.core.verify.register({id:a,decryptedId:o});yield t.client.core.relayer.publishCustom({payload:{pairingTopic:n.pairingTopic,sessionProposal:i},opts:Vd(Kd({},r),{publishMethod:"wc_proposeSession",attestation:c})})});return function(t){return e.apply(this,arguments)}}()),zd(this,"sendApproveSession",function(){var e=(0,r.Z)(function*(e){const{sessionTopic:n,pairingProposalResponse:r,proposal:s,sessionSettleRequest:i,publishOpts:o}=e,a=(0,ea.formatJsonRpcResult)(s.id,r),c=yield t.client.core.crypto.encode(s.pairingTopic,a,{encoding:Di}),l=(0,ea.formatJsonRpcRequest)("wc_sessionSettle",i,o?.id),d=yield t.client.core.crypto.encode(n,l,{encoding:Di});t.client.core.history.set(n,l),yield t.client.core.relayer.publishCustom({payload:{sessionTopic:n,pairingTopic:s.pairingTopic,sessionProposalResponse:c,sessionSettlementRequest:d},opts:Vd(Kd({},o),{publishMethod:"wc_approveSession"})})});return function(t){return e.apply(this,arguments)}}()),zd(this,"sendResult",function(){var e=(0,r.Z)(function*(e){const{id:n,topic:r,result:s,throwOnFailedPublish:i,encodeOpts:o,appLink:a}=e,c=(0,ea.formatJsonRpcResult)(n,s);let l;const d=a&&typeof(null==global?void 0:global.Linking)<"u";try{const e=d?Li:Di;l=yield t.client.core.crypto.encode(r,c,Vd(Kd({},o||{}),{encoding:e}))}catch(h){throw yield t.cleanup(),t.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${r} failed`),h}let u,p;try{u=yield t.client.core.history.get(r,n);const e=u.request;try{p=t.getTVFParams(n,e.params,s)}catch(f){t.client.logger.warn(`sendResult() -> getTVFParams() failed: ${f?.message}`)}}catch(h){throw t.client.logger.error(`sendResult() -> history.get(${r}, ${n}) failed`),h}if(d){const e=po(a,r,l);yield global.Linking.openURL(e,t.client.name)}else{const e=xd[u.request.method].res;e.tvf=Vd(Kd({},p),{correlationId:n}),i?(e.internal=Vd(Kd({},e.internal),{throwOnFailedPublish:!0}),yield t.client.core.relayer.publish(r,l,e)):t.client.core.relayer.publish(r,l,e).catch(e=>t.client.logger.error(e))}yield t.client.core.history.resolve(c)});return function(t){return e.apply(this,arguments)}}()),zd(this,"sendError",function(){var e=(0,r.Z)(function*(e){const{id:n,topic:r,error:s,encodeOpts:i,rpcOpts:o,appLink:a}=e,c=(0,ea.formatJsonRpcError)(n,s);let l;const d=a&&typeof(null==global?void 0:global.Linking)<"u";try{const e=d?Li:Di;l=yield t.client.core.crypto.encode(r,c,Vd(Kd({},i||{}),{encoding:e}))}catch(p){throw yield t.cleanup(),t.client.logger.error(`sendError() -> core.crypto.encode() for topic ${r} failed`),p}let u;try{u=yield t.client.core.history.get(r,n)}catch(p){throw t.client.logger.error(`sendError() -> history.get(${r}, ${n}) failed`),p}if(d){const e=po(a,r,l);yield global.Linking.openURL(e,t.client.name)}else{const e=u.request.method;t.client.core.relayer.publish(r,l,o||xd[e].res)}yield t.client.core.history.resolve(c)});return function(t){return e.apply(this,arguments)}}()),zd(this,"cleanup",(0,r.Z)(function*(){const e=[],n=[];t.client.session.getAll().forEach(n=>{let r=!1;$e(n.expiry)&&(r=!0),t.client.core.crypto.keychain.has(n.topic)||(r=!0),r&&e.push(n.topic)}),t.client.proposal.getAll().forEach(e=>{$e(e.expiryTimestamp)&&n.push(e.id)}),yield Promise.all([...e.map(e=>t.deleteSession({topic:e})),...n.map(e=>t.deleteProposal(e))])})),zd(this,"onProviderMessageEvent",function(){var e=(0,r.Z)(function*(e){!t.initialized||t.relayMessageCache.length>0?t.relayMessageCache.push(e):yield t.onRelayMessage(e)});return function(t){return e.apply(this,arguments)}}()),zd(this,"onRelayEventRequest",function(){var e=(0,r.Z)(function*(e){t.requestQueue.queue.push(e),yield t.processRequestsQueue()});return function(t){return e.apply(this,arguments)}}()),zd(this,"processRequestsQueue",(0,r.Z)(function*(){if("ACTIVE"!==t.requestQueue.state){for(t.client.logger.info(`Request queue starting with ${t.requestQueue.queue.length} requests`);t.requestQueue.queue.length>0;){t.requestQueue.state="ACTIVE";const n=t.requestQueue.queue.shift();if(n)try{yield t.processRequest(n)}catch(e){t.client.logger.warn(e)}}t.requestQueue.state="IDLE"}else t.client.logger.info("Request queue already active, skipping...")})),zd(this,"processRequest",function(){var e=(0,r.Z)(function*(e){const{topic:n,payload:r,attestation:s,transportType:i,encryptedId:o}=e,a=r.method;if(!t.shouldIgnorePairingRequest({topic:n,requestMethod:a}))switch(a){case"wc_sessionPropose":return yield t.onSessionProposeRequest({topic:n,payload:r,attestation:s,encryptedId:o});case"wc_sessionSettle":return yield t.onSessionSettleRequest(n,r);case"wc_sessionUpdate":return yield t.onSessionUpdateRequest(n,r);case"wc_sessionExtend":return yield t.onSessionExtendRequest(n,r);case"wc_sessionPing":return yield t.onSessionPingRequest(n,r);case"wc_sessionDelete":return yield t.onSessionDeleteRequest(n,r);case"wc_sessionRequest":return yield t.onSessionRequest({topic:n,payload:r,attestation:s,encryptedId:o,transportType:i});case"wc_sessionEvent":return yield t.onSessionEventRequest(n,r);case"wc_sessionAuthenticate":return yield t.onSessionAuthenticateRequest({topic:n,payload:r,attestation:s,encryptedId:o,transportType:i});default:return t.client.logger.info(`Unsupported request method ${a}`)}});return function(t){return e.apply(this,arguments)}}()),zd(this,"onRelayEventResponse",function(){var e=(0,r.Z)(function*(e){const{topic:n,payload:r,transportType:s}=e,i=(yield t.client.core.history.get(n,r.id)).request.method;switch(i){case"wc_sessionPropose":return t.onSessionProposeResponse(n,r,s);case"wc_sessionSettle":return t.onSessionSettleResponse(n,r);case"wc_sessionUpdate":return t.onSessionUpdateResponse(n,r);case"wc_sessionExtend":return t.onSessionExtendResponse(n,r);case"wc_sessionPing":return t.onSessionPingResponse(n,r);case"wc_sessionRequest":return t.onSessionRequestResponse(n,r);case"wc_sessionAuthenticate":return t.onSessionAuthenticateResponse(n,r);default:return t.client.logger.info(`Unsupported response method ${i}`)}});return function(t){return e.apply(this,arguments)}}()),zd(this,"onRelayEventUnknownPayload",e=>{const{topic:t}=e,{message:n}=Oo("MISSING_OR_INVALID",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw new Error(n)}),zd(this,"shouldIgnorePairingRequest",e=>{const{topic:t,requestMethod:n}=e,r=this.expectedPairingMethodMap.get(t);return!(!r||r.includes(n)||!(r.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0))}),zd(this,"onSessionProposeRequest",function(){var e=(0,r.Z)(function*(e){const{topic:n,payload:r,attestation:s,encryptedId:i}=e,{params:o,id:a}=r;try{const e=t.client.core.eventClient.getEvent({topic:n});0===t.client.events.listenerCount("session_proposal")&&(console.warn("No listener for session_proposal event"),e?.setError("proposal_listener_not_found")),t.isValidConnect(Kd({},r.params));const c=o.expiryTimestamp||Be(xd.wc_sessionPropose.req.ttl),l=Kd({id:a,pairingTopic:n,expiryTimestamp:c,attestation:s,encryptedId:i},o);yield t.setProposal(a,l);const d=yield t.getVerifyContext({attestationId:s,hash:Fi(JSON.stringify(r)),encryptedId:i,metadata:l.proposer.metadata});e?.addTrace("emit_session_proposal"),t.client.events.emit("session_proposal",{id:a,params:l,verifyContext:d})}catch(c){yield t.sendError({id:a,topic:n,error:c,rpcOpts:xd.wc_sessionPropose.autoReject}),t.client.logger.error(c)}});return function(t){return e.apply(this,arguments)}}()),zd(this,"onSessionProposeResponse",function(){var e=(0,r.Z)(function*(e,n,r){const{id:s}=n;if((0,ea.isJsonRpcResult)(n)){const{result:i}=n;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:i});const o=t.client.proposal.get(s);t.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});const a=o.proposer.publicKey;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:a});const c=i.responderPublicKey;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:c});const l=yield t.client.core.crypto.generateSharedKey(a,c);t.pendingSessions.set(s,{sessionTopic:l,pairingTopic:e,proposalId:s,publicKey:a});const d=yield t.client.core.relayer.subscribe(l,{transportType:r});t.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),yield t.client.core.pairing.activate({topic:e})}else if((0,ea.isJsonRpcError)(n)){yield t.deleteProposal(s);const e=je("session_connect",s);if(0===t.events.listenerCount(e))throw new Error(`emitting ${e} without any listeners, 954`);t.events.emit(e,{error:n.error})}});return function(t,n,r){return e.apply(this,arguments)}}()),zd(this,"onSessionSettleRequest",function(){var e=(0,r.Z)(function*(e,n){const{id:r,params:s}=n;try{t.isValidSessionSettleRequest(s);const{relay:r,controller:i,expiry:o,namespaces:a,sessionProperties:c,scopedProperties:l,sessionConfig:d,proposalRequestsResponses:u}=n.params,p=[...t.pendingSessions.values()].find(t=>t.sessionTopic===e);if(!p)return t.client.logger.error(`Pending session not found for topic ${e}`);const h=t.client.proposal.get(p.proposalId),f=Vd(Kd(Kd(Kd({topic:e,relay:r,expiry:o,namespaces:a,acknowledged:!0,pairingTopic:p.pairingTopic,requiredNamespaces:h.requiredNamespaces,optionalNamespaces:h.optionalNamespaces,controller:i.publicKey,self:{publicKey:p.publicKey,metadata:t.client.metadata},peer:{publicKey:i.publicKey,metadata:i.metadata}},c&&{sessionProperties:c}),l&&{scopedProperties:l}),d&&{sessionConfig:d}),{transportType:da.relay,authentication:u?.authentication,walletPayResult:u?.walletPay});yield t.client.session.set(f.topic,f),yield t.setExpiry(f.topic,f.expiry),yield t.client.core.pairing.updateMetadata({topic:p.pairingTopic,metadata:f.peer.metadata}),t.pendingSessions.delete(p.proposalId),t.deleteProposal(p.proposalId,!1),t.cleanupDuplicatePairings(f),yield t.sendResult({id:n.id,topic:e,throwOnFailedPublish:!0,result:!0}),t.client.events.emit("session_connect",{session:f}),t.events.emit(je("session_connect",p.proposalId),{session:f})}catch(i){yield t.sendError({id:r,topic:e,error:i}),t.client.logger.error(i)}});return function(t,n){return e.apply(this,arguments)}}()),zd(this,"onSessionSettleResponse",function(){var e=(0,r.Z)(function*(e,n){const{id:r}=n;(0,ea.isJsonRpcResult)(n)?(yield t.client.session.update(e,{acknowledged:!0}),t.events.emit(je("session_approve",r),{})):(0,ea.isJsonRpcError)(n)&&(yield t.client.session.delete(e,Po("USER_DISCONNECTED")),t.events.emit(je("session_approve",r),{error:n.error}))});return function(t,n){return e.apply(this,arguments)}}()),zd(this,"onSessionUpdateRequest",function(){var e=(0,r.Z)(function*(e,n){const{params:r,id:s}=n;try{const n=`${e}_session_update`,o=Go.get(n);if(o&&t.isRequestOutOfSync(o,s))return t.client.logger.warn(`Discarding out of sync request - ${s}`),void t.sendError({id:s,topic:e,error:Po("INVALID_UPDATE_REQUEST")});t.isValidUpdate(Kd({topic:e},r));try{Go.set(n,s),yield t.client.session.update(e,{namespaces:r.namespaces}),yield t.sendResult({id:s,topic:e,result:!0})}catch(i){throw Go.delete(n),i}t.client.events.emit("session_update",{id:s,topic:e,params:r})}catch(o){yield t.sendError({id:s,topic:e,error:o}),t.client.logger.error(o)}});return function(t,n){return e.apply(this,arguments)}}()),zd(this,"isRequestOutOfSync",(e,t)=>t.toString().slice(0,-3)<e.toString().slice(0,-3)),zd(this,"onSessionUpdateResponse",(e,t)=>{const{id:n}=t,r=je("session_update",n);if(0===this.events.listenerCount(r))throw new Error(`emitting ${r} without any listeners`);(0,ea.isJsonRpcResult)(t)?this.events.emit(je("session_update",n),{}):(0,ea.isJsonRpcError)(t)&&this.events.emit(je("session_update",n),{error:t.error})}),zd(this,"onSessionExtendRequest",function(){var e=(0,r.Z)(function*(e,n){const{id:r}=n;try{t.isValidExtend({topic:e}),yield t.setExpiry(e,Be(kd)),yield t.sendResult({id:r,topic:e,result:!0}),t.client.events.emit("session_extend",{id:r,topic:e})}catch(s){yield t.sendError({id:r,topic:e,error:s}),t.client.logger.error(s)}});return function(t,n){return e.apply(this,arguments)}}()),zd(this,"onSessionExtendResponse",(e,t)=>{const{id:n}=t,r=je("session_extend",n);if(0===this.events.listenerCount(r))throw new Error(`emitting ${r} without any listeners`);(0,ea.isJsonRpcResult)(t)?this.events.emit(je("session_extend",n),{}):(0,ea.isJsonRpcError)(t)&&this.events.emit(je("session_extend",n),{error:t.error})}),zd(this,"onSessionPingRequest",function(){var e=(0,r.Z)(function*(e,n){const{id:r}=n;try{t.isValidPing({topic:e}),yield t.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),t.client.events.emit("session_ping",{id:r,topic:e})}catch(s){yield t.sendError({id:r,topic:e,error:s}),t.client.logger.error(s)}});return function(t,n){return e.apply(this,arguments)}}()),zd(this,"onSessionPingResponse",(e,t)=>{const{id:n}=t,r=je("session_ping",n);setTimeout(()=>{if(0===this.events.listenerCount(r))throw new Error(`emitting ${r} without any listeners 2176`);(0,ea.isJsonRpcResult)(t)?this.events.emit(je("session_ping",n),{}):(0,ea.isJsonRpcError)(t)&&this.events.emit(je("session_ping",n),{error:t.error})},500)}),zd(this,"onSessionDeleteRequest",function(){var e=(0,r.Z)(function*(e,n){const{id:r}=n;try{yield t.isValidDisconnect({topic:e,reason:n.params}),t.cleanupPendingSentRequestsForTopic({topic:e,error:Po("USER_DISCONNECTED")}),yield t.deleteSession({topic:e,id:r})}catch(s){t.client.logger.error(s)}});return function(t,n){return e.apply(this,arguments)}}()),zd(this,"onSessionRequest",function(){var e=(0,r.Z)(function*(e){var n,r,s;const{topic:i,payload:o,attestation:a,encryptedId:c,transportType:l}=e,{id:d,params:u}=o;try{yield t.isValidRequest(Kd({topic:i},u));const e=t.client.session.get(i),o={id:d,topic:i,params:u,verifyContext:yield t.getVerifyContext({attestationId:a,hash:Fi(JSON.stringify((0,ea.formatJsonRpcRequest)("wc_sessionRequest",u,d))),encryptedId:c,metadata:e.peer.metadata,transportType:l})};yield t.setPendingSessionRequest(o),l===da.link_mode&&null!=(n=e.peer.metadata.redirect)&&n.universal&&t.client.core.addLinkModeSupportedApp(null==(r=e.peer.metadata.redirect)?void 0:r.universal),null!=(s=t.client.signConfig)&&s.disableRequestQueue?t.emitSessionRequest(o):(t.addSessionRequestToSessionRequestQueue(o),t.processSessionRequestQueue())}catch(p){yield t.sendError({id:d,topic:i,error:p}),t.client.logger.error(p)}});return function(t){return e.apply(this,arguments)}}()),zd(this,"onSessionRequestResponse",(e,t)=>{const{id:n}=t,r=je("session_request",n);if(0===this.events.listenerCount(r))throw new Error(`emitting ${r} without any listeners`);(0,ea.isJsonRpcResult)(t)?this.events.emit(je("session_request",n),{result:t.result}):(0,ea.isJsonRpcError)(t)&&this.events.emit(je("session_request",n),{error:t.error})}),zd(this,"onSessionEventRequest",function(){var e=(0,r.Z)(function*(e,n){const{id:r,params:s}=n;try{const n=`${e}_session_event_${s.event.name}`,i=Go.get(n);if(i&&t.isRequestOutOfSync(i,r))return void t.client.logger.info(`Discarding out of sync request - ${r}`);t.isValidEmit(Kd({topic:e},s)),t.client.events.emit("session_event",{id:r,topic:e,params:s}),Go.set(n,r)}catch(i){yield t.sendError({id:r,topic:e,error:i}),t.client.logger.error(i)}});return function(t,n){return e.apply(this,arguments)}}()),zd(this,"onSessionAuthenticateResponse",(e,t)=>{const{id:n}=t;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:e,payload:t}),(0,ea.isJsonRpcResult)(t)?this.events.emit(je("session_request",n),{result:t.result}):(0,ea.isJsonRpcError)(t)&&this.events.emit(je("session_request",n),{error:t.error})}),zd(this,"onSessionAuthenticateRequest",function(){var e=(0,r.Z)(function*(e){var n;const{topic:r,payload:s,attestation:i,encryptedId:o,transportType:a}=e;try{const{requester:e,authPayload:c,expiryTimestamp:l}=s.params,d=yield t.getVerifyContext({attestationId:i,hash:Fi(JSON.stringify(s)),encryptedId:o,metadata:e.metadata,transportType:a}),u={requester:e,pairingTopic:r,id:s.id,authPayload:c,verifyContext:d,expiryTimestamp:l};yield t.setAuthRequest(s.id,{request:u,pairingTopic:r,transportType:a}),a===da.link_mode&&null!=(n=e.metadata.redirect)&&n.universal&&t.client.core.addLinkModeSupportedApp(e.metadata.redirect.universal),t.client.events.emit("session_authenticate",{topic:r,params:s.params,id:s.id,verifyContext:d})}catch(c){t.client.logger.error(c);const e=s.params.requester.publicKey,n=yield t.client.core.crypto.generateKeyPair(),i=t.getAppLinkIfEnabled(s.params.requester.metadata,a),o={type:1,receiverPublicKey:e,senderPublicKey:n};yield t.sendError({id:s.id,topic:r,error:c,encodeOpts:o,rpcOpts:xd.wc_sessionAuthenticate.autoReject,appLink:i})}});return function(t){return e.apply(this,arguments)}}()),zd(this,"addSessionRequestToSessionRequestQueue",e=>{this.sessionRequestQueue.queue.push(e)}),zd(this,"cleanupAfterResponse",e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state="IDLE",this.processSessionRequestQueue()},(0,I.toMiliseconds)(this.requestQueueDelay))}),zd(this,"cleanupPendingSentRequestsForTopic",({topic:e,error:t})=>{const n=this.client.core.history.pending;n.length>0&&n.filter(t=>t.topic===e&&"wc_sessionRequest"===t.request.method).forEach(e=>{this.events.emit(je("session_request",e.request.id),{error:t})})}),zd(this,"processSessionRequestQueue",()=>{if("ACTIVE"===this.sessionRequestQueue.state)return void this.client.logger.info("session request queue is already active.");const e=this.sessionRequestQueue.queue[0];if(e)try{this.emitSessionRequest(e)}catch(t){this.client.logger.error(t)}else this.client.logger.info("session request queue is empty.")}),zd(this,"emitSessionRequest",e=>{this.emittedSessionRequests.has(e.id)?this.client.logger.warn({id:e.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${e.id}`):(this.sessionRequestQueue.state="ACTIVE",this.emittedSessionRequests.add(e.id),this.client.events.emit("session_request",e))}),zd(this,"onPairingCreated",e=>{if(e.methods&&this.expectedPairingMethodMap.set(e.topic,e.methods),e.active)return;const t=this.client.proposal.getAll().find(t=>t.pairingTopic===e.topic);t&&this.onSessionProposeRequest({topic:e.topic,payload:(0,ea.formatJsonRpcRequest)("wc_sessionPropose",Vd(Kd({},t),{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties,scopedProperties:t.scopedProperties}),t.id),attestation:t.attestation,encryptedId:t.encryptedId})}),zd(this,"isValidConnect",function(){var e=(0,r.Z)(function*(e){if(!Wo(e)){const{message:t}=Oo("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw new Error(t)}const{pairingTopic:n,requiredNamespaces:r,optionalNamespaces:s,sessionProperties:i,scopedProperties:o,relays:a}=e;if(Uo(n)||(yield t.isValidPairingTopic(n)),!function(e,t){let n=!1;return e?e&&ko(e)&&e.length&&e.forEach(e=>{n=Fo(e)}):n=!0,n}(a)){const{message:e}=Oo("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(e)}if(r&&!Uo(r)&&0!==xo(r)){const e="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(t.client.logger.level)?console.warn(e):t.client.logger.warn(e),t.validateNamespaces(r,"requiredNamespaces")}if(s&&!Uo(s)&&0!==xo(s)&&t.validateNamespaces(s,"optionalNamespaces"),i&&!Uo(i)&&t.validateSessionProps(i,"sessionProperties"),o&&!Uo(o)){t.validateSessionProps(o,"scopedProperties");const e=Object.keys(r||{}).concat(Object.keys(s||{}));if(!Object.keys(o).every(t=>e.includes(t.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(o)}, required/optional namespaces: ${JSON.stringify(e)}`)}});return function(t){return e.apply(this,arguments)}}()),zd(this,"validateNamespaces",(e,t)=>{const n=function(e,t,n){let r=null;if(e&&xo(e)){const s=$o(e,t);s&&(r=s);const i=function(e,t,n){let r=null;return Object.entries(e).forEach(([e,s])=>{if(r)return;const i=function(e,t,n){let r=null;return ko(t)&&t.length?t.forEach(e=>{r||Lo(e)||(r=Po("UNSUPPORTED_CHAINS",`${n}, chain ${e} should be a string and conform to "namespace:chainId" format`))}):Lo(e)||(r=Po("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}(e,he(e,s),`${t} ${n}`);i&&(r=i)}),r}(e,t,n);i&&(r=i)}else r=Oo("MISSING_OR_INVALID",`${t}, ${n} should be an object with data`);return r}(e,"connect()",t);if(n)throw new Error(n.message)}),zd(this,"isValidApprove",function(){var e=(0,r.Z)(function*(e){if(!Wo(e))throw new Error(Oo("MISSING_OR_INVALID",`approve() params: ${e}`).message);const{id:n,namespaces:r,relayProtocol:s,sessionProperties:i,scopedProperties:o}=e;t.checkRecentlyDeleted(n),yield t.isValidProposalId(n);const a=t.client.proposal.get(n),c=jo(r,"approve()");if(c)throw new Error(c.message);const l=Zo(a.requiredNamespaces,r,"approve()");if(l)throw new Error(l.message);if(!Mo(s,!0)){const{message:e}=Oo("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(e)}if(i&&!Uo(i)&&t.validateSessionProps(i,"sessionProperties"),o&&!Uo(o)){t.validateSessionProps(o,"scopedProperties");const e=new Set(Object.keys(r));if(!Object.keys(o).every(t=>e.has(t.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(o)}, approved namespaces: ${Array.from(e).join(", ")}`)}});return function(t){return e.apply(this,arguments)}}()),zd(this,"isValidReject",function(){var e=(0,r.Z)(function*(e){if(!Wo(e)){const{message:t}=Oo("MISSING_OR_INVALID",`reject() params: ${e}`);throw new Error(t)}const{id:n,reason:r}=e;if(t.checkRecentlyDeleted(n),yield t.isValidProposalId(n),!function(e){return!!(e&&"object"==typeof e&&e.code&&Do(e.code,!1)&&e.message&&Mo(e.message,!1))}(r)){const{message:e}=Oo("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(r)}`);throw new Error(e)}});return function(t){return e.apply(this,arguments)}}()),zd(this,"isValidSessionSettleRequest",e=>{if(!Wo(e)){const{message:t}=Oo("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw new Error(t)}const{relay:t,controller:n,namespaces:r,expiry:s}=e;if(!Fo(t)){const{message:e}=Oo("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(e)}const i=function(e,t){let n=null;return Mo(e?.publicKey,!1)||(n=Oo("MISSING_OR_INVALID","onSessionSettleRequest() controller public key should be a string")),n}(n);if(i)throw new Error(i.message);const o=jo(r,"onSessionSettleRequest()");if(o)throw new Error(o.message);if($e(s)){const{message:e}=Oo("EXPIRED","onSessionSettleRequest()");throw new Error(e)}}),zd(this,"isValidUpdate",function(){var e=(0,r.Z)(function*(e){if(!Wo(e)){const{message:t}=Oo("MISSING_OR_INVALID",`update() params: ${e}`);throw new Error(t)}const{topic:n,namespaces:r}=e;t.checkRecentlyDeleted(n),yield t.isValidSessionTopic(n);const s=t.client.session.get(n),i=jo(r,"update()");if(i)throw new Error(i.message);const o=Zo(s.requiredNamespaces,r,"update()");if(o)throw new Error(o.message)});return function(t){return e.apply(this,arguments)}}()),zd(this,"isValidExtend",function(){var e=(0,r.Z)(function*(e){if(!Wo(e)){const{message:t}=Oo("MISSING_OR_INVALID",`extend() params: ${e}`);throw new Error(t)}const{topic:n}=e;t.checkRecentlyDeleted(n),yield t.isValidSessionTopic(n)});return function(t){return e.apply(this,arguments)}}()),zd(this,"isValidRequest",function(){var e=(0,r.Z)(function*(e){if(!Wo(e)){const{message:t}=Oo("MISSING_OR_INVALID",`request() params: ${e}`);throw new Error(t)}const{topic:n,request:r,chainId:s,expiry:i}=e;t.checkRecentlyDeleted(n),yield t.isValidSessionTopic(n);const{namespaces:o}=t.client.session.get(n);if(!qo(o,s)){const{message:e}=Oo("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(e)}if(!function(e){return!(Uo(e)||!Mo(e.method,!1))}(r)){const{message:e}=Oo("MISSING_OR_INVALID",`request() ${JSON.stringify(r)}`);throw new Error(e)}if(!function(e,t,n){return!!Mo(n,!1)&&function(e,t){const n=[];return Object.values(e).forEach(e=>{Co(e.accounts).includes(t)&&n.push(...e.methods)}),n}(e,t).includes(n)}(o,s,r.method)){const{message:e}=Oo("MISSING_OR_INVALID",`request() method: ${r.method}`);throw new Error(e)}t.validateRequestExpiry(i)});return function(t){return e.apply(this,arguments)}}()),zd(this,"isValidRespond",function(){var e=(0,r.Z)(function*(e){var n;if(!Wo(e)){const{message:t}=Oo("MISSING_OR_INVALID",`respond() params: ${e}`);throw new Error(t)}const{topic:r,response:s}=e;try{yield t.isValidSessionTopic(r)}catch(o){throw null!=(n=e?.response)&&n.id&&t.cleanupAfterResponse(e),o}if(!function(e){return!(Uo(e)||Uo(e.result)&&Uo(e.error)||!Do(e.id,!1)||!Mo(e.jsonrpc,!1))}(s)){const{message:e}=Oo("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(e)}const i=t.client.pendingRequest.get(s.id);if(i.topic!==r){const{message:e}=Oo("MISMATCHED_TOPIC",`Request response topic mismatch. reqId: ${s.id}, expected topic: ${i.topic}, received topic: ${r}`);throw new Error(e)}});return function(t){return e.apply(this,arguments)}}()),zd(this,"isValidPing",function(){var e=(0,r.Z)(function*(e){if(!Wo(e)){const{message:t}=Oo("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:n}=e;yield t.isValidSessionOrPairingTopic(n)});return function(t){return e.apply(this,arguments)}}()),zd(this,"isValidEmit",function(){var e=(0,r.Z)(function*(e){if(!Wo(e)){const{message:t}=Oo("MISSING_OR_INVALID",`emit() params: ${e}`);throw new Error(t)}const{topic:n,event:r,chainId:s}=e;yield t.isValidSessionTopic(n);const{namespaces:i}=t.client.session.get(n);if(!qo(i,s)){const{message:e}=Oo("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(e)}if(!function(e){return!(Uo(e)||!Mo(e.name,!1))}(r)){const{message:e}=Oo("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(e)}if(!function(e,t,n){return!!Mo(n,!1)&&function(e,t){const n=[];return Object.values(e).forEach(e=>{Co(e.accounts).includes(t)&&n.push(...e.events)}),n}(e,t).includes(n)}(i,s,r.name)){const{message:e}=Oo("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(e)}});return function(t){return e.apply(this,arguments)}}()),zd(this,"isValidDisconnect",function(){var e=(0,r.Z)(function*(e){if(!Wo(e)){const{message:t}=Oo("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:n}=e;yield t.isValidSessionOrPairingTopic(n)});return function(t){return e.apply(this,arguments)}}()),zd(this,"isValidAuthenticate",e=>{const{chains:t,uri:n,domain:r,nonce:s}=e;if(!Array.isArray(t)||0===t.length)throw new Error("chains is required and must be a non-empty array");if(!Mo(n,!1))throw new Error("uri is required parameter");if(!Mo(r,!1))throw new Error("domain is required parameter");if(!Mo(s,!1))throw new Error("nonce is required parameter");if([...new Set(t.map(e=>pe(e).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:i}=pe(t[0]);if("eip155"!==i)throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),zd(this,"getVerifyContext",function(){var e=(0,r.Z)(function*(e){const{attestationId:n,hash:r,encryptedId:s,metadata:i,transportType:o}=e,a={verified:{verifyUrl:i.verifyUrl||ya,validation:"UNKNOWN",origin:i.url||""}};try{if(o===da.link_mode){const e=t.getAppLinkIfEnabled(i,o);return a.verified.validation=e&&new URL(e).origin===new URL(i.url).origin?"VALID":"INVALID",a}const e=yield t.client.core.verify.resolve({attestationId:n,hash:r,encryptedId:s,verifyUrl:i.verifyUrl});e&&(a.verified.origin=e.origin,a.verified.isScam=e.isScam,a.verified.validation=e.origin===new URL(i.url).origin?"VALID":"INVALID")}catch(c){t.client.logger.warn(c)}return t.client.logger.debug(`Verify context: ${JSON.stringify(a)}`),a});return function(t){return e.apply(this,arguments)}}()),zd(this,"validateSessionProps",(e,t)=>{Object.values(e).forEach((n,r)=>{if(null==n){const{message:s}=Oo("MISSING_OR_INVALID",`${t} must contain an existing value for each key. Received: ${n} for key ${Object.keys(e)[r]}`);throw new Error(s)}})}),zd(this,"getPendingAuthRequest",e=>{const t=this.client.auth.requests.get(e);return"object"==typeof t?t:void 0}),zd(this,"addToRecentlyDeleted",(e,t)=>{if(this.recentlyDeletedMap.set(e,t),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let e=0;const t=this.recentlyDeletedLimit/2;for(const n of this.recentlyDeletedMap.keys()){if(e++>=t)break;this.recentlyDeletedMap.delete(n)}}}),zd(this,"checkRecentlyDeleted",e=>{const t=this.recentlyDeletedMap.get(e);if(t){const{message:n}=Oo("MISSING_OR_INVALID",`Record was recently deleted - ${t}: ${e}`);throw new Error(n)}}),zd(this,"isLinkModeEnabled",(e,t)=>{var n,r,s,i,o,a,c,l,d;return!(!e||t!==da.link_mode)&&!0===(null==(r=null==(n=this.client.metadata)?void 0:n.redirect)?void 0:r.linkMode)&&void 0!==(null==(i=null==(s=this.client.metadata)?void 0:s.redirect)?void 0:i.universal)&&""!==(null==(a=null==(o=this.client.metadata)?void 0:o.redirect)?void 0:a.universal)&&void 0!==(null==(c=e?.redirect)?void 0:c.universal)&&""!==(null==(l=e?.redirect)?void 0:l.universal)&&!0===(null==(d=e?.redirect)?void 0:d.linkMode)&&this.client.core.linkModeSupportedApps.includes(e.redirect.universal)&&typeof(null==global?void 0:global.Linking)<"u"}),zd(this,"getAppLinkIfEnabled",(e,t)=>{var n;return this.isLinkModeEnabled(e,t)?null==(n=e?.redirect)?void 0:n.universal:void 0}),zd(this,"handleLinkModeMessage",({url:e})=>{if(!e||!e.includes("wc_ev")||!e.includes("topic"))return;const t=Ke(e,"topic")||"",n=decodeURIComponent(Ke(e,"wc_ev")||""),r=this.client.session.keys.includes(t);r&&this.client.session.update(t,{transportType:da.link_mode}),this.client.core.dispatchEnvelope({topic:t,message:n,sessionExists:r})}),zd(this,"registerLinkModeListeners",(0,r.Z)(function*(){var e;if(ze()||Ie()&&null!=(e=t.client.metadata.redirect)&&e.linkMode){const e=null==global?void 0:global.Linking;if(typeof e<"u"){e.addEventListener("url",t.handleLinkModeMessage,t.client.name);const n=yield e.getInitialURL();n&&setTimeout(()=>{t.handleLinkModeMessage({url:n})},50)}}})),zd(this,"getTVFApproveParams",e=>{try{const t=Ao(e.namespaces),n=function(e){const t=[];return Object.values(e).forEach(e=>{t.push(...e.methods)}),[...new Set(t)]}(e.namespaces),r=function(e){const t=[];return Object.values(e).forEach(e=>{t.push(...e.events)}),[...new Set(t)]}(e.namespaces);return{approvedChains:t,approvedMethods:n,approvedEvents:r,sessionProperties:e.sessionProperties,scopedProperties:e.scopedProperties}}catch(t){return this.client.logger.warn(t,"Error getting TVF approve params"),{}}}),zd(this,"getTVFParams",(e,t,n)=>{var r,s,i;if(null==(r=t.request)||!r.method)return{};const o={correlationId:e,rpcMethods:[t.request.method],chainId:t.chainId};try{const e=this.extractTxHashesFromResult(t.request,n);o.txHashes=e,o.contractAddresses=this.isValidContractData(t.request.params)?[null==(i=null==(s=t.request.params)?void 0:s[0])?void 0:i.to]:[]}catch(a){this.client.logger.warn(a,"Error getting TVF params")}return o}),zd(this,"isValidContractData",e=>{var t;if(!e)return!1;try{const n=e?.data||(null==(t=e?.[0])?void 0:t.data);if(!n.startsWith("0x"))return!1;const r=n.slice(2);return!!/^[0-9a-fA-F]*$/.test(r)&&r.length%2==0}catch{}return!1}),zd(this,"extractTxHashesFromResult",(e,t)=>{var n;try{if(!t)return[];const r=e.method,s=Md[r];if("sui_signTransaction"===r)return[Zn(t.transactionBytes)];if("near_signTransaction"===r)return[Hn(t)];if("near_signTransactions"===r)return t.map(e=>Hn(e));if("xrpl_signTransactionFor"===r||"xrpl_signTransaction"===r)return[null==(n=t.tx_json)?void 0:n.hash];if("polkadot_signTransaction"===r)return[Yo({transaction:e.params.transactionPayload,signature:t.signature})];if("algo_signTxn"===r)return ko(t)?t.map(e=>Kn(e)):[Kn(t)];if("cosmos_signDirect"===r)return[zn(t)];if("wallet_sendCalls"===r)return function(e){var n,r;const s=[];try{if("string"==typeof e)return s.push(e),s;if("object"!=typeof e)return s;null!=e&&e.id&&s.push(e.id);const t=null==(r=null==(n=e?.capabilities)?void 0:n.caip345)?void 0:r.transactionHashes;t&&s.push(...t)}catch(t){console.warn("getWalletSendCallsHashes failed: ",t)}return s}(t);if("string"==typeof t)return[t];const i=t[s.key];if(ko(i))return"solana_signAllTransactions"===r?i.map(e=>function(e){const t=atob(e),n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);const r=n[0];if(0===r)throw new Error("No signatures found");if(n.length<1+64*r)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const s=Buffer.from(e,"base64").slice(1,65);return x.encode(s)}(e)):i;if("string"==typeof i)return[i]}catch(r){this.client.logger.warn(r,"Error extracting tx hashes from result")}return[]})}processPendingMessageEvents(){var e=this;return(0,r.Z)(function*(){try{const t=e.client.core.relayer.messages.getWithoutAck(e.client.session.keys);for(const[n,r]of Object.entries(t))for(const t of r)try{yield e.onProviderMessageEvent({topic:n,message:t,publishedAt:Date.now()})}catch{e.client.logger.warn(`Error processing pending message event for topic: ${n}, message: ${t}`)}}catch(t){e.client.logger.warn(t,"processPendingMessageEvents failed")}})()}isInitialized(){if(!this.initialized){const{message:e}=Oo("NOT_INITIALIZED",this.name);throw new Error(e)}}confirmOnlineStateOrThrow(){var e=this;return(0,r.Z)(function*(){yield e.client.core.relayer.confirmOnlineStateOrThrow()})()}registerRelayerEvents(){this.client.core.relayer.on("relayer_message",e=>{this.onProviderMessageEvent(e)})}onRelayMessage(e){var t=this;return(0,r.Z)(function*(){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=t.client.auth.authKeys.keys.includes(Bd)?t.client.auth.authKeys.get(Bd):{responseTopic:void 0,publicKey:void 0};try{const e=yield t.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===da.link_mode?Li:Di});(0,ea.isJsonRpcRequest)(e)?(t.client.core.history.set(n,e),yield t.onRelayEventRequest({topic:n,payload:e,attestation:s,transportType:i,encryptedId:Fi(r)})):(0,ea.isJsonRpcResponse)(e)?(yield t.client.core.history.resolve(e),yield t.onRelayEventResponse({topic:n,payload:e,transportType:i}),t.client.core.history.delete(n,e.id)):(t.client.logger.error(`onRelayMessage() -> unknown payload: ${JSON.stringify(e)}`),yield t.onRelayEventUnknownPayload({topic:n,payload:e,transportType:i})),yield t.client.core.relayer.messages.ack(n,r)}catch(a){t.client.logger.error(`onRelayMessage() -> failed to process an inbound message: ${r}`),t.client.logger.error(a)}})()}registerExpirerEvents(){var e=this;this.client.core.expirer.on(ga,function(){var t=(0,r.Z)(function*(t){const{topic:n,id:r}=Le(t.target);return r&&e.client.pendingRequest.keys.includes(r)?yield e.deletePendingSessionRequest(r,Oo("EXPIRED"),!0):r&&e.client.auth.requests.keys.includes(r)?yield e.deletePendingAuthRequest(r,Oo("EXPIRED"),!0):void(n?e.client.session.keys.includes(n)&&(yield e.deleteSession({topic:n,expirerHasDeleted:!0}),e.client.events.emit("session_expire",{topic:n})):r&&(yield e.deleteProposal(r,!0),e.client.events.emit("proposal_expire",{id:r})))});return function(e){return t.apply(this,arguments)}}())}registerPairingEvents(){this.client.core.pairing.events.on("pairing_create",e=>this.onPairingCreated(e)),this.client.core.pairing.events.on("pairing_delete",e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Mo(e,!1)){const{message:t}=Oo("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=Oo("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if($e(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=Oo("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}isValidSessionTopic(e){var t=this;return(0,r.Z)(function*(){if(!Mo(e,!1)){const{message:t}=Oo("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(t.checkRecentlyDeleted(e),!t.client.session.keys.includes(e)){const{message:t}=Oo("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if($e(t.client.session.get(e).expiry)){yield t.deleteSession({topic:e});const{message:n}=Oo("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!t.client.core.crypto.keychain.has(e)){const{message:n}=Oo("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw yield t.deleteSession({topic:e}),new Error(n)}})()}isValidSessionOrPairingTopic(e){var t=this;return(0,r.Z)(function*(){if(t.checkRecentlyDeleted(e),t.client.session.keys.includes(e))yield t.isValidSessionTopic(e);else{if(!t.client.core.pairing.pairings.keys.includes(e)){if(Mo(e,!1)){const{message:t}=Oo("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}{const{message:t}=Oo("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}t.isValidPairingTopic(e)}})()}isValidProposalId(e){var t=this;return(0,r.Z)(function*(){if(!function(e){return"number"==typeof e}(e)){const{message:t}=Oo("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!t.client.proposal.keys.includes(e)){const{message:t}=Oo("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if($e(t.client.proposal.get(e).expiryTimestamp)){yield t.deleteProposal(e);const{message:n}=Oo("EXPIRED",`proposal id: ${e}`);throw new Error(n)}})()}validateRequestExpiry(e){if(e&&!function(e,t){return Do(e,!1)&&e<=t.max&&e>=t.min}(e,Ud)){const{message:t}=Oo("MISSING_OR_INVALID",`request() expiry: ${e}. Expiry must be a number (in seconds) between ${Ud.min} and ${Ud.max}`);throw new Error(t)}}}class Jd extends Jl{constructor(e,t){super(e,t,"proposal",Rd),this.core=e,this.logger=t}}class Yd extends Jl{constructor(e,t){super(e,t,"session",Rd),this.core=e,this.logger=t}}class Xd extends Jl{constructor(e,t){super(e,t,"request",Rd,e=>e.id),this.core=e,this.logger=t}}class Qd extends Jl{constructor(e,t){super(e,t,"authKeys",Ld,()=>Bd),this.core=e,this.logger=t}}class eu extends Jl{constructor(e,t){super(e,t,"pairingTopics",Ld),this.core=e,this.logger=t}}class tu extends Jl{constructor(e,t){super(e,t,"requests",Ld,e=>e.id),this.core=e,this.logger=t}}var nu=Object.defineProperty,ru=(e,t,n)=>((e,t,n)=>t in e?nu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class su{constructor(e,t){this.core=e,this.logger=t,ru(this,"authKeys"),ru(this,"pairingTopics"),ru(this,"requests"),this.authKeys=new Qd(this.core,this.logger),this.pairingTopics=new eu(this.core,this.logger),this.requests=new tu(this.core,this.logger)}init(){var e=this;return(0,r.Z)(function*(){yield e.authKeys.init(),yield e.pairingTopics.init(),yield e.requests.init()})()}}var iu=Object.defineProperty,ou=(e,t,n)=>((e,t,n)=>t in e?iu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class au extends class{constructor(e){this.opts=e,N(this,"protocol","wc"),N(this,"version",2)}}{constructor(e){var t;super(e),t=this,ou(this,"protocol","wc"),ou(this,"version",2),ou(this,"name","client"),ou(this,"metadata"),ou(this,"core"),ou(this,"logger"),ou(this,"events",new l.EventEmitter),ou(this,"engine"),ou(this,"session"),ou(this,"proposal"),ou(this,"pendingRequest"),ou(this,"auth"),ou(this,"signConfig"),ou(this,"on",(e,t)=>this.events.on(e,t)),ou(this,"once",(e,t)=>this.events.once(e,t)),ou(this,"off",(e,t)=>this.events.off(e,t)),ou(this,"removeListener",(e,t)=>this.events.removeListener(e,t)),ou(this,"removeAllListeners",e=>this.events.removeAllListeners(e)),ou(this,"connect",function(){var e=(0,r.Z)(function*(e){try{return yield t.engine.connect(e)}catch(n){throw t.logger.error(n.message),n}});return function(t){return e.apply(this,arguments)}}()),ou(this,"pair",function(){var e=(0,r.Z)(function*(e){try{return yield t.engine.pair(e)}catch(n){throw t.logger.error(n.message),n}});return function(t){return e.apply(this,arguments)}}()),ou(this,"approve",function(){var e=(0,r.Z)(function*(e){try{return yield t.engine.approve(e)}catch(n){throw t.logger.error(n.message),n}});return function(t){return e.apply(this,arguments)}}()),ou(this,"reject",function(){var e=(0,r.Z)(function*(e){try{return yield t.engine.reject(e)}catch(n){throw t.logger.error(n.message),n}});return function(t){return e.apply(this,arguments)}}()),ou(this,"update",function(){var e=(0,r.Z)(function*(e){try{return yield t.engine.update(e)}catch(n){throw t.logger.error(n.message),n}});return function(t){return e.apply(this,arguments)}}()),ou(this,"extend",function(){var e=(0,r.Z)(function*(e){try{return yield t.engine.extend(e)}catch(n){throw t.logger.error(n.message),n}});return function(t){return e.apply(this,arguments)}}()),ou(this,"request",function(){var e=(0,r.Z)(function*(e){try{return yield t.engine.request(e)}catch(n){throw t.logger.error(n.message),n}});return function(t){return e.apply(this,arguments)}}()),ou(this,"respond",function(){var e=(0,r.Z)(function*(e){try{return yield t.engine.respond(e)}catch(n){throw t.logger.error(n.message),n}});return function(t){return e.apply(this,arguments)}}()),ou(this,"ping",function(){var e=(0,r.Z)(function*(e){try{return yield t.engine.ping(e)}catch(n){throw t.logger.error(n.message),n}});return function(t){return e.apply(this,arguments)}}()),ou(this,"emit",function(){var e=(0,r.Z)(function*(e){try{return yield t.engine.emit(e)}catch(n){throw t.logger.error(n.message),n}});return function(t){return e.apply(this,arguments)}}()),ou(this,"disconnect",function(){var e=(0,r.Z)(function*(e){try{return yield t.engine.disconnect(e)}catch(n){throw t.logger.error(n.message),n}});return function(t){return e.apply(this,arguments)}}()),ou(this,"find",e=>{try{return this.engine.find(e)}catch(t){throw this.logger.error(t.message),t}}),ou(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}}),ou(this,"authenticate",function(){var e=(0,r.Z)(function*(e,n){try{return yield t.engine.authenticate(e,n)}catch(r){throw t.logger.error(r.message),r}});return function(t,n){return e.apply(this,arguments)}}()),ou(this,"formatAuthMessage",e=>{try{return this.engine.formatAuthMessage(e)}catch(t){throw this.logger.error(t.message),t}}),ou(this,"approveSessionAuthenticate",function(){var e=(0,r.Z)(function*(e){try{return yield t.engine.approveSessionAuthenticate(e)}catch(n){throw t.logger.error(n.message),n}});return function(t){return e.apply(this,arguments)}}()),ou(this,"rejectSessionAuthenticate",function(){var e=(0,r.Z)(function*(e){try{return yield t.engine.rejectSessionAuthenticate(e)}catch(n){throw t.logger.error(n.message),n}});return function(t){return e.apply(this,arguments)}}()),this.name=e?.name||"client",this.metadata=function(e){var t,n;const r=Re();try{return null!=e&&e.url&&r.url&&new URL(e.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${e.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),e.url=r.url),null!=(t=e?.icons)&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter(e=>""!==e)),((e,t)=>ge(e,me(t)))(Ee(Ee({},r),e),{url:e?.url||r.url,name:e?.name||r.name,description:e?.description||r.description,icons:null!=(n=e?.icons)&&n.length&&e.icons.length>0?e.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),e||r}}(e?.metadata),this.signConfig=e?.signConfig;const n=Xo({logger:e?.logger||"error",name:this.name});this.logger=n,this.core=e?.core||new Td(e),this.session=new Yd(this.core,this.logger),this.proposal=new Jd(this.core,this.logger),this.pendingRequest=new Xd(this.core,this.logger),this.engine=new Gd(this),this.auth=new su(this.core,this.logger)}static init(e){return(0,r.Z)(function*(){const t=new au(e);return yield t.initialize(),t})()}get context(){return(0,p.Fd)(this.logger)}get pairing(){return this.core.pairing.pairings}initialize(){var e=this;return(0,r.Z)(function*(){e.logger.trace("Initialized");try{yield e.core.start(),yield e.session.init(),yield e.proposal.init(),yield e.pendingRequest.init(),yield e.auth.init(),yield e.engine.init(),e.logger.info("SignClient Initialization Success")}catch(t){throw e.logger.info("SignClient Initialization Failure"),e.logger.error(t.message),t}})()}}const cu=au;var lu=n(39330);function du(e){return null==e||"object"!=typeof e&&"function"!=typeof e}function uu(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function pu(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const hu="[object String]",fu="[object Number]",gu="[object Boolean]",mu="[object Arguments]";function yu(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function bu(e,t,n,r=new Map,s){const i=s?.(e,t,n,r);if(null!=i)return i;if(du(e))return e;if(r.has(e))return r.get(e);if(Array.isArray(e)){const t=new Array(e.length);r.set(e,t);for(let i=0;i<e.length;i++)t[i]=bu(e[i],i,n,r,s);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;r.set(e,t);for(const[i,o]of e)t.set(i,bu(o,i,n,r,s));return t}if(e instanceof Set){const t=new Set;r.set(e,t);for(const i of e)t.add(bu(i,void 0,n,r,s));return t}if(typeof Buffer<"u"&&Buffer.isBuffer(e))return e.subarray();if(yu(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);r.set(e,t);for(let i=0;i<e.length;i++)t[i]=bu(e[i],i,n,r,s);return t}if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return r.set(e,t),wu(t,e,n,r,s),t}if(typeof File<"u"&&e instanceof File){const t=new File([e],e.name,{type:e.type});return r.set(e,t),wu(t,e,n,r,s),t}if(e instanceof Blob){const t=new Blob([e],{type:e.type});return r.set(e,t),wu(t,e,n,r,s),t}if(e instanceof Error){const t=new e.constructor;return r.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,wu(t,e,n,r,s),t}if("object"==typeof e&&function(e){switch(pu(e)){case mu:case"[object Array]":case"[object ArrayBuffer]":case"[object DataView]":case gu:case"[object Date]":case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Map]":case fu:case"[object Object]":case"[object RegExp]":case"[object Set]":case hu:case"[object Symbol]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return r.set(e,t),wu(t,e,n,r,s),t}return e}function wu(e,t,n=e,r,s){const i=[...Object.keys(t),...uu(t)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(e,a);(null==c||c.writable)&&(e[a]=bu(t[a],a,n,r,s))}}function vu(e){return function(e,t){return function(e,t){return bu(e,void 0,e,new Map,t)}(e,(n,r,s,i)=>{const o=t?.(n,r,s,i);if(null!=o)return o;if("object"==typeof e)switch(Object.prototype.toString.call(e)){case fu:case hu:case gu:{const t=new e.constructor(e?.valueOf());return wu(t,e),t}case mu:{const t={};return wu(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}})}(e)}function Eu(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===pu(e)}function Cu(e){return"object"==typeof e&&null!==e}function Au(){}function Nu(e){return yu(e)}function Iu(e){if("object"!=typeof e||null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){const t=e[Symbol.toStringTag];return!(null==t||!Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable)&&e.toString()===`[object ${t}]`}let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function _u(e,t,n,r){if(du(e)&&(e=Object(e)),null==t||"object"!=typeof t)return e;if(r.has(t))return function(e){if(du(e))return e;if(Array.isArray(e)||yu(e)||e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);const t=Object.getPrototypeOf(e),n=t.constructor;if(e instanceof Date||e instanceof Map||e instanceof Set)return new n(e);if(e instanceof RegExp){const t=new n(e);return t.lastIndex=e.lastIndex,t}if(e instanceof DataView)return new n(e.buffer.slice(0));if(e instanceof Error){const t=new n(e.message);return t.stack=e.stack,t.name=e.name,t.cause=e.cause,t}if(typeof File<"u"&&e instanceof File)return new n([e],e.name,{type:e.type,lastModified:e.lastModified});if("object"==typeof e){const n=Object.create(t);return Object.assign(n,e)}return e}(r.get(t));if(r.set(t,e),Array.isArray(t)){t=t.slice();for(let e=0;e<t.length;e++)t[e]=t[e]??void 0}const s=[...Object.keys(t),...uu(t)];for(let i=0;i<s.length;i++){const o=s[i];let a=t[o],c=e[o];if(Eu(a)&&(a={...a}),Eu(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=vu(a)),Array.isArray(a))if("object"==typeof c&&null!=c){const e=[],t=Reflect.ownKeys(c);for(let n=0;n<t.length;n++){const r=t[n];e[r]=c[r]}c=e}else c=[];const l=n(c,a,o,e,t,r);null!=l?e[o]=l:Array.isArray(a)||Cu(c)&&Cu(a)?e[o]=_u(c,a,n,r):null==c&&Iu(a)?e[o]=_u({},a,n,r):null==c&&Nu(a)?e[o]=vu(a):(void 0===c||void 0!==a)&&(e[o]=a)}return e}const Su="universal_provider",Tu=`wc@2:${Su}:`,Ru="https://rpc.walletconnect.org/v1/",Ou="generic",Pu=`${Ru}bundler`,ku="call_status";var xu=Object.defineProperty,Uu=Object.defineProperties,Mu=Object.getOwnPropertyDescriptors,Du=Object.getOwnPropertySymbols,Lu=Object.prototype.hasOwnProperty,Bu=Object.prototype.propertyIsEnumerable,$u=(e,t,n)=>t in e?xu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ju=(e,t)=>{for(var n in t||(t={}))Lu.call(t,n)&&$u(e,n,t[n]);if(Du)for(var n of Du(t))Bu.call(t,n)&&$u(e,n,t[n]);return e},Fu=(e,t)=>Uu(e,Mu(t));function Wu(e,t,n){var r;const s=pe(e);return(null==(r=t.rpcMap)?void 0:r[s.reference])||`${Ru}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function qu(e){return e.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function Zu(e){return Object.fromEntries(Object.entries(e).filter(([e,t])=>{var n,r;return(null==(n=t?.chains)?void 0:n.length)&&(null==(r=t?.chains)?void 0:r.length)>0}))}function Hu(e={},t={}){return function(e,...t){return function(e,...t){const n=t.slice(0,-1),r=t[t.length-1];let s=e;for(let i=0;i<n.length;i++)s=_u(s,n[i],r,new Map);return s}(e,...t,Au)}(Zu(Ku(e)),Zu(Ku(t)))}function Ku(e){var t,n,r,s,i;const o={};if(!xo(e))return o;for(const[a,c]of Object.entries(e)){const e=No(a)?[a]:c.chains,l=c.methods||[],d=c.events||[],u=c.rpcMap||{},p=Io(a);o[p]=Fu(ju(ju({},o[p]),c),{chains:Fe(e,null==(t=o[p])?void 0:t.chains),methods:Fe(l,null==(n=o[p])?void 0:n.methods),events:Fe(d,null==(r=o[p])?void 0:r.events)}),(xo(u)||xo((null==(s=o[p])?void 0:s.rpcMap)||{}))&&(o[p].rpcMap=ju(ju({},u),null==(i=o[p])?void 0:i.rpcMap))}return o}function Vu(e){return e.includes(":")?e.split(":")[2]:e}function zu(e){const t={};for(const[n,r]of Object.entries(e)){const e=r.methods||[],s=r.events||[],i=r.accounts||[],o=No(n)?[n]:r.chains?r.chains:qu(r.accounts);t[n]={chains:o,methods:e,events:s,accounts:i}}return t}function Gu(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):(e=e.includes(":")?e.split(":")[1]:e,isNaN(Number(e))?e:Number(e))}const Ju={},Yu=e=>Ju[e],Xu=(e,t)=>{Ju[e]=t};var Qu=Object.defineProperty,ep=Object.getOwnPropertySymbols,tp=Object.prototype.hasOwnProperty,np=Object.prototype.propertyIsEnumerable,rp=(e,t,n)=>t in e?Qu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sp=(e,t)=>{for(var n in t||(t={}))tp.call(t,n)&&rp(e,n,t[n]);if(ep)for(var n of ep(t))np.call(t,n)&&rp(e,n,t[n]);return e};const ip=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],op=e=>e&&e.startsWith("0x")?BigInt(e).toString(10):e,ap=e=>e&&e.startsWith("0x")?e:`0x${BigInt(e).toString(16)}`,cp=e=>Object.keys(e).filter(e=>ip.includes(e)).reduce((t,n)=>(t[n]=lp(e[n]),t),{}),lp=e=>"string"==typeof e&&function(e){try{const t=JSON.parse(e);return"object"==typeof t&&null!==t&&!Array.isArray(t)}catch{return!1}}(e)?JSON.parse(e):e;var dp=Object.defineProperty;let up;class pp{constructor(e){((e,t,n)=>{((e,t,n)=>{t in e?dp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n)})(this,"storage"),this.storage=e}getItem(e){var t=this;return(0,r.Z)(function*(){return yield t.storage.getItem(e)})()}setItem(e,t){var n=this;return(0,r.Z)(function*(){return yield n.storage.setItem(e,t)})()}removeItem(e){var t=this;return(0,r.Z)(function*(){return yield t.storage.removeItem(e)})()}static getStorage(e){return up||(up=new pp(e)),up}}var hp=Object.defineProperty,fp=Object.defineProperties,gp=Object.getOwnPropertyDescriptors,mp=Object.getOwnPropertySymbols,yp=Object.prototype.hasOwnProperty,bp=Object.prototype.propertyIsEnumerable,wp=(e,t,n)=>t in e?hp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vp=(e,t)=>{for(var n in t||(t={}))yp.call(t,n)&&wp(e,n,t[n]);if(mp)for(var n of mp(t))bp.call(t,n)&&wp(e,n,t[n]);return e},Ep=(e,t)=>fp(e,gp(t));function Cp(){return Cp=(0,r.Z)(function*(e,t){const n=pe(e.result.capabilities.caip345.caip2),r=e.result.capabilities.caip345.transactionHashes,s=yield Promise.allSettled(r.map(e=>Ap(n.reference,e,t))),i=s.filter(e=>"fulfilled"===e.status).map(e=>e.value).filter(e=>e);s.filter(e=>"rejected"===e.status).forEach(e=>console.warn("Failed to fetch transaction receipt:",e.reason));const o=!i.length||i.some(e=>!e),a=i.every(e=>"0x1"===e?.status),c=i.every(e=>"0x0"===e?.status),l=i.some(e=>"0x0"===e?.status);let d;return o?d=100:a?d=200:c?d=500:l&&(d=600),{id:e.result.id,version:e.request.version,atomic:e.request.atomicRequired,chainId:e.request.chainId,capabilities:e.result.capabilities,receipts:i,status:d}}),Cp.apply(this,arguments)}function Ap(e,t,n){return Np.apply(this,arguments)}function Np(){return Np=(0,r.Z)(function*(e,t,n){return yield n(parseInt(e)).request((0,ea.formatJsonRpcRequest)("eth_getTransactionReceipt",[t]))}),Np.apply(this,arguments)}function Ip(){return Ip=(0,r.Z)(function*({sendCalls:e,storage:t}){const n=yield t.getItem(ku);yield t.setItem(ku,Ep(vp({},n),{[e.result.id]:{request:e.request,result:e.result,expiry:Be(86400)}}))}),Ip.apply(this,arguments)}function _p(e){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,r.Z)(function*({resultId:e,storage:t}){const n=yield t.getItem(ku);if(n){delete n[e],yield t.setItem(ku,n);for(const e in n)$e(n[e].expiry)&&delete n[e];yield t.setItem(ku,n)}}),Sp.apply(this,arguments)}function Tp(){return Tp=(0,r.Z)(function*({resultId:e,storage:t}){const n=(yield t.getItem(ku))?.[e];if(n&&!$e(n.expiry))return n;yield _p({resultId:e,storage:t})}),Tp.apply(this,arguments)}var Rp=Object.defineProperty,Op=Object.defineProperties,Pp=Object.getOwnPropertyDescriptors,kp=Object.getOwnPropertySymbols,xp=Object.prototype.hasOwnProperty,Up=Object.prototype.propertyIsEnumerable,Mp=(e,t,n)=>t in e?Rp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dp=(e,t)=>{for(var n in t||(t={}))xp.call(t,n)&&Mp(e,n,t[n]);if(kp)for(var n of kp(t))Up.call(t,n)&&Mp(e,n,t[n]);return e},Lp=(e,t)=>Op(e,Pp(t)),Bp=(e,t,n)=>Mp(e,"symbol"!=typeof t?t+"":t,n);class $p{constructor(e){Bp(this,"name","eip155"),Bp(this,"client"),Bp(this,"chainId"),Bp(this,"namespace"),Bp(this,"httpProviders"),Bp(this,"events"),Bp(this,"storage"),this.namespace=e.namespace,this.events=Yu("events"),this.client=Yu("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain()),this.storage=pp.getStorage(this.client.core.storage)}request(e){var t=this;return(0,r.Z)(function*(){switch(e.request.method){case"eth_requestAccounts":case"eth_accounts":return t.getAccounts();case"wallet_switchEthereumChain":return yield t.handleSwitchChain(e);case"eth_chainId":return parseInt(t.getDefaultChain());case"wallet_getCapabilities":return yield t.getCapabilities(e);case"wallet_getCallsStatus":return yield t.getCallStatus(e);case"wallet_sendCalls":return yield t.sendCalls(e)}return t.namespace.methods.includes(e.request.method)?yield t.client.request(e):t.getHttpProvider().request(e.request)})()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t);const n=this.chainId;this.chainId=parseInt(e),this.events.emit("default_chain_changed",{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${n}`})}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const n=t||Wu(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qo.r(new lu.k(n,Yu("disableProviderPing")))}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var n;const r=parseInt(function(e){return e.includes(":")?e.split(":")[1]:e}(t));e[r]=this.createHttpProvider(r,null==(n=this.namespace.rpcMap)?void 0:n[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}getHttpProvider(e){const t=e||this.chainId;return this.httpProviders[t]||(this.httpProviders=Lp(Dp({},this.httpProviders),{[t]:this.createHttpProvider(t)}),this.httpProviders[t])}handleSwitchChain(e){var t=this;return(0,r.Z)(function*(){var n,r;let s=e.request.params?null==(n=e.request.params[0])?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(t.isChainApproved(i))t.setDefaultChain(`${i}`);else{if(!t.namespace.methods.includes("wallet_switchEthereumChain"))throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);yield t.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:null==(r=t.namespace.chains)?void 0:r[0]}),t.setDefaultChain(`${i}`)}return null})()}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}getCapabilities(e){var t=this;return(0,r.Z)(function*(){var n,r,s,i,o;const a=null==(r=null==(n=e.request)?void 0:n.params)?void 0:r[0],c=(null==(i=null==(s=e.request)?void 0:s.params)?void 0:i[1])||[];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const l=t.client.session.get(e.topic),d=(null==(o=l?.sessionProperties)?void 0:o.capabilities)||{},u=`${a}${c.length>0?c.join(","):`0x${t.chainId.toString(16)}`}`,p=d?.[u];if(p)return p;let h;try{h=((e,t,n)=>{const{sessionProperties:r={},scopedProperties:s={}}=e,i={};if(!xo(s)&&!xo(r))return;const o=cp(r);for(const a of n){const e=op(a);if(!e)continue;i[ap(e)]=o;const n=s?.[`eip155:${e}`];if(n){const r=n?.[`eip155:${e}:${t}`];i[ap(e)]=sp(sp({},i[ap(e)]),cp(r||n))}}for(const[a,c]of Object.entries(i))0===Object.keys(c).length&&delete i[a];return Object.keys(i).length>0?i:void 0})(l,a,c)}catch(g){console.warn("Failed to extract capabilities from session",g)}if(h)return h;const f=yield t.client.request(e);try{yield t.client.session.update(e.topic,{sessionProperties:Lp(Dp({},l.sessionProperties||{}),{capabilities:Lp(Dp({},d||{}),{[u]:f})})})}catch(g){console.warn("Failed to update session with capabilities",g)}return f})()}getCallStatus(e){var t=this;return(0,r.Z)(function*(){var n,r,s;const i=t.client.session.get(e.topic),o=null==(n=i.sessionProperties)?void 0:n.bundler_name;if(o){const n=t.getBundlerUrl(e.chainId,o);try{return yield t.getUserOperationReceipt(n,e)}catch(l){console.warn("Failed to fetch call status from bundler",l,n)}}const a=null==(r=i.sessionProperties)?void 0:r.bundler_url;if(a)try{return yield t.getUserOperationReceipt(a,e)}catch(d){console.warn("Failed to fetch call status from custom bundler",d,a)}const c=yield function(e){return Tp.apply(this,arguments)}({resultId:null==(s=e.request.params)?void 0:s[0],storage:t.storage});if(c)try{return yield function(e,t){return Cp.apply(this,arguments)}(c,t.getHttpProvider.bind(t))}catch(d){console.warn("Failed to fetch call status from stored send calls",d,c)}if(t.namespace.methods.includes(e.request.method))return yield t.client.request(e);throw new Error("Fetching call status not approved by the wallet.")})()}getUserOperationReceipt(e,t){return(0,r.Z)(function*(){var n;const r=new URL(e),s=yield fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,ea.formatJsonRpcRequest)("eth_getUserOperationReceipt",[null==(n=t.request.params)?void 0:n[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return yield s.json()})()}getBundlerUrl(e,t){return`${Pu}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}sendCalls(e){var t=this;return(0,r.Z)(function*(){var n,r,s;const i=yield t.client.request(e),o=null==(n=e.request.params)?void 0:n[0],a=i?.id,c=i?.capabilities||{},l=null==(r=c?.caip345)?void 0:r.caip2,d=null==(s=c?.caip345)?void 0:s.transactionHashes;return!a||!l||!(null!=d&&d.length)||(yield function(e){return Ip.apply(this,arguments)}({sendCalls:{request:o,result:i},storage:t.storage})),i})()}}var jp=Object.defineProperty,Fp=(e,t,n)=>((e,t,n)=>t in e?jp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class Wp{constructor(e){Fp(this,"name",Ou),Fp(this,"client"),Fp(this,"httpProviders"),Fp(this,"events"),Fp(this,"namespace"),Fp(this,"chainId"),this.namespace=e.namespace,this.events=Yu("events"),this.client=Yu("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t);const n=this.chainId;this.chainId=e,this.events.emit("default_chain_changed",{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${n}`})}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getNamespaceName(){const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return pe(e).namespace}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){var e,t;const n={};return null==(t=null==(e=this.namespace)?void 0:e.accounts)||t.forEach(e=>{var t,r;const s=pe(e),i=null==(r=null==(t=this.namespace)?void 0:t.rpcMap)?void 0:r[`${s.namespace}:${s.reference}`];n[s.reference]=this.createHttpProvider(e,i)}),n}getHttpProvider(e){const t=pe(e).reference,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||Wu(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qo.r(new lu.Z(n,Yu("disableProviderPing")))}}var qp=Object.defineProperty,Zp=Object.defineProperties,Hp=Object.getOwnPropertyDescriptors,Kp=Object.getOwnPropertySymbols,Vp=Object.prototype.hasOwnProperty,zp=Object.prototype.propertyIsEnumerable,Gp=(e,t,n)=>t in e?qp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jp=(e,t)=>{for(var n in t||(t={}))Vp.call(t,n)&&Gp(e,n,t[n]);if(Kp)for(var n of Kp(t))zp.call(t,n)&&Gp(e,n,t[n]);return e},Yp=(e,t)=>Zp(e,Hp(t)),Xp=(e,t,n)=>Gp(e,"symbol"!=typeof t?t+"":t,n);class Qp{constructor(e){var t,n;Xp(this,"client"),Xp(this,"namespaces"),Xp(this,"optionalNamespaces"),Xp(this,"sessionProperties"),Xp(this,"scopedProperties"),Xp(this,"events",new l),Xp(this,"rpcProviders",{}),Xp(this,"session"),Xp(this,"providerOpts"),Xp(this,"logger"),Xp(this,"uri"),Xp(this,"disableProviderPing",!1),Xp(this,"connectParams"),this.providerOpts=e,this.logger=Xo({logger:null!=(t=e.logger)?t:"error",name:null!=(n=this.providerOpts.name)?n:Su}),this.disableProviderPing=e?.disableProviderPing||!1}static init(e){return(0,r.Z)(function*(){const t=new Qp(e);return yield t.initialize(),t})()}request(e,t,n){var s=this;return(0,r.Z)(function*(){const[r,i]=s.validateChain(t);if(!s.session)throw new Error("Please call connect() before request()");return yield s.getProvider(r).request({request:Jp({},e),chainId:`${r}:${i}`,topic:s.session.topic,expiry:n})})()}sendAsync(e,t,n,r){const s=(new Date).getTime();this.request(e,n,r).then(e=>t(null,(0,ea.formatJsonRpcResult)(s,e))).catch(e=>t(e,void 0))}enable(){var e=this;return(0,r.Z)(function*(){if(!e.client)throw new Error("Sign Client not initialized");return e.session||(yield e.connect({namespaces:e.namespaces,optionalNamespaces:e.optionalNamespaces,sessionProperties:e.sessionProperties,scopedProperties:e.scopedProperties})),yield e.requestAccounts()})()}disconnect(){var e=this;return(0,r.Z)(function*(){var t;if(!e.session)throw new Error("Please call connect() before enable()");yield e.client.disconnect({topic:null==(t=e.session)?void 0:t.topic,reason:Po("USER_DISCONNECTED")}),yield e.cleanup()})()}connect(e){var t=this;return(0,r.Z)(function*(){if(!t.client)throw new Error("Sign Client not initialized");if(t.connectParams=e,t.setNamespaces(e),t.cleanupPendingPairings(),!e.skipPairing)return yield t.pair(e.pairingTopic)})()}authenticate(e,t){var n=this;return(0,r.Z)(function*(){if(!n.client)throw new Error("Sign Client not initialized");n.setNamespaces(e),yield n.cleanupPendingPairings();const{uri:r,response:s}=yield n.client.authenticate(e,t);r&&(n.uri=r,n.events.emit("display_uri",r));const i=yield s();if(n.session=i.session,n.session){const e=zu(n.session.namespaces);n.namespaces=Hu(n.namespaces,e),yield n.persist("namespaces",n.namespaces),n.onConnect()}return i})()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}pair(e){var t=this;return(0,r.Z)(function*(){var n,r;const{uri:s,approval:i}=yield t.client.connect({pairingTopic:e,requiredNamespaces:t.namespaces,optionalNamespaces:t.optionalNamespaces,sessionProperties:t.sessionProperties,scopedProperties:t.scopedProperties,authentication:null==(n=t.connectParams)?void 0:n.authentication,walletPay:null==(r=t.connectParams)?void 0:r.walletPay});s&&(t.uri=s,t.events.emit("display_uri",s));const o=yield i();t.session=o;const a=zu(o.namespaces);return t.namespaces=Hu(t.namespaces,a),yield t.persist("namespaces",t.namespaces),yield t.persist("optionalNamespaces",t.optionalNamespaces),t.onConnect(),t.session})()}setDefaultChain(e,t){try{if(!this.session)return;const[n,r]=this.validateChain(e);this.getProvider(n).setDefaultChain(r,t)}catch(n){if(!/Please call connect/.test(n.message))throw n}}cleanupPendingPairings(e={}){var t=this;return(0,r.Z)(function*(){try{t.logger.info("Cleaning up inactive pairings...");const n=t.client.pairing.getAll();if(!ko(n))return;for(const r of n)e.deletePairings?t.client.core.expirer.set(r.topic,0):yield t.client.core.relayer.subscriber.unsubscribe(r.topic);t.logger.info(`Inactive pairings cleared: ${n.length}`)}catch(n){t.logger.warn(n,"Failed to cleanup pending pairings")}})()}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}checkStorage(){var e=this;return(0,r.Z)(function*(){e.namespaces=(yield e.getFromStore("namespaces"))||{},e.optionalNamespaces=(yield e.getFromStore("optionalNamespaces"))||{},e.session&&e.createProviders()})()}initialize(){var e=this;return(0,r.Z)(function*(){e.logger.trace("Initialized"),yield e.createClient(),yield e.checkStorage(),e.registerEventListeners()})()}createClient(){var e=this;return(0,r.Z)(function*(){var t,n;if(e.client=e.providerOpts.client||(yield cu.init({core:e.providerOpts.core,logger:e.providerOpts.logger||"error",relayUrl:e.providerOpts.relayUrl||"wss://relay.walletconnect.org",projectId:e.providerOpts.projectId,metadata:e.providerOpts.metadata,storageOptions:e.providerOpts.storageOptions,storage:e.providerOpts.storage,name:e.providerOpts.name,customStoragePrefix:e.providerOpts.customStoragePrefix,telemetryEnabled:e.providerOpts.telemetryEnabled})),e.providerOpts.session)try{e.session=e.client.session.get(e.providerOpts.session.topic)}catch(r){throw e.logger.error(r,"Failed to get session"),new Error(`The provided session: ${null==(n=null==(t=e.providerOpts)?void 0:t.session)?void 0:n.topic} doesn't exist in the Sign client`)}else{const t=e.client.session.getAll();e.session=t[0]}e.logger.trace("SignClient Initialized")})()}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(e=>Io(e)))];Xu("client",this.client),Xu("events",this.events),Xu("disableProviderPing",this.disableProviderPing),e.forEach(e=>{if(!this.session)return;const t=function(e,t){const n=Object.keys(t.namespaces).filter(t=>t.includes(e));if(!n.length)return[];const r=[];return n.forEach(e=>{r.push(...t.namespaces[e].accounts)}),r}(e,this.session);if(0===t?.length)return;const n=qu(t),r=Hu(this.namespaces,this.optionalNamespaces),s=Yp(Jp({},r[e]),{accounts:t,chains:n});this.rpcProviders[e]="eip155"===e?new $p({namespace:s}):new Wp({namespace:s})})}registerEventListeners(){var e=this;if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var t;const{topic:n}=e;n===(null==(t=this.session)?void 0:t.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var t;const{params:n,topic:r}=e;if(r!==(null==(t=this.session)?void 0:t.topic))return;const{event:s}=n;if("accountsChanged"===s.name){const e=s.data;e&&ko(e)&&this.events.emit("accountsChanged",e.map(Vu))}else if("chainChanged"===s.name){const e=n.chainId,t=n.event.data,r=Io(e),s=Gu(e)!==Gu(t)?`${r}:${Gu(t)}`:e;this.onChainChanged({currentCaipChainId:s})}else this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var n,r;if(e!==(null==(n=this.session)?void 0:n.topic))return;const{namespaces:s}=t,i=null==(r=this.client)?void 0:r.session.get(e);this.session=Yp(Jp({},i),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",function(){var t=(0,r.Z)(function*(t){var n;t.topic===(null==(n=e.session)?void 0:n.topic)&&(yield e.cleanup(),e.events.emit("session_delete",t),e.events.emit("disconnect",Yp(Jp({},Po("USER_DISCONNECTED")),{data:t.topic})))});return function(e){return t.apply(this,arguments)}}()),this.on("default_chain_changed",e=>{this.onChainChanged(Yp(Jp({},e),{internal:!0}))})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Ou]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace(null==(t=this.session)?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t={},optionalNamespaces:n={},sessionProperties:r,scopedProperties:s}=e;this.optionalNamespaces=Hu(t,n),this.sessionProperties=r,this.scopedProperties=s}validateChain(e){const[t,n]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,n];if(t&&!Object.keys(this.namespaces||{}).map(e=>Io(e)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&n)return[t,n];const r=Io(Object.keys(this.namespaces)[0]);return[r,this.rpcProviders[r].getDefaultChain()]}requestAccounts(){var e=this;return(0,r.Z)(function*(){const[t]=e.validateChain();return yield e.getProvider(t).requestAccounts()})()}onChainChanged({currentCaipChainId:e,previousCaipChainId:t,internal:n=!1}){var s=this;return(0,r.Z)(function*(){if(!s.namespaces)return;const[r,i]=s.validateChain(e);i&&(s.updateNamespaceChain(r,i),n?(s.events.emit("chainChanged",i),s.emitAccountsChangedOnChainChange({namespace:r,currentCaipChainId:e,previousCaipChainId:t})):s.getProvider(r).setDefaultChain(i),yield s.persist("namespaces",s.namespaces))})()}emitAccountsChangedOnChainChange({namespace:e,currentCaipChainId:t,previousCaipChainId:n}){var r,s;try{if(n===t)return;const i=null==(s=null==(r=this.session)?void 0:r.namespaces[e])?void 0:s.accounts;if(!i)return;const o=i.filter(e=>e.includes(`${t}:`)).map(Vu);if(!ko(o))return;this.events.emit("accountsChanged",o)}catch(i){this.logger.warn(i,"Failed to emit accountsChanged on chain change")}}updateNamespaceChain(e,t){if(!this.namespaces)return;const n=this.namespaces[e]?e:`${e}:${t}`,r={chains:[],methods:[],events:[],defaultChain:t};this.namespaces[n]?this.namespaces[n]&&(this.namespaces[n].defaultChain=t):this.namespaces[n]=r}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}cleanup(){var e=this;return(0,r.Z)(function*(){e.connectParams=void 0,e.namespaces=void 0,e.optionalNamespaces=void 0,e.sessionProperties=void 0,yield e.deleteFromStore("namespaces"),yield e.deleteFromStore("optionalNamespaces"),yield e.deleteFromStore("sessionProperties"),e.session=void 0,e.cleanupPendingPairings({deletePairings:!0}),yield e.cleanupStorage()})()}persist(e,t){var n=this;return(0,r.Z)(function*(){var r;const s=(null==(r=n.session)?void 0:r.topic)||"";yield n.client.core.storage.setItem(`${Tu}/${e}${s}`,t)})()}getFromStore(e){var t=this;return(0,r.Z)(function*(){var n;const r=(null==(n=t.session)?void 0:n.topic)||"";return yield t.client.core.storage.getItem(`${Tu}/${e}${r}`)})()}deleteFromStore(e){var t=this;return(0,r.Z)(function*(){var n;const r=(null==(n=t.session)?void 0:n.topic)||"";yield t.client.core.storage.removeItem(`${Tu}/${e}${r}`)})()}cleanupStorage(){var e=this;return(0,r.Z)(function*(){var t;try{if((null==(t=e.client)?void 0:t.session.length)>0)return;const n=yield e.client.core.storage.getKeys();for(const t of n)t.startsWith(Tu)&&(yield e.client.core.storage.removeItem(t))}catch(n){e.logger.warn(n,"Failed to cleanup storage")}})()}}var eh=n(72290),th=n(32750),nh=n(19579),rh=n(71848),sh=n(65023),ih=n(71166),oh=n(42916),ah=n(23250),ch=n(31254);const lh=2147483648,dh={convertEVMChainIdToCoinType(e){if(e>=lh)throw new Error("Invalid chainId");return(lh|e)>>>0}};var uh=n(79781),ph=n(40378);const hh=(0,ah.sj)({suggestions:[],loading:!1}),fh={state:hh,subscribe:e=>(0,ah.Ld)(hh,()=>e(hh)),subscribeKey:(e,t)=>(0,ch.VW)(hh,e,t),resolveName:e=>(0,r.Z)(function*(){try{return yield rh.L.lookupEnsName(e)}catch(t){throw new Error(t?.reasons?.[0]?.description||"Error resolving name")}})(),isNameRegistered:e=>(0,r.Z)(function*(){try{return yield rh.L.lookupEnsName(e),!0}catch{return!1}})(),getSuggestions:e=>(0,r.Z)(function*(){try{hh.loading=!0,hh.suggestions=[];const t=yield rh.L.getEnsNameSuggestions(e);return hh.suggestions=t.suggestions||[],hh.suggestions}catch(t){const e=gh.parseEnsApiError(t,"Error fetching name suggestions");throw new Error(e)}finally{hh.loading=!1}})(),getNamesForAddress:e=>(0,r.Z)(function*(){try{if(!i.R.state.activeCaipNetwork)return[];const t=oh.M.getEnsFromCacheForAddress(e);if(t)return t;const n=yield rh.L.reverseLookupEnsName({address:e});return oh.M.updateEnsCache({address:e,ens:n,timestamp:Date.now()}),n}catch(t){const e=gh.parseEnsApiError(t,"Error fetching names for address");throw new Error(e)}})(),registerName:e=>(0,r.Z)(function*(){const t=i.R.state.activeCaipNetwork,n=i.R.getAccountData(t?.chainNamespace)?.address,r=s.A.getAuthConnector();if(!t)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");hh.loading=!0;try{const r=JSON.stringify({name:e,attributes:{},timestamp:Math.floor(Date.now()/1e3)});ph.P.pushTransactionStack({onCancel(){ph.P.replace("RegisterAccountName")}});const s=yield o.l.signMessage(r);hh.loading=!1;const a=t.id;if(!a)throw new Error("Network not found");const c=dh.convertEVMChainIdToCoinType(Number(a));yield rh.L.registerEnsName({coinType:c,address:n,signature:s,message:r}),i.R.setAccountProp("profileName",e,t.chainNamespace),oh.M.updateEnsCache({address:n,ens:[{name:e,registered_at:(new Date).toISOString(),updated_at:void 0,addresses:{},attributes:[]}],timestamp:Date.now()}),ph.P.replace("RegisterAccountNameSuccess")}catch(a){const t=gh.parseEnsApiError(a,`Error registering name ${e}`);throw ph.P.replace("RegisterAccountName"),new Error(t)}finally{hh.loading=!1}})(),validateName:e=>/^[a-zA-Z0-9-]{4,}$/u.test(e),parseEnsApiError:(e,t)=>e?.reasons?.[0]?.description||t},gh=(0,uh.P)(fh);var mh=n(14568),yh=n(9483),bh=n(15563),wh=n(38720),vh=n(91951),Eh=n(28153);const Ch={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},Ah={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},Nh=(0,ah.sj)({providers:Eh.gy,selectedProvider:null,error:null,purchaseCurrency:Ch,paymentCurrency:Ah,purchaseCurrencies:[Ch],paymentCurrencies:[],quotesLoading:!1}),Ih={state:Nh,subscribe:e=>(0,ah.Ld)(Nh,()=>e(Nh)),subscribeKey:(e,t)=>(0,ch.VW)(Nh,e,t),setSelectedProvider(e){if(e&&"meld"===e.name){const t=i.R.state.activeChain,n=t===eh.b.CHAIN.SOLANA?"SOL":"USDC",r=t?i.R.state.chains.get(t)?.accountState?.address??"":"",s=new URL(e.url);s.searchParams.append("publicKey",Eh.a$),s.searchParams.append("destinationCurrencyCode",n),s.searchParams.append("walletAddress",r),s.searchParams.append("externalCustomerId",c.h.state.projectId),Nh.selectedProvider={...e,url:s.toString()}}else Nh.selectedProvider=e},setOnrampProviders(e){if(Array.isArray(e)&&e.every(e=>"string"==typeof e)){const t=e,n=Eh.gy.filter(e=>t.includes(e.name));Nh.providers=n}else Nh.providers=[]},setPurchaseCurrency(e){Nh.purchaseCurrency=e},setPaymentCurrency(e){Nh.paymentCurrency=e},setPurchaseAmount(e){_h.state.purchaseAmount=e},setPaymentAmount(e){_h.state.paymentAmount=e},getAvailableCurrencies:()=>(0,r.Z)(function*(){const e=yield rh.L.getOnrampOptions();Nh.purchaseCurrencies=e.purchaseCurrencies,Nh.paymentCurrencies=e.paymentCurrencies,Nh.paymentCurrency=e.paymentCurrencies[0]||Ah,Nh.purchaseCurrency=e.purchaseCurrencies[0]||Ch,yield vh.Q.fetchCurrencyImages(e.paymentCurrencies.map(e=>e.id)),yield vh.Q.fetchTokenImages(e.purchaseCurrencies.map(e=>e.symbol))})(),getQuote:()=>(0,r.Z)(function*(){Nh.quotesLoading=!0;try{const e=yield rh.L.getOnrampQuote({purchaseCurrency:Nh.purchaseCurrency,paymentCurrency:Nh.paymentCurrency,amount:Nh.paymentAmount?.toString()||"0",network:Nh.purchaseCurrency?.symbol});return Nh.quotesLoading=!1,Nh.purchaseAmount=Number(e?.purchaseAmount.amount),e}catch(sn){return Nh.error=sn.message,Nh.quotesLoading=!1,null}finally{Nh.quotesLoading=!1}})(),resetState(){Nh.selectedProvider=null,Nh.error=null,Nh.purchaseCurrency=Ch,Nh.paymentCurrency=Ah,Nh.purchaseCurrencies=[Ch],Nh.paymentCurrencies=[],Nh.paymentAmount=void 0,Nh.purchaseAmount=void 0,Nh.quotesLoading=!1}},_h=(0,uh.P)(Ih);var Sh=n(22167),Th=n(26131);function Rh(e){try{return new URL(e)}catch{return null}}function Oh(e,t){if(t.includes("://")){const n=Rh(t);return!!n&&n.origin===e}const{host:n,port:r}=function(e){const t=e.split("/"),n=t.length>0&&void 0!==t[0]?t[0]:"",r=n.lastIndexOf(":");return-1===r?{host:n}:{host:n.slice(0,r),port:n.slice(r+1)}}(t),s=e.indexOf("://");if(-1!==s){const t=s+3;let i=e.indexOf("/",t);-1===i&&(i=e.length);const o=e.slice(t,i);return void 0!==r?`${n}:${r}`===o:n===o.split(":")[0]}const i=Rh(e);return!!i&&(void 0!==r?n===i.hostname&&r===(i.port||void 0):n===i.hostname)}function Ph(e,t,n){let r,s=n;const i=s.indexOf("://");-1!==i&&(r=s.slice(0,i),s=s.slice(i+3));const o=s.indexOf("/");-1!==o&&(s=s.slice(0,o));let a,c=s;const l=c.lastIndexOf(":");-1!==l&&(a=c.slice(l+1),c=c.slice(0,l));const d=c.split(".");for(const f of d)if(f.includes("*")&&"*"!==f)return!1;const u=e.protocol.replace(/:$/u,"");if(r&&r!==u||void 0!==a&&"*"!==a&&a!==e.port)return!1;const p=function(e){const t=e.indexOf("://");if(-1===t)return null;const n=e.slice(0,t),r=t+3;let s=e.indexOf("/",r);-1===s&&(s=e.length);const i=e.slice(r,s),o=i.lastIndexOf(":");return-1===o?{scheme:n,host:i}:{scheme:n,host:i.slice(0,o),port:i.slice(o+1)}}(t),h=(p?p.host:e.hostname).split(".");if(d.length!==h.length)return!1;for(let f=d.length-1;f>=0;f-=1){const e=d[f],t=h[f];if("*"!==e&&e!==t)return!1}return!0}const kh={ton:["ton_sendMessage","ton_signData"],solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},xh={RPC_ERROR_CODE:{USER_REJECTED:5e3,USER_REJECTED_METHODS:5002},getMethodsByChainNamespace:e=>kh[e]||[],createDefaultNamespace(e){return{methods:this.getMethodsByChainNamespace(e),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(e,t){if(!t)return{...e};const n={...e},r=new Set;if(t.methods&&Object.keys(t.methods).forEach(e=>r.add(e)),t.chains&&Object.keys(t.chains).forEach(e=>r.add(e)),t.events&&Object.keys(t.events).forEach(e=>r.add(e)),t.rpcMap&&Object.keys(t.rpcMap).forEach(e=>{const[t]=e.split(":");t&&r.add(t)}),r.forEach(e=>{n[e]||(n[e]=this.createDefaultNamespace(e))}),t.methods&&Object.entries(t.methods).forEach(([e,t])=>{n[e]&&(n[e].methods=t)}),t.chains&&Object.entries(t.chains).forEach(([e,t])=>{n[e]&&(n[e].chains=t)}),t.events&&Object.entries(t.events).forEach(([e,t])=>{n[e]&&(n[e].events=t)}),t.rpcMap){const e=new Set;Object.entries(t.rpcMap).forEach(([t,r])=>{const[s,i]=t.split(":");!s||!i||!n[s]||(n[s].rpcMap||(n[s].rpcMap={}),e.has(s)||(n[s].rpcMap={},e.add(s)),n[s].rpcMap[i]=r)})}return n},createNamespaces(e,t){const n=e.reduce((e,t)=>{const{id:n,chainNamespace:r,rpcUrls:s}=t,i=s.default.http[0];e[r]||(e[r]=this.createDefaultNamespace(r));const o=`${r}:${n}`,a=e[r];switch(a.chains.push(o),o){case"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":a.chains.push("solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ");break;case"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1":a.chains.push("solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K")}return a?.rpcMap&&i&&(a.rpcMap[n]=i),e},{});return this.applyNamespaceOverrides(n,t)},resolveReownName:function(){var e=(0,r.Z)(function*(e){const t=yield gh.resolveName(e);return(t?.addresses?Object.values(t.addresses):[])[0]?.address||!1});return function(t){return e.apply(this,arguments)}}(),getChainsFromNamespaces:(e={})=>Object.values(e).flatMap(e=>{const t=e.chains||[],n=e.accounts.map(e=>{const[t,n]=e.split(":");return`${t}:${n}`});return Array.from(new Set([...t,...n]))}),isSessionEventData:e=>"object"==typeof e&&null!==e&&"id"in e&&"topic"in e&&"params"in e&&"object"==typeof e.params&&null!==e.params&&"chainId"in e.params&&"event"in e.params&&"object"==typeof e.params.event&&null!==e.params.event,isUserRejectedRequestError(e){try{if("object"==typeof e&&null!==e){const t=e,n="number"==typeof t.code,r=n&&t.code===xh.RPC_ERROR_CODE.USER_REJECTED;return n&&t.code===xh.RPC_ERROR_CODE.USER_REJECTED_METHODS||r}return!1}catch{return!1}},isOriginAllowed(e,t,n){const r=[...t,...n];if(0===t.length)return!0;const s=Rh(e);if(!s)return r.some(t=>!t.includes("*")&&t===e);if("localhost"===s.hostname||"127.0.0.1"===s.hostname)return!0;for(const i of r)if(i.includes("*")){if(Ph(s,e,i))return!0}else if(Oh(e,i))return!0;return!1},listenWcProvider({universalProvider:e,namespace:t,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&e.on("connect",()=>{const r=xh.getWalletConnectAccounts(e,t);n(r)}),r&&e.on("disconnect",()=>{r()}),s&&e.on("accountsChanged",n=>{try{const r=e.session?.namespaces?.[t]?.accounts||[],i=e.rpcProviders?.[t]?.getDefaultChain(),o=n.map(e=>{const n=r.find(n=>n.includes(`${t}:${i}:${e}`));if(!n)return;const{chainId:s,chainNamespace:o}=th.u.parseCaipAddress(n);return{address:e,chainId:s,chainNamespace:o}}).filter(e=>void 0!==e);o.length>0&&s(o)}catch(r){console.warn("Failed to parse accounts for namespace on accountsChanged event",t,n,r)}}),i&&e.on("chainChanged",e=>{i(e)}),o&&e.on("display_uri",e=>{o(e)})},getWalletConnectAccounts(e,t){const n=new Set,r=e?.session?.namespaces?.[t]?.accounts?.map(e=>th.u.parseCaipAddress(e)).filter(({address:e})=>!n.has(e.toLowerCase())&&(n.add(e.toLowerCase()),!0));return r&&r.length>0?r:[]}};var Uh=n(68886),Mh=n(13618),Dh=n(50039),Lh=n(69419),Bh=n(65298),$h=n(56152),jh=n(97088),Fh=n(86499);Error;const Wh={TOKEN_ADDRESSES_BY_SYMBOL:{USDC:{8453:"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",84532:"0x036CbD53842c5426634e7929541eC2318f3dCF7e"}},getTokenSymbolByAddress(e){if(!e)return;const[t]=Object.entries(Wh.TOKEN_ADDRESSES_BY_SYMBOL).find(([t,n])=>Object.values(n).includes(e))??[];return t}};var qh=n(86462);const Zh={EmbeddedWalletAbortController:new AbortController,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"ORIGIN_NOT_ALLOWED"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{code:"APKT001",displayMessage:"Network Not Found",debugMessage:"The specified network is not recognized. Please ensure it is included in the `networks` array of your `createAppKit` configuration."},ORIGIN_NOT_ALLOWED:{code:"APKT002",displayMessage:"Invalid App Configuration",debugMessage:()=>`The origin ${(0,qh.$U)()?window.origin:"unknown"} is not in your allow list. Please update your allowed domains at https://dashboard.reown.com. [PID: ${c.h.state.projectId}]`},IFRAME_LOAD_FAILED:{code:"APKT003",displayMessage:"Network Error: Wallet Load Failed",debugMessage:()=>"Failed to load the embedded wallet. This may be due to network issues or server downtime. Please check your network connection and try again shortly. Contact support if the issue persists."},IFRAME_REQUEST_TIMEOUT:{code:"APKT004",displayMessage:"Wallet Request Timeout",debugMessage:()=>"The request to the embedded wallet timed out. Please check your network connection and try again shortly. Contact support if the issue persists."},UNVERIFIED_DOMAIN:{code:"APKT005",displayMessage:"Unverified Domain",debugMessage:()=>"Embedded wallet load failed. Ensure your domain is verified in https://dashboard.reown.com."},JWT_TOKEN_NOT_VALID:{code:"APKT006",displayMessage:"Session Expired",debugMessage:"Your session is invalid or expired. Please check your system\u2019s date and time settings, then reconnect."},INVALID_PROJECT_ID:{code:"APKT007",displayMessage:"Invalid Project ID",debugMessage:"The specified project ID is invalid. Please visit https://dashboard.reown.com to obtain a valid project ID."},PROJECT_ID_NOT_CONFIGURED:{code:"APKT008",displayMessage:"Project ID Missing",debugMessage:"No project ID is configured. You can create and configure a project ID at https://dashboard.reown.com."},SERVER_ERROR_APP_CONFIGURATION:{code:"APKT009",displayMessage:"Server Error",debugMessage:e=>`Unable to fetch App Configuration. ${e}. Please check your network connection and try again shortly. Contact support if the issue persists.`},RATE_LIMITED_APP_CONFIGURATION:{code:"APKT010",displayMessage:"Rate Limited",debugMessage:"You have been rate limited while retrieving App Configuration. Please wait a few minutes and try again. Contact support if the issue persists."}},ALERT_WARNINGS:{LOCAL_CONFIGURATION_IGNORED:{debugMessage:e=>`[Reown Config Notice] ${e}`},INACTIVE_NAMESPACE_NOT_CONNECTED:{code:"APKTW001",displayMessage:"Inactive Namespace Not Connected",debugMessage:(e,t)=>`An error occurred while connecting an inactive namespace ${e}: "${t}"`},INVALID_EMAIL:{code:"APKTW002",displayMessage:"Invalid Email Address",debugMessage:"Please enter a valid email address"}}};var Hh=n(87002),Kh=n(52991),Vh=n(33726);const zh={createLogger(e,t="error"){const n=(0,p.jI)({level:t}),{logger:r}=(0,p.Rt)({opts:n});return r.error=(...t)=>{for(const n of t)if(n instanceof Error)return void e(n,...t);e(void 0,...t)},r}};var Gh=n(74654),Jh=(n(15863),n(5546));const Yh=[eh.b.CONNECTOR_ID.AUTH,eh.b.CONNECTOR_ID.WALLET_CONNECT];class Xh{constructor({provider:e,namespace:t}){this.id=eh.b.CONNECTOR_ID.WALLET_CONNECT,this.name="WalletConnect",this.type="WALLET_CONNECT",this.imageId="ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",this.getCaipNetworks=i.R.getCaipNetworks.bind(i.R),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=t}get chains(){return this.getCaipNetworks()}connectWalletConnect(){var e=this;return(0,r.Z)(function*(){if(!(yield e.authenticate())){const t=e.getCaipNetworks(),n=xh.createNamespaces(t,c.h.state.universalProviderConfigOverride);yield e.provider.connect({optionalNamespaces:n})}return{clientId:yield e.provider.client.core.crypto.getClientId(),session:e.provider.session}})()}disconnect(){var e=this;return(0,r.Z)(function*(){yield e.provider.disconnect()})()}authenticate(){var e=this;return(0,r.Z)(function*(){const t=e.chains.map(e=>e.caipNetworkId);return Lh.w.universalProviderAuthenticate({universalProvider:e.provider,chains:t,methods:Qh})})()}}const Qh=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class ef extends class{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=e=>i.R.getCaipNetworks(e),this.getConnectorId=e=>s.A.getConnectorId(e),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:t}){const n=this.getCaipNetworks().filter(e=>e.chainNamespace===this.namespace).find(e=>e.id.toString()===t?.toString());e&&n&&this.addConnection({connectorId:eh.b.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:n})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:eh.b.CONNECTOR_ID.AUTH,type:"AUTH",name:eh.b.CONNECTOR_NAMES.AUTH,provider:e,imageId:void 0,chain:this.namespace,chains:[]})}addConnector(...e){const t=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(e=>!t.has(e.id)&&(t.add(e.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const t=new Set;this.availableConnections=[...e,...this.availableConnections].filter(e=>!t.has(e.connectorId.toLowerCase())&&(t.add(e.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(t=>t.connectorId.toLowerCase()!==e.toLowerCase()),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,t){i.R.setAccountProp("status",e,t)}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(t)}off(e,t){const n=this.eventListeners.get(e);n&&n.delete(t)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,t){const n=this.eventListeners.get(e);n&&n.forEach(e=>e(t))}connectWalletConnect(e){var t=this;return(0,r.Z)(function*(){try{return{clientId:(yield t.getWalletConnectConnector().connectWalletConnect()).clientId}}catch(e){throw xh.isUserRejectedRequestError(e)?new Jh.ab(e):e}})()}switchNetwork(e){var t=this;return(0,r.Z)(function*(){const{caipNetwork:n}=e,r=sh.O.getProviderId(n.chainNamespace),i=sh.O.getProvider(n.chainNamespace);if(!i)throw new Error("Provider not found");if("WALLET_CONNECT"!==r){if("AUTH"===r){const e=s.A.getAuthConnector()?.provider;if(!e)throw new Error("Auth provider not found");const r=(0,ih.r9)(n.chainNamespace);yield e.switchNetwork({chainId:n.caipNetworkId});const i=yield e.getUser({chainId:n.caipNetworkId,preferredAccountType:r});t.emit("switchNetwork",i)}}else i.setDefaultChain(n.caipNetworkId)})()}getWalletConnectConnector(){const e=this.connectors.find(e=>"walletConnect"===e.id);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,t){if(e.length>0){const{address:n,chainId:r}=a.j.getAccount(e[0]),s=this.getCaipNetworks().filter(e=>e.chainNamespace===this.namespace).find(e=>e.id.toString()===r?.toString()),i=this.connectors.find(e=>e.id===t);n&&(this.emit("accountChanged",{address:n,chainId:r,connector:i}),this.addConnection({connectorId:t,accounts:e.map(e=>{const{address:t}=a.j.getAccount(e);return{address:t}}),caipNetwork:s}))}}onAccountsChanged(e,t,n=!0){if(e.length>0){const{address:n}=a.j.getAccount(e[0]),r=this.getConnection({connectorId:t,connections:this.connections,connectors:this.connectors});n&&this.getConnectorId(eh.b.CHAIN.EVM)?.toLowerCase()===t.toLowerCase()&&this.emit("accountChanged",{address:n,chainId:r?.caipNetwork?.id,connector:r?.connector}),this.addConnection({connectorId:t,accounts:e.map(e=>{const{address:t}=a.j.getAccount(e);return{address:t}}),caipNetwork:r?.caipNetwork})}else n&&this.onDisconnect(t)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),this.getConnectorId(eh.b.CHAIN.EVM)?.toLowerCase()===e.toLowerCase()&&this.emitFirstAvailableConnection(),0===this.connections.length&&this.emit("disconnect")}onChainChanged(e,t){const n="string"==typeof e&&e.startsWith("0x")?parseInt(e,16).toString():e.toString(),r=this.getConnection({connectorId:t,connections:this.connections,connectors:this.connectors}),s=this.getCaipNetworks().filter(e=>e.chainNamespace===this.namespace).find(e=>e.id.toString()===n);r&&this.addConnection({connectorId:t,accounts:r.accounts,caipNetwork:s}),this.getConnectorId(eh.b.CHAIN.EVM)?.toLowerCase()===t.toLowerCase()&&this.emit("switchNetwork",{chainId:n})}listenProviderEvents(e,t){if(Yh.includes(e))return;const n=t=>this.onAccountsChanged(t,e),r=t=>this.onChainChanged(t,e),s=()=>this.onDisconnect(e);this.providerHandlers[e]||(t.on("disconnect",s),t.on("accountsChanged",n),t.on("chainChanged",r),this.providerHandlers[e]={provider:t,disconnect:s,accountsChanged:n,chainChanged:r})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:t,disconnect:n,accountsChanged:r,chainChanged:s}=this.providerHandlers[e];t.removeListener("disconnect",n),t.removeListener("accountsChanged",r),t.removeListener("chainChanged",s),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){const e=this.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[t]=e.accounts;this.emit("accountChanged",{address:t?.address,chainId:e.caipNetwork?.id,connector:e.connector})}}getConnection({address:e,connectorId:t,connections:n,connectors:r}){if(t){const s=n.find(e=>e.connectorId.toLowerCase()===t.toLowerCase());if(!s)return null;const i=r.find(e=>e.id.toLowerCase()===s.connectorId.toLowerCase()),o=e?s.accounts.find(t=>t.address.toLowerCase()===e.toLowerCase()):s.accounts[0];return{...s,account:o,connector:i}}const s=n.find(e=>e.accounts.length>0&&r.some(t=>t.id.toLowerCase()===e.connectorId.toLowerCase()));if(s){const[e]=s.accounts,t=r.find(e=>e.id.toLowerCase()===s.connectorId.toLowerCase());return{...s,account:e,connector:t}}return null}}{setUniversalProvider(e){var t=this;return(0,r.Z)(function*(){if(!t.namespace)throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");return t.addConnector(new Xh({provider:e,caipNetworks:t.getCaipNetworks(),namespace:t.namespace})),Promise.resolve()})()}connect(e){var t=this;return(0,r.Z)(function*(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:t.provider,address:""})})()}disconnect(){var e=this;return(0,r.Z)(function*(){try{yield e.getWalletConnectConnector().disconnect(),e.emit("disconnect")}catch(t){console.warn("UniversalAdapter:disconnect - error",t)}return{connections:[]}})()}syncConnections(){return Promise.resolve()}writeSolanaTransaction(){return(0,r.Z)(function*(){return Promise.resolve({hash:""})})()}getAccounts({namespace:e}){var t=this;return(0,r.Z)(function*(){const n=t.provider?.session?.namespaces?.[e]?.accounts?.map(e=>{const[,,t]=e.split(":");return t}).filter((e,t,n)=>n.indexOf(e)===t)||[];return Promise.resolve({accounts:n.map(t=>a.j.createAccount(e,t,"bip122"===e?"payment":"eoa"))})})()}syncConnectors(){return(0,r.Z)(function*(){return Promise.resolve()})()}getBalance(e){return(0,r.Z)(function*(){if(!e.caipNetwork||!Eh.bq.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace)||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};const t=i.R.getAccountData();if(t?.balanceLoading&&e.chainId===i.R.state.activeCaipNetwork.id)return{balance:t?.balance||"0.00",symbol:t?.balanceSymbol||""};const n=(yield i.R.fetchTokenBalance()).find(t=>t.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&t.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:n?.quantity.numeric||"0.00",symbol:n?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}})()}signMessage(e){return(0,r.Z)(function*(){const{provider:t,message:n,address:r}=e;if(!t)throw new Error("UniversalAdapter:signMessage - provider is undefined");let s="";return s=i.R.state.activeCaipNetwork.chainNamespace===eh.b.CHAIN.SOLANA?(yield t.request({method:"solana_signMessage",params:{message:x.encode((new TextEncoder).encode(n)),pubkey:r}},i.R.state.activeCaipNetwork.caipNetworkId)).signature:yield t.request({method:"personal_sign",params:[n,r]},i.R.state.activeCaipNetwork.caipNetworkId),{signature:s}})()}estimateGas(){return(0,r.Z)(function*(){return Promise.resolve({gas:BigInt(0)})})()}sendTransaction(){return(0,r.Z)(function*(){return Promise.resolve({hash:""})})()}walletGetAssets(e){return Promise.resolve({})}writeContract(){return(0,r.Z)(function*(){return Promise.resolve({hash:""})})()}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}getCapabilities(){return(0,r.Z)(function*(){return Promise.resolve({})})()}grantPermissions(){return(0,r.Z)(function*(){return Promise.resolve({})})()}revokePermissions(){return(0,r.Z)(function*(){return Promise.resolve("0x")})()}syncConnection(){var e=this;return(0,r.Z)(function*(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:e.provider,address:""})})()}switchNetwork(e){var t=this;return(0,r.Z)(function*(){const{caipNetwork:n}=e,r=t.getWalletConnectConnector();if(n.chainNamespace===eh.b.CHAIN.EVM)try{yield r.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,Gh.NC)(n.id)}]})}catch(s){if(4902===s.code||32603===s.code||5e3===s.code||4902===s?.data?.originalError?.code)try{yield r.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:(0,Gh.NC)(n.id),rpcUrls:[n?.rpcUrls.chainDefault?.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[n.blockExplorers?.default.url]}]})}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)})()}getWalletConnectProvider(){return this.connectors.find(e=>"WALLET_CONNECT"===e.type)?.provider}}const tf=["email","socials","swaps","onramp","activity","reownBranding","multiWallet","emailCapture","payWithExchange","payments","reownAuthentication","headless"],nf={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:e=>{if(!e?.config)return!1;const t=e.config;return Boolean(e.isEnabled)&&t.includes("email")},processFallback:e=>void 0===e?Eh.bq.DEFAULT_REMOTE_FEATURES.email:Boolean(e)},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:e=>{if(!e?.config)return!1;const t=e.config;return!!(Boolean(e.isEnabled)&&t.length>0)&&t.filter(e=>"email"!==e)},processFallback:e=>void 0===e?Eh.bq.DEFAULT_REMOTE_FEATURES.socials:"boolean"==typeof e?!!e&&Eh.bq.DEFAULT_REMOTE_FEATURES.socials:e},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:e=>{if(!e?.config)return!1;const t=e.config;return!!(Boolean(e.isEnabled)&&t.length>0)&&t},processFallback:e=>void 0===e?Eh.bq.DEFAULT_REMOTE_FEATURES.swaps:"boolean"==typeof e?!!e&&Eh.bq.DEFAULT_REMOTE_FEATURES.swaps:e},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:e=>{if(!e?.config)return!1;const t=e.config;return!!(Boolean(e.isEnabled)&&t.length>0)&&t},processFallback:e=>void 0===e?Eh.bq.DEFAULT_REMOTE_FEATURES.onramp:"boolean"==typeof e?!!e&&Eh.bq.DEFAULT_REMOTE_FEATURES.onramp:e},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:e=>Boolean(e.isEnabled),processFallback:e=>void 0===e?Eh.bq.DEFAULT_REMOTE_FEATURES.activity:Boolean(e)},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:e=>Boolean(e.isEnabled),processFallback:e=>void 0===e?Eh.bq.DEFAULT_REMOTE_FEATURES.reownBranding:Boolean(e)},emailCapture:{apiFeatureName:"email_capture",localFeatureName:"emailCapture",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:e=>e.isEnabled&&(e.config??[]),processFallback:e=>!1},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:e=>Boolean(e.isEnabled),processFallback:()=>Eh.bq.DEFAULT_REMOTE_FEATURES.multiWallet},payWithExchange:{apiFeatureName:"fund_from_exchange",localFeatureName:"payWithExchange",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:e=>Boolean(e.isEnabled),processFallback:()=>Eh.bq.DEFAULT_REMOTE_FEATURES.payWithExchange},payments:{apiFeatureName:"payments",localFeatureName:"payments",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:e=>Boolean(e.isEnabled),processFallback:()=>Eh.bq.DEFAULT_REMOTE_FEATURES.payments},reownAuthentication:{apiFeatureName:"reown_authentication",localFeatureName:"reownAuthentication",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:e=>Boolean(e.isEnabled),processFallback:e=>void 0===e?Eh.bq.DEFAULT_REMOTE_FEATURES.reownAuthentication:Boolean(e)},headless:{apiFeatureName:"headless",localFeatureName:"headless",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:e=>Boolean(e.isEnabled),processFallback:()=>Eh.bq.DEFAULT_REMOTE_FEATURES.headless}},rf={localSettingsOverridden:new Set,getApiConfig:(e,t)=>t?.find(t=>t.id===e),addWarning(e,t){if(void 0!==e){const e=nf[t];this.localSettingsOverridden.add(e.isLegacy?`"features.${e.localFeatureName}" (now "${t}")`:`"features.${t}"`)}},processFeature(e,t,n,r,s){const i=nf[e],o=t[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const t=this.getApiConfig(i.apiFeatureName,n);return null===t?.config?this.processFallbackFeature(e,o):!!t?.config&&(void 0!==o&&this.addWarning(o,e),this.processApiFeature(e,t))}return this.processFallbackFeature(e,o)},processApiFeature:(e,t)=>nf[e].processApi(t),processFallbackFeature:(e,t)=>nf[e].processFallback(t),fetchRemoteFeatures(e){var t=this;return(0,r.Z)(function*(){const n=e.basic??!1,r=e.features||{};t.localSettingsOverridden.clear();let s=null,i=!1;try{s=yield vh.Q.fetchProjectConfig(),i=null!=s}catch(a){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",a)}const o=i&&!n?Eh.bq.DEFAULT_REMOTE_FEATURES:Eh.bq.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const e of tf){const a=t.processFeature(e,r,s,i,n);Object.assign(o,{[e]:a})}}catch(a){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",a),Eh.bq.DEFAULT_REMOTE_FEATURES}if(i&&t.localSettingsOverridden.size>0){const e=`Your local configuration for ${Array.from(t.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;yh.B.open({debugMessage:Zh.ALERT_WARNINGS.LOCAL_CONFIGURATION_IGNORED.debugMessage(e)},"warning")}return o})()}};let sf=!1;class of extends class{constructor(e){var t=this;this.chainNamespaces=[],this.features={},this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(e,t)=>{if(e){const n=i.R.getCaipNetworks(e)?.find(e=>e.id===t);if(n)return n;const r=i.R.getNetworkData(e)?.caipNetwork;return r||i.R.getRequestedCaipNetworks(e).filter(t=>t.chainNamespace===e)?.[0]}return i.R.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const e=this.getCaipNetwork();if(e)return e.id},this.getCaipNetworks=e=>i.R.getCaipNetworks(e),this.getActiveChainNamespace=()=>i.R.state.activeChain,this.setRequestedCaipNetworks=(e,t)=>{i.R.setRequestedCaipNetworks(e,t)},this.getApprovedCaipNetworkIds=()=>i.R.getAllApprovedCaipNetworkIds(),this.getCaipAddress=e=>i.R.state.activeChain!==e&&e?i.R.state.chains.get(e)?.accountState?.caipAddress:i.R.state.activeCaipAddress,this.setClientId=e=>{rh.L.setClientId(e)},this.getProvider=e=>sh.O.getProvider(e),this.getProviderType=e=>sh.O.getProviderId(e),this.getPreferredAccountType=e=>(0,ih.r9)(e),this.setCaipAddress=(e,t,n=!1)=>{i.R.setAccountProp("caipAddress",e,t,n),i.R.setAccountProp("address",a.j.getPlainAddress(e),t,n)},this.setBalance=(e,t,n)=>{i.R.setAccountProp("balance",e,n),i.R.setAccountProp("balanceSymbol",t,n)},this.setProfileName=(e,t)=>{i.R.setAccountProp("profileName",e,t)},this.setProfileImage=(e,t)=>{i.R.setAccountProp("profileImage",e,t)},this.setUser=(e,t)=>{i.R.setAccountProp("user",e,t)},this.resetAccount=e=>{i.R.resetAccount(e)},this.setCaipNetwork=e=>{i.R.setActiveCaipNetwork(e)},this.setCaipNetworkOfNamespace=(e,t)=>{i.R.setChainNetworkData(t,{caipNetwork:e})},this.setStatus=(e,t)=>{i.R.setAccountProp("status",e,t),s.A.isConnected()?oh.M.setConnectionStatus("connected"):oh.M.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=e=>i.R.getAccountData(e)?.address,this.setConnectors=e=>{const t=[...s.A.state.allConnectors,...e];s.A.setConnectors(t)},this.setConnections=(e,t)=>{oh.M.setConnections(e,t),o.l.setConnections(e,t)},this.fetchIdentity=e=>rh.L.fetchIdentity(e),this.getReownName=e=>gh.getNamesForAddress(e),this.getConnectors=()=>s.A.getConnectors(),this.getConnectorImage=e=>mh.f.getConnectorImage(e),this.getConnections=e=>this.remoteFeatures.multiWallet?bh.f.getConnectionsData(e).connections:(yh.B.open(eh.b.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=e=>this.remoteFeatures.multiWallet?bh.f.getConnectionsData(e).recentConnections:(yh.B.open(eh.b.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=function(){var e=(0,r.Z)(function*(e){t.remoteFeatures.multiWallet?yield o.l.switchConnection(e):yh.B.open(eh.b.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info")});return function(t){return e.apply(this,arguments)}}(),this.deleteConnection=e=>{this.remoteFeatures.multiWallet?(oh.M.deleteAddressFromConnection(e),o.l.syncStorageConnections()):yh.B.open(eh.b.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info")},this.setConnectedWalletInfo=(e,t)=>{const n=sh.O.getProviderId(t),r=e?{...e,type:n}:void 0;i.R.setAccountProp("connectedWalletInfo",r,t)},this.getIsConnectedState=()=>Boolean(i.R.state.activeCaipAddress),this.addAddressLabel=(e,t,n)=>{const r=i.R.getAccountData(n)?.addressLabels||{};i.R.setAccountProp("addressLabels",{...r,[e]:t},n)},this.removeAddressLabel=(e,t)=>{const n=i.R.getAccountData(t)?.addressLabels||{};i.R.setAccountProp("addressLabels",{...n,[e]:void 0},t)},this.getAddress=e=>i.R.getAccountData(e||i.R.state.activeChain)?.address,this.resetNetwork=e=>{i.R.resetNetwork(e)},this.addConnector=e=>{s.A.addConnector(e)},this.resetWcConnection=()=>{o.l.resetWcConnection()},this.setAddressExplorerUrl=(e,t)=>{i.R.setAccountProp("addressExplorerUrl",e,t)},this.setSmartAccountDeployed=(e,t)=>{i.R.setAccountProp("smartAccountDeployed",e,t)},this.setPreferredAccountType=(e,t)=>{i.R.setAccountProp("preferredAccountType",e,t)},this.setEIP6963Enabled=e=>{c.h.setEIP6963Enabled(e)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,t){const n=e?.map(e=>e.namespace).filter(e=>Boolean(e));if(n?.length)return[...new Set(n)];const r=t?.map(e=>e.chainNamespace);return[...new Set(r)]}initialize(e){var t=this;return(0,r.Z)(function*(){if(t.initializeProjectSettings(e),t.initControllers(e),yield t.initChainAdapters(),t.sendInitializeEvent(e),e.features?.headless&&!wh.C.hasInjectedConnectors()&&vh.Q.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1,fetchWalletRanks:!1,fetchRecommendedWallets:!0}),c.h.state.enableReconnect?(yield t.syncExistingConnection(),yield t.syncAdapterConnections()):yield t.unSyncExistingConnection(),!e.basic&&!e.manualWCControl&&(t.remoteFeatures=yield rf.fetchRemoteFeatures(e)),yield vh.Q.fetchUsage(),c.h.setRemoteFeatures(t.remoteFeatures),t.remoteFeatures.onramp&&_h.setOnrampProviders(t.remoteFeatures.onramp),(c.h.state.remoteFeatures.email||Array.isArray(c.h.state.remoteFeatures.socials)&&c.h.state.remoteFeatures.socials.length>0)&&(yield t.checkAllowedOrigins()),c.h.state.features.reownAuthentication||c.h.state.remoteFeatures.reownAuthentication){const{ReownAuthentication:e}=yield n.e(1949).then(n.bind(n,81949)),t=c.h.state.siwx;t instanceof e||(t&&console.warn("ReownAuthentication option is enabled, SIWX configuration will be overridden."),c.h.setSIWX(new e))}})()}openSend(e){var t=this;return(0,r.Z)(function*(){const n=e.namespace||i.R.state.activeChain,r=t.getCaipAddress(n),s=t.getCaipNetwork(n)?.id;if(!r)throw new Error("openSend: caipAddress not found");if(s?.toString()!==e.chainId.toString()){const r=i.R.getCaipNetworkById(e.chainId,n);if(!r)throw new Error(`openSend: caipNetwork with chainId ${e.chainId} not found`);yield t.switchNetwork(r,{throwOnFailure:!0})}try{const t=Wh.getTokenSymbolByAddress(e.assetAddress);t&&(yield vh.Q.fetchTokenImages([t]))}catch{}return yield Sh.I.open({view:"WalletSend",data:{send:e}}),new Promise((e,n)=>{const r=Th.S.subscribeKey("hash",t=>{t&&(i(),e({hash:t}))}),s=Sh.I.subscribe(e=>{e.open||(i(),n(new Error("Modal closed")))}),i=t.createCleanupHandler([r,s])})})()}toModalOptions(){return{isSwap:function(e){return"Swap"===e?.view},isSend:function(e){return"WalletSend"===e?.view}}}checkAllowedOrigins(){return(0,r.Z)(function*(){try{const e=yield vh.Q.fetchAllowedOrigins();if(!a.j.isClient())return;const t=window.location.origin;xh.isOriginAllowed(t,e,eh.b.DEFAULT_ALLOWED_ANCESTORS)||yh.B.open(Zh.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error")}catch(e){if(!(e instanceof Error))return;switch(e.message){case"RATE_LIMITED":yh.B.open(Zh.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const t=e.cause instanceof Error?e.cause:e;yh.B.open({displayMessage:Zh.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.displayMessage,debugMessage:Zh.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.debugMessage(t.message)},"error");break}}}})()}createCleanupHandler(e){return()=>{e.forEach(e=>{try{e()}catch{}})}}sendInitializeEvent(e){const{...t}=e;delete t.adapters,delete t.universalProvider,Uh.X.sendEvent({type:"track",event:"INITIALIZE",properties:{...t,networks:e.networks.map(e=>e.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initAdapterController(){Mh.j.initialize(this.chainAdapters)}initializeThemeController(e){e.themeMode&&Dh.u.setThemeMode(e.themeMode),e.themeVariables&&Dh.u.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient)throw new Error("ConnectionControllerClient must be set");i.R.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient});const t=this.getDefaultNetwork();t&&i.R.setActiveCaipNetwork(t)}initializeConnectionController(e){o.l.initialize(e.adapters??[]),o.l.setWcBasic(e.basic??!1)}initializeConnectorController(){s.A.initialize(this.chainNamespaces)}initializeProjectSettings(e){c.h.setProjectId(e.projectId),c.h.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){c.h.setDebug(!1!==e.debug),c.h.setEnableWalletGuide(!1!==e.enableWalletGuide),c.h.setEnableWallets(!1!==e.enableWallets),c.h.setEIP6963Enabled(!1!==e.enableEIP6963),c.h.setEnableNetworkSwitch(!1!==e.enableNetworkSwitch),c.h.setEnableReconnect(!1!==e.enableReconnect),c.h.setEnableMobileFullScreen(!0===e.enableMobileFullScreen),c.h.setCoinbasePreference(e.coinbasePreference),c.h.setEnableAuthLogger(!1!==e.enableAuthLogger),c.h.setCustomRpcUrls(e.customRpcUrls),c.h.setEnableEmbedded(e.enableEmbedded),c.h.setAllWallets(e.allWallets),c.h.setIncludeWalletIds(e.includeWalletIds),c.h.setExcludeWalletIds(e.excludeWalletIds),c.h.setFeaturedWalletIds(e.featuredWalletIds),c.h.setTokens(e.tokens),c.h.setTermsConditionsUrl(e.termsConditionsUrl),c.h.setPrivacyPolicyUrl(e.privacyPolicyUrl),c.h.setCustomWallets(e.customWallets),c.h.setFeatures(e.features),c.h.setAllowUnsupportedChain(e.allowUnsupportedChain),c.h.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),c.h.setPreferUniversalLinks(e.experimental_preferUniversalLinks),c.h.setDefaultAccountTypes(e.defaultAccountTypes);const t=this.getDefaultMetaData();if(!e.metadata&&t&&(e.metadata=t),c.h.setMetadata(e.metadata),c.h.setDisableAppend(e.disableAppend),c.h.setEnableEmbedded(e.enableEmbedded),c.h.setSIWX(e.siwx),this.features=c.h.state.features??{},e.projectId){if(e.adapters?.find(e=>e.namespace===eh.b.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");c.h.setSIWX(e.siweConfig.mapToSIWX())}}else yh.B.open(Zh.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}getDefaultMetaData(){return a.j.isClient()?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){const t=this.getActiveChainNamespace();if(t){const n=Hh.f.getUnsupportedNetwork(`${t}:${e}`);i.R.setActiveCaipNetwork(n)}}getDefaultNetwork(){return Hh.f.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,t){return Hh.f.extendCaipNetwork(e,{customNetworkImageUrls:t.chainImages,projectId:t.projectId})}extendCaipNetworks(e){return Hh.f.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const t=e.networks.find(t=>t.id===e.defaultNetwork?.id);return t?Hh.f.extendCaipNetwork(t,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}disconnectConnector(e,t){var n=this;return(0,r.Z)(function*(){try{n.setLoading(!0,e);let r={connections:[]};const s=n.getAdapter(e);return(i.R.state.chains.get(e)?.accountState?.caipAddress||!c.h.state.enableReconnect)&&s?.disconnect&&(r=yield s.disconnect({id:t})),n.setLoading(!1,e),r}catch(r){throw n.setLoading(!1,e),new Error(`Failed to disconnect chains: ${r.message}`)}})()}createClients(){var e=this;this.connectionControllerClient={connectWalletConnect:function(){var t=(0,r.Z)(function*(){const t=i.R.state.activeChain,n=e.getAdapter(t),r=e.getCaipNetwork(t)?.id,s=o.l.getConnections(t),a=e.remoteFeatures.multiWallet,c=s.length>0;if(!n)throw new Error("Adapter not found");const l=yield n.connectWalletConnect(r);(!c||!a)&&e.close(),e.setClientId(l?.clientId||null),oh.M.setConnectedNamespaces([...i.R.state.chains.keys()]),yield e.syncWalletConnectAccount(),yield Lh.w.initializeIfEnabled()});return function(){return t.apply(this,arguments)}}(),connectExternal:function(){var t=(0,r.Z)(function*(t){const n=yield e.onConnectExternal(t);return yield e.connectInactiveNamespaces(t,n),n?{address:n.address}:void 0});return function(e){return t.apply(this,arguments)}}(),reconnectExternal:function(){var t=(0,r.Z)(function*({id:t,info:n,type:r,provider:s}){const o=i.R.state.activeChain,a=e.getAdapter(o);if(!o)throw new Error("reconnectExternal: namespace not found");if(!a)throw new Error("reconnectExternal: adapter not found");a?.reconnect&&(yield a?.reconnect({id:t,info:n,type:r,provider:s,chainId:e.getCaipNetwork()?.id}),oh.M.addConnectedNamespace(o),e.syncConnectedWalletInfo(o))});return function(e){return t.apply(this,arguments)}}(),disconnectConnector:function(){var t=(0,r.Z)(function*(t){yield e.disconnectConnector(t.namespace,t.id)});return function(e){return t.apply(this,arguments)}}(),disconnect:function(){var t=(0,r.Z)(function*(t){const{id:n,chainNamespace:a,initialDisconnect:c}=t||{},l=s.A.getConnectorId(a||i.R.state.activeChain),d=n===eh.b.CONNECTOR_ID.AUTH||l===eh.b.CONNECTOR_ID.AUTH,u=n===eh.b.CONNECTOR_ID.WALLET_CONNECT||l===eh.b.CONNECTOR_ID.WALLET_CONNECT;try{const t=Array.from(i.R.state.chains.keys());let l=a?[a]:t;(u||d)&&(l=t);const p=l.map(function(){var t=(0,r.Z)(function*(t){const r=s.A.getConnectorId(t),i=n||r,o=yield e.disconnectConnector(t,i);o&&(d&&oh.M.deleteConnectedSocialProvider(),o.connections.forEach(e=>{oh.M.addDisconnectedConnectorId(e.connectorId,t)})),c&&e.onDisconnectNamespace({chainNamespace:t,closeModal:!1})});return function(e){return t.apply(this,arguments)}}()),h=yield Promise.allSettled(p);Th.S.resetSend(),o.l.resetWcConnection(),Lh.w.getSIWX()?.signOutOnDisconnect&&(yield Lh.w.clearSessions()),s.A.setFilterByNamespace(void 0),o.l.syncStorageConnections();const f=h.filter(e=>"rejected"===e.status);if(f.length>0)throw new Error(f.map(e=>e.reason.message).join(", "));Uh.X.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:a||"all"}})}catch(p){throw new Error(`Failed to disconnect chains: ${p.message}`)}});return function(e){return t.apply(this,arguments)}}(),checkInstalled:e=>e?e.some(e=>Boolean(window.ethereum?.[String(e)])):Boolean(window.ethereum),signMessage:function(){var t=(0,r.Z)(function*(t){const n=i.R.state.activeChain,r=e.getAdapter(i.R.state.activeChain);if(!n)throw new Error("signMessage: namespace not found");if(!r)throw new Error("signMessage: adapter not found");const s=e.getAddress(n);if(!s)throw new Error("signMessage: address not found");return(yield r?.signMessage({message:t,address:s,provider:sh.O.getProvider(n)}))?.signature||""});return function(e){return t.apply(this,arguments)}}(),sendTransaction:function(){var t=(0,r.Z)(function*(t){const n=t.chainNamespace;if(!n)throw new Error("sendTransaction: namespace not found");if(Eh.bq.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=e.getAdapter(n);if(!r)throw new Error("sendTransaction: adapter not found");const s=sh.O.getProvider(n);return(yield r?.sendTransaction({...t,caipNetwork:e.getCaipNetwork(),provider:s}))?.hash||""}return""});return function(e){return t.apply(this,arguments)}}(),estimateGas:function(){var t=(0,r.Z)(function*(t){const n=t.chainNamespace;if(n===eh.b.CHAIN.EVM){const r=e.getAdapter(n);if(!r)throw new Error("estimateGas: adapter is required but got undefined");const s=sh.O.getProvider(n),i=e.getCaipNetwork();if(!i)throw new Error("estimateGas: caipNetwork is required but got undefined");return(yield r?.estimateGas({...t,provider:s,caipNetwork:i}))?.gas||0n}return 0n});return function(e){return t.apply(this,arguments)}}(),getEnsAvatar:function(){var t=(0,r.Z)(function*(){const t=i.R.state.activeChain;if(!t)throw new Error("getEnsAvatar: namespace is required but got undefined");const n=e.getAddress(t);if(!n)throw new Error("getEnsAvatar: address not found");return yield e.syncIdentity({address:n,chainId:Number(e.getCaipNetwork()?.id),chainNamespace:t}),i.R.getAccountData()?.profileImage||!1});return function(){return t.apply(this,arguments)}}(),getEnsAddress:function(){var e=(0,r.Z)(function*(e){return yield xh.resolveReownName(e)});return function(t){return e.apply(this,arguments)}}(),writeContract:function(){var t=(0,r.Z)(function*(t){const n=i.R.state.activeChain,r=e.getAdapter(n);if(!n)throw new Error("writeContract: namespace is required but got undefined");if(!r)throw new Error("writeContract: adapter is required but got undefined");const s=e.getCaipNetwork(),o=e.getCaipAddress(),a=sh.O.getProvider(n);if(!s||!o)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");return(yield r?.writeContract({...t,caipNetwork:s,provider:a,caipAddress:o}))?.hash});return function(e){return t.apply(this,arguments)}}(),writeSolanaTransaction:function(){var t=(0,r.Z)(function*(t){const n=i.R.state.activeChain,r=e.getAdapter(n);if(!n)throw new Error("writeContract: namespace is required but got undefined");if(!r)throw new Error("writeContract: adapter is required but got undefined");const s=e.getCaipNetwork(),o=e.getCaipAddress(),a=sh.O.getProvider(n);if(!s||!o)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");return(yield r?.writeSolanaTransaction({...t,caipNetwork:s,provider:a,caipAddress:o}))?.hash});return function(e){return t.apply(this,arguments)}}(),parseUnits:(e,t)=>{const n=this.getAdapter(i.R.state.activeChain);if(!n)throw new Error("parseUnits: adapter is required but got undefined");return n?.parseUnits({value:e,decimals:t})??0n},formatUnits:(e,t)=>{const n=this.getAdapter(i.R.state.activeChain);if(!n)throw new Error("formatUnits: adapter is required but got undefined");return n?.formatUnits({value:e,decimals:t})??"0"},getCapabilities:function(){var t=(0,r.Z)(function*(t){const n=e.getAdapter(i.R.state.activeChain);if(!n)throw new Error("getCapabilities: adapter is required but got undefined");return yield n?.getCapabilities(t)});return function(e){return t.apply(this,arguments)}}(),grantPermissions:function(){var t=(0,r.Z)(function*(t){const n=e.getAdapter(i.R.state.activeChain);if(!n)throw new Error("grantPermissions: adapter is required but got undefined");return yield n?.grantPermissions(t)});return function(e){return t.apply(this,arguments)}}(),revokePermissions:function(){var t=(0,r.Z)(function*(t){const n=e.getAdapter(i.R.state.activeChain);if(!n)throw new Error("revokePermissions: adapter is required but got undefined");return n?.revokePermissions?yield n.revokePermissions(t):"0x"});return function(e){return t.apply(this,arguments)}}(),walletGetAssets:function(){var t=(0,r.Z)(function*(t){const n=e.getAdapter(i.R.state.activeChain);if(!n)throw new Error("walletGetAssets: adapter is required but got undefined");return(yield n?.walletGetAssets(t))??{}});return function(e){return t.apply(this,arguments)}}(),updateBalance:e=>{const t=this.getAddress(e),n=this.getCaipNetwork(e);!n||!t||this.updateNativeBalance(t,n?.id,e)}},o.l.setClient(this.connectionControllerClient)}onConnectExternal(e){var t=this;return(0,r.Z)(function*(){const n=i.R.state.activeChain,r=e.chain||n,o=t.getAdapter(r);let a=!0;if(e.type===Kh.b.CONNECTOR_TYPE_AUTH&&eh.b.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(e=>s.A.getConnectorId(e)===eh.b.CONNECTOR_ID.AUTH)&&e.chain!==n&&(a=!1),e.chain&&e.chain!==n&&!e.caipNetwork){const n=t.getCaipNetworks().find(t=>t.chainNamespace===e.chain);n&&a&&t.setCaipNetwork(n)}if(!r)throw new Error("connectExternal: namespace not found");if(!o)throw new Error("connectExternal: adapter not found");const c=t.getCaipNetwork(r),l=e.caipNetwork||c,d=yield o.connect({id:e.id,address:e.address,info:e.info,type:e.type,provider:e.provider,socialUri:e.socialUri,chainId:e.caipNetwork?.id||c?.id,rpcUrl:e.caipNetwork?.rpcUrls?.default?.http?.[0]||c?.rpcUrls?.default?.http?.[0]});if(d)return oh.M.addConnectedNamespace(r),t.syncProvider({...d,chainNamespace:r}),t.setStatus("connected",r),t.syncConnectedWalletInfo(r),oh.M.removeDisconnectedConnectorId(e.id,r),{address:d.address,connectedCaipNetwork:l}})()}connectInactiveNamespaces(e,t){var n=this;return(0,r.Z)(function*(){const s=e.type===Kh.b.CONNECTOR_TYPE_AUTH,o=Vh.g.getOtherAuthNamespaces(t?.connectedCaipNetwork?.chainNamespace),a=i.R.state.activeCaipNetwork,c=n.getAdapter(a?.chainNamespace);s&&(yield Promise.all(o.map(function(){var t=(0,r.Z)(function*(t){try{const r=sh.O.getProvider(t),s=n.getCaipNetwork(t);(yield n.getAdapter(t)?.connect({...e,provider:r,socialUri:void 0,chainId:s?.id,rpcUrl:s?.rpcUrls?.default?.http?.[0]}))&&(oh.M.addConnectedNamespace(t),oh.M.removeDisconnectedConnectorId(e.id,t),n.setStatus("connected",t),n.syncConnectedWalletInfo(t))}catch(r){yh.B.warn(Zh.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.displayMessage,Zh.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.debugMessage(t,r instanceof Error?r.message:void 0),Zh.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.code)}});return function(e){return t.apply(this,arguments)}}())),a&&(yield c?.switchNetwork({caipNetwork:a})))})()}getApprovedCaipNetworksData(){if(sh.O.getProviderId(i.R.state.activeChain)===Kh.b.CONNECTOR_TYPE_WALLET_CONNECT){const e=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:"MetaMask Wallet"===this.universalProvider?.session?.peer?.metadata.name,approvedCaipNetworkIds:this.getChainsFromNamespaces(e)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}switchCaipNetwork(e){var t=this;return(0,r.Z)(function*(){const n=e.chainNamespace;if(t.getAddressByChainNamespace(e.chainNamespace)){const r=sh.O.getProviderId(n);if(e.chainNamespace===i.R.state.activeChain)yield t.getAdapter(n)?.switchNetwork({caipNetwork:e});else if(t.setCaipNetwork(e),r===Kh.b.CONNECTOR_TYPE_WALLET_CONNECT)t.syncWalletConnectAccount();else{const r=t.getAddressByChainNamespace(n);r&&t.syncAccount({address:r,chainId:e.id,chainNamespace:n})}}else t.setCaipNetwork(e)})()}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(e=>{const t=e.chains||[],n=e.accounts.map(e=>{const{chainId:t,chainNamespace:n}=th.u.parseCaipAddress(e);return`${n}:${t}`});return Array.from(new Set([...t,...n]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((t,n)=>{const r=e?.find(e=>e.namespace===n);return r?(r.construct({namespace:n,projectId:this.options?.projectId,networks:this.caipNetworks?.filter(({chainNamespace:e})=>e===n)}),t[n]=r):t[n]=new ef({namespace:n,networks:this.getCaipNetworks()}),t},{})}initChainAdapter(e){var t=this;return(0,r.Z)(function*(){t.onConnectors(e),t.listenAdapter(e);const n=t.getAdapter(e);if(!n)throw new Error("adapter not found");yield n.syncConnectors(),yield t.createUniversalProviderForAdapter(e)})()}initChainAdapters(){var e=this;return(0,r.Z)(function*(){yield Promise.all(e.chainNamespaces.map(function(){var t=(0,r.Z)(function*(t){yield e.initChainAdapter(t)});return function(e){return t.apply(this,arguments)}}())),e.initAdapterController()})()}onConnectors(e){this.getAdapter(e)?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const t=this.getAdapter(e);if(!t)return;const n=oh.M.getConnectionStatus();!1===c.h.state.enableReconnect?this.setStatus("disconnected",e):"connected"===n?this.setStatus("connecting",e):"disconnected"===n?(oh.M.clearAddressCache(),this.setStatus(n,e)):this.setStatus(n,e),t.on("switchNetwork",({address:t,chainId:n})=>{const r=this.getCaipNetworks().find(e=>e.id.toString()===n.toString()||e.caipNetworkId.toString()===n.toString()),s=i.R.state.activeChain===e,o=i.R.state.chains.get(e)?.accountState?.address;if(r){const n=s&&t?t:o;n&&this.syncAccount({address:n,chainId:r.id,chainNamespace:e})}else this.setUnsupportedNetwork(n)}),t.on("disconnect",()=>{const t=this.remoteFeatures.multiWallet,n=Array.from(o.l.state.connections.values()).flat();this.onDisconnectNamespace({chainNamespace:e,closeModal:!t||0===n.length})}),t.on("connections",t=>{this.setConnections(t,e)}),t.on("pendingTransactions",()=>{const t=this.getAddress(e),n=i.R.state.activeCaipNetwork;!t||!n?.id||this.updateNativeBalance(t,n.id,n.chainNamespace)}),t.on("accountChanged",({address:t,chainId:n,connector:r})=>{this.handlePreviousConnectorConnection(r);const s=i.R.state.activeChain===e;r?.provider&&(this.syncProvider({id:r.id,type:r.type,provider:r?.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e));const o=i.R.getNetworkData(e)?.caipNetwork?.id,a=n||o;s&&a?this.syncAccount({address:t,chainId:a,chainNamespace:e}):!s&&a?(this.syncAccountInfo(t,a,e),this.syncBalance({address:t,chainId:a,chainNamespace:e})):this.syncAccountInfo(t,n,e),oh.M.addConnectedNamespace(e)})}handlePreviousConnectorConnection(e){return(0,r.Z)(function*(){const t=e?.chain,n=e?.id,r=s.A.getConnectorId(t),i=t&&n&&r&&r!==n&&!c.h.state.remoteFeatures.multiWallet;try{i&&(yield o.l.disconnect({id:r,namespace:t}))}catch(a){console.warn("Error disconnecting previous connector",a)}})()}createUniversalProviderForAdapter(e){var t=this;return(0,r.Z)(function*(){yield t.getUniversalProvider(),t.universalProvider&&(yield t.chainAdapters?.[e]?.setUniversalProvider?.(t.universalProvider))})()}syncExistingConnection(){var e=this;return(0,r.Z)(function*(){yield Promise.allSettled(e.chainNamespaces.map(t=>e.syncNamespaceConnection(t)))})()}unSyncExistingConnection(){var e=this;return(0,r.Z)(function*(){try{yield Promise.allSettled(e.chainNamespaces.map(e=>o.l.disconnect({namespace:e,initialDisconnect:!0})))}catch(t){console.error("Error disconnecting existing connections:",t)}})()}reconnectWalletConnect(){var e=this;return(0,r.Z)(function*(){yield e.syncWalletConnectAccount();const t=e.getAddress();e.getCaipAddress()||oh.M.deleteRecentWallet();const n=oh.M.getRecentWallet();Uh.X.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:t,properties:{method:a.j.isMobile()?"mobile":"qrcode",name:n?.name||"Unknown",reconnect:!0,view:ph.P.state.view,walletRank:n?.order}})})()}syncNamespaceConnection(e){var t=this;return(0,r.Z)(function*(){try{e===eh.b.CHAIN.EVM&&a.j.isSafeApp()&&s.A.setConnectorId(eh.b.CONNECTOR_ID.SAFE,e);const n=s.A.getConnectorId(e);switch(t.setStatus("connecting",e),n){case eh.b.CONNECTOR_ID.WALLET_CONNECT:yield t.reconnectWalletConnect();break;case eh.b.CONNECTOR_ID.AUTH:break;default:yield t.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),t.setStatus("disconnected",e)}})()}onDisconnectNamespace(e){const{chainNamespace:t,closeModal:n}=e||{};i.R.resetAccount(t),i.R.resetNetwork(t),oh.M.removeConnectedNamespace(t);const r=Array.from(i.R.state.chains.keys());(t?[t]:r).forEach(e=>oh.M.addDisconnectedConnectorId(s.A.getConnectorId(e)||"",e)),s.A.removeConnectorId(t),sh.O.resetChain(t),this.setUser(null,t),this.setStatus("disconnected",t),this.setConnectedWalletInfo(null,t),!1!==n&&Sh.I.close()}syncAdapterConnections(){var e=this;return(0,r.Z)(function*(){yield Promise.allSettled(e.chainNamespaces.map(t=>{const n=e.getAdapter(t),r=e.getCaipAddress(t),s=e.getCaipNetwork(t);return n?.syncConnections({connectToFirstConnector:!r,caipNetwork:s})}))})()}syncAdapterConnection(e){var t=this;return(0,r.Z)(function*(){const n=t.getAdapter(e),r=t.getCaipNetwork(e),i=s.A.getConnectorId(e),o=s.A.getConnectors(e).find(e=>e.id===i);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!r?.id)throw new Error("CaipNetwork not found");const s=yield n?.syncConnection({namespace:e,id:o.id,chainId:r.id,rpcUrl:r?.rpcUrls?.default?.http?.[0]});s?(t.syncProvider({...s,chainNamespace:e}),yield t.syncAccount({...s,chainNamespace:e}),t.setStatus("connected",e),Uh.X.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:s.address,properties:{method:"browser",name:o.info?.name||o.name||"Unknown",reconnect:!0,view:ph.P.state.view,walletRank:o?.explorerWallet?.order}})):t.setStatus("disconnected",e)}catch{t.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}})()}syncWalletConnectAccount(){var e=this;return(0,r.Z)(function*(){const t=Object.keys(e.universalProvider?.session?.namespaces||{}),n=e.chainNamespaces.map(function(){var n=(0,r.Z)(function*(n){const r=e.getAdapter(n);if(!r)return;const o=e.universalProvider?.session?.namespaces?.[n]?.accounts||[],a=i.R.state.activeCaipNetwork.id,c=o.find(e=>{const{chainId:t}=th.u.parseCaipAddress(e);return t===a?.toString()})||o[0];if(c){const t=th.u.validateCaipAddress(c),{chainId:o,address:a}=th.u.parseCaipAddress(t);if(sh.O.setProviderId(n,Kh.b.CONNECTOR_TYPE_WALLET_CONNECT),e.caipNetworks&&i.R.state.activeCaipNetwork&&r.namespace!==eh.b.CHAIN.EVM){const t=r.getWalletConnectProvider({caipNetworks:e.getCaipNetworks(),provider:e.universalProvider,activeCaipNetwork:i.R.state.activeCaipNetwork});sh.O.setProvider(n,t)}else sh.O.setProvider(n,e.universalProvider);s.A.setConnectorId(eh.b.CONNECTOR_ID.WALLET_CONNECT,n),oh.M.addConnectedNamespace(n),yield e.syncAccount({address:a,chainId:o,chainNamespace:n})}else t.includes(n)&&e.setStatus("disconnected",n);const l=e.getApprovedCaipNetworksData();e.syncConnectedWalletInfo(n),i.R.setApprovedCaipNetworksData(n,{approvedCaipNetworkIds:l.approvedCaipNetworkIds,supportsAllNetworks:l.supportsAllNetworks})});return function(e){return n.apply(this,arguments)}}());yield Promise.all(n)})()}syncProvider({type:e,provider:t,id:n,chainNamespace:r}){sh.O.setProviderId(r,e),sh.O.setProvider(r,t),s.A.setConnectorId(n,r)}syncAccount(e){var t=this;return(0,r.Z)(function*(){const n=e.chainNamespace===i.R.state.activeChain,r=i.R.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:o,chainNamespace:a}=e,{chainId:l}=oh.M.getActiveNetworkProps(),d=r?.id||l,u=i.R.state.activeCaipNetwork.name===eh.b.UNSUPPORTED_NETWORK_NAME,p=i.R.getNetworkProp("supportsAllNetworks",a);if(t.setStatus("connected",a),(!u||p)&&d){let e=t.getCaipNetworks().find(e=>e.id.toString()===d.toString()),l=t.getCaipNetworks().find(e=>e.chainNamespace===a);if(!p&&!e&&!l){const n=t.getApprovedCaipNetworkIds()||[],r=n.find(e=>th.u.parseCaipNetworkId(e)?.chainId===d.toString()),s=n.find(e=>th.u.parseCaipNetworkId(e)?.chainNamespace===a);e=t.getCaipNetworks().find(e=>e.caipNetworkId===r),l=t.getCaipNetworks().find(e=>e.caipNetworkId===s||"deprecatedCaipNetworkId"in e&&e.deprecatedCaipNetworkId===s)}const u=e||l;u?.chainNamespace===i.R.state.activeChain?c.h.state.enableNetworkSwitch&&!c.h.state.allowUnsupportedChain&&i.R.state.activeCaipNetwork.name===eh.b.UNSUPPORTED_NETWORK_NAME?i.R.showUnsupportedChainUI():t.setCaipNetwork(u):n||r&&t.setCaipNetworkOfNamespace(r,a),t.syncConnectedWalletInfo(a);const h=t.getAddress(a);Vh.g.isLowerCaseMatch(s,h)||t.syncAccountInfo(s,u?.id,a),n?yield t.syncBalance({address:s,chainId:u?.id,chainNamespace:a}):yield t.syncBalance({address:s,chainId:r?.id,chainNamespace:a}),t.syncIdentity({address:s,chainId:o,chainNamespace:a})}})()}syncAccountInfo(e,t,n){var s=this;return(0,r.Z)(function*(){const r=s.getCaipAddress(n),i=t||r?.split(":")[1];i&&(s.setCaipAddress(`${n}:${i}:${e}`,n,!0),yield s.syncIdentity({address:e,chainId:i,chainNamespace:n}))})()}syncReownName(e,t){var n=this;return(0,r.Z)(function*(){try{const r=yield n.getReownName(e);n.setProfileName(r[0]?r[0].name:null,t)}catch{n.setProfileName(null,t)}})()}syncConnectedWalletInfo(e){const t=s.A.getConnectorId(e),n=sh.O.getProviderId(e);if(n===Kh.b.CONNECTOR_TYPE_ANNOUNCED||n===Kh.b.CONNECTOR_TYPE_INJECTED){if(t){const n=this.getConnectors().find(e=>{const n=e.id===t,r=e.info?.rdns===t,s=e.connectors?.some(e=>e.id===t||e.info?.rdns===t);return n||r||Boolean(s)});if(n){const{info:t,name:r,imageUrl:s}=n,i=s||this.getConnectorImage(n);this.setConnectedWalletInfo({name:r,icon:i,...t},e)}}}else if(n===Kh.b.CONNECTOR_TYPE_WALLET_CONNECT){const t=sh.O.getProvider(e);t?.session&&this.setConnectedWalletInfo({...t.session.peer.metadata,name:t.session.peer.metadata.name,icon:t.session.peer.metadata.icons?.[0]},e)}else if(t&&(t===eh.b.CONNECTOR_ID.COINBASE_SDK||t===eh.b.CONNECTOR_ID.COINBASE)){const n=this.getConnectors().find(e=>e.id===t),r=n?.name||"Coinbase Wallet",s=n?.imageUrl||this.getConnectorImage(n),i=n?.info;this.setConnectedWalletInfo({...i,name:r,icon:s},e)}}syncBalance(e){var t=this;return(0,r.Z)(function*(){!nh.p.getNetworksByNamespace(t.getCaipNetworks(),e.chainNamespace).find(t=>t.id.toString()===e.chainId?.toString())||!e.chainId||(yield t.updateNativeBalance(e.address,e.chainId,e.chainNamespace))})()}ready(){var e=this;return(0,r.Z)(function*(){yield e.readyPromise})()}updateNativeBalance(e,t,n){var s=this;return(0,r.Z)(function*(){const r=s.getAdapter(n),o=i.R.getCaipNetworkByNamespace(n,t);if(r){const i=yield r.getBalance({address:e,chainId:t,caipNetwork:o,tokens:s.options.tokens});return s.setBalance(i.balance,i.symbol,n),i}})()}initializeUniversalAdapter(){var e=this;return(0,r.Z)(function*(){const t=zh.createLogger((t,...n)=>{t&&e.handleAlertError(t),console.error(...n)}),n={projectId:e.options?.projectId,metadata:{name:e.options?.metadata?e.options?.metadata.name:"",description:e.options?.metadata?e.options?.metadata.description:"",url:e.options?.metadata?e.options?.metadata.url:"",icons:e.options?.metadata?e.options?.metadata.icons:[""]},logger:t};c.h.setManualWCControl(Boolean(e.options?.manualWCControl)),e.universalProvider=e.options.universalProvider??(yield Qp.init(n));const s=e.universalProvider.disconnect.bind(e.universalProvider);e.universalProvider.disconnect=(0,r.Z)(function*(){try{return yield s()}catch(e){if(e instanceof Error&&e.message.includes("Missing or invalid. Record was recently deleted"))return;throw e}}),!1===c.h.state.enableReconnect&&e.universalProvider.session&&(yield e.universalProvider.disconnect()),e.listenWalletConnect()})()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{xh.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:e=>{o.l.setUri(e)},onConnect:e=>{const{address:t}=a.j.getAccount(e[0]);for(const n of this.chainNamespaces)oh.M.removeDisconnectedConnectorId(eh.b.CONNECTOR_ID.WALLET_CONNECT,n);o.l.finalizeWcConnection(t)},onDisconnect:()=>{i.R.state.noAdapters&&this.resetAccount(e),o.l.resetWcConnection()},onChainChanged:t=>{const n=i.R.state.activeChain;if(n===e&&(i.R.state.noAdapters||n&&s.A.state.activeConnectorIds[n]===eh.b.CONNECTOR_ID.WALLET_CONNECT)){const e=this.getCaipNetworks().find(e=>e.id.toString()===t.toString()||e.caipNetworkId.toString()===t.toString()),n=this.getCaipNetwork();if(!e)return void this.setUnsupportedNetwork(t);n?.id.toString()!==e?.id.toString()&&n?.chainNamespace===e?.chainNamespace&&this.setCaipNetwork(e)}},onAccountsChanged:t=>{const n=i.R.state.activeChain;if(n===e&&(i.R.state.noAdapters||n&&s.A.state.activeConnectorIds[n]===eh.b.CONNECTOR_ID.WALLET_CONNECT)){const e=t?.[0];e&&this.syncAccount({address:e.address,chainId:e.chainId,chainNamespace:e.chainNamespace})}}})})}createUniversalProvider(){return!this.universalProviderInitPromise&&a.j.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}getUniversalProvider(){var e=this;return(0,r.Z)(function*(){if(!e.universalProvider)try{yield e.createUniversalProvider()}catch(t){Uh.X.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:t instanceof Error?t.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",t)}return e.universalProvider})()}getDisabledCaipNetworks(){const e=i.R.getAllApprovedCaipNetworkIds(),t=i.R.getAllRequestedCaipNetworks();return a.j.sortRequestedNetworks(e,t).filter(e=>i.R.isCaipNetworkDisabled(e))}handleAlertError(e){const t=Object.entries(Zh.UniversalProviderErrors).find(([,{message:t}])=>e.message.includes(t)),[n,r]=t??[],{message:s,alertErrorKey:i}=r??{};if(n&&s&&!this.reportedAlertErrors[n]){const e=Zh.ALERT_ERRORS[i];e&&(yh.B.open(e,"error"),this.reportedAlertErrors[n]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;const t=e.namespace;if(!t)return;this.createClients();const n=e;n.namespace=t,n.construct({namespace:t,projectId:this.options?.projectId,networks:this.caipNetworks?.filter(({chainNamespace:e})=>e===t)}),this.chainNamespaces.includes(t)||this.chainNamespaces.push(t),this.chainAdapters&&(this.chainAdapters[t]=n)}open(e){var t=this;return(0,r.Z)(function*(){yield t.injectModalUi(),e?.uri&&o.l.setUri(e.uri);const{isSwap:n,isSend:r}=t.toModalOptions();return n(e)?Sh.I.open({...e,data:{swap:e.arguments}}):r(e)&&e.arguments?t.openSend(e.arguments):Sh.I.open(e)})()}close(){var e=this;return(0,r.Z)(function*(){yield e.injectModalUi(),Sh.I.close()})()}setLoading(e,t){Sh.I.setLoading(e,t)}disconnect(e){return(0,r.Z)(function*(){yield o.l.disconnect({namespace:e})})()}getSIWX(){return c.h.state.siwx}getError(){return""}getChainId(){return i.R.state.activeCaipNetwork.id}switchNetwork(e,{throwOnFailure:t=!1}={}){var n=this;return(0,r.Z)(function*(){const r=n.getCaipNetworks().find(t=>t.id===e.id);r?yield i.R.switchActiveNetwork(r,{throwOnFailure:t}):yh.B.open(Zh.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error")})()}getWalletProvider(){return i.R.state.activeChain?sh.O.state.providers[i.R.state.activeChain]:null}getWalletProviderType(){return sh.O.getProviderId(i.R.state.activeChain)}subscribeProviders(e){return sh.O.subscribeProviders(e)}getThemeMode(){return Dh.u.state.themeMode}getThemeVariables(){return Dh.u.state.themeVariables}setThemeMode(e){Dh.u.setThemeMode(e),(0,Fh.Hs)(Dh.u.state.themeMode)}setTermsConditionsUrl(e){c.h.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){c.h.setPrivacyPolicyUrl(e)}setThemeVariables(e){Dh.u.setThemeVariables(e),(0,Fh.R)(Dh.u.state.themeVariables)}subscribeTheme(e){return Dh.u.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?o.l.subscribe(e):(yh.B.open(eh.b.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){return e?i.R.state.chains.get(e)?.accountState?.connectedWalletInfo:i.R.getAccountData()?.connectedWalletInfo}getAccount(e){const t=e||i.R.state.activeChain,n=s.A.getAuthConnector(t),r=i.R.getAccountData(t),c=oh.M.getConnectedConnectorId(i.R.state.activeChain),l=o.l.getConnections(t);if(!t)throw new Error("AppKit:getAccount - namespace is required");const d=l.flatMap(e=>e.accounts.map(({address:e,type:n,publicKey:r})=>a.j.createAccount(t,e,n||"eoa",r)));if(r)return{allAccounts:d,caipAddress:r.caipAddress,address:a.j.getPlainAddress(r.caipAddress),isConnected:Boolean(r.caipAddress),status:r.status,embeddedWalletInfo:n&&c===eh.b.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:oh.M.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(0,ih.r9)(t),isSmartAccountDeployed:Boolean(r.smartAccountDeployed)}:void 0}}subscribeAccount(e,t){const n=[],r=()=>{const n=this.getAccount(t);!n||e(n)};if(t){const e=i.R.subscribeChainProp("accountState",r,t);n.push(e)}else{const e=i.R.subscribe(r);n.push(e)}const o=s.A.subscribe(r);return n.push(o),()=>{n.forEach(e=>e())}}subscribeNetwork(e){return i.R.subscribe(({activeCaipNetwork:t})=>{e({caipNetwork:t,chainId:t?.id,caipNetworkId:t?.caipNetworkId})})}subscribeWalletInfo(e,t){return t?i.R.subscribeChainProp("accountState",t=>e(t?.connectedWalletInfo),t):i.R.subscribeChainProp("accountState",t=>e(t?.connectedWalletInfo))}subscribeShouldUpdateToAddress(e){return i.R.subscribeChainProp("accountState",t=>e(t?.shouldUpdateToAddress))}subscribeCaipNetworkChange(e){return i.R.subscribeKey("activeCaipNetwork",e)}getState(){return Bh.I.state}getRemoteFeatures(){return c.h.state.remoteFeatures}subscribeState(e){return Bh.I.subscribe(e)}subscribeRemoteFeatures(e){return c.h.subscribeKey("remoteFeatures",e)}showErrorMessage(e){$h.K.showError(e)}showSuccessMessage(e){$h.K.showSuccess(e)}getEvent(){return{...Uh.X.state}}subscribeEvents(e){return Uh.X.subscribe(e)}replace(e){ph.P.replace(e)}redirect(e){ph.P.push(e)}popTransactionStack(e){ph.P.popTransactionStack(e)}isOpen(){return Sh.I.state.open}isTransactionStackEmpty(){return 0===ph.P.state.transactionStack.length}static getInstance(){return this.instance}updateFeatures(e){c.h.setFeatures(e)}updateRemoteFeatures(e){c.h.setRemoteFeatures(e)}updateOptions(e){const t={...c.h.state||{},...e};c.h.setOptions(t)}setConnectMethodsOrder(e){c.h.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){c.h.setWalletFeaturesOrder(e)}setCollapseWallets(e){c.h.setCollapseWallets(e)}setSocialsOrder(e){c.h.setSocialsOrder(e)}getConnectMethodsOrder(){return jh.J.getConnectOrderMethod(c.h.state.features,s.A.getConnectors())}addNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const n=this.extendCaipNetwork(t,this.options);this.getCaipNetworks().find(e=>e.id===n.id)||i.R.addNetwork(n)}removeNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);!this.getCaipNetworks().find(e=>e.id===t)||i.R.removeNetwork(e,t)}}{open(e){var t=()=>super.open,n=this;return(0,r.Z)(function*(){s.A.isConnected()||(yield t().call(n,e))})()}close(){var e=()=>super.close,t=this;return(0,r.Z)(function*(){if(yield e().call(t),t.options.manualWCControl){const e=i.R.getAccountData(t.activeChainNamespace)?.address;o.l.finalizeWcConnection(e)}})()}syncIdentity(e){return(0,r.Z)(function*(){return Promise.resolve()})()}syncBalance(e){return(0,r.Z)(function*(){return Promise.resolve()})()}injectModalUi(){return(0,r.Z)(function*(){if(!sf&&a.j.isClient()){if(yield Promise.all([n.e(4998),n.e(8961)]).then(n.bind(n,98961)),yield Promise.all([n.e(4998),n.e(6597)]).then(n.bind(n,26597)),!document.querySelector("w3m-modal")){const e=document.createElement("w3m-modal");!c.h.state.disableAppend&&!c.h.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",e)}sf=!0}})()}}function af(e){return new of({...e,basic:!0,sdkVersion:"html-core-1.8.17-wc-circular-dependencies-fix.0"})}},27458:function(e,t,n){"use strict";n.d(t,{Al:function(){return W},dy:function(){return N},cV:function(){return _},Jb:function(){return S},Ld:function(){return T},sY:function(){return q},YP:function(){return I}});const r=globalThis,s=r.trustedTypes,i=s?s.createPolicy("lit-html",{createHTML:e=>e}):void 0,o="$lit$",a=`lit$${Math.random().toFixed(9).slice(2)}$`,c="?"+a,l=`<${c}>`,d=document,u=()=>d.createComment(""),p=e=>null===e||"object"!=typeof e&&"function"!=typeof e,h=Array.isArray,f=e=>h(e)||"function"==typeof e?.[Symbol.iterator],g="[ \t\n\f\r]",m=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,y=/-->/g,b=/>/g,w=RegExp(`>|${g}(?:([^\\s"'>=/]+)(${g}*=${g}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),v=/'/g,E=/"/g,C=/^(?:script|style|textarea|title)$/i,A=e=>(t,...n)=>({_$litType$:e,strings:t,values:n}),N=A(1),I=A(2),_=A(3),S=Symbol.for("lit-noChange"),T=Symbol.for("lit-nothing"),R=new WeakMap,O=d.createTreeWalker(d,129);function P(e,t){if(!h(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==i?i.createHTML(t):t}const k=(e,t)=>{const n=e.length-1,r=[];let s,i=2===t?"<svg>":3===t?"<math>":"",c=m;for(let d=0;d<n;d++){const t=e[d];let n,u,p=-1,h=0;for(;h<t.length&&(c.lastIndex=h,u=c.exec(t),null!==u);)h=c.lastIndex,c===m?"!--"===u[1]?c=y:void 0!==u[1]?c=b:void 0!==u[2]?(C.test(u[2])&&(s=RegExp("</"+u[2],"g")),c=w):void 0!==u[3]&&(c=w):c===w?">"===u[0]?(c=s??m,p=-1):void 0===u[1]?p=-2:(p=c.lastIndex-u[2].length,n=u[1],c=void 0===u[3]?w:'"'===u[3]?E:v):c===E||c===v?c=w:c===y||c===b?c=m:(c=w,s=void 0);const f=c===w&&e[d+1].startsWith("/>")?" ":"";i+=c===m?t+l:p>=0?(r.push(n),t.slice(0,p)+o+t.slice(p)+a+f):t+a+(-2===p?d:f)}return[P(e,i+(e[n]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),r]};class x{constructor({strings:e,_$litType$:t},n){let r;this.parts=[];let i=0,l=0;const d=e.length-1,p=this.parts,[h,f]=k(e,t);if(this.el=x.createElement(h,n),O.currentNode=this.el.content,2===t||3===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(r=O.nextNode())&&p.length<d;){if(1===r.nodeType){if(r.hasAttributes())for(const e of r.getAttributeNames())if(e.endsWith(o)){const t=f[l++],n=r.getAttribute(e).split(a),s=/([.?@])?(.*)/.exec(t);p.push({type:1,index:i,name:s[2],strings:n,ctor:"."===s[1]?B:"?"===s[1]?$:"@"===s[1]?j:L}),r.removeAttribute(e)}else e.startsWith(a)&&(p.push({type:6,index:i}),r.removeAttribute(e));if(C.test(r.tagName)){const e=r.textContent.split(a),t=e.length-1;if(t>0){r.textContent=s?s.emptyScript:"";for(let n=0;n<t;n++)r.append(e[n],u()),O.nextNode(),p.push({type:2,index:++i});r.append(e[t],u())}}}else if(8===r.nodeType)if(r.data===c)p.push({type:2,index:i});else{let e=-1;for(;-1!==(e=r.data.indexOf(a,e+1));)p.push({type:7,index:i}),e+=a.length-1}i++}}static createElement(e,t){const n=d.createElement("template");return n.innerHTML=e,n}}function U(e,t,n=e,r){if(t===S)return t;let s=void 0!==r?n._$Co?.[r]:n._$Cl;const i=p(t)?void 0:t._$litDirective$;return s?.constructor!==i&&(s?._$AO?.(!1),void 0===i?s=void 0:(s=new i(e),s._$AT(e,n,r)),void 0!==r?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),void 0!==s&&(t=U(e,s._$AS(e,t.values),s,r)),t}class M{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:n}=this._$AD,r=(e?.creationScope??d).importNode(t,!0);O.currentNode=r;let s=O.nextNode(),i=0,o=0,a=n[0];for(;void 0!==a;){if(i===a.index){let t;2===a.type?t=new D(s,s.nextSibling,this,e):1===a.type?t=new a.ctor(s,a.name,a.strings,this,e):6===a.type&&(t=new F(s,this,e)),this._$AV.push(t),a=n[++o]}i!==a?.index&&(s=O.nextNode(),i++)}return O.currentNode=d,r}p(e){let t=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class D{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,n,r){this.type=2,this._$AH=T,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=r,this._$Cv=r?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=U(this,e,t),p(e)?e===T||null==e||""===e?(this._$AH!==T&&this._$AR(),this._$AH=T):e!==this._$AH&&e!==S&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):f(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==T&&p(this._$AH)?this._$AA.nextSibling.data=e:this.T(d.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:n}=e,r="number"==typeof n?this._$AC(e):(void 0===n.el&&(n.el=x.createElement(P(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===r)this._$AH.p(t);else{const e=new M(r,this),n=e.u(this.options);e.p(t),this.T(n),this._$AH=e}}_$AC(e){let t=R.get(e.strings);return void 0===t&&R.set(e.strings,t=new x(e)),t}k(e){h(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,r=0;for(const s of e)r===t.length?t.push(n=new D(this.O(u()),this.O(u()),this,this.options)):n=t[r],n._$AI(s),r++;r<t.length&&(this._$AR(n&&n._$AB.nextSibling,r),t.length=r)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}class L{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,n,r,s){this.type=1,this._$AH=T,this._$AN=void 0,this.element=e,this.name=t,this._$AM=r,this.options=s,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=T}_$AI(e,t=this,n,r){const s=this.strings;let i=!1;if(void 0===s)e=U(this,e,t,0),i=!p(e)||e!==this._$AH&&e!==S,i&&(this._$AH=e);else{const r=e;let o,a;for(e=s[0],o=0;o<s.length-1;o++)a=U(this,r[n+o],t,o),a===S&&(a=this._$AH[o]),i||(i=!p(a)||a!==this._$AH[o]),a===T?e=T:e!==T&&(e+=(a??"")+s[o+1]),this._$AH[o]=a}i&&!r&&this.j(e)}j(e){e===T?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class B extends L{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===T?void 0:e}}class $ extends L{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==T)}}class j extends L{constructor(e,t,n,r,s){super(e,t,n,r,s),this.type=5}_$AI(e,t=this){if((e=U(this,e,t,0)??T)===S)return;const n=this._$AH,r=e===T&&n!==T||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,s=e!==T&&(n===T||r);r&&this.element.removeEventListener(this.name,this,n),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class F{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){U(this,e)}}const W={M:o,P:a,A:c,C:1,L:k,R:M,D:f,V:U,I:D,H:L,N:$,U:j,B,F};r.litHtmlPolyfillSupport?.(x,D),(r.litHtmlVersions??(r.litHtmlVersions=[])).push("3.3.2");const q=(e,t,n)=>{const r=n?.renderBefore??t;let s=r._$litPart$;if(void 0===s){const e=n?.renderBefore??null;r._$litPart$=s=new D(t.insertBefore(u(),e),e,void 0,n??{})}return s._$AI(e),s}},14350:function(e,t,n){"use strict";n.d(t,{oi:function(){return o},iv:function(){return r.iv},dy:function(){return s.dy},YP:function(){return s.YP},$m:function(){return r.$m}});var r=n(3239),s=n(27458);const i=globalThis;class o extends r.fl{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e;const t=super.createRenderRoot();return(e=this.renderOptions).renderBefore??(e.renderBefore=t.firstChild),t}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=(0,s.sY)(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return s.Jb}}o._$litElement$=!0,o.finalized=!0,i.litElementHydrateSupport?.({LitElement:o}),i.litElementPolyfillSupport?.({LitElement:o}),(i.litElementVersions??(i.litElementVersions=[])).push("4.2.2")},47188:function(e,t,n){"use strict";n.d(t,{q:function(){return h}});var r=n(8239),s=n(99226),i=n(66422),o=n(51757),a=n(74654);const c=new(n(96885).k)(8192);var l=n(89929),d=n(90734);function u(e,t={}){return function(){var n=(0,r.Z)(function*(n,u={}){const{dedupe:p=!1,methods:h,retryDelay:f=150,retryCount:g=3,uid:m}={...t,...u},{method:y}=n;if(h?.exclude?.includes(y))throw new o.gS(new Error("method not supported"),{method:y});if(h?.include&&!h.include.includes(y))throw new o.gS(new Error("method not supported"),{method:y});return function(e,{enabled:t=!0,id:n}){if(!t||!n)return e();if(c.get(n))return c.get(n);const r=e().finally(()=>c.delete(n));return c.set(n,r),r}(()=>(0,l.J)((0,r.Z)(function*(){try{return yield e(n)}catch(t){const e=t;switch(e.code){case o.s7.code:throw new o.s7(e);case o.B.code:throw new o.B(e);case o.LX.code:throw new o.LX(e,{method:n.method});case o.nY.code:throw new o.nY(e);case o.XS.code:throw new o.XS(e);case o.yR.code:throw new o.yR(e);case o.Og.code:throw new o.Og(e);case o.pT.code:throw new o.pT(e);case o.KB.code:throw new o.KB(e);case o.gS.code:throw new o.gS(e,{method:n.method});case o.Pv.code:throw new o.Pv(e);case o.GD.code:throw new o.GD(e);case o.ab.code:throw new o.ab(e);case o.PE.code:throw new o.PE(e);case o.Ts.code:throw new o.Ts(e);case o.u5.code:throw new o.u5(e);case o.I0.code:throw new o.I0(e);case o.x3.code:throw new o.x3(e);case o.vl.code:throw new o.vl(e);case o.Uu.code:throw new o.Uu(e);case o.Nt.code:throw new o.Nt(e);case o.EJ.code:throw new o.EJ(e);case o.fl.code:throw new o.fl(e);case o.NO.code:throw new o.NO(e);case o.r0.code:throw new o.r0(e);case 5e3:throw new o.ab(e);case o.UF.code:throw new o.UF(e);default:throw t instanceof s.G?t:new o.ir(e)}}}),{delay:({count:e,error:t})=>{if(t&&t instanceof i.Gg){const e=t?.headers?.get("Retry-After");if(e?.match(/\d/))return 1e3*Number.parseInt(e,10)}return~~(1<<e)*f},retryCount:g,shouldRetry:({error:e})=>function(e){return"code"in e&&"number"==typeof e.code?-1===e.code||e.code===o.Pv.code||e.code===o.XS.code:!(e instanceof i.Gg&&e.status)||403===e.status||408===e.status||413===e.status||429===e.status||500===e.status||502===e.status||503===e.status||504===e.status}(e)}),{enabled:p,id:p?(0,a.$G)(`${m}.${(0,d.P)(n)}`):void 0})});return function(e){return n.apply(this,arguments)}}()}var p=n(35116);function h({key:e,methods:t,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){return{config:{key:e,methods:t,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:u(r,{methods:t,retryCount:s,retryDelay:i,uid:(0,p.h)()}),value:c}}},33984:function(e,t,n){"use strict";n.d(t,{tv:function(){return c},Mu:function(){return l}});var r=n(8239),s=n(8231),i=n(51757),o=n(461),a=n(47188);function c(e,t={}){const{key:n="fallback",name:s="Fallback",rank:i=!1,shouldThrow:c=l,retryCount:d,retryDelay:u}=t;return({chain:t,pollingInterval:l=4e3,timeout:p,...h})=>{let f=e,g=()=>{};const m=(0,a.q)({key:n,name:s,request:({method:e,params:n})=>(0,r.Z)(function*(){let s;const i=function(){var o=(0,r.Z)(function*(r=0){const o=f[r]({...h,chain:t,retryCount:0,timeout:p});try{const t=yield o.request({method:e,params:n});return g({method:e,params:n,response:t,transport:o,status:"success"}),t}catch(a){if(g({error:a,method:e,params:n,transport:o,status:"error"}),c(a)||r===f.length-1||(s??(s=f.slice(r+1).some(n=>{const{include:r,exclude:s}=n({chain:t}).config.methods||{};return r?r.includes(e):!s||!s.includes(e)})),!s))throw a;return i(r+1)}});return function(){return o.apply(this,arguments)}}();return i()})(),retryCount:d,retryDelay:u,type:"fallback"},{onResponse:e=>g=e,transports:f.map(e=>e({chain:t,retryCount:0}))});if(i){const e="object"==typeof i?i:{};!function({chain:e,interval:t=4e3,onTransports:n,ping:s,sampleCount:i=10,timeout:a=1e3,transports:c,weights:l={}}){const{stability:d=.7,latency:u=.3}=l,p=[],h=function(){var l=(0,r.Z)(function*(){const l=yield Promise.all(c.map(function(){var t=(0,r.Z)(function*(t){const n=t({chain:e,retryCount:0,timeout:a}),r=Date.now();let i,o;try{yield s?s({transport:n}):n.request({method:"net_listening"}),o=1}catch{o=0}finally{i=Date.now()}return{latency:i-r,success:o}});return function(e){return t.apply(this,arguments)}}()));p.push(l),p.length>i&&p.shift();const f=Math.max(...p.map(e=>Math.max(...e.map(({latency:e})=>e)))),g=c.map((e,t)=>{const n=p.map(e=>e[t].latency),r=1-n.reduce((e,t)=>e+t,0)/n.length/f,s=p.map(e=>e[t].success),i=s.reduce((e,t)=>e+t,0)/s.length;return 0===i?[0,t]:[u*r+d*i,t]}).sort((e,t)=>t[0]-e[0]);n(g.map(([,e])=>c[e])),yield(0,o.D)(t),h()});return function(){return l.apply(this,arguments)}}();h()}({chain:t,interval:e.interval??l,onTransports:e=>f=e,ping:e.ping,sampleCount:e.sampleCount,timeout:e.timeout,transports:f,weights:e.weights})}return m}}function l(e){return!(!("code"in e)||"number"!=typeof e.code||e.code!==i.KB.code&&e.code!==i.ab.code&&e.code!==i.UF.code&&!s.M_.nodeMessage.test(e.message)&&5e3!==e.code)}},60168:function(e,t,n){"use strict";n.d(t,{d:function(){return l}});var r=n(8239),s=n(66422),i=n(71640),o=n(93614),a=n(29842),c=n(47188);function l(e,t={}){const{batch:n,fetchFn:l,fetchOptions:d,key:u="http",methods:p,name:h="HTTP JSON-RPC",onFetchRequest:f,onFetchResponse:g,retryDelay:m,raw:y}=t;return({chain:b,retryCount:w,timeout:v})=>{const{batchSize:E=1e3,wait:C=0}="object"==typeof n?n:{},A=t.retryCount??w,N=v??t.timeout??1e4,I=e||b?.rpcUrls.default.http[0];if(!I)throw new i.I;const _=(0,a.x)(I,{fetchFn:l,fetchOptions:d,onRequest:f,onResponse:g,timeout:N});return(0,c.q)({key:u,methods:p,name:h,request:({method:e,params:t})=>(0,r.Z)(function*(){const i={method:e,params:t},{schedule:a}=(0,o.S)({id:I,wait:C,shouldSplitBatch:e=>e.length>E,fn:e=>_.request({body:e}),sort:(e,t)=>e.id-t.id}),c=function(){var e=(0,r.Z)(function*(e){return n?a(e):[yield _.request({body:e})]});return function(t){return e.apply(this,arguments)}}(),[{error:l,result:d}]=yield c(i);if(y)return{error:l,result:d};if(l)throw new s.bs({body:i,error:l,url:I});return d})(),retryCount:A,retryDelay:m,timeout:N,type:"http"},{fetchOptions:d,url:I})}}},62282:function(e,t,n){"use strict";n.d(t,{F8:function(){return r},Yi:function(){return s},k3:function(){return o},du:function(){return a},nZ:function(){return c},X$:function(){return l},_A:function(){return d},MR:function(){return u},Wo:function(){return p},Pm:function(){return h},H8:function(){return f},Hr:function(){return g},EN:function(){return m}});const r=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{name:"addr",type:"address"}],name:"getEthBalance",outputs:[{name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"}],s=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],i=[{inputs:[{name:"dns",type:"bytes"}],name:"DNSDecodingFailed",type:"error"},{inputs:[{name:"ens",type:"string"}],name:"DNSEncodingFailed",type:"error"},{inputs:[],name:"EmptyAddress",type:"error"},{inputs:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"HttpError",type:"error"},{inputs:[],name:"InvalidBatchGatewayResponse",type:"error"},{inputs:[{name:"errorData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{name:"name",type:"bytes"},{name:"resolver",type:"address"}],name:"ResolverNotContract",type:"error"},{inputs:[{name:"name",type:"bytes"}],name:"ResolverNotFound",type:"error"},{inputs:[{name:"primary",type:"string"},{name:"primaryAddress",type:"bytes"}],name:"ReverseAddressMismatch",type:"error"},{inputs:[{internalType:"bytes4",name:"selector",type:"bytes4"}],name:"UnsupportedResolverProfile",type:"error"}],o=[...i,{name:"resolveWithGateways",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],a=[...i,{name:"reverseWithGateways",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"uint256",name:"coinType"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolver"},{type:"address",name:"reverseResolver"}]}],c=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],l=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],d=[{name:"isValidSignature",type:"function",stateMutability:"view",inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],outputs:[{name:"",type:"bytes4"}]}],u=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],p=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],h=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"bytes32"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"bytes32"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],f=[{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC1155InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC1155InvalidApprover",type:"error"},{inputs:[{internalType:"uint256",name:"idsLength",type:"uint256"},{internalType:"uint256",name:"valuesLength",type:"uint256"}],name:"ERC1155InvalidArrayLength",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"ERC1155InvalidOperator",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC1155InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC1155InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"ERC1155MissingApprovalForAll",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],g=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}]},{type:"event",name:"ApprovalForAll",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"operator",type:"address"},{indexed:!1,name:"approved",type:"bool"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}]},{type:"function",name:"approve",stateMutability:"payable",inputs:[{name:"spender",type:"address"},{name:"tokenId",type:"uint256"}],outputs:[]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"getApproved",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{type:"address"}]},{type:"function",name:"isApprovedForAll",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"operator",type:"address"}],outputs:[{type:"bool"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"ownerOf",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"owner",type:"address"}]},{type:"function",name:"safeTransferFrom",stateMutability:"payable",inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],outputs:[]},{type:"function",name:"safeTransferFrom",stateMutability:"nonpayable",inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"id",type:"uint256"},{name:"data",type:"bytes"}],outputs:[]},{type:"function",name:"setApprovalForAll",stateMutability:"nonpayable",inputs:[{name:"operator",type:"address"},{name:"approved",type:"bool"}],outputs:[]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"tokenByIndex",stateMutability:"view",inputs:[{name:"index",type:"uint256"}],outputs:[{type:"uint256"}]},{type:"function",name:"tokenByIndex",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"index",type:"uint256"}],outputs:[{name:"tokenId",type:"uint256"}]},{type:"function",name:"tokenURI",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transferFrom",stateMutability:"payable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"tokenId",type:"uint256"}],outputs:[]}],m=[{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"receiver",type:"address"},{indexed:!1,name:"assets",type:"uint256"},{indexed:!1,name:"shares",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"receiver",type:"address"},{indexed:!0,name:"owner",type:"address"},{indexed:!1,name:"assets",type:"uint256"},{indexed:!1,name:"shares",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],name:"approve",outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"asset",outputs:[{name:"assetTokenAddress",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"}],name:"convertToAssets",outputs:[{name:"assets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"assets",type:"uint256"}],name:"convertToShares",outputs:[{name:"shares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"assets",type:"uint256"},{name:"receiver",type:"address"}],name:"deposit",outputs:[{name:"shares",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"caller",type:"address"}],name:"maxDeposit",outputs:[{name:"maxAssets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"caller",type:"address"}],name:"maxMint",outputs:[{name:"maxShares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"address"}],name:"maxRedeem",outputs:[{name:"maxShares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"address"}],name:"maxWithdraw",outputs:[{name:"maxAssets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"},{name:"receiver",type:"address"}],name:"mint",outputs:[{name:"assets",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"assets",type:"uint256"}],name:"previewDeposit",outputs:[{name:"shares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"}],name:"previewMint",outputs:[{name:"assets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"}],name:"previewRedeem",outputs:[{name:"assets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"assets",type:"uint256"}],name:"previewWithdraw",outputs:[{name:"shares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"},{name:"receiver",type:"address"},{name:"owner",type:"address"}],name:"redeem",outputs:[{name:"assets",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"totalAssets",outputs:[{name:"totalManagedAssets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"to",type:"address"},{name:"amount",type:"uint256"}],name:"transfer",outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"assets",type:"uint256"},{name:"receiver",type:"address"},{name:"owner",type:"address"}],name:"withdraw",outputs:[{name:"shares",type:"uint256"}],stateMutability:"nonpayable",type:"function"}]},45085:function(e,t,n){"use strict";n.d(t,{ez:function(){return r},Zn:function(){return s},Bd:function(){return i}});const r={gwei:9,wei:18},s={ether:-9,wei:9},i={ether:-18,gwei:-9}},99226:function(e,t,n){"use strict";n.d(t,{G:function(){return o},M:function(){return i}});const r="2.46.3";let s={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,version:`viem@${r}`};function i(e){s=e}class o extends Error{constructor(e,t={}){const n=t.cause instanceof o?t.cause.details:t.cause?.message?t.cause.message:t.details,i=t.cause instanceof o&&t.cause.docsPath||t.docsPath,a=s.getDocsUrl?.({...t,docsPath:i});super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...a?[`Docs: ${a}`]:[],...n?[`Details: ${n}`]:[],...s.version?[`Version: ${s.version}`]:[]].join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=i,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=r}walk(e){return a(this,e)}}function a(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e&&void 0!==e.cause?a(e.cause,t):t?null:e}},48883:function(e,t,n){"use strict";n.d(t,{mV:function(){return s},$s:function(){return i},W_:function(){return o}});var r=n(99226);class s extends r.G{constructor({offset:e,position:t,size:n}){super(`Slice ${"start"===t?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${n}).`,{name:"SliceOffsetOutOfBoundsError"})}}class i extends r.G{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}class o extends r.G{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} is expected to be ${t} ${n} long, but is ${e} ${n} long.`,{name:"InvalidBytesLengthError"})}}},13997:function(e,t,n){"use strict";n.d(t,{J5:function(){return s},yr:function(){return i},Cd:function(){return o},P9:function(){return a},M6:function(){return c}});var r=n(99226);class s extends r.G{constructor({max:e,min:t,signed:n,size:r,value:s}){super(`Number "${s}" is not in safe ${r?`${8*r}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class i extends r.G{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class o extends r.G{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}class a extends r.G{constructor(e){super(`Hex value "${e}" is an odd length (${e.length}). It must be an even length.`,{name:"InvalidHexValueError"})}}class c extends r.G{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}},8231:function(e,t,n){"use strict";n.d(t,{M_:function(){return i},Hh:function(){return o},G$:function(){return a},ZI:function(){return c},vU:function(){return l},se:function(){return d},C_:function(){return u},WF:function(){return p},dR:function(){return h},pZ:function(){return f},cs:function(){return g},cj:function(){return m}});var r=n(24630),s=n(99226);class i extends s.G{constructor({cause:e,message:t}={}){const n=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(i,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(i,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted|gas required exceeds allowance/});class o extends s.G{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${(0,r.o)(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(o,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class a extends s.G{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${(0,r.o)(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(a,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class c extends s.G{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(c,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class l extends s.G{constructor({cause:e,nonce:t}={}){super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join("\n"),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(l,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class d extends s.G{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(d,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class u extends s.G{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join("\n"),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(u,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class p extends s.G{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(p,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class h extends s.G{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(h,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class f extends s.G{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(f,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class g extends s.G{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:n}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${(0,r.o)(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${n?` = ${(0,r.o)(n)} gwei`:""}).`].join("\n"),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(g,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class m extends s.G{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}},66422:function(e,t,n){"use strict";n.d(t,{Gg:function(){return o},c9:function(){return a},bs:function(){return c},Cc:function(){return l},W5:function(){return d}});var r=n(90734),s=n(99226),i=n(26672);class o extends s.G{constructor({body:e,cause:t,details:n,headers:s,status:o,url:a}){super("HTTP request failed.",{cause:t,details:n,metaMessages:[o&&`Status: ${o}`,`URL: ${(0,i.G)(a)}`,e&&`Request body: ${(0,r.P)(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=o,this.url=a}}class a extends s.G{constructor({body:e,cause:t,details:n,url:s}){super("WebSocket request failed.",{cause:t,details:n,metaMessages:[`URL: ${(0,i.G)(s)}`,e&&`Request body: ${(0,r.P)(e)}`].filter(Boolean),name:"WebSocketRequestError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=s}}class c extends s.G{constructor({body:e,error:t,url:n}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${(0,i.G)(n)}`,`Request body: ${(0,r.P)(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code,this.data=t.data,this.url=n}}class l extends s.G{constructor({url:e}={}){super("The socket has been closed.",{metaMessages:[e&&`URL: ${(0,i.G)(e)}`].filter(Boolean),name:"SocketClosedError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=e}}class d extends s.G{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${(0,i.G)(t)}`,`Request body: ${(0,r.P)(e)}`],name:"TimeoutError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=t}}},51757:function(e,t,n){"use strict";n.d(t,{lt:function(){return i},zZ:function(){return o},s7:function(){return a},B:function(){return c},LX:function(){return l},nY:function(){return d},XS:function(){return u},yR:function(){return p},Og:function(){return h},pT:function(){return f},KB:function(){return g},gS:function(){return m},Pv:function(){return y},GD:function(){return b},ab:function(){return w},PE:function(){return v},Ts:function(){return E},u5:function(){return C},I0:function(){return A},x3:function(){return N},vl:function(){return I},Uu:function(){return _},Nt:function(){return S},EJ:function(){return T},fl:function(){return R},NO:function(){return O},r0:function(){return P},UF:function(){return k},ir:function(){return x}});var r=n(99226),s=n(66422);class i extends r.G{constructor(e,{code:t,docsPath:n,metaMessages:r,name:i,shortMessage:o}){super(o,{cause:e,docsPath:n,metaMessages:r||e?.metaMessages,name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof s.bs?e.code:t??-1}}class o extends i{constructor(e,t){super(e,t),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class a extends i{constructor(e){super(e,{code:a.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(a,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class c extends i{constructor(e){super(e,{code:c.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(c,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class l extends i{constructor(e,{method:t}={}){super(e,{code:l.code,name:"MethodNotFoundRpcError",shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`})}}Object.defineProperty(l,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class d extends i{constructor(e){super(e,{code:d.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join("\n")})}}Object.defineProperty(d,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class u extends i{constructor(e){super(e,{code:u.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(u,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class p extends i{constructor(e){super(e,{code:p.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join("\n")})}}Object.defineProperty(p,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class h extends i{constructor(e){super(e,{code:h.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(h,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class f extends i{constructor(e){super(e,{code:f.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(f,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class g extends i{constructor(e){super(e,{code:g.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(g,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class m extends i{constructor(e,{method:t}={}){super(e,{code:m.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${t?` "${t}"`:""} is not supported.`})}}Object.defineProperty(m,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class y extends i{constructor(e){super(e,{code:y.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(y,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class b extends i{constructor(e){super(e,{code:b.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(b,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class w extends o{constructor(e){super(e,{code:w.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(w,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class v extends o{constructor(e){super(e,{code:v.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(v,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class E extends o{constructor(e,{method:t}={}){super(e,{code:E.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`})}}Object.defineProperty(E,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class C extends o{constructor(e){super(e,{code:C.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(C,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class A extends o{constructor(e){super(e,{code:A.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(A,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class N extends o{constructor(e){super(e,{code:N.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(N,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class I extends o{constructor(e){super(e,{code:I.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(I,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class _ extends o{constructor(e){super(e,{code:_.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(_,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class S extends o{constructor(e){super(e,{code:S.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(S,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class T extends o{constructor(e){super(e,{code:T.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(T,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class R extends o{constructor(e){super(e,{code:R.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(R,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class O extends o{constructor(e){super(e,{code:O.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(O,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class P extends o{constructor(e){super(e,{code:P.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(P,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class k extends o{constructor(e){super(e,{code:k.code,name:"WalletConnectSessionSettlementError",shortMessage:"WalletConnect session settlement failed."})}}Object.defineProperty(k,"code",{enumerable:!0,configurable:!0,writable:!0,value:7e3});class x extends i{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}},71640:function(e,t,n){"use strict";n.d(t,{I:function(){return s}});var r=n(99226);class s extends r.G{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}},26672:function(e,t,n){"use strict";n.d(t,{C:function(){return r},G:function(){return s}});const r=e=>e,s=e=>e},14443:function(e,t,n){"use strict";function r(e,{strict:t=!0}={}){return!(!e||"string"!=typeof e)&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x"))}n.d(t,{v:function(){return r}})},57606:function(e,t,n){"use strict";n.d(t,{vk:function(){return s},gc:function(){return i},i3:function(){return o}});var r=n(48883);function s(e,{dir:t,size:n=32}={}){return"string"==typeof e?i(e,{dir:t,size:n}):o(e,{dir:t,size:n})}function i(e,{dir:t,size:n=32}={}){if(null===n)return e;const s=e.replace("0x","");if(s.length>2*n)throw new r.$s({size:Math.ceil(s.length/2),targetSize:n,type:"hex"});return`0x${s["right"===t?"padEnd":"padStart"](2*n,"0")}`}function o(e,{dir:t,size:n=32}={}){if(null===n)return e;if(e.length>n)throw new r.$s({size:e.length,targetSize:n,type:"bytes"});const s=new Uint8Array(n);for(let r=0;r<n;r++){const i="right"===t;s[i?r:n-r-1]=e[i?r:e.length-r-1]}return s}},46380:function(e,t,n){"use strict";n.d(t,{d:function(){return s}});var r=n(14443);function s(e){return(0,r.v)(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}},68765:function(e,t,n){"use strict";function r(e,{dir:t="left"}={}){let n="string"==typeof e?e.replace("0x",""):e,r=0;for(let s=0;s<n.length-1&&"0"===n["left"===t?s:n.length-s-1].toString();s++)r++;return n="left"===t?n.slice(r):n.slice(0,n.length-r),"string"==typeof e?(1===n.length&&"right"===t&&(n=`${n}0`),`0x${n.length%2==1?`0${n}`:n}`):n}n.d(t,{f:function(){return r}})},45583:function(e,t,n){"use strict";n.d(t,{Yf:function(){return a},H_:function(){return c},y_:function(){return l},XA:function(){return d},ly:function(){return u},rR:function(){return p}});var r=n(13997),s=n(46380),i=n(68765),o=n(8256);function a(e,{size:t}){if((0,s.d)(e)>t)throw new r.M6({givenSize:(0,s.d)(e),maxSize:t})}function c(e,t){const n="string"==typeof t?{to:t}:t,r=n.to;return"number"===r?u(e,n):"bigint"===r?l(e,n):"string"===r?p(e,n):"boolean"===r?d(e,n):(0,o.nr)(e,n)}function l(e,t={}){const{signed:n}=t;t.size&&a(e,{size:t.size});const r=BigInt(e);if(!n)return r;const s=(e.length-2)/2;return r<=(1n<<8n*BigInt(s)-1n)-1n?r:r-BigInt(`0x${"f".padStart(2*s,"f")}`)-1n}function d(e,t={}){let n=e;if(t.size&&(a(n,{size:t.size}),n=(0,i.f)(n)),"0x00"===(0,i.f)(n))return!1;if("0x01"===(0,i.f)(n))return!0;throw new r.Cd(n)}function u(e,t={}){const n=l(e,t),s=Number(n);if(!Number.isSafeInteger(s))throw new r.J5({max:`${Number.MAX_SAFE_INTEGER}`,min:`${Number.MIN_SAFE_INTEGER}`,signed:t.signed,size:t.size,value:`${n}n`});return s}function p(e,t={}){let n=(0,o.nr)(e);return t.size&&(a(n,{size:t.size}),n=(0,i.f)(n,{dir:"right"})),(new TextDecoder).decode(n)}},8256:function(e,t,n){"use strict";n.d(t,{O0:function(){return l},Cu:function(){return d},nr:function(){return p},hL:function(){return h},qX:function(){return f}});var r=n(99226),s=n(14443),i=n(57606),o=n(45583),a=n(74654);const c=new TextEncoder;function l(e,t={}){return"number"==typeof e||"bigint"==typeof e?h(e,t):"boolean"==typeof e?d(e,t):(0,s.v)(e)?p(e,t):f(e,t)}function d(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),"number"==typeof t.size?((0,o.Yf)(n,{size:t.size}),(0,i.vk)(n,{size:t.size})):n}function u(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function p(e,t={}){let n=e;t.size&&((0,o.Yf)(n,{size:t.size}),n=(0,i.vk)(n,{dir:"right",size:t.size}));let s=n.slice(2);s.length%2&&(s=`0${s}`);const a=s.length/2,c=new Uint8Array(a);for(let i=0,o=0;i<a;i++){const e=u(s.charCodeAt(o++)),t=u(s.charCodeAt(o++));if(void 0===e||void 0===t)throw new r.G(`Invalid byte sequence ("${s[o-2]}${s[o-1]}" in "${s}").`);c[i]=16*e+t}return c}function h(e,t){return p((0,a.eC)(e,t))}function f(e,t={}){const n=c.encode(e);return"number"==typeof t.size?((0,o.Yf)(n,{size:t.size}),(0,i.vk)(n,{dir:"right",size:t.size})):n}},74654:function(e,t,n){"use strict";n.d(t,{NC:function(){return a},C4:function(){return c},ci:function(){return l},eC:function(){return d},$G:function(){return p}});var r=n(13997),s=n(57606),i=n(45583);const o=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function a(e,t={}){return"number"==typeof e||"bigint"==typeof e?d(e,t):"string"==typeof e?p(e,t):"boolean"==typeof e?c(e,t):l(e,t)}function c(e,t={}){const n=`0x${Number(e)}`;return"number"==typeof t.size?((0,i.Yf)(n,{size:t.size}),(0,s.vk)(n,{size:t.size})):n}function l(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=o[e[s]];const r=`0x${n}`;return"number"==typeof t.size?((0,i.Yf)(r,{size:t.size}),(0,s.vk)(r,{dir:"right",size:t.size})):r}function d(e,t={}){const{signed:n,size:i}=t,o=BigInt(e);let a;i?a=n?(1n<<8n*BigInt(i)-1n)-1n:2n**(8n*BigInt(i))-1n:"number"==typeof e&&(a=BigInt(Number.MAX_SAFE_INTEGER));const c="bigint"==typeof a&&n?-a-1n:0;if(a&&o>a||o<c){const t="bigint"==typeof e?"n":"";throw new r.J5({max:a?`${a}${t}`:void 0,min:`${c}${t}`,signed:n,size:i,value:`${e}${t}`})}const l=`0x${(n&&o<0?(1n<<BigInt(8*i))+BigInt(o):o).toString(16)}`;return i?(0,s.vk)(l,{size:i}):l}const u=new TextEncoder;function p(e,t={}){return l(u.encode(e),t)}},96885:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});class r extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const e=this.keys().next().value;e&&this.delete(e)}return this}}},93614:function(e,t,n){"use strict";n.d(t,{S:function(){return o}});var r=n(8239),s=n(14150);const i=new Map;function o({fn:e,id:t,shouldSplitBatch:n,wait:o=0,sort:a}){const c=function(){var t=(0,r.Z)(function*(){const t=d();l();const n=t.map(({args:e})=>e);0!==n.length&&e(n).then(e=>{a&&Array.isArray(e)&&e.sort(a);for(let n=0;n<t.length;n++){const{resolve:r}=t[n];r?.([e[n],e])}}).catch(e=>{for(let n=0;n<t.length;n++){const{reject:r}=t[n];r?.(e)}})});return function(){return t.apply(this,arguments)}}(),l=()=>i.delete(t),d=()=>i.get(t)||[],u=e=>i.set(t,[...d(),e]);return{flush:l,schedule:e=>(0,r.Z)(function*(){const{promise:t,resolve:r,reject:i}=(0,s.n)();return n?.([...d().map(({args:e})=>e),e])&&c(),d().length>0?(u({args:e,resolve:r,reject:i}),t):(u({args:e,resolve:r,reject:i}),setTimeout(c,o),t)})()}}},14150:function(e,t,n){"use strict";function r(){let e=()=>{},t=()=>{};return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}n.d(t,{n:function(){return r}})},89929:function(e,t,n){"use strict";n.d(t,{J:function(){return i}});var r=n(8239),s=n(461);function i(e,{delay:t=100,retryCount:n=2,shouldRetry:i=(()=>!0)}={}){return new Promise((o,a)=>{const c=function(){var l=(0,r.Z)(function*({count:l=0}={}){const d=function(){var e=(0,r.Z)(function*({error:e}){const n="function"==typeof t?t({count:l,error:e}):t;n&&(yield(0,s.D)(n)),c({count:l+1})});return function(t){return e.apply(this,arguments)}}();try{const t=yield e();o(t)}catch(u){if(l<n&&(yield i({count:l,error:u})))return d({error:u});a(u)}});return function(){return l.apply(this,arguments)}}();c()})}},2893:function(e,t,n){"use strict";n.d(t,{F:function(){return s}});var r=n(8239);function s(e,{errorInstance:t=new Error("timed out"),timeout:n,signal:s}){return new Promise((i,o)=>{(0,r.Z)(function*(){let r;try{const a=new AbortController;n>0&&(r=setTimeout(()=>{s?a.abort():o(t)},n)),i(yield e({signal:a?.signal||null}))}catch(a){"AbortError"===a?.name&&o(t),o(a)}finally{clearTimeout(r)}})()})}},29842:function(e,t,n){"use strict";n.d(t,{x:function(){return c}});var r=n(8239),s=n(66422),i=n(2893),o=n(90734),a=n(44300);function c(e,t={}){const{url:n,headers:c}=function(e){try{const t=new URL(e),n=(()=>{if(t.username){const e=`${decodeURIComponent(t.username)}:${decodeURIComponent(t.password)}`;return t.username="",t.password="",{url:t.toString(),headers:{Authorization:`Basic ${btoa(e)}`}}}})();return{url:t.toString(),...n}}catch{return{url:e}}}(e);return{request:e=>(0,r.Z)(function*(){const{body:l,fetchFn:d=t.fetchFn??fetch,onRequest:u=t.onRequest,onResponse:p=t.onResponse,timeout:h=t.timeout??1e4}=e,f={...t.fetchOptions??{},...e.fetchOptions??{}},{headers:g,method:m,signal:y}=f;try{const e=yield(0,i.F)(function(){var e=(0,r.Z)(function*({signal:e}){const t={...f,body:Array.isArray(l)?(0,o.P)(l.map(e=>({jsonrpc:"2.0",id:e.id??a.d.take(),...e}))):(0,o.P)({jsonrpc:"2.0",id:l.id??a.d.take(),...l}),headers:{...c,"Content-Type":"application/json",...g},method:m||"POST",signal:y||(h>0?e:null)},r=new Request(n,t),s=(yield u?.(r,t))??{...t,url:n};return yield d(s.url??n,s)});return function(t){return e.apply(this,arguments)}}(),{errorInstance:new s.W5({body:l,url:n}),timeout:h,signal:!0});let t;if(p&&(yield p(e)),e.headers.get("Content-Type")?.startsWith("application/json"))t=yield e.json();else{t=yield e.text();try{t=JSON.parse(t||"{}")}catch(b){if(e.ok)throw b;t={error:t}}}if(!e.ok)throw new s.Gg({body:l,details:(0,o.P)(t.error)||e.statusText,headers:e.headers,status:e.status,url:n});return t}catch(w){throw w instanceof s.Gg||w instanceof s.W5?w:new s.Gg({body:l,cause:w,url:n})}})()}}},44300:function(e,t,n){"use strict";function r(){return{current:0,take(){return this.current++},reset(){this.current=0}}}n.d(t,{d:function(){return s}});const s=r()},90734:function(e,t,n){"use strict";n.d(t,{P:function(){return r}});const r=(e,t,n)=>JSON.stringify(e,(e,n)=>{const r="bigint"==typeof n?n.toString():n;return"function"==typeof t?t(e,r):r},n)},35116:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});let r,s=256;function i(e=11){if(!r||s+e>512){r="",s=0;for(let e=0;e<256;e++)r+=(256+256*Math.random()|0).toString(16).substring(1)}return r.substring(s,s+++e)}},24630:function(e,t,n){"use strict";n.d(t,{o:function(){return i}});var r=n(45085),s=n(34063);function i(e,t="wei"){return(0,s.b)(e,r.Zn[t])}},34063:function(e,t,n){"use strict";function r(e,t){let n=e.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(t,"0");let[s,i]=[n.slice(0,n.length-t),n.slice(n.length-t)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}n.d(t,{b:function(){return r}})},461:function(e,t,n){"use strict";n.d(t,{D:function(){return s}});var r=n(8239);function s(e){return i.apply(this,arguments)}function i(){return(i=(0,r.Z)(function*(e){return new Promise(t=>setTimeout(t,e))})).apply(this,arguments)}},23250:function(e,t,n){"use strict";n.d(t,{sj:function(){return y},iH:function(){return v},CO:function(){return w},Ld:function(){return b},WX:function(){return E}}),Symbol();const r=Symbol(),s=Object.getPrototypeOf,i=new WeakMap,o=(e,t=!0)=>{i.set(e,t)},a=e=>"object"==typeof e&&null!==e,c=(e,t)=>{const n=u.get(e);if((null==n?void 0:n[0])===t)return n[1];const r=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return o(r,!0),u.set(e,[t,r]),Reflect.ownKeys(e).forEach(t=>{if(Object.getOwnPropertyDescriptor(r,t))return;const n=Reflect.get(e,t),{enumerable:s}=Reflect.getOwnPropertyDescriptor(e,t),i={value:n,enumerable:s,configurable:!0};if(d.has(n))o(n,!1);else if(l.has(n)){const[e,t]=l.get(n);i.value=c(e,t())}Object.defineProperty(r,t,i)}),Object.preventExtensions(r)},l=new WeakMap,d=new WeakSet,u=new WeakMap,p=[1],h=new WeakMap;let f=Object.is,g=c,m=(e,t,n,o)=>({deleteProperty(e,t){const r=Reflect.get(e,t);n(t);const s=Reflect.deleteProperty(e,t);return s&&o(["delete",[t],r]),s},set(c,u,p,g){const m=!e()&&Reflect.has(c,u),b=Reflect.get(c,u,g);if(m&&(f(b,p)||h.has(p)&&f(b,h.get(p))))return!0;n(u),a(p)&&(p=(e=>(e=>e&&(i.has(e)?i.get(e):s(e)===Object.prototype||s(e)===Array.prototype))(e)&&e[r]||null)(p)||p);const w=!l.has(p)&&(e=>a(e)&&!d.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer)&&!(e instanceof Promise))(p)?y(p):p;return t(u,w),Reflect.set(c,u,w,g),o(["set",[u],p,b]),!0}});function y(e={}){if(!a(e))throw new Error("object required");const t=h.get(e);if(t)return t;let n=p[0];const r=new Set,s=(e,t=++p[0])=>{n!==t&&(i=n=t,r.forEach(n=>n(e,t)))};let i=n;const o=e=>(t,n)=>{const r=[...t];r[1]=[e,...r[1]],s(r,n)},c=new Map;let u=!0;const f=m(()=>u,(e,t)=>{const n=!d.has(t)&&l.get(t);if(n){if(c.has(e))throw new Error("prop listener already exists");if(r.size){const t=n[2](o(e));c.set(e,[n,t])}else c.set(e,[n])}},e=>{var t;const n=c.get(e);n&&(c.delete(e),null==(t=n[1])||t.call(n))},s),g=((e,t)=>new Proxy(e,t))(e,f);return h.set(e,g),l.set(g,[e,(e=p[0])=>(i!==e&&(i=e,c.forEach(([t])=>{const r=t[1](e);r>n&&(n=r)})),n),e=>(r.add(e),1===r.size&&c.forEach(([e,t],n)=>{if(t)throw new Error("remove already exists");const r=e[2](o(n));c.set(n,[e,r])}),()=>{r.delete(e),0===r.size&&c.forEach(([e,t],n)=>{t&&(t(),c.set(n,[e]))})})]),Reflect.ownKeys(e).forEach(t=>{const n=Object.getOwnPropertyDescriptor(e,t);"value"in n&&n.writable&&(g[t]=e[t])}),u=!1,g}function b(e,t,n){const r=l.get(e);let s;!r&&console.warn("Please use proxy object");const i=[];let o=!1;const a=(0,r[2])(e=>{i.push(e),n?t(i.splice(0)):s||(s=Promise.resolve().then(()=>{s=void 0,o&&t(i.splice(0))}))});return o=!0,()=>{o=!1,a()}}function w(e){const t=l.get(e);!t&&console.warn("Please use proxy object");const[n,r]=t;return g(n,r())}function v(e){return d.add(e),e}function E(){return{proxyStateMap:l,refSet:d,snapCache:u,versionHolder:p,proxyCache:h}}},31254:function(e,t,n){"use strict";n.d(t,{Yr:function(){return c},VW:function(){return s}});var r=n(23250);function s(e,t,n,s){let i=e[t];return(0,r.Ld)(e,()=>{const r=e[t];Object.is(i,r)||n(i=r)},s)}Symbol();const{proxyStateMap:i,snapCache:o}=(0,r.WX)(),a=e=>i.has(e);function c(e){const t=[];let n=0;const s=new Map,i=new WeakMap,c=e=>i.get(e)||s;if(e){if("function"!=typeof e[Symbol.iterator])throw new TypeError("proxyMap:\n\tinitial state must be iterable\n\t\ttip: structure should be [[key, value]]");for(const[r,i]of e)s.set(r,n),t[n++]=i}const l={data:t,index:n,epoch:0,get size(){return a(this)||(()=>{const e=o.get(l),t=null==e?void 0:e[1];if(t&&!i.has(t)){const e=new Map(s);i.set(t,e)}})(),c(this).size},get(e){const t=c(this).get(e);if(void 0!==t)return this.data[t]},has(e){return c(this).has(e)},set(e,t){if(!a(this))throw new Error("Cannot perform mutations on a snapshot");const n=s.get(e);return void 0===n?(s.set(e,this.index),this.data[this.index++]=t):this.data[n]=t,this.epoch++,this},delete(e){if(!a(this))throw new Error("Cannot perform mutations on a snapshot");const t=s.get(e);return void 0!==t&&(delete this.data[t],s.delete(e),this.epoch++,!0)},clear(){if(!a(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,s.clear()},forEach(e){c(this).forEach((t,n)=>{e(this.data[t],n,this)})},*entries(){const e=c(this);for(const[t,n]of e)yield[t,this.data[n]]},*keys(){const e=c(this);for(const t of e.keys())yield t},*values(){const e=c(this);for(const t of e.values())yield this.data[t]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},d=(0,r.sj)(l);return Object.defineProperties(d,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(d),d}(0,r.WX)()}}]);